- description: Try to add a POST rest endpoint with default argument
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: create_rest_endpoint
    args:
      url: with_default_arg
      name: with_default_arg
      methods:
        - POST
      definition:
        query:
          collection_name: test_collection
          query_name: query_with_default_arg


- description: Call openapi json endpoint
  url: /api/swagger/json
  method: GET
  status: 200
  query:
  response:
    openapi: 3.0.0
    info:
      version: ''
      title: Rest Endpoints
      description: These OpenAPI specifications are automatically generated by Hasura.
    paths:
      /api/rest/with_default_arg:
        post:
          summary: with_default_arg
          description: >-
            ***

            The GraphQl query for this endpoint is:

            ``` graphql

            query ($first_name:String="Foo") { test_table(where: {first_name: { _eq:
            $first_name } }) { first_name last_name } }

            ```
          responses: {}
          parameters:
            - schema:
                type: string
              in: header
              name: x-hasura-admin-secret
              description: >-
                Your x-hasura-admin-secret will be used for authentication of the API
                request.
            - schema:
                default: Foo
                type: string
              in: query
              name: first_name
    components: {}

- description: Try to remove the endpoint
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: drop_rest_endpoint
    args:
      name: with_default_arg
