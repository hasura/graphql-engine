<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.RQL.DDL.Action</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateAction"><span class="hs-identifier">CreateAction</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runCreateAction"><span class="hs-identifier">runCreateAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#resolveAction"><span class="hs-identifier">resolveAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#UpdateAction"><span class="hs-identifier">UpdateAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runUpdateAction"><span class="hs-identifier">runUpdateAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropAction"><span class="hs-identifier">DropAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runDropAction"><span class="hs-identifier">runDropAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#dropActionInMetadata"><span class="hs-identifier">dropActionInMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier">CreateActionPermission</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runCreateActionPermission"><span class="hs-identifier">runCreateActionPermission</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropActionPermission"><span class="hs-identifier">DropActionPermission</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runDropActionPermission"><span class="hs-identifier">runDropActionPermission</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#dropActionPermissionInMetadata"><span class="hs-identifier">dropActionPermissionInMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#caName"><span class="hs-identifier">caName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#caDefinition"><span class="hs-identifier">caDefinition</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#caComment"><span class="hs-identifier">caComment</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#uaName"><span class="hs-identifier">uaName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#uaDefinition"><span class="hs-identifier">uaDefinition</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#uaComment"><span class="hs-identifier">uaComment</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">makeLenses</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.~)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.TH</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Environment.html"><span class="hs-identifier">Data.Environment</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Env</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict.InsOrd</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OMap</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEList</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.URL.Template.html"><span class="hs-identifier">Data.URL.Template</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.URL.Template.html#printURLTemplate"><span class="hs-identifier">printURLTemplate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.EncJSON.html"><span class="hs-identifier">Hasura.EncJSON</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Metadata.Class.html"><span class="hs-identifier">Hasura.Metadata.Class</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.4.20220919/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html"><span class="hs-identifier">Hasura.RQL.DDL.CustomTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#lookupBackendScalar"><span class="hs-identifier">lookupBackendScalar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html"><span class="hs-identifier">Hasura.RQL.Types.Action</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html"><span class="hs-identifier">Hasura.RQL.Types.CustomTypes</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html"><span class="hs-identifier">Hasura.RQL.Types.Metadata</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.Object.html"><span class="hs-identifier">Hasura.RQL.Types.Metadata.Object</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache.Build</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html"><span class="hs-identifier">Hasura.RQL.Types.Source</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.SQL.BackendMap.html"><span class="hs-identifier">Hasura.SQL.BackendMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.SQL.BackendMap.html#BackendMap"><span class="hs-identifier">BackendMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Session.html"><span class="hs-identifier">Hasura.Session</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.4.20220919/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span id="local-6989586621690420351"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#getActionInfo"><span class="hs-identifier hs-type">getActionInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Base.Error.html#QErrM"><span class="hs-identifier hs-type">QErrM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420351"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#CacheRM"><span class="hs-identifier hs-type">CacheRM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420351"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="#local-6989586621690420351"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionInfo"><span class="hs-identifier hs-type">ActionInfo</span></a></span></span><span>
</span><span id="line-56"></span><span id="getActionInfo"><span class="annot"><span class="annottext">getActionInfo :: forall (m :: * -&gt; *).
(QErrM m, CacheRM m) =&gt;
ActionName -&gt; m ActionInfo
</span><a href="Hasura.RQL.DDL.Action.html#getActionInfo"><span class="hs-identifier hs-var hs-var">getActionInfo</span></a></span></span><span> </span><span id="local-6989586621690420015"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690420015"><span class="hs-identifier hs-var">actionName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-57"></span><span>  </span><span id="local-6989586621690420014"><span class="annot"><span class="annottext">ActionCache
</span><a href="#local-6989586621690420014"><span class="hs-identifier hs-var">actionMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SchemaCache -&gt; ActionCache
</span><a href="Hasura.RQL.Types.SchemaCache.html#scActions"><span class="hs-identifier hs-var">scActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). CacheRM m =&gt; m SchemaCache
</span><a href="Hasura.RQL.Types.SchemaCache.html#askSchemaCache"><span class="hs-identifier hs-var">askSchemaCache</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.4.20220919/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690420015"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">ActionCache
</span><a href="#local-6989586621690420014"><span class="hs-identifier hs-var">actionMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#NotExists"><span class="hs-identifier hs-var">NotExists</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;action with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690420015"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not exist&quot;</span></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">data</span><span> </span><span id="CreateAction"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateAction"><span class="hs-identifier hs-var">CreateAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CreateAction"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateAction"><span class="hs-identifier hs-var">CreateAction</span></a></span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_caName"><span class="annot"><span class="annottext">CreateAction -&gt; ActionName
</span><a href="Hasura.RQL.DDL.Action.html#_caName"><span class="hs-identifier hs-var hs-var">_caName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span id="_caDefinition"><span class="annot"><span class="annottext">CreateAction -&gt; ActionDefinitionInput
</span><a href="Hasura.RQL.DDL.Action.html#_caDefinition"><span class="hs-identifier hs-var hs-var">_caDefinition</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionDefinitionInput"><span class="hs-identifier hs-type">ActionDefinitionInput</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span id="_caComment"><span class="annot"><span class="annottext">CreateAction -&gt; Maybe Text
</span><a href="Hasura.RQL.DDL.Action.html#_caComment"><span class="hs-identifier hs-var hs-var">_caComment</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-special">$</span><span id="caComment"><span id="caDefinition"><span id="caName"><span class="hs-special">(</span><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">CreateAction</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-special">$</span><span id="local-6989586621690419919"><span id="local-6989586621690419921"><span id="local-6989586621690419935"><span id="local-6989586621690419956"><span id="local-6989586621690419958"><span id="local-6989586621690419979"><span class="hs-special">(</span><span class="hs-identifier">J.deriveJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">CreateAction</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span id="local-6989586621690420275"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runCreateAction"><span class="hs-identifier hs-type">runCreateAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Base.Error.html#QErrM"><span class="hs-identifier hs-type">QErrM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420275"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#CacheRWM"><span class="hs-identifier hs-type">CacheRWM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420275"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataM"><span class="hs-identifier hs-type">MetadataM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420275"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateAction"><span class="hs-identifier hs-type">CreateAction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="#local-6989586621690420275"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span></span><span>
</span><span id="line-75"></span><span id="runCreateAction"><span class="annot"><span class="annottext">runCreateAction :: forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
CreateAction -&gt; m EncJSON
</span><a href="Hasura.RQL.DDL.Action.html#runCreateAction"><span class="hs-identifier hs-var hs-var">runCreateAction</span></a></span></span><span> </span><span id="local-6989586621690419854"><span class="annot"><span class="annottext">CreateAction
</span><a href="#local-6989586621690419854"><span class="hs-identifier hs-var">createAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-comment">-- check if action with same name exists already</span><span>
</span><span id="line-77"></span><span>  </span><span id="local-6989586621690419853"><span class="annot"><span class="annottext">ActionCache
</span><a href="#local-6989586621690419853"><span class="hs-identifier hs-var">actionMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SchemaCache -&gt; ActionCache
</span><a href="Hasura.RQL.Types.SchemaCache.html#scActions"><span class="hs-identifier hs-var">scActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). CacheRM m =&gt; m SchemaCache
</span><a href="Hasura.RQL.Types.SchemaCache.html#askSchemaCache"><span class="hs-identifier hs-var">askSchemaCache</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">for_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419851"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">ActionCache
</span><a href="#local-6989586621690419853"><span class="hs-identifier hs-var">actionMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-80"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#AlreadyExists"><span class="hs-identifier hs-var">AlreadyExists</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;action with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419851"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; already exists&quot;</span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690419848"><span class="annot"><span class="annottext">metadata :: ActionMetadata
</span><a href="#local-6989586621690419848"><span class="hs-identifier hs-var hs-var">metadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>        </span><span class="annot"><span class="annottext">ActionName
-&gt; Maybe Text
-&gt; ActionDefinitionInput
-&gt; [ActionPermissionMetadata]
-&gt; ActionMetadata
</span><a href="Hasura.RQL.Types.Action.html#ActionMetadata"><span class="hs-identifier hs-var">ActionMetadata</span></a></span><span>
</span><span id="line-84"></span><span>          </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419851"><span class="hs-identifier hs-var">actionName</span></a></span><span>
</span><span id="line-85"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CreateAction -&gt; Maybe Text
</span><a href="Hasura.RQL.DDL.Action.html#_caComment"><span class="hs-identifier hs-var">_caComment</span></a></span><span> </span><span class="annot"><span class="annottext">CreateAction
</span><a href="#local-6989586621690419854"><span class="hs-identifier hs-var">createAction</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CreateAction -&gt; ActionDefinitionInput
</span><a href="Hasura.RQL.DDL.Action.html#_caDefinition"><span class="hs-identifier hs-var">_caDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">CreateAction
</span><a href="#local-6989586621690419854"><span class="hs-identifier hs-var">createAction</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
MetadataObjId -&gt; MetadataModifier -&gt; m ()
</span><a href="Hasura.RQL.Types.SchemaCache.Build.html#buildSchemaCacheFor"><span class="hs-identifier hs-var">buildSchemaCacheFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionName -&gt; MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOAction"><span class="hs-identifier hs-var">MOAction</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419851"><span class="hs-identifier hs-var">actionName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><span class="annottext">(Metadata -&gt; Metadata) -&gt; MetadataModifier
</span><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-var">MetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-90"></span><span>      </span><span class="annot"><span class="annottext">Lens' Metadata Actions
</span><a href="Hasura.RQL.Types.Metadata.html#metaActions"><span class="hs-identifier hs-var">metaActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="annot"><span class="annottext">forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; InsOrdHashMap k v -&gt; InsOrdHashMap k v
</span><span class="hs-identifier hs-var">OMap.insert</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419851"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMetadata
</span><a href="#local-6989586621690419848"><span class="hs-identifier hs-var">metadata</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">EncJSON
</span><a href="Hasura.RQL.Types.Common.html#successMsg"><span class="hs-identifier hs-var">successMsg</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>    </span><span id="local-6989586621690419851"><span class="annot"><span class="annottext">actionName :: ActionName
</span><a href="#local-6989586621690419851"><span class="hs-identifier hs-var hs-var">actionName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CreateAction -&gt; ActionName
</span><a href="Hasura.RQL.DDL.Action.html#_caName"><span class="hs-identifier hs-var">_caName</span></a></span><span> </span><span class="annot"><span class="annottext">CreateAction
</span><a href="#local-6989586621690419854"><span class="hs-identifier hs-var">createAction</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">{- Note [Postgres scalars in action input arguments]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It's very comfortable to be able to reference Postgres scalars in actions
input arguments. For example, see the following action mutation:

    extend type mutation_root {
      create_user (
        name: String!
        created_at: timestamptz
      ): User
    }

The timestamptz is a Postgres scalar. We need to validate the presence of
timestamptz type in the Postgres database. So, the 'resolveAction' function
takes all Postgres scalar types as one of the inputs and returns the set of
referred scalars.
-}</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span id="local-6989586621690420249"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#resolveAction"><span class="hs-identifier hs-type">resolveAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Hasura.Base.Error.html#QErrM"><span class="hs-identifier hs-type">QErrM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420249"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="Data.Environment.html#Environment"><span class="hs-identifier hs-type">Env.Environment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedCustomTypes"><span class="hs-identifier hs-type">AnnotatedCustomTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionDefinitionInput"><span class="hs-identifier hs-type">ActionDefinitionInput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Hasura.SQL.BackendMap.html#BackendMap"><span class="hs-identifier hs-type">BackendMap</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#ScalarMap"><span class="hs-identifier hs-type">ScalarMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- See Note [Postgres scalars in custom types]</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="#local-6989586621690420249"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ResolvedActionDefinition"><span class="hs-identifier hs-type">ResolvedActionDefinition</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedOutputType"><span class="hs-identifier hs-type">AnnotatedOutputType</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">)</span></span><span>
</span><span id="line-123"></span><span id="resolveAction"><span class="annot"><span class="annottext">resolveAction :: forall (m :: * -&gt; *).
QErrM m =&gt;
Environment
-&gt; AnnotatedCustomTypes
-&gt; ActionDefinitionInput
-&gt; BackendMap ScalarMap
-&gt; m (ResolvedActionDefinition, AnnotatedOutputType)
</span><a href="Hasura.RQL.DDL.Action.html#resolveAction"><span class="hs-identifier hs-var hs-var">resolveAction</span></a></span></span><span> </span><span id="local-6989586621690419764"><span class="annot"><span class="annottext">Environment
</span><a href="#local-6989586621690419764"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedCustomTypes"><span class="hs-identifier hs-type">AnnotatedCustomTypes</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621690419761"><span id="local-6989586621690419762"><span class="annot"><span class="annottext">HashMap Name AnnotatedObjectType
HashMap Name AnnotatedInputType
_actObjectTypes :: AnnotatedCustomTypes -&gt; HashMap Name AnnotatedObjectType
_actInputTypes :: AnnotatedCustomTypes -&gt; HashMap Name AnnotatedInputType
_actObjectTypes :: HashMap Name AnnotatedObjectType
_actInputTypes :: HashMap Name AnnotatedInputType
</span><a href="Hasura.RQL.Types.CustomTypes.html#_actObjectTypes"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionDefinition"><span class="hs-identifier hs-type">ActionDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621690419749"><span id="local-6989586621690419750"><span id="local-6989586621690419751"><span id="local-6989586621690419752"><span id="local-6989586621690419753"><span id="local-6989586621690419754"><span id="local-6989586621690419755"><span id="local-6989586621690419756"><span id="local-6989586621690419757"><span class="annot"><span class="annottext">Bool
[HeaderConf]
[ArgumentDefinition GraphQLType]
Maybe MetadataResponseTransform
Maybe RequestTransform
Timeout
InputWebhook
GraphQLType
ActionType
_adResponseTransform :: forall arg webhook.
ActionDefinition arg webhook -&gt; Maybe MetadataResponseTransform
_adRequestTransform :: forall arg webhook.
ActionDefinition arg webhook -&gt; Maybe RequestTransform
_adHandler :: forall arg webhook. ActionDefinition arg webhook -&gt; webhook
_adTimeout :: forall arg webhook. ActionDefinition arg webhook -&gt; Timeout
_adForwardClientHeaders :: forall arg webhook. ActionDefinition arg webhook -&gt; Bool
_adHeaders :: forall arg webhook. ActionDefinition arg webhook -&gt; [HeaderConf]
_adType :: forall arg webhook. ActionDefinition arg webhook -&gt; ActionType
_adOutputType :: forall arg webhook. ActionDefinition arg webhook -&gt; GraphQLType
_adArguments :: forall arg webhook.
ActionDefinition arg webhook -&gt; [ArgumentDefinition arg]
_adResponseTransform :: Maybe MetadataResponseTransform
_adRequestTransform :: Maybe RequestTransform
_adHandler :: InputWebhook
_adTimeout :: Timeout
_adForwardClientHeaders :: Bool
_adHeaders :: [HeaderConf]
_adType :: ActionType
_adOutputType :: GraphQLType
_adArguments :: [ArgumentDefinition GraphQLType]
</span><a href="Hasura.RQL.Types.Action.html#_adResponseTransform"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621690419739"><span class="annot"><span class="annottext">BackendMap ScalarMap
</span><a href="#local-6989586621690419739"><span class="hs-identifier hs-var">allScalars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621690419738"><span class="annot"><span class="annottext">[ArgumentDefinition (GType, AnnotatedInputType)]
</span><a href="#local-6989586621690419738"><span class="hs-identifier hs-var">resolvedArguments</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">[ArgumentDefinition GraphQLType]
</span><a href="#local-6989586621690419757"><span class="hs-identifier hs-var">_adArguments</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621690419736"><span class="annot"><span class="annottext">ArgumentDefinition GraphQLType
</span><a href="#local-6989586621690419736"><span class="hs-identifier hs-var">argumentDefinition</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgumentDefinition GraphQLType
</span><a href="#local-6989586621690419736"><span class="hs-identifier hs-var">argumentDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621690419735"><span class="annot"><span class="annottext">GraphQLType
</span><a href="#local-6989586621690419735"><span class="hs-identifier hs-var">argumentType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-126"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690419734"><span class="annot"><span class="annottext">gType :: GType
</span><a href="#local-6989586621690419734"><span class="hs-identifier hs-var hs-var">gType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GraphQLType -&gt; GType
</span><a href="Hasura.RQL.Types.CustomTypes.html#unGraphQLType"><span class="hs-identifier hs-var">unGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLType
</span><a href="#local-6989586621690419735"><span class="hs-identifier hs-var">argumentType</span></a></span><span>
</span><span id="line-127"></span><span>          </span><span id="local-6989586621690419732"><span class="annot"><span class="annottext">argumentBaseType :: Name
</span><a href="#local-6989586621690419732"><span class="hs-identifier hs-var hs-var">argumentBaseType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.4.20220919/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.getBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621690419734"><span class="hs-identifier hs-var">gType</span></a></span><span>
</span><span id="line-128"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621690419734"><span class="hs-identifier hs-var">gType</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-keyword">if</span><span>
</span><span id="line-130"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621690419730"><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621690419730"><span class="hs-identifier hs-var">noCTScalar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BackendMap ScalarMap -&gt; Name -&gt; Maybe AnnotatedScalarType
</span><a href="Hasura.RQL.DDL.CustomTypes.html#lookupBackendScalar"><span class="hs-identifier hs-var">lookupBackendScalar</span></a></span><span> </span><span class="annot"><span class="annottext">BackendMap ScalarMap
</span><a href="#local-6989586621690419739"><span class="hs-identifier hs-var">allScalars</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621690419732"><span class="hs-identifier hs-var">argumentBaseType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-131"></span><span>              </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType -&gt; AnnotatedInputType
</span><a href="Hasura.RQL.Types.CustomTypes.html#NOCTScalar"><span class="hs-identifier hs-var">NOCTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621690419730"><span class="hs-identifier hs-var">noCTScalar</span></a></span><span>
</span><span id="line-132"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621690419728"><span class="annot"><span class="annottext">AnnotatedInputType
</span><a href="#local-6989586621690419728"><span class="hs-identifier hs-var">nonObjectType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621690419732"><span class="hs-identifier hs-var">argumentBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name AnnotatedInputType
</span><a href="#local-6989586621690419762"><span class="hs-identifier hs-var">_actInputTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-133"></span><span>              </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedInputType
</span><a href="#local-6989586621690419728"><span class="hs-identifier hs-var">nonObjectType</span></a></span><span>
</span><span id="line-134"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-135"></span><span>              </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#InvalidParams"><span class="hs-identifier hs-var">InvalidParams</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-136"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621690419732"><span class="hs-identifier hs-var">argumentBaseType</span></a></span><span>
</span><span id="line-137"></span><span>                  </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; is not defined in custom types or it is not a scalar/enum/input_object&quot;</span></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-comment">-- Check if the response type is an object</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690419725"><span class="annot"><span class="annottext">outputType :: GType
</span><a href="#local-6989586621690419725"><span class="hs-identifier hs-var hs-var">outputType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GraphQLType -&gt; GType
</span><a href="Hasura.RQL.Types.CustomTypes.html#unGraphQLType"><span class="hs-identifier hs-var">unGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLType
</span><a href="#local-6989586621690419756"><span class="hs-identifier hs-var">_adOutputType</span></a></span><span>
</span><span id="line-141"></span><span>      </span><span id="local-6989586621690419724"><span class="annot"><span class="annottext">outputBaseType :: Name
</span><a href="#local-6989586621690419724"><span class="hs-identifier hs-var hs-var">outputBaseType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.4.20220919/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.getBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621690419725"><span class="hs-identifier hs-var">outputType</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span id="local-6989586621690419723"><span class="annot"><span class="annottext">AnnotatedOutputType
</span><a href="#local-6989586621690419723"><span class="hs-identifier hs-var">outputObject</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621690419722"><span class="annot"><span class="annottext">AnnotatedOutputType
</span><a href="#local-6989586621690419722"><span class="hs-identifier hs-var">aot</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-144"></span><span>      </span><span class="hs-keyword">if</span><span>
</span><span id="line-145"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621690419721"><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621690419721"><span class="hs-identifier hs-var">aoTScalar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BackendMap ScalarMap -&gt; Name -&gt; Maybe AnnotatedScalarType
</span><a href="Hasura.RQL.DDL.CustomTypes.html#lookupBackendScalar"><span class="hs-identifier hs-var">lookupBackendScalar</span></a></span><span> </span><span class="annot"><span class="annottext">BackendMap ScalarMap
</span><a href="#local-6989586621690419739"><span class="hs-identifier hs-var">allScalars</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621690419724"><span class="hs-identifier hs-var">outputBaseType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-146"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType -&gt; AnnotatedOutputType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AOTScalar"><span class="hs-identifier hs-var">AOTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621690419721"><span class="hs-identifier hs-var">aoTScalar</span></a></span><span>
</span><span id="line-147"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621690419719"><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419719"><span class="hs-identifier hs-var">objectType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621690419724"><span class="hs-identifier hs-var">outputBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name AnnotatedObjectType
</span><a href="#local-6989586621690419761"><span class="hs-identifier hs-var">_actObjectTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-148"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectType -&gt; AnnotatedOutputType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AOTObject"><span class="hs-identifier hs-var">AOTObject</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419719"><span class="hs-identifier hs-var">objectType</span></a></span><span>
</span><span id="line-149"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#NOCTScalar"><span class="hs-identifier hs-type">NOCTScalar</span></a></span><span> </span><span id="local-6989586621690419717"><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621690419717"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621690419724"><span class="hs-identifier hs-var">outputBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name AnnotatedInputType
</span><a href="#local-6989586621690419762"><span class="hs-identifier hs-var">_actInputTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-150"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotatedScalarType -&gt; AnnotatedOutputType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AOTScalar"><span class="hs-identifier hs-var">AOTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621690419717"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-152"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#NotExists"><span class="hs-identifier hs-var">NotExists</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621690419724"><span class="hs-identifier hs-var">outputBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; is not an object or scalar type defined in custom types&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-comment">-- If the Action is sync:</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-comment">--      1. Check if the output type has only top level relations (if any)</span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-comment">--   If the Action is async:</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-comment">--      1. Check that the output type has no relations if the output type contains nested objects</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-comment">-- These checks ensure that the SQL we generate for the join does not have to extract nested fields</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-comment">-- from the action webhook response.</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690419716"><span class="annot"><span class="annottext">[ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
</span><a href="#local-6989586621690419716"><span class="hs-identifier hs-var">nestedObjects</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419715"><span class="annot"><span class="annottext">[ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
</span><a href="#local-6989586621690419715"><span class="hs-identifier hs-var">scalarOrEnumFields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AnnotatedOutputType
</span><a href="#local-6989586621690419722"><span class="hs-identifier hs-var">aot</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-160"></span><span>          </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOTObject"><span class="hs-identifier hs-type">AOTObject</span></a></span><span> </span><span id="local-6989586621690419714"><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419714"><span class="hs-identifier hs-var">aot'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-161"></span><span>            </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; NonEmpty a -&gt; ([a], [a])
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">NEList.partition</span></a></span><span>
</span><span id="line-162"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectFieldDefinition"><span class="hs-identifier hs-type">ObjectFieldDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621690419708"><span id="local-6989586621690419709"><span id="local-6989586621690419710"><span id="local-6989586621690419711"><span class="annot"><span class="annottext">Maybe Value
Maybe Description
(GType, AnnotatedObjectFieldType)
ObjectFieldName
_ofdType :: forall field. ObjectFieldDefinition field -&gt; field
_ofdDescription :: forall field. ObjectFieldDefinition field -&gt; Maybe Description
_ofdArguments :: forall field. ObjectFieldDefinition field -&gt; Maybe Value
_ofdName :: forall field. ObjectFieldDefinition field -&gt; ObjectFieldName
_ofdType :: (GType, AnnotatedObjectFieldType)
_ofdDescription :: Maybe Description
_ofdArguments :: Maybe Value
_ofdName :: ObjectFieldName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ofdType"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-163"></span><span>                  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(GType, AnnotatedObjectFieldType)
</span><a href="#local-6989586621690419708"><span class="hs-identifier hs-var">_ofdType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-164"></span><span>                    </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOFTScalar"><span class="hs-identifier hs-type">AOFTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-165"></span><span>                    </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOFTEnum"><span class="hs-identifier hs-type">AOFTEnum</span></a></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-166"></span><span>                    </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOFTObject"><span class="hs-identifier hs-type">AOFTObject</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-167"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotatedObjectType
-&gt; NonEmpty
     (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
</span><a href="Hasura.RQL.Types.CustomTypes.html#_aotFields"><span class="hs-identifier hs-var">_aotFields</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419714"><span class="hs-identifier hs-var">aot'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>          </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOTScalar"><span class="hs-identifier hs-type">AOTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>        </span><span id="local-6989586621690419699"><span class="annot"><span class="annottext">scalarOrEnumFieldNames :: [Name]
</span><a href="#local-6989586621690419699"><span class="hs-identifier hs-var hs-var">scalarOrEnumFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectFieldDefinition"><span class="hs-identifier hs-type">ObjectFieldDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621690419695"><span id="local-6989586621690419696"><span id="local-6989586621690419697"><span id="local-6989586621690419698"><span class="annot"><span class="annottext">Maybe Value
Maybe Description
(GType, AnnotatedObjectFieldType)
ObjectFieldName
_ofdType :: (GType, AnnotatedObjectFieldType)
_ofdDescription :: Maybe Description
_ofdArguments :: Maybe Value
_ofdName :: ObjectFieldName
_ofdType :: forall field. ObjectFieldDefinition field -&gt; field
_ofdDescription :: forall field. ObjectFieldDefinition field -&gt; Maybe Description
_ofdArguments :: forall field. ObjectFieldDefinition field -&gt; Maybe Value
_ofdName :: forall field. ObjectFieldDefinition field -&gt; ObjectFieldName
</span><a href="#local-6989586621690419695"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ObjectFieldName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unObjectFieldName"><span class="hs-identifier hs-var">unObjectFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621690419698"><span class="hs-identifier hs-var">_ofdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
</span><a href="#local-6989586621690419715"><span class="hs-identifier hs-var">scalarOrEnumFields</span></a></span><span>
</span><span id="line-171"></span><span>        </span><span id="local-6989586621690419693"><span class="annot"><span class="annottext">validateSyncAction :: m ()
</span><a href="#local-6989586621690419693"><span class="hs-identifier hs-var hs-var">validateSyncAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AnnotatedOutputType
</span><a href="#local-6989586621690419722"><span class="hs-identifier hs-var">aot</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-172"></span><span>          </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOTObject"><span class="hs-identifier hs-type">AOTObject</span></a></span><span> </span><span id="local-6989586621690419692"><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419692"><span class="hs-identifier hs-var">aot'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690419691"><span class="annot"><span class="annottext">relationshipsWithNonTopLevelFields :: [AnnotatedTypeRelationship]
</span><a href="#local-6989586621690419691"><span class="hs-identifier hs-var hs-var">relationshipsWithNonTopLevelFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-174"></span><span>                  </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span>
</span><span id="line-175"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedTypeRelationship"><span class="hs-identifier hs-type">AnnotatedTypeRelationship</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621690419684"><span id="local-6989586621690419685"><span id="local-6989586621690419686"><span id="local-6989586621690419687"><span id="local-6989586621690419688"><span id="local-6989586621690419689"><span class="annot"><span class="annottext">HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))
SourceName
RelType
SourceConfig ('Postgres 'Vanilla)
TableInfo ('Postgres 'Vanilla)
RelationshipName
_atrFieldMapping :: AnnotatedTypeRelationship
-&gt; HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))
_atrTableInfo :: AnnotatedTypeRelationship -&gt; TableInfo ('Postgres 'Vanilla)
_atrSourceConfig :: AnnotatedTypeRelationship -&gt; SourceConfig ('Postgres 'Vanilla)
_atrSource :: AnnotatedTypeRelationship -&gt; SourceName
_atrType :: AnnotatedTypeRelationship -&gt; RelType
_atrName :: AnnotatedTypeRelationship -&gt; RelationshipName
_atrFieldMapping :: HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))
_atrTableInfo :: TableInfo ('Postgres 'Vanilla)
_atrSourceConfig :: SourceConfig ('Postgres 'Vanilla)
_atrSource :: SourceName
_atrType :: RelType
_atrName :: RelationshipName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_atrFieldMapping"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-176"></span><span>                        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690419677"><span class="annot"><span class="annottext">objsInRel :: [Name]
</span><a href="#local-6989586621690419677"><span class="hs-identifier hs-var hs-var">objsInRel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ObjectFieldName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unObjectFieldName"><span class="hs-identifier hs-var">unObjectFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))
</span><a href="#local-6989586621690419684"><span class="hs-identifier hs-var">_atrFieldMapping</span></a></span><span>
</span><span id="line-177"></span><span>                         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621690419699"><span class="hs-identifier hs-var">scalarOrEnumFieldNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621690419677"><span class="hs-identifier hs-var">objsInRel</span></a></span><span>
</span><span id="line-178"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotatedObjectType -&gt; [AnnotatedTypeRelationship]
</span><a href="Hasura.RQL.Types.CustomTypes.html#_aotRelationships"><span class="hs-identifier hs-var">_aotRelationships</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419692"><span class="hs-identifier hs-var">aot'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotatedTypeRelationship]
</span><a href="#local-6989586621690419691"><span class="hs-identifier hs-var">relationshipsWithNonTopLevelFields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-181"></span><span>              </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#ConstraintError"><span class="hs-identifier hs-var">ConstraintError</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-182"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Relationships cannot be defined with nested object fields: &quot;</span></span><span>
</span><span id="line-183"></span><span>                  </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#commaSeparated"><span class="hs-identifier hs-var">commaSeparated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedTypeRelationship -&gt; RelationshipName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_atrName"><span class="hs-identifier hs-var">_atrName</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotatedTypeRelationship]
</span><a href="#local-6989586621690419691"><span class="hs-identifier hs-var">relationshipsWithNonTopLevelFields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>          </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOTScalar"><span class="hs-identifier hs-type">AOTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ActionType
</span><a href="#local-6989586621690419755"><span class="hs-identifier hs-var">_adType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-186"></span><span>      </span><span class="annot"><span class="annottext">ActionType
</span><a href="Hasura.RQL.Types.Action.html#ActionQuery"><span class="hs-identifier hs-var">ActionQuery</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621690419693"><span class="hs-identifier hs-var">validateSyncAction</span></a></span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionMutation"><span class="hs-identifier hs-type">ActionMutation</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMutationKind
</span><a href="Hasura.RQL.Types.Action.html#ActionSynchronous"><span class="hs-identifier hs-var">ActionSynchronous</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621690419693"><span class="hs-identifier hs-var">validateSyncAction</span></a></span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionMutation"><span class="hs-identifier hs-type">ActionMutation</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMutationKind
</span><a href="Hasura.RQL.Types.Action.html#ActionAsynchronous"><span class="hs-identifier hs-var">ActionAsynchronous</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AnnotatedOutputType
</span><a href="#local-6989586621690419722"><span class="hs-identifier hs-var">aot</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-189"></span><span>        </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOTScalar"><span class="hs-identifier hs-type">AOTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>        </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AOTObject"><span class="hs-identifier hs-type">AOTObject</span></a></span><span> </span><span id="local-6989586621690419662"><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419662"><span class="hs-identifier hs-var">aot'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotatedObjectType -&gt; [AnnotatedTypeRelationship]
</span><a href="Hasura.RQL.Types.CustomTypes.html#_aotRelationships"><span class="hs-identifier hs-var">_aotRelationships</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectType
</span><a href="#local-6989586621690419662"><span class="hs-identifier hs-var">aot'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
</span><a href="#local-6989586621690419716"><span class="hs-identifier hs-var">nestedObjects</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-192"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#ConstraintError"><span class="hs-identifier hs-var">ConstraintError</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Async action relations cannot be used with object fields: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#commaSeparated"><span class="hs-identifier hs-var">commaSeparated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall field. ObjectFieldDefinition field -&gt; ObjectFieldName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ofdName"><span class="hs-identifier hs-var">_ofdName</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
</span><a href="#local-6989586621690419716"><span class="hs-identifier hs-var">nestedObjects</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOutputType
</span><a href="#local-6989586621690419722"><span class="hs-identifier hs-var">aot</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span id="local-6989586621690419660"><span class="annot"><span class="annottext">ResolvedWebhook
</span><a href="#local-6989586621690419660"><span class="hs-identifier hs-var">resolvedWebhook</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
QErrM m =&gt;
Environment -&gt; InputWebhook -&gt; m ResolvedWebhook
</span><a href="Hasura.RQL.Types.Common.html#resolveWebhook"><span class="hs-identifier hs-var">resolveWebhook</span></a></span><span> </span><span class="annot"><span class="annottext">Environment
</span><a href="#local-6989586621690419764"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">InputWebhook
</span><a href="#local-6989586621690419751"><span class="hs-identifier hs-var">_adHandler</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690419658"><span class="annot"><span class="annottext">webhookEnvRecord :: EnvRecord ResolvedWebhook
</span><a href="#local-6989586621690419658"><span class="hs-identifier hs-var hs-var">webhookEnvRecord</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Text -&gt; a -&gt; EnvRecord a
</span><a href="Hasura.RQL.Types.Common.html#EnvRecord"><span class="hs-identifier hs-var">EnvRecord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">URLTemplate -&gt; Text
</span><a href="Data.URL.Template.html#printURLTemplate"><span class="hs-identifier hs-var">printURLTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InputWebhook -&gt; URLTemplate
</span><a href="Hasura.RQL.Types.Common.html#unInputWebhook"><span class="hs-identifier hs-var">unInputWebhook</span></a></span><span> </span><span class="annot"><span class="annottext">InputWebhook
</span><a href="#local-6989586621690419751"><span class="hs-identifier hs-var">_adHandler</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ResolvedWebhook
</span><a href="#local-6989586621690419660"><span class="hs-identifier hs-var">resolvedWebhook</span></a></span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall arg webhook.
[ArgumentDefinition arg]
-&gt; GraphQLType
-&gt; ActionType
-&gt; [HeaderConf]
-&gt; Bool
-&gt; Timeout
-&gt; webhook
-&gt; Maybe RequestTransform
-&gt; Maybe MetadataResponseTransform
-&gt; ActionDefinition arg webhook
</span><a href="Hasura.RQL.Types.Action.html#ActionDefinition"><span class="hs-identifier hs-var">ActionDefinition</span></a></span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><span class="annottext">[ArgumentDefinition (GType, AnnotatedInputType)]
</span><a href="#local-6989586621690419738"><span class="hs-identifier hs-var">resolvedArguments</span></a></span><span>
</span><span id="line-199"></span><span>        </span><span class="annot"><span class="annottext">GraphQLType
</span><a href="#local-6989586621690419756"><span class="hs-identifier hs-var">_adOutputType</span></a></span><span>
</span><span id="line-200"></span><span>        </span><span class="annot"><span class="annottext">ActionType
</span><a href="#local-6989586621690419755"><span class="hs-identifier hs-var">_adType</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="annot"><span class="annottext">[HeaderConf]
</span><a href="#local-6989586621690419754"><span class="hs-identifier hs-var">_adHeaders</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621690419753"><span class="hs-identifier hs-var">_adForwardClientHeaders</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">Timeout
</span><a href="#local-6989586621690419752"><span class="hs-identifier hs-var">_adTimeout</span></a></span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">EnvRecord ResolvedWebhook
</span><a href="#local-6989586621690419658"><span class="hs-identifier hs-var">webhookEnvRecord</span></a></span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">Maybe RequestTransform
</span><a href="#local-6989586621690419750"><span class="hs-identifier hs-var">_adRequestTransform</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span class="annot"><span class="annottext">Maybe MetadataResponseTransform
</span><a href="#local-6989586621690419749"><span class="hs-identifier hs-var">_adResponseTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><span class="annottext">AnnotatedOutputType
</span><a href="#local-6989586621690419723"><span class="hs-identifier hs-var">outputObject</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-keyword">data</span><span> </span><span id="UpdateAction"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#UpdateAction"><span class="hs-identifier hs-var">UpdateAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UpdateAction"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#UpdateAction"><span class="hs-identifier hs-var">UpdateAction</span></a></span></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_uaName"><span class="annot"><span class="annottext">UpdateAction -&gt; ActionName
</span><a href="Hasura.RQL.DDL.Action.html#_uaName"><span class="hs-identifier hs-var hs-var">_uaName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-212"></span><span>    </span><span id="_uaDefinition"><span class="annot"><span class="annottext">UpdateAction -&gt; ActionDefinitionInput
</span><a href="Hasura.RQL.DDL.Action.html#_uaDefinition"><span class="hs-identifier hs-var hs-var">_uaDefinition</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionDefinitionInput"><span class="hs-identifier hs-type">ActionDefinitionInput</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-213"></span><span>    </span><span id="_uaComment"><span class="annot"><span class="annottext">UpdateAction -&gt; Maybe Text
</span><a href="Hasura.RQL.DDL.Action.html#_uaComment"><span class="hs-identifier hs-var hs-var">_uaComment</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-special">$</span><span id="uaComment"><span id="uaDefinition"><span id="uaName"><span class="hs-special">(</span><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UpdateAction</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-217"></span><span class="hs-special">$</span><span id="local-6989586621690419615"><span id="local-6989586621690419629"><span class="hs-special">(</span><span class="hs-identifier">J.deriveFromJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">UpdateAction</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runUpdateAction"><span class="hs-identifier hs-type">runUpdateAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621690420161"><span class="annot"><a href="#local-6989586621690420161"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Base.Error.html#QErrM"><span class="hs-identifier hs-type">QErrM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420161"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#CacheRWM"><span class="hs-identifier hs-type">CacheRWM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420161"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataM"><span class="hs-identifier hs-type">MetadataM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420161"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#UpdateAction"><span class="hs-identifier hs-type">UpdateAction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-223"></span><span>  </span><span class="annot"><a href="#local-6989586621690420161"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span><span>
</span><span id="line-224"></span><span id="runUpdateAction"><span class="annot"><span class="annottext">runUpdateAction :: forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
UpdateAction -&gt; m EncJSON
</span><a href="Hasura.RQL.DDL.Action.html#runUpdateAction"><span class="hs-identifier hs-var hs-var">runUpdateAction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#UpdateAction"><span class="hs-identifier hs-type">UpdateAction</span></a></span><span> </span><span id="local-6989586621690419577"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419577"><span class="hs-identifier hs-var">actionName</span></a></span></span><span> </span><span id="local-6989586621690419576"><span class="annot"><span class="annottext">ActionDefinitionInput
</span><a href="#local-6989586621690419576"><span class="hs-identifier hs-var">actionDefinition</span></a></span></span><span> </span><span id="local-6989586621690419575"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621690419575"><span class="hs-identifier hs-var">actionComment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621690419574"><span class="annot"><span class="annottext">SchemaCache
</span><a href="#local-6989586621690419574"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). CacheRM m =&gt; m SchemaCache
</span><a href="Hasura.RQL.Types.SchemaCache.html#askSchemaCache"><span class="hs-identifier hs-var">askSchemaCache</span></a></span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690419573"><span class="annot"><span class="annottext">actionsMap :: ActionCache
</span><a href="#local-6989586621690419573"><span class="hs-identifier hs-var hs-var">actionsMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SchemaCache -&gt; ActionCache
</span><a href="Hasura.RQL.Types.SchemaCache.html#scActions"><span class="hs-identifier hs-var">scActions</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaCache
</span><a href="#local-6989586621690419574"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.4.20220919/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419577"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">ActionCache
</span><a href="#local-6989586621690419573"><span class="hs-identifier hs-var">actionsMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-229"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#NotExists"><span class="hs-identifier hs-var">NotExists</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;action with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419577"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not exist&quot;</span></span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
MetadataObjId -&gt; MetadataModifier -&gt; m ()
</span><a href="Hasura.RQL.Types.SchemaCache.Build.html#buildSchemaCacheFor"><span class="hs-identifier hs-var">buildSchemaCacheFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionName -&gt; MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOAction"><span class="hs-identifier hs-var">MOAction</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419577"><span class="hs-identifier hs-var">actionName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ActionDefinitionInput -&gt; Maybe Text -&gt; MetadataModifier
</span><a href="#local-6989586621690419571"><span class="hs-identifier hs-var">updateActionMetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">ActionDefinitionInput
</span><a href="#local-6989586621690419576"><span class="hs-identifier hs-var">actionDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621690419575"><span class="hs-identifier hs-var">actionComment</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">EncJSON
</span><a href="Hasura.RQL.Types.Common.html#successMsg"><span class="hs-identifier hs-var">successMsg</span></a></span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><a href="#local-6989586621690419571"><span class="hs-identifier hs-type">updateActionMetadataModifier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionDefinitionInput"><span class="hs-identifier hs-type">ActionDefinitionInput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-type">MetadataModifier</span></a></span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621690419571"><span class="annot"><span class="annottext">updateActionMetadataModifier :: ActionDefinitionInput -&gt; Maybe Text -&gt; MetadataModifier
</span><a href="#local-6989586621690419571"><span class="hs-identifier hs-var hs-var">updateActionMetadataModifier</span></a></span></span><span> </span><span id="local-6989586621690419570"><span class="annot"><span class="annottext">ActionDefinitionInput
</span><a href="#local-6989586621690419570"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span id="local-6989586621690419569"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621690419569"><span class="hs-identifier hs-var">comment</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>      </span><span class="annot"><span class="annottext">(Metadata -&gt; Metadata) -&gt; MetadataModifier
</span><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-var">MetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-236"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' Metadata Actions
</span><a href="Hasura.RQL.Types.Metadata.html#metaActions"><span class="hs-identifier hs-var">metaActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><span class="hs-identifier hs-var">ix</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419577"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' ActionMetadata ActionDefinitionInput
</span><a href="Hasura.RQL.Types.Action.html#amDefinition"><span class="hs-identifier hs-var">amDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">ActionDefinitionInput
</span><a href="#local-6989586621690419570"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>          </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' Metadata Actions
</span><a href="Hasura.RQL.Types.Metadata.html#metaActions"><span class="hs-identifier hs-var">metaActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><span class="hs-identifier hs-var">ix</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419577"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' ActionMetadata (Maybe Text)
</span><a href="Hasura.RQL.Types.Action.html#amComment"><span class="hs-identifier hs-var">amComment</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621690419569"><span class="hs-identifier hs-var">comment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-keyword">newtype</span><span> </span><span id="ClearActionData"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#ClearActionData"><span class="hs-identifier hs-var">ClearActionData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ClearActionData"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#ClearActionData"><span class="hs-identifier hs-var">ClearActionData</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unClearActionData"><span class="annot"><span class="annottext">ClearActionData -&gt; Bool
</span><a href="Hasura.RQL.DDL.Action.html#unClearActionData"><span class="hs-identifier hs-var hs-var">unClearActionData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690419554"><span id="local-6989586621690419556"><span id="local-6989586621690419562"><span class="annot"><span class="annottext">Int -&gt; ClearActionData -&gt; ShowS
[ClearActionData] -&gt; ShowS
ClearActionData -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ClearActionData] -&gt; ShowS
$cshowList :: [ClearActionData] -&gt; ShowS
show :: ClearActionData -&gt; String
$cshow :: ClearActionData -&gt; String
showsPrec :: Int -&gt; ClearActionData -&gt; ShowS
$cshowsPrec :: Int -&gt; ClearActionData -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419546"><span id="local-6989586621690419551"><span class="annot"><span class="annottext">ClearActionData -&gt; ClearActionData -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ClearActionData -&gt; ClearActionData -&gt; Bool
$c/= :: ClearActionData -&gt; ClearActionData -&gt; Bool
== :: ClearActionData -&gt; ClearActionData -&gt; Bool
$c== :: ClearActionData -&gt; ClearActionData -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419535"><span id="local-6989586621690419540"><span class="annot"><span class="annottext">Value -&gt; Parser [ClearActionData]
Value -&gt; Parser ClearActionData
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [ClearActionData]
$cparseJSONList :: Value -&gt; Parser [ClearActionData]
parseJSON :: Value -&gt; Parser ClearActionData
$cparseJSON :: Value -&gt; Parser ClearActionData
</span><a href="#local-6989586621690419535"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.FromJSON</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419517"><span id="local-6989586621690419521"><span id="local-6989586621690419525"><span id="local-6989586621690419530"><span class="annot"><span class="annottext">[ClearActionData] -&gt; Value
[ClearActionData] -&gt; Encoding
ClearActionData -&gt; Value
ClearActionData -&gt; Encoding
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [ClearActionData] -&gt; Encoding
$ctoEncodingList :: [ClearActionData] -&gt; Encoding
toJSONList :: [ClearActionData] -&gt; Value
$ctoJSONList :: [ClearActionData] -&gt; Value
toEncoding :: ClearActionData -&gt; Encoding
$ctoEncoding :: ClearActionData -&gt; Encoding
toJSON :: ClearActionData -&gt; Value
$ctoJSON :: ClearActionData -&gt; Value
</span><a href="#local-6989586621690419517"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSON</span></a></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#shouldClearActionData"><span class="hs-identifier hs-type">shouldClearActionData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#ClearActionData"><span class="hs-identifier hs-type">ClearActionData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-243"></span><span id="shouldClearActionData"><span class="annot"><span class="annottext">shouldClearActionData :: ClearActionData -&gt; Bool
</span><a href="Hasura.RQL.DDL.Action.html#shouldClearActionData"><span class="hs-identifier hs-var hs-var">shouldClearActionData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClearActionData -&gt; Bool
</span><a href="Hasura.RQL.DDL.Action.html#unClearActionData"><span class="hs-identifier hs-var">unClearActionData</span></a></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#defaultClearActionData"><span class="hs-identifier hs-type">defaultClearActionData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#ClearActionData"><span class="hs-identifier hs-type">ClearActionData</span></a></span><span>
</span><span id="line-246"></span><span id="defaultClearActionData"><span class="annot"><span class="annottext">defaultClearActionData :: ClearActionData
</span><a href="Hasura.RQL.DDL.Action.html#defaultClearActionData"><span class="hs-identifier hs-var hs-var">defaultClearActionData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ClearActionData
</span><a href="Hasura.RQL.DDL.Action.html#ClearActionData"><span class="hs-identifier hs-var">ClearActionData</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-keyword">data</span><span> </span><span id="DropAction"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropAction"><span class="hs-identifier hs-var">DropAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DropAction"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropAction"><span class="hs-identifier hs-var">DropAction</span></a></span></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_daName"><span class="annot"><span class="annottext">DropAction -&gt; ActionName
</span><a href="Hasura.RQL.DDL.Action.html#_daName"><span class="hs-identifier hs-var hs-var">_daName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-250"></span><span>    </span><span id="_daClearData"><span class="annot"><span class="annottext">DropAction -&gt; Maybe ClearActionData
</span><a href="Hasura.RQL.DDL.Action.html#_daClearData"><span class="hs-identifier hs-var hs-var">_daClearData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#ClearActionData"><span class="hs-identifier hs-type">ClearActionData</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690419497"><span id="local-6989586621690419499"><span id="local-6989586621690419507"><span class="annot"><span class="annottext">Int -&gt; DropAction -&gt; ShowS
[DropAction] -&gt; ShowS
DropAction -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DropAction] -&gt; ShowS
$cshowList :: [DropAction] -&gt; ShowS
show :: DropAction -&gt; String
$cshow :: DropAction -&gt; String
showsPrec :: Int -&gt; DropAction -&gt; ShowS
$cshowsPrec :: Int -&gt; DropAction -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419489"><span id="local-6989586621690419495"><span class="annot"><span class="annottext">DropAction -&gt; DropAction -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DropAction -&gt; DropAction -&gt; Bool
$c/= :: DropAction -&gt; DropAction -&gt; Bool
== :: DropAction -&gt; DropAction -&gt; Bool
$c== :: DropAction -&gt; DropAction -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-special">$</span><span id="local-6989586621690419456"><span id="local-6989586621690419458"><span id="local-6989586621690419466"><span id="local-6989586621690419476"><span id="local-6989586621690419478"><span id="local-6989586621690419487"><span class="hs-special">(</span><span class="hs-identifier">J.deriveJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DropAction</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span id="local-6989586621690420144"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runDropAction"><span class="hs-identifier hs-type">runDropAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#CacheRWM"><span class="hs-identifier hs-type">CacheRWM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420144"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-258"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataM"><span class="hs-identifier hs-type">MetadataM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420144"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><a href="Hasura.Metadata.Class.html#MonadMetadataStorageQueryAPI"><span class="hs-identifier hs-type">MonadMetadataStorageQueryAPI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420144"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropAction"><span class="hs-identifier hs-type">DropAction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-262"></span><span>  </span><span class="annot"><a href="#local-6989586621690420144"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span></span><span>
</span><span id="line-263"></span><span id="runDropAction"><span class="annot"><span class="annottext">runDropAction :: forall (m :: * -&gt; *).
(CacheRWM m, MetadataM m, MonadMetadataStorageQueryAPI m) =&gt;
DropAction -&gt; m EncJSON
</span><a href="Hasura.RQL.DDL.Action.html#runDropAction"><span class="hs-identifier hs-var hs-var">runDropAction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropAction"><span class="hs-identifier hs-type">DropAction</span></a></span><span> </span><span id="local-6989586621690419419"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419419"><span class="hs-identifier hs-var">actionName</span></a></span></span><span> </span><span id="local-6989586621690419418"><span class="annot"><span class="annottext">Maybe ClearActionData
</span><a href="#local-6989586621690419418"><span class="hs-identifier hs-var">clearDataM</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-264"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
(QErrM m, CacheRM m) =&gt;
ActionName -&gt; m ActionInfo
</span><a href="Hasura.RQL.DDL.Action.html#getActionInfo"><span class="hs-identifier hs-var">getActionInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419419"><span class="hs-identifier hs-var">actionName</span></a></span><span>
</span><span id="line-265"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (QErrM m, CacheRM m) =&gt; m a -&gt; m a
</span><a href="Hasura.RQL.Types.SchemaCache.Build.html#withNewInconsistentObjsCheck"><span class="hs-identifier hs-var">withNewInconsistentObjsCheck</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
(MetadataM m, CacheRWM m) =&gt;
MetadataModifier -&gt; m ()
</span><a href="Hasura.RQL.Types.SchemaCache.Build.html#buildSchemaCache"><span class="hs-identifier hs-var">buildSchemaCache</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-267"></span><span>      </span><span class="annot"><span class="annottext">ActionName -&gt; MetadataModifier
</span><a href="Hasura.RQL.DDL.Action.html#dropActionInMetadata"><span class="hs-identifier hs-var">dropActionInMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419419"><span class="hs-identifier hs-var">actionName</span></a></span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClearActionData -&gt; Bool
</span><a href="Hasura.RQL.DDL.Action.html#shouldClearActionData"><span class="hs-identifier hs-var">shouldClearActionData</span></a></span><span> </span><span class="annot"><span class="annottext">ClearActionData
</span><a href="#local-6989586621690419414"><span class="hs-identifier hs-var">clearData</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
MonadMetadataStorageQueryAPI m =&gt;
ActionName -&gt; m ()
</span><a href="Hasura.Metadata.Class.html#deleteActionData"><span class="hs-identifier hs-var">deleteActionData</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419419"><span class="hs-identifier hs-var">actionName</span></a></span><span>
</span><span id="line-269"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">EncJSON
</span><a href="Hasura.RQL.Types.Common.html#successMsg"><span class="hs-identifier hs-var">successMsg</span></a></span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-comment">-- When clearData is not present we assume that</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-comment">-- the data needs to be retained</span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621690419414"><span class="annot"><span class="annottext">clearData :: ClearActionData
</span><a href="#local-6989586621690419414"><span class="hs-identifier hs-var hs-var">clearData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">ClearActionData
</span><a href="Hasura.RQL.DDL.Action.html#defaultClearActionData"><span class="hs-identifier hs-var">defaultClearActionData</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ClearActionData
</span><a href="#local-6989586621690419418"><span class="hs-identifier hs-var">clearDataM</span></a></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#dropActionInMetadata"><span class="hs-identifier hs-type">dropActionInMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-type">MetadataModifier</span></a></span><span>
</span><span id="line-276"></span><span id="dropActionInMetadata"><span class="annot"><span class="annottext">dropActionInMetadata :: ActionName -&gt; MetadataModifier
</span><a href="Hasura.RQL.DDL.Action.html#dropActionInMetadata"><span class="hs-identifier hs-var hs-var">dropActionInMetadata</span></a></span></span><span> </span><span id="local-6989586621690419411"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419411"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-277"></span><span>  </span><span class="annot"><span class="annottext">(Metadata -&gt; Metadata) -&gt; MetadataModifier
</span><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-var">MetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Metadata Actions
</span><a href="Hasura.RQL.Types.Metadata.html#metaActions"><span class="hs-identifier hs-var">metaActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="annot"><span class="annottext">forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; InsOrdHashMap k v -&gt; InsOrdHashMap k v
</span><span class="hs-identifier hs-var">OMap.delete</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419411"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-keyword">newtype</span><span> </span><span id="ActionMetadataField"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#ActionMetadataField"><span class="hs-identifier hs-var">ActionMetadataField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ActionMetadataField"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#ActionMetadataField"><span class="hs-identifier hs-var">ActionMetadataField</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unActionMetadataField"><span class="annot"><span class="annottext">ActionMetadataField -&gt; Text
</span><a href="Hasura.RQL.DDL.Action.html#unActionMetadataField"><span class="hs-identifier hs-var hs-var">unActionMetadataField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690419399"><span id="local-6989586621690419401"><span id="local-6989586621690419406"><span class="annot"><span class="annottext">Int -&gt; ActionMetadataField -&gt; ShowS
[ActionMetadataField] -&gt; ShowS
ActionMetadataField -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ActionMetadataField] -&gt; ShowS
$cshowList :: [ActionMetadataField] -&gt; ShowS
show :: ActionMetadataField -&gt; String
$cshow :: ActionMetadataField -&gt; String
showsPrec :: Int -&gt; ActionMetadataField -&gt; ShowS
$cshowsPrec :: Int -&gt; ActionMetadataField -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419392"><span id="local-6989586621690419397"><span class="annot"><span class="annottext">ActionMetadataField -&gt; ActionMetadataField -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ActionMetadataField -&gt; ActionMetadataField -&gt; Bool
$c/= :: ActionMetadataField -&gt; ActionMetadataField -&gt; Bool
== :: ActionMetadataField -&gt; ActionMetadataField -&gt; Bool
$c== :: ActionMetadataField -&gt; ActionMetadataField -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419383"><span id="local-6989586621690419387"><span class="annot"><span class="annottext">Value -&gt; Parser [ActionMetadataField]
Value -&gt; Parser ActionMetadataField
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [ActionMetadataField]
$cparseJSONList :: Value -&gt; Parser [ActionMetadataField]
parseJSON :: Value -&gt; Parser ActionMetadataField
$cparseJSON :: Value -&gt; Parser ActionMetadataField
</span><a href="#local-6989586621690419383"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.FromJSON</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419366"><span id="local-6989586621690419370"><span id="local-6989586621690419374"><span id="local-6989586621690419378"><span class="annot"><span class="annottext">[ActionMetadataField] -&gt; Value
[ActionMetadataField] -&gt; Encoding
ActionMetadataField -&gt; Value
ActionMetadataField -&gt; Encoding
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [ActionMetadataField] -&gt; Encoding
$ctoEncodingList :: [ActionMetadataField] -&gt; Encoding
toJSONList :: [ActionMetadataField] -&gt; Value
$ctoJSONList :: [ActionMetadataField] -&gt; Value
toEncoding :: ActionMetadataField -&gt; Encoding
$ctoEncoding :: ActionMetadataField -&gt; Encoding
toJSON :: ActionMetadataField -&gt; Value
$ctoJSON :: ActionMetadataField -&gt; Value
</span><a href="#local-6989586621690419366"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSON</span></a></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#doesActionPermissionExist"><span class="hs-identifier hs-type">doesActionPermissionExist</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#Metadata"><span class="hs-identifier hs-type">Metadata</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Session.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-283"></span><span id="doesActionPermissionExist"><span class="annot"><span class="annottext">doesActionPermissionExist :: Metadata -&gt; ActionName -&gt; RoleName -&gt; Bool
</span><a href="Hasura.RQL.DDL.Action.html#doesActionPermissionExist"><span class="hs-identifier hs-var hs-var">doesActionPermissionExist</span></a></span></span><span> </span><span id="local-6989586621690419361"><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621690419361"><span class="hs-identifier hs-var">metadata</span></a></span></span><span> </span><span id="local-6989586621690419360"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419360"><span class="hs-identifier hs-var">actionName</span></a></span></span><span> </span><span id="local-6989586621690419359"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419359"><span class="hs-identifier hs-var">roleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-284"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419359"><span class="hs-identifier hs-var">roleName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ActionPermissionMetadata -&gt; RoleName
</span><a href="Hasura.RQL.Types.Action.html#_apmRole"><span class="hs-identifier hs-var">_apmRole</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621690419361"><span class="hs-identifier hs-var">metadata</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' Metadata Actions
</span><a href="Hasura.RQL.Types.Metadata.html#metaActions"><span class="hs-identifier hs-var">metaActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><span class="hs-identifier hs-var">ix</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419360"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' ActionMetadata [ActionPermissionMetadata]
</span><a href="Hasura.RQL.Types.Action.html#amPermissions"><span class="hs-identifier hs-var">amPermissions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-keyword">data</span><span> </span><span id="CreateActionPermission"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier hs-var">CreateActionPermission</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CreateActionPermission"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier hs-var">CreateActionPermission</span></a></span></span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_capAction"><span class="annot"><span class="annottext">CreateActionPermission -&gt; ActionName
</span><a href="Hasura.RQL.DDL.Action.html#_capAction"><span class="hs-identifier hs-var hs-var">_capAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-288"></span><span>    </span><span id="_capRole"><span class="annot"><span class="annottext">CreateActionPermission -&gt; RoleName
</span><a href="Hasura.RQL.DDL.Action.html#_capRole"><span class="hs-identifier hs-var hs-var">_capRole</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Session.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-289"></span><span>    </span><span id="_capDefinition"><span class="annot"><span class="annottext">CreateActionPermission -&gt; Maybe Value
</span><a href="Hasura.RQL.DDL.Action.html#_capDefinition"><span class="hs-identifier hs-var hs-var">_capDefinition</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-290"></span><span>    </span><span id="_capComment"><span class="annot"><span class="annottext">CreateActionPermission -&gt; Maybe Text
</span><a href="Hasura.RQL.DDL.Action.html#_capComment"><span class="hs-identifier hs-var hs-var">_capComment</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-special">$</span><span id="local-6989586621690419332"><span id="local-6989586621690419349"><span class="hs-special">(</span><span class="hs-identifier">J.deriveFromJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">CreateActionPermission</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span id="local-6989586621690420126"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runCreateActionPermission"><span class="hs-identifier hs-type">runCreateActionPermission</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Base.Error.html#QErrM"><span class="hs-identifier hs-type">QErrM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420126"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#CacheRWM"><span class="hs-identifier hs-type">CacheRWM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420126"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataM"><span class="hs-identifier hs-type">MetadataM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420126"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-297"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier hs-type">CreateActionPermission</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-298"></span><span>  </span><span class="annot"><a href="#local-6989586621690420126"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span></span><span>
</span><span id="line-299"></span><span id="runCreateActionPermission"><span class="annot"><span class="annottext">runCreateActionPermission :: forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
CreateActionPermission -&gt; m EncJSON
</span><a href="Hasura.RQL.DDL.Action.html#runCreateActionPermission"><span class="hs-identifier hs-var hs-var">runCreateActionPermission</span></a></span></span><span> </span><span id="local-6989586621690419300"><span class="annot"><span class="annottext">CreateActionPermission
</span><a href="#local-6989586621690419300"><span class="hs-identifier hs-var">createActionPermission</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-300"></span><span>  </span><span id="local-6989586621690419299"><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621690419299"><span class="hs-identifier hs-var">metadata</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MetadataM m =&gt; m Metadata
</span><a href="Hasura.RQL.Types.Metadata.html#getMetadata"><span class="hs-identifier hs-var">getMetadata</span></a></span><span>
</span><span id="line-301"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metadata -&gt; ActionName -&gt; RoleName -&gt; Bool
</span><a href="Hasura.RQL.DDL.Action.html#doesActionPermissionExist"><span class="hs-identifier hs-var">doesActionPermissionExist</span></a></span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621690419299"><span class="hs-identifier hs-var">metadata</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419297"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419296"><span class="hs-identifier hs-var">roleName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#AlreadyExists"><span class="hs-identifier hs-var">AlreadyExists</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-303"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;permission for role &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419296"><span class="hs-identifier hs-var">roleName</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; is already defined on &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419297"><span class="hs-identifier hs-var">actionName</span></a></span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
MetadataObjId -&gt; MetadataModifier -&gt; m ()
</span><a href="Hasura.RQL.Types.SchemaCache.Build.html#buildSchemaCacheFor"><span class="hs-identifier hs-var">buildSchemaCacheFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionName -&gt; RoleName -&gt; MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOActionPermission"><span class="hs-identifier hs-var">MOActionPermission</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419297"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419296"><span class="hs-identifier hs-var">roleName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><span class="annottext">(Metadata -&gt; Metadata) -&gt; MetadataModifier
</span><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-var">MetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-307"></span><span>      </span><span class="annot"><span class="annottext">Lens' Metadata Actions
</span><a href="Hasura.RQL.Types.Metadata.html#metaActions"><span class="hs-identifier hs-var">metaActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><span class="hs-identifier hs-var">ix</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419297"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' ActionMetadata [ActionPermissionMetadata]
</span><a href="Hasura.RQL.Types.Action.html#amPermissions"><span class="hs-identifier hs-var">amPermissions</span></a></span><span>
</span><span id="line-308"></span><span>        </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RoleName -&gt; Maybe Text -&gt; ActionPermissionMetadata
</span><a href="Hasura.RQL.Types.Action.html#ActionPermissionMetadata"><span class="hs-identifier hs-var">ActionPermissionMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419296"><span class="hs-identifier hs-var">roleName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621690419292"><span class="hs-identifier hs-var">comment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">EncJSON
</span><a href="Hasura.RQL.Types.Common.html#successMsg"><span class="hs-identifier hs-var">successMsg</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-311"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier hs-type">CreateActionPermission</span></a></span><span> </span><span id="local-6989586621690419297"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419297"><span class="hs-identifier hs-var">actionName</span></a></span></span><span> </span><span id="local-6989586621690419296"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419296"><span class="hs-identifier hs-var">roleName</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621690419292"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621690419292"><span class="hs-identifier hs-var">comment</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CreateActionPermission
</span><a href="#local-6989586621690419300"><span class="hs-identifier hs-var">createActionPermission</span></a></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-keyword">data</span><span> </span><span id="DropActionPermission"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropActionPermission"><span class="hs-identifier hs-var">DropActionPermission</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DropActionPermission"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropActionPermission"><span class="hs-identifier hs-var">DropActionPermission</span></a></span></span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dapAction"><span class="annot"><span class="annottext">DropActionPermission -&gt; ActionName
</span><a href="Hasura.RQL.DDL.Action.html#_dapAction"><span class="hs-identifier hs-var hs-var">_dapAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-315"></span><span>    </span><span id="_dapRole"><span class="annot"><span class="annottext">DropActionPermission -&gt; RoleName
</span><a href="Hasura.RQL.DDL.Action.html#_dapRole"><span class="hs-identifier hs-var hs-var">_dapRole</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Session.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690419279"><span id="local-6989586621690419281"><span id="local-6989586621690419287"><span class="annot"><span class="annottext">Int -&gt; DropActionPermission -&gt; ShowS
[DropActionPermission] -&gt; ShowS
DropActionPermission -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DropActionPermission] -&gt; ShowS
$cshowList :: [DropActionPermission] -&gt; ShowS
show :: DropActionPermission -&gt; String
$cshow :: DropActionPermission -&gt; String
showsPrec :: Int -&gt; DropActionPermission -&gt; ShowS
$cshowsPrec :: Int -&gt; DropActionPermission -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690419273"><span id="local-6989586621690419277"><span class="annot"><span class="annottext">DropActionPermission -&gt; DropActionPermission -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DropActionPermission -&gt; DropActionPermission -&gt; Bool
$c/= :: DropActionPermission -&gt; DropActionPermission -&gt; Bool
== :: DropActionPermission -&gt; DropActionPermission -&gt; Bool
$c== :: DropActionPermission -&gt; DropActionPermission -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-special">$</span><span id="local-6989586621690419242"><span id="local-6989586621690419244"><span id="local-6989586621690419251"><span id="local-6989586621690419261"><span id="local-6989586621690419263"><span id="local-6989586621690419271"><span class="hs-special">(</span><span class="hs-identifier">J.deriveJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DropActionPermission</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span id="local-6989586621690420123"><span class="annot"><a href="Hasura.RQL.DDL.Action.html#runDropActionPermission"><span class="hs-identifier hs-type">runDropActionPermission</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Base.Error.html#QErrM"><span class="hs-identifier hs-type">QErrM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420123"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#CacheRWM"><span class="hs-identifier hs-type">CacheRWM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420123"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataM"><span class="hs-identifier hs-type">MetadataM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690420123"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-323"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#DropActionPermission"><span class="hs-identifier hs-type">DropActionPermission</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><a href="#local-6989586621690420123"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span></span><span>
</span><span id="line-325"></span><span id="runDropActionPermission"><span class="annot"><span class="annottext">runDropActionPermission :: forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
DropActionPermission -&gt; m EncJSON
</span><a href="Hasura.RQL.DDL.Action.html#runDropActionPermission"><span class="hs-identifier hs-var hs-var">runDropActionPermission</span></a></span></span><span> </span><span id="local-6989586621690419210"><span class="annot"><span class="annottext">DropActionPermission
</span><a href="#local-6989586621690419210"><span class="hs-identifier hs-var">dropActionPermission</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621690419209"><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621690419209"><span class="hs-identifier hs-var">metadata</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MetadataM m =&gt; m Metadata
</span><a href="Hasura.RQL.Types.Metadata.html#getMetadata"><span class="hs-identifier hs-var">getMetadata</span></a></span><span>
</span><span id="line-327"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metadata -&gt; ActionName -&gt; RoleName -&gt; Bool
</span><a href="Hasura.RQL.DDL.Action.html#doesActionPermissionExist"><span class="hs-identifier hs-var">doesActionPermissionExist</span></a></span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621690419209"><span class="hs-identifier hs-var">metadata</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419208"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419207"><span class="hs-identifier hs-var">roleName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#NotExists"><span class="hs-identifier hs-var">NotExists</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-329"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;permission for role: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419207"><span class="hs-identifier hs-var">roleName</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; is not defined on &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419208"><span class="hs-identifier hs-var">actionName</span></a></span><span>
</span><span id="line-330"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
MetadataObjId -&gt; MetadataModifier -&gt; m ()
</span><a href="Hasura.RQL.Types.SchemaCache.Build.html#buildSchemaCacheFor"><span class="hs-identifier hs-var">buildSchemaCacheFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionName -&gt; RoleName -&gt; MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOActionPermission"><span class="hs-identifier hs-var">MOActionPermission</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419208"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419207"><span class="hs-identifier hs-var">roleName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="annot"><span class="annottext">ActionName -&gt; RoleName -&gt; MetadataModifier
</span><a href="Hasura.RQL.DDL.Action.html#dropActionPermissionInMetadata"><span class="hs-identifier hs-var">dropActionPermissionInMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419208"><span class="hs-identifier hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419207"><span class="hs-identifier hs-var">roleName</span></a></span><span>
</span><span id="line-332"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">EncJSON
</span><a href="Hasura.RQL.Types.Common.html#successMsg"><span class="hs-identifier hs-var">successMsg</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-334"></span><span>    </span><span id="local-6989586621690419208"><span class="annot"><span class="annottext">actionName :: ActionName
</span><a href="#local-6989586621690419208"><span class="hs-identifier hs-var hs-var">actionName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DropActionPermission -&gt; ActionName
</span><a href="Hasura.RQL.DDL.Action.html#_dapAction"><span class="hs-identifier hs-var">_dapAction</span></a></span><span> </span><span class="annot"><span class="annottext">DropActionPermission
</span><a href="#local-6989586621690419210"><span class="hs-identifier hs-var">dropActionPermission</span></a></span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621690419207"><span class="annot"><span class="annottext">roleName :: RoleName
</span><a href="#local-6989586621690419207"><span class="hs-identifier hs-var hs-var">roleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DropActionPermission -&gt; RoleName
</span><a href="Hasura.RQL.DDL.Action.html#_dapRole"><span class="hs-identifier hs-var">_dapRole</span></a></span><span> </span><span class="annot"><span class="annottext">DropActionPermission
</span><a href="#local-6989586621690419210"><span class="hs-identifier hs-var">dropActionPermission</span></a></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#dropActionPermissionInMetadata"><span class="hs-identifier hs-type">dropActionPermissionInMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#ActionName"><span class="hs-identifier hs-type">ActionName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Session.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-type">MetadataModifier</span></a></span><span>
</span><span id="line-338"></span><span id="dropActionPermissionInMetadata"><span class="annot"><span class="annottext">dropActionPermissionInMetadata :: ActionName -&gt; RoleName -&gt; MetadataModifier
</span><a href="Hasura.RQL.DDL.Action.html#dropActionPermissionInMetadata"><span class="hs-identifier hs-var hs-var">dropActionPermissionInMetadata</span></a></span></span><span> </span><span id="local-6989586621690419206"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419206"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621690419205"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419205"><span class="hs-keyword hs-var">role</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-339"></span><span>  </span><span class="annot"><span class="annottext">(Metadata -&gt; Metadata) -&gt; MetadataModifier
</span><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-var">MetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><span class="annottext">Lens' Metadata Actions
</span><a href="Hasura.RQL.Types.Metadata.html#metaActions"><span class="hs-identifier hs-var">metaActions</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><span class="hs-identifier hs-var">ix</span></span><span> </span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621690419206"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' ActionMetadata [ActionPermissionMetadata]
</span><a href="Hasura.RQL.Types.Action.html#amPermissions"><span class="hs-identifier hs-var">amPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">(/=)</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621690419205"><span class="hs-keyword hs-var">role</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.4/share/doc/ghc-9.2.4.20220919/html/libraries/base-4.16.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ActionPermissionMetadata -&gt; RoleName
</span><a href="Hasura.RQL.Types.Action.html#_apmRole"><span class="hs-identifier hs-var">_apmRole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span></pre></body></html>