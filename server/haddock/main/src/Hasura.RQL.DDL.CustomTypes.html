<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.RQL.DDL.CustomTypes</span><span>
</span><span id="line-2"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#runSetCustomTypes"><span class="hs-identifier">runSetCustomTypes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#clearCustomTypesInMetadata"><span class="hs-identifier">clearCustomTypesInMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#resolveCustomTypes"><span class="hs-identifier">resolveCustomTypes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#lookupPGScalar"><span class="hs-identifier">lookupPGScalar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">where</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(.~)</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Validate</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Dependent.Map</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DMap</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashSet</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.List.Extended.html"><span class="hs-identifier">Data.List.Extended</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.List.Extended.html"><span class="hs-identifier">Data.List.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html"><span class="hs-identifier">Hasura.Backends.Postgres.SQL.Types</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.EncJSON.html"><span class="hs-identifier">Hasura.EncJSON</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.html"><span class="hs-identifier">Hasura.RQL.Types</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.SQL.Tag.html"><span class="hs-identifier">Hasura.SQL.Tag</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">{- Note [Postgres scalars in custom types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It&#8217;s very convenient to be able to reference Postgres scalars in custom type
definitions. For example, we might have a type like this:

    type User {
      id: uuid!
      name: String!
      location: geography
    }

The uuid and geography types are Postgres scalars, not separately-defined
GraphQL types. To support this, we have to take a few extra steps:

  1. The set of Postgres base types is not fixed; extensions like PostGIS add
     new ones, and users can even define their own. Therefore, we fetch the
     currently defined base types from the @pg_catalog.pg_type@ system table as part of
     loading the metadata.

  2. It&#8217;s possible for a custom type definition to use a type that doesn&#8217;t
     appear elsewhere in the GraphQL schema, so we record which base types were
     referenced while validating the custom type definitions and make sure to
     include them in the generated schema explicitly.
-}</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">-- | Validate the custom types and return any reused Postgres base types (as</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- scalars).</span><span>
</span><span id="line-54"></span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#validateCustomTypeDefinitions"><span class="hs-identifier hs-type">validateCustomTypeDefinitions</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688232898"><span class="annot"><a href="#local-6989586621688232898"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">MonadValidate</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#CustomTypeValidationError"><span class="hs-identifier hs-type">CustomTypeValidationError</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621688232898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#CustomTypes"><span class="hs-identifier hs-type">CustomTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-comment">-- | all Postgres base types. See Note [Postgres scalars in custom types]</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">DMap.DMap</span></span><span> </span><span class="annot"><a href="Hasura.SQL.Tag.html#BackendTag"><span class="hs-identifier hs-type">BackendTag</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ScalarSet"><span class="hs-identifier hs-type">ScalarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="#local-6989586621688232898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedCustomTypes"><span class="hs-identifier hs-type">AnnotatedCustomTypes</span></a></span><span>
</span><span id="line-62"></span><span id="validateCustomTypeDefinitions"><span class="annot"><span class="annottext">validateCustomTypeDefinitions :: SourceCache
-&gt; CustomTypes
-&gt; DMap BackendTag ScalarSet
-&gt; m AnnotatedCustomTypes
</span><a href="Hasura.RQL.DDL.CustomTypes.html#validateCustomTypeDefinitions"><span class="hs-identifier hs-var hs-var">validateCustomTypeDefinitions</span></a></span></span><span> </span><span id="local-6989586621688232885"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621688232885"><span class="hs-identifier hs-var">sources</span></a></span></span><span> </span><span id="local-6989586621688232884"><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232884"><span class="hs-identifier hs-var">customTypes</span></a></span></span><span> </span><span id="local-6989586621688232883"><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
</span><a href="#local-6989586621688232883"><span class="hs-identifier hs-var">allScalars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet Name -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232880"><span class="hs-identifier hs-var">duplicateTypes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m ()
forall e (m :: * -&gt; *). MonadValidate e m =&gt; e -&gt; m ()
</span><span class="hs-identifier hs-var">dispute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m ())
-&gt; [CustomTypeValidationError] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashSet Name -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#DuplicateTypeNames"><span class="hs-identifier hs-var">DuplicateTypeNames</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232880"><span class="hs-identifier hs-var">duplicateTypes</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><span class="annottext">(EnumTypeDefinition -&gt; m ()) -&gt; [EnumTypeDefinition] -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition -&gt; m ()
</span><a href="#local-6989586621688232876"><span class="hs-identifier hs-var">validateEnum</span></a></span><span> </span><span class="annot"><span class="annottext">[EnumTypeDefinition]
</span><a href="#local-6989586621688232875"><span class="hs-identifier hs-var">enumDefinitions</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621688232874"><span class="annot"><span class="annottext">HashMap Name AnnotatedScalarType
</span><a href="#local-6989586621688232874"><span class="hs-identifier hs-var">reusedScalars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WriterT (HashMap Name AnnotatedScalarType) m ()
-&gt; m (HashMap Name AnnotatedScalarType)
forall (m :: * -&gt; *) w a. Monad m =&gt; WriterT w m a -&gt; m w
</span><span class="hs-identifier hs-var">execWriterT</span></span><span> </span><span class="annot"><span class="annottext">(WriterT (HashMap Name AnnotatedScalarType) m ()
 -&gt; m (HashMap Name AnnotatedScalarType))
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
-&gt; m (HashMap Name AnnotatedScalarType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(InputObjectTypeDefinition
 -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; [InputObjectTypeDefinition]
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
</span><a href="#local-6989586621688232872"><span class="hs-identifier hs-var">validateInputObject</span></a></span><span> </span><span class="annot"><span class="annottext">[InputObjectTypeDefinition]
</span><a href="#local-6989586621688232871"><span class="hs-identifier hs-var">inputObjectDefinitions</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span id="local-6989586621688232870"><span class="annot"><span class="annottext">HashMap Name AnnotatedObjectType
</span><a href="#local-6989586621688232870"><span class="hs-identifier hs-var">annotatedObjects</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="annottext">(AnnotatedObjectType -&gt; Name)
-&gt; [AnnotatedObjectType] -&gt; HashMap Name AnnotatedObjectType
forall k a. (Eq k, Hashable k) =&gt; (a -&gt; k) -&gt; [a] -&gt; HashMap k a
</span><a href="Hasura.Prelude.html#mapFromL"><span class="hs-identifier hs-var">mapFromL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unObjectTypeName"><span class="hs-identifier hs-var hs-var">unObjectTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectTypeName -&gt; Name)
-&gt; (AnnotatedObjectType -&gt; ObjectTypeName)
-&gt; AnnotatedObjectType
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition
  (GType, AnnotatedObjectFieldType)
  (TableInfo ('Postgres 'Vanilla))
  (ColumnInfo ('Postgres 'Vanilla))
-&gt; ObjectTypeName
forall a b c. ObjectTypeDefinition a b c -&gt; ObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_otdName"><span class="hs-identifier hs-var hs-var">_otdName</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectTypeDefinition
   (GType, AnnotatedObjectFieldType)
   (TableInfo ('Postgres 'Vanilla))
   (ColumnInfo ('Postgres 'Vanilla))
 -&gt; ObjectTypeName)
-&gt; (AnnotatedObjectType
    -&gt; ObjectTypeDefinition
         (GType, AnnotatedObjectFieldType)
         (TableInfo ('Postgres 'Vanilla))
         (ColumnInfo ('Postgres 'Vanilla)))
-&gt; AnnotatedObjectType
-&gt; ObjectTypeName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectType
-&gt; ObjectTypeDefinition
     (GType, AnnotatedObjectFieldType)
     (TableInfo ('Postgres 'Vanilla))
     (ColumnInfo ('Postgres 'Vanilla))
</span><a href="Hasura.RQL.Types.CustomTypes.html#_aotDefinition"><span class="hs-identifier hs-var hs-var">_aotDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>      </span><span class="annot"><span class="annottext">([AnnotatedObjectType] -&gt; HashMap Name AnnotatedObjectType)
-&gt; m [AnnotatedObjectType] -&gt; m (HashMap Name AnnotatedObjectType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ObjectType -&gt; m AnnotatedObjectType)
-&gt; [ObjectType] -&gt; m [AnnotatedObjectType]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">ObjectType -&gt; m AnnotatedObjectType
</span><a href="#local-6989586621688232862"><span class="hs-identifier hs-var">validateObject</span></a></span><span> </span><span class="annot"><span class="annottext">[ObjectType]
</span><a href="#local-6989586621688232861"><span class="hs-identifier hs-var">objectDefinitions</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232860"><span class="annot"><span class="annottext">scalarTypeMap :: HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232860"><span class="hs-identifier hs-var hs-var">scalarTypeMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><span class="annottext">(AnnotatedScalarType -&gt; NonObjectCustomType)
-&gt; HashMap Name AnnotatedScalarType
-&gt; HashMap Name NonObjectCustomType
forall v1 v2 k. (v1 -&gt; v2) -&gt; HashMap k v1 -&gt; HashMap k v2
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType -&gt; NonObjectCustomType
</span><a href="Hasura.RQL.Types.CustomTypes.html#NOCTScalar"><span class="hs-identifier hs-var">NOCTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap Name AnnotatedScalarType
 -&gt; HashMap Name NonObjectCustomType)
-&gt; HashMap Name AnnotatedScalarType
-&gt; HashMap Name NonObjectCustomType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-71"></span><span>          </span><span class="annot"><span class="annottext">(ScalarTypeDefinition -&gt; AnnotatedScalarType)
-&gt; HashMap Name ScalarTypeDefinition
-&gt; HashMap Name AnnotatedScalarType
forall v1 v2 k. (v1 -&gt; v2) -&gt; HashMap k v1 -&gt; HashMap k v2
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeDefinition -&gt; AnnotatedScalarType
</span><a href="Hasura.RQL.Types.CustomTypes.html#ASTCustom"><span class="hs-identifier hs-var">ASTCustom</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name ScalarTypeDefinition
</span><a href="#local-6989586621688232856"><span class="hs-identifier hs-var">scalarTypes</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name AnnotatedScalarType
-&gt; HashMap Name AnnotatedScalarType
-&gt; HashMap Name AnnotatedScalarType
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name AnnotatedScalarType
</span><a href="#local-6989586621688232874"><span class="hs-identifier hs-var">reusedScalars</span></a></span><span>
</span><span id="line-72"></span><span>      </span><span id="local-6989586621688232855"><span class="annot"><span class="annottext">enumTypeMap :: HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232855"><span class="hs-identifier hs-var hs-var">enumTypeMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EnumTypeDefinition -&gt; NonObjectCustomType)
-&gt; HashMap Name EnumTypeDefinition
-&gt; HashMap Name NonObjectCustomType
forall v1 v2 k. (v1 -&gt; v2) -&gt; HashMap k v1 -&gt; HashMap k v2
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition -&gt; NonObjectCustomType
</span><a href="Hasura.RQL.Types.CustomTypes.html#NOCTEnum"><span class="hs-identifier hs-var">NOCTEnum</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name EnumTypeDefinition
</span><a href="#local-6989586621688232853"><span class="hs-identifier hs-var">enumTypes</span></a></span><span>
</span><span id="line-73"></span><span>      </span><span id="local-6989586621688232852"><span class="annot"><span class="annottext">inputObjectTypeMap :: HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232852"><span class="hs-identifier hs-var hs-var">inputObjectTypeMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InputObjectTypeDefinition -&gt; NonObjectCustomType)
-&gt; HashMap Name InputObjectTypeDefinition
-&gt; HashMap Name NonObjectCustomType
forall v1 v2 k. (v1 -&gt; v2) -&gt; HashMap k v1 -&gt; HashMap k v2
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition -&gt; NonObjectCustomType
</span><a href="Hasura.RQL.Types.CustomTypes.html#NOCTInputObject"><span class="hs-identifier hs-var">NOCTInputObject</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name InputObjectTypeDefinition
</span><a href="#local-6989586621688232850"><span class="hs-identifier hs-var">inputObjectTypes</span></a></span><span>
</span><span id="line-74"></span><span>      </span><span id="local-6989586621688232849"><span class="annot"><span class="annottext">nonObjectTypeMap :: HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232849"><span class="hs-identifier hs-var hs-var">nonObjectTypeMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232860"><span class="hs-identifier hs-var">scalarTypeMap</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name NonObjectCustomType
-&gt; HashMap Name NonObjectCustomType
-&gt; HashMap Name NonObjectCustomType
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232855"><span class="hs-identifier hs-var">enumTypeMap</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name NonObjectCustomType
-&gt; HashMap Name NonObjectCustomType
-&gt; HashMap Name NonObjectCustomType
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232852"><span class="hs-identifier hs-var">inputObjectTypeMap</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><span class="annottext">AnnotatedCustomTypes -&gt; m AnnotatedCustomTypes
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedCustomTypes -&gt; m AnnotatedCustomTypes)
-&gt; AnnotatedCustomTypes -&gt; m AnnotatedCustomTypes
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name NonObjectCustomType
-&gt; HashMap Name AnnotatedObjectType -&gt; AnnotatedCustomTypes
</span><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedCustomTypes"><span class="hs-identifier hs-var">AnnotatedCustomTypes</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name NonObjectCustomType
</span><a href="#local-6989586621688232849"><span class="hs-identifier hs-var">nonObjectTypeMap</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name AnnotatedObjectType
</span><a href="#local-6989586621688232870"><span class="hs-identifier hs-var">annotatedObjects</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>    </span><span id="local-6989586621688232847"><span class="annot"><span class="annottext">sourceTables :: HashMap
  SourceName
  (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688232847"><span class="hs-identifier hs-var hs-var">sourceTables</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(BackendSourceInfo
 -&gt; Maybe (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))))
-&gt; SourceCache
-&gt; HashMap
     SourceName
     (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
forall v1 v2 k. (v1 -&gt; Maybe v2) -&gt; HashMap k v1 -&gt; HashMap k v2
</span><span class="hs-identifier hs-var">Map.mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
-&gt; Maybe (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
forall (b :: BackendType).
HasTag b =&gt;
BackendSourceInfo -&gt; Maybe (TableCache b)
</span><a href="Hasura.RQL.Types.Source.html#unsafeSourceTables"><span class="hs-identifier hs-var">unsafeSourceTables</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621688232885"><span class="hs-identifier hs-var">sources</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621688232871"><span class="annot"><span class="annottext">inputObjectDefinitions :: [InputObjectTypeDefinition]
</span><a href="#local-6989586621688232871"><span class="hs-identifier hs-var hs-var">inputObjectDefinitions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[InputObjectTypeDefinition]
-&gt; Maybe [InputObjectTypeDefinition] -&gt; [InputObjectTypeDefinition]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [InputObjectTypeDefinition] -&gt; [InputObjectTypeDefinition])
-&gt; Maybe [InputObjectTypeDefinition] -&gt; [InputObjectTypeDefinition]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypes -&gt; Maybe [InputObjectTypeDefinition]
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ctInputObjects"><span class="hs-identifier hs-var hs-var">_ctInputObjects</span></a></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232884"><span class="hs-identifier hs-var">customTypes</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span id="local-6989586621688232861"><span class="annot"><span class="annottext">objectDefinitions :: [ObjectType]
</span><a href="#local-6989586621688232861"><span class="hs-identifier hs-var hs-var">objectDefinitions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ObjectType] -&gt; Maybe [ObjectType] -&gt; [ObjectType]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [ObjectType] -&gt; [ObjectType])
-&gt; Maybe [ObjectType] -&gt; [ObjectType]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypes -&gt; Maybe [ObjectType]
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ctObjects"><span class="hs-identifier hs-var hs-var">_ctObjects</span></a></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232884"><span class="hs-identifier hs-var">customTypes</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span id="local-6989586621688232841"><span class="annot"><span class="annottext">scalarDefinitions :: [ScalarTypeDefinition]
</span><a href="#local-6989586621688232841"><span class="hs-identifier hs-var hs-var">scalarDefinitions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ScalarTypeDefinition]
-&gt; Maybe [ScalarTypeDefinition] -&gt; [ScalarTypeDefinition]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [ScalarTypeDefinition] -&gt; [ScalarTypeDefinition])
-&gt; Maybe [ScalarTypeDefinition] -&gt; [ScalarTypeDefinition]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypes -&gt; Maybe [ScalarTypeDefinition]
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ctScalars"><span class="hs-identifier hs-var hs-var">_ctScalars</span></a></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232884"><span class="hs-identifier hs-var">customTypes</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span id="local-6989586621688232875"><span class="annot"><span class="annottext">enumDefinitions :: [EnumTypeDefinition]
</span><a href="#local-6989586621688232875"><span class="hs-identifier hs-var hs-var">enumDefinitions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EnumTypeDefinition]
-&gt; Maybe [EnumTypeDefinition] -&gt; [EnumTypeDefinition]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [EnumTypeDefinition] -&gt; [EnumTypeDefinition])
-&gt; Maybe [EnumTypeDefinition] -&gt; [EnumTypeDefinition]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypes -&gt; Maybe [EnumTypeDefinition]
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ctEnums"><span class="hs-identifier hs-var hs-var">_ctEnums</span></a></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232884"><span class="hs-identifier hs-var">customTypes</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>    </span><span id="local-6989586621688232880"><span class="annot"><span class="annottext">duplicateTypes :: HashSet Name
</span><a href="#local-6989586621688232880"><span class="hs-identifier hs-var hs-var">duplicateTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; HashSet Name
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="Data.List.Extended.html#duplicates"><span class="hs-identifier hs-var">L.duplicates</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688232837"><span class="hs-identifier hs-var">allTypes</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621688232837"><span class="annot"><span class="annottext">allTypes :: [Name]
</span><a href="#local-6989586621688232837"><span class="hs-identifier hs-var hs-var">allTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-85"></span><span>      </span><span class="annot"><span class="annottext">(ScalarTypeDefinition -&gt; Name) -&gt; [ScalarTypeDefinition] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeDefinition -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#_stdName"><span class="hs-identifier hs-var hs-var">_stdName</span></a></span><span> </span><span class="annot"><span class="annottext">[ScalarTypeDefinition]
</span><a href="#local-6989586621688232841"><span class="hs-identifier hs-var">scalarDefinitions</span></a></span><span>
</span><span id="line-86"></span><span>        </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; [Name]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(EnumTypeDefinition -&gt; Name) -&gt; [EnumTypeDefinition] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnumTypeName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unEnumTypeName"><span class="hs-identifier hs-var hs-var">unEnumTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(EnumTypeName -&gt; Name)
-&gt; (EnumTypeDefinition -&gt; EnumTypeName)
-&gt; EnumTypeDefinition
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition -&gt; EnumTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_etdName"><span class="hs-identifier hs-var hs-var">_etdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EnumTypeDefinition]
</span><a href="#local-6989586621688232875"><span class="hs-identifier hs-var">enumDefinitions</span></a></span><span>
</span><span id="line-87"></span><span>        </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; [Name]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(InputObjectTypeDefinition -&gt; Name)
-&gt; [InputObjectTypeDefinition] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputObjectTypeName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unInputObjectTypeName"><span class="hs-identifier hs-var hs-var">unInputObjectTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(InputObjectTypeName -&gt; Name)
-&gt; (InputObjectTypeDefinition -&gt; InputObjectTypeName)
-&gt; InputObjectTypeDefinition
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition -&gt; InputObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iotdName"><span class="hs-identifier hs-var hs-var">_iotdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[InputObjectTypeDefinition]
</span><a href="#local-6989586621688232871"><span class="hs-identifier hs-var">inputObjectDefinitions</span></a></span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; [Name]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ObjectType -&gt; Name) -&gt; [ObjectType] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unObjectTypeName"><span class="hs-identifier hs-var hs-var">unObjectTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectTypeName -&gt; Name)
-&gt; (ObjectType -&gt; ObjectTypeName) -&gt; ObjectType -&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ObjectType -&gt; ObjectTypeName
forall a b c. ObjectTypeDefinition a b c -&gt; ObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_otdName"><span class="hs-identifier hs-var hs-var">_otdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ObjectType]
</span><a href="#local-6989586621688232861"><span class="hs-identifier hs-var">objectDefinitions</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>    </span><span id="local-6989586621688232856"><span class="annot"><span class="annottext">scalarTypes :: HashMap Name ScalarTypeDefinition
</span><a href="#local-6989586621688232856"><span class="hs-identifier hs-var hs-var">scalarTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-91"></span><span>      </span><span class="annot"><span class="annottext">(ScalarTypeDefinition -&gt; Name)
-&gt; [ScalarTypeDefinition] -&gt; HashMap Name ScalarTypeDefinition
forall k a. (Eq k, Hashable k) =&gt; (a -&gt; k) -&gt; [a] -&gt; HashMap k a
</span><a href="Hasura.Prelude.html#mapFromL"><span class="hs-identifier hs-var">mapFromL</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeDefinition -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#_stdName"><span class="hs-identifier hs-var hs-var">_stdName</span></a></span><span> </span><span class="annot"><span class="annottext">([ScalarTypeDefinition] -&gt; HashMap Name ScalarTypeDefinition)
-&gt; [ScalarTypeDefinition] -&gt; HashMap Name ScalarTypeDefinition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ScalarTypeDefinition]
</span><a href="#local-6989586621688232841"><span class="hs-identifier hs-var">scalarDefinitions</span></a></span><span> </span><span class="annot"><span class="annottext">[ScalarTypeDefinition]
-&gt; [ScalarTypeDefinition] -&gt; [ScalarTypeDefinition]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[ScalarTypeDefinition]
</span><a href="Hasura.RQL.Types.CustomTypes.html#defaultScalars"><span class="hs-identifier hs-var">defaultScalars</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>    </span><span id="local-6989586621688232853"><span class="annot"><span class="annottext">enumTypes :: HashMap Name EnumTypeDefinition
</span><a href="#local-6989586621688232853"><span class="hs-identifier hs-var hs-var">enumTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-94"></span><span>      </span><span class="annot"><span class="annottext">(EnumTypeDefinition -&gt; Name)
-&gt; [EnumTypeDefinition] -&gt; HashMap Name EnumTypeDefinition
forall k a. (Eq k, Hashable k) =&gt; (a -&gt; k) -&gt; [a] -&gt; HashMap k a
</span><a href="Hasura.Prelude.html#mapFromL"><span class="hs-identifier hs-var">mapFromL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnumTypeName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unEnumTypeName"><span class="hs-identifier hs-var hs-var">unEnumTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(EnumTypeName -&gt; Name)
-&gt; (EnumTypeDefinition -&gt; EnumTypeName)
-&gt; EnumTypeDefinition
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition -&gt; EnumTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_etdName"><span class="hs-identifier hs-var hs-var">_etdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EnumTypeDefinition]
</span><a href="#local-6989586621688232875"><span class="hs-identifier hs-var">enumDefinitions</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span>    </span><span id="local-6989586621688232830"><span class="annot"><span class="annottext">objectTypes :: HashMap Name ObjectType
</span><a href="#local-6989586621688232830"><span class="hs-identifier hs-var hs-var">objectTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-97"></span><span>      </span><span class="annot"><span class="annottext">(ObjectType -&gt; Name) -&gt; [ObjectType] -&gt; HashMap Name ObjectType
forall k a. (Eq k, Hashable k) =&gt; (a -&gt; k) -&gt; [a] -&gt; HashMap k a
</span><a href="Hasura.Prelude.html#mapFromL"><span class="hs-identifier hs-var">mapFromL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unObjectTypeName"><span class="hs-identifier hs-var hs-var">unObjectTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectTypeName -&gt; Name)
-&gt; (ObjectType -&gt; ObjectTypeName) -&gt; ObjectType -&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ObjectType -&gt; ObjectTypeName
forall a b c. ObjectTypeDefinition a b c -&gt; ObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_otdName"><span class="hs-identifier hs-var hs-var">_otdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ObjectType]
</span><a href="#local-6989586621688232861"><span class="hs-identifier hs-var">objectDefinitions</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>    </span><span id="local-6989586621688232850"><span class="annot"><span class="annottext">inputObjectTypes :: HashMap Name InputObjectTypeDefinition
</span><a href="#local-6989586621688232850"><span class="hs-identifier hs-var hs-var">inputObjectTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-100"></span><span>      </span><span class="annot"><span class="annottext">(InputObjectTypeDefinition -&gt; Name)
-&gt; [InputObjectTypeDefinition]
-&gt; HashMap Name InputObjectTypeDefinition
forall k a. (Eq k, Hashable k) =&gt; (a -&gt; k) -&gt; [a] -&gt; HashMap k a
</span><a href="Hasura.Prelude.html#mapFromL"><span class="hs-identifier hs-var">mapFromL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputObjectTypeName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unInputObjectTypeName"><span class="hs-identifier hs-var hs-var">unInputObjectTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(InputObjectTypeName -&gt; Name)
-&gt; (InputObjectTypeDefinition -&gt; InputObjectTypeName)
-&gt; InputObjectTypeDefinition
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition -&gt; InputObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iotdName"><span class="hs-identifier hs-var hs-var">_iotdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[InputObjectTypeDefinition]
</span><a href="#local-6989586621688232871"><span class="hs-identifier hs-var">inputObjectDefinitions</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><a href="#local-6989586621688232876"><span class="hs-identifier hs-type">validateEnum</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-103"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#EnumTypeDefinition"><span class="hs-identifier hs-type">EnumTypeDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688232898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>    </span><span id="local-6989586621688232876"><span class="annot"><span class="annottext">validateEnum :: EnumTypeDefinition -&gt; m ()
</span><a href="#local-6989586621688232876"><span class="hs-identifier hs-var hs-var">validateEnum</span></a></span></span><span> </span><span id="local-6989586621688232829"><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688232829"><span class="hs-identifier hs-var">enumDefinition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-105"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232828"><span class="annot"><span class="annottext">duplicateEnumValues :: HashSet EnumValue
</span><a href="#local-6989586621688232828"><span class="hs-identifier hs-var hs-var">duplicateEnumValues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-106"></span><span>            </span><span class="annot"><span class="annottext">[EnumValue] -&gt; HashSet EnumValue
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="Data.List.Extended.html#duplicates"><span class="hs-identifier hs-var">L.duplicates</span></a></span><span> </span><span class="annot"><span class="annottext">([EnumValue] -&gt; HashSet EnumValue)
-&gt; [EnumValue] -&gt; HashSet EnumValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-107"></span><span>              </span><span class="annot"><span class="annottext">(EnumValueDefinition -&gt; EnumValue)
-&gt; [EnumValueDefinition] -&gt; [EnumValue]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">EnumValueDefinition -&gt; EnumValue
</span><a href="Hasura.RQL.Types.CustomTypes.html#_evdValue"><span class="hs-identifier hs-var hs-var">_evdValue</span></a></span><span> </span><span class="annot"><span class="annottext">([EnumValueDefinition] -&gt; [EnumValue])
-&gt; [EnumValueDefinition] -&gt; [EnumValue]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-108"></span><span>                </span><span class="annot"><span class="annottext">NonEmpty EnumValueDefinition -&gt; [EnumValueDefinition]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty EnumValueDefinition -&gt; [EnumValueDefinition])
-&gt; NonEmpty EnumValueDefinition -&gt; [EnumValueDefinition]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-109"></span><span>                  </span><span class="annot"><span class="annottext">EnumTypeDefinition -&gt; NonEmpty EnumValueDefinition
</span><a href="Hasura.RQL.Types.CustomTypes.html#_etdValues"><span class="hs-identifier hs-var hs-var">_etdValues</span></a></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688232829"><span class="hs-identifier hs-var">enumDefinition</span></a></span><span>
</span><span id="line-110"></span><span>      </span><span class="hs-comment">-- check for duplicate field names</span><span>
</span><span id="line-111"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet EnumValue -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">HashSet EnumValue
</span><a href="#local-6989586621688232828"><span class="hs-identifier hs-var">duplicateEnumValues</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-112"></span><span>        </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m ()
forall e (m :: * -&gt; *). MonadValidate e m =&gt; e -&gt; m ()
</span><span class="hs-identifier hs-var">dispute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m ())
-&gt; [CustomTypeValidationError] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-113"></span><span>          </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-114"></span><span>            </span><span class="annot"><span class="annottext">EnumTypeName -&gt; HashSet EnumValue -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#DuplicateEnumValues"><span class="hs-identifier hs-var">DuplicateEnumValues</span></a></span><span>
</span><span id="line-115"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnumTypeDefinition -&gt; EnumTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_etdName"><span class="hs-identifier hs-var hs-var">_etdName</span></a></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688232829"><span class="hs-identifier hs-var">enumDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>              </span><span class="annot"><span class="annottext">HashSet EnumValue
</span><a href="#local-6989586621688232828"><span class="hs-identifier hs-var">duplicateEnumValues</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><a href="#local-6989586621688232872"><span class="hs-identifier hs-type">validateInputObject</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-119"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#InputObjectTypeDefinition"><span class="hs-identifier hs-type">InputObjectTypeDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">WriterT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map.HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedScalarType"><span class="hs-identifier hs-type">AnnotatedScalarType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688232898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>    </span><span id="local-6989586621688232872"><span class="annot"><span class="annottext">validateInputObject :: InputObjectTypeDefinition
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
</span><a href="#local-6989586621688232872"><span class="hs-identifier hs-var hs-var">validateInputObject</span></a></span></span><span> </span><span id="local-6989586621688232823"><span class="annot"><span class="annottext">InputObjectTypeDefinition
</span><a href="#local-6989586621688232823"><span class="hs-identifier hs-var">inputObjectDefinition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-121"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232822"><span class="annot"><span class="annottext">inputObjectTypeName :: InputObjectTypeName
</span><a href="#local-6989586621688232822"><span class="hs-identifier hs-var hs-var">inputObjectTypeName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition -&gt; InputObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iotdName"><span class="hs-identifier hs-var hs-var">_iotdName</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition
</span><a href="#local-6989586621688232823"><span class="hs-identifier hs-var">inputObjectDefinition</span></a></span><span>
</span><span id="line-122"></span><span>          </span><span id="local-6989586621688232821"><span class="annot"><span class="annottext">duplicateFieldNames :: HashSet InputObjectFieldName
</span><a href="#local-6989586621688232821"><span class="hs-identifier hs-var hs-var">duplicateFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>            </span><span class="annot"><span class="annottext">[InputObjectFieldName] -&gt; HashSet InputObjectFieldName
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="Data.List.Extended.html#duplicates"><span class="hs-identifier hs-var">L.duplicates</span></a></span><span> </span><span class="annot"><span class="annottext">([InputObjectFieldName] -&gt; HashSet InputObjectFieldName)
-&gt; [InputObjectFieldName] -&gt; HashSet InputObjectFieldName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-124"></span><span>              </span><span class="annot"><span class="annottext">(InputObjectFieldDefinition -&gt; InputObjectFieldName)
-&gt; [InputObjectFieldDefinition] -&gt; [InputObjectFieldName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">InputObjectFieldDefinition -&gt; InputObjectFieldName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iofdName"><span class="hs-identifier hs-var hs-var">_iofdName</span></a></span><span> </span><span class="annot"><span class="annottext">([InputObjectFieldDefinition] -&gt; [InputObjectFieldName])
-&gt; [InputObjectFieldDefinition] -&gt; [InputObjectFieldName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-125"></span><span>                </span><span class="annot"><span class="annottext">NonEmpty InputObjectFieldDefinition -&gt; [InputObjectFieldDefinition]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty InputObjectFieldDefinition
 -&gt; [InputObjectFieldDefinition])
-&gt; NonEmpty InputObjectFieldDefinition
-&gt; [InputObjectFieldDefinition]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-126"></span><span>                  </span><span class="annot"><span class="annottext">InputObjectTypeDefinition -&gt; NonEmpty InputObjectFieldDefinition
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iotdFields"><span class="hs-identifier hs-var hs-var">_iotdFields</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition
</span><a href="#local-6989586621688232823"><span class="hs-identifier hs-var">inputObjectDefinition</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span>      </span><span class="hs-comment">-- check for duplicate field names</span><span>
</span><span id="line-129"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet InputObjectFieldName -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">HashSet InputObjectFieldName
</span><a href="#local-6989586621688232821"><span class="hs-identifier hs-var">duplicateFieldNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WriterT (HashMap Name AnnotatedScalarType) m ()
 -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="annottext">[CustomTypeValidationError]
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall e (m :: * -&gt; *). MonadValidate e m =&gt; e -&gt; m ()
</span><span class="hs-identifier hs-var">dispute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError]
 -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; [CustomTypeValidationError]
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-131"></span><span>          </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-132"></span><span>            </span><span class="annot"><span class="annottext">InputObjectTypeName
-&gt; HashSet InputObjectFieldName -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#InputObjectDuplicateFields"><span class="hs-identifier hs-var">InputObjectDuplicateFields</span></a></span><span>
</span><span id="line-133"></span><span>              </span><span class="annot"><span class="annottext">InputObjectTypeName
</span><a href="#local-6989586621688232822"><span class="hs-identifier hs-var">inputObjectTypeName</span></a></span><span>
</span><span id="line-134"></span><span>              </span><span class="annot"><span class="annottext">HashSet InputObjectFieldName
</span><a href="#local-6989586621688232821"><span class="hs-identifier hs-var">duplicateFieldNames</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232817"><span class="annot"><span class="annottext">mapToSet :: HashMap Name v -&gt; HashSet Name
</span><a href="#local-6989586621688232817"><span class="hs-identifier hs-var hs-var">mapToSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; HashSet Name
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; HashSet Name)
-&gt; (HashMap Name v -&gt; [Name]) -&gt; HashMap Name v -&gt; HashSet Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name v -&gt; [Name]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span>
</span><span id="line-137"></span><span>          </span><span id="local-6989586621688232814"><span class="annot"><span class="annottext">inputTypes :: HashSet Name
</span><a href="#local-6989586621688232814"><span class="hs-identifier hs-var hs-var">inputTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-138"></span><span>            </span><span class="annot"><span class="annottext">HashMap Name ScalarTypeDefinition -&gt; HashSet Name
forall v. HashMap Name v -&gt; HashSet Name
</span><a href="#local-6989586621688232817"><span class="hs-identifier hs-var">mapToSet</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name ScalarTypeDefinition
</span><a href="#local-6989586621688232856"><span class="hs-identifier hs-var">scalarTypes</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Name -&gt; HashSet Name -&gt; HashSet Name
forall a. (Eq a, Hashable a) =&gt; HashSet a -&gt; HashSet a -&gt; HashSet a
</span><span class="hs-operator hs-var">`Set.union`</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name EnumTypeDefinition -&gt; HashSet Name
forall v. HashMap Name v -&gt; HashSet Name
</span><a href="#local-6989586621688232817"><span class="hs-identifier hs-var">mapToSet</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name EnumTypeDefinition
</span><a href="#local-6989586621688232853"><span class="hs-identifier hs-var">enumTypes</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Name -&gt; HashSet Name -&gt; HashSet Name
forall a. (Eq a, Hashable a) =&gt; HashSet a -&gt; HashSet a -&gt; HashSet a
</span><span class="hs-operator hs-var">`Set.union`</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name InputObjectTypeDefinition -&gt; HashSet Name
forall v. HashMap Name v -&gt; HashSet Name
</span><a href="#local-6989586621688232817"><span class="hs-identifier hs-var">mapToSet</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name InputObjectTypeDefinition
</span><a href="#local-6989586621688232850"><span class="hs-identifier hs-var">inputObjectTypes</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>      </span><span class="hs-comment">-- check that fields reference input types</span><span>
</span><span id="line-141"></span><span>      </span><span class="annot"><span class="annottext">NonEmpty InputObjectFieldDefinition
-&gt; (InputObjectFieldDefinition
    -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputObjectTypeDefinition -&gt; NonEmpty InputObjectFieldDefinition
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iotdFields"><span class="hs-identifier hs-var hs-var">_iotdFields</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition
</span><a href="#local-6989586621688232823"><span class="hs-identifier hs-var">inputObjectDefinition</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((InputObjectFieldDefinition
  -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
 -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; (InputObjectFieldDefinition
    -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688232811"><span class="annot"><span class="annottext">InputObjectFieldDefinition
</span><a href="#local-6989586621688232811"><span class="hs-identifier hs-var">inputObjectField</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232810"><span class="annot"><span class="annottext">fieldBaseType :: Name
</span><a href="#local-6989586621688232810"><span class="hs-identifier hs-var hs-var">fieldBaseType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><span class="hs-identifier hs-var">G.getBaseType</span></span><span> </span><span class="annot"><span class="annottext">(GType -&gt; Name) -&gt; GType -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GraphQLType -&gt; GType
</span><a href="Hasura.RQL.Types.CustomTypes.html#unGraphQLType"><span class="hs-identifier hs-var hs-var">unGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">(GraphQLType -&gt; GType) -&gt; GraphQLType -&gt; GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">InputObjectFieldDefinition -&gt; GraphQLType
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iofdType"><span class="hs-identifier hs-var hs-var">_iofdType</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectFieldDefinition
</span><a href="#local-6989586621688232811"><span class="hs-identifier hs-var">inputObjectField</span></a></span><span>
</span><span id="line-143"></span><span>        </span><span class="hs-keyword">if</span><span>
</span><span id="line-144"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; HashSet Name -&gt; Bool
forall a. (Eq a, Hashable a) =&gt; a -&gt; HashSet a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232810"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232814"><span class="hs-identifier hs-var">inputTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688232805"><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621688232805"><span class="hs-identifier hs-var">scalarInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
-&gt; Name
-&gt; (PGScalarType -&gt; AnnotatedScalarType)
-&gt; Maybe AnnotatedScalarType
forall a.
DMap BackendTag ScalarSet -&gt; Name -&gt; (PGScalarType -&gt; a) -&gt; Maybe a
</span><a href="Hasura.RQL.DDL.CustomTypes.html#lookupPGScalar"><span class="hs-identifier hs-var">lookupPGScalar</span></a></span><span> </span><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
</span><a href="#local-6989586621688232883"><span class="hs-identifier hs-var">allScalars</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232810"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; ScalarType ('Postgres 'Vanilla) -&gt; AnnotatedScalarType
</span><a href="Hasura.RQL.Types.CustomTypes.html#ASTReusedScalar"><span class="hs-identifier hs-var">ASTReusedScalar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232810"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-146"></span><span>              </span><span class="annot"><span class="annottext">HashMap Name AnnotatedScalarType
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><span class="hs-identifier hs-var">tell</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Name AnnotatedScalarType
 -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; HashMap Name AnnotatedScalarType
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; AnnotatedScalarType -&gt; HashMap Name AnnotatedScalarType
forall k v. Hashable k =&gt; k -&gt; v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232810"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType
</span><a href="#local-6989586621688232805"><span class="hs-identifier hs-var">scalarInfo</span></a></span><span>
</span><span id="line-147"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-148"></span><span>              </span><span class="annot"><span class="annottext">[CustomTypeValidationError]
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall e (m :: * -&gt; *) a. MonadValidate e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">refute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError]
 -&gt; WriterT (HashMap Name AnnotatedScalarType) m ())
-&gt; [CustomTypeValidationError]
-&gt; WriterT (HashMap Name AnnotatedScalarType) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-149"></span><span>                </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-150"></span><span>                  </span><span class="annot"><span class="annottext">InputObjectTypeName
-&gt; InputObjectFieldName -&gt; Name -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#InputObjectFieldTypeDoesNotExist"><span class="hs-identifier hs-var">InputObjectFieldTypeDoesNotExist</span></a></span><span>
</span><span id="line-151"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputObjectTypeDefinition -&gt; InputObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iotdName"><span class="hs-identifier hs-var hs-var">_iotdName</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition
</span><a href="#local-6989586621688232823"><span class="hs-identifier hs-var">inputObjectDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputObjectFieldDefinition -&gt; InputObjectFieldName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_iofdName"><span class="hs-identifier hs-var hs-var">_iofdName</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectFieldDefinition
</span><a href="#local-6989586621688232811"><span class="hs-identifier hs-var">inputObjectField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>                    </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232810"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><a href="#local-6989586621688232862"><span class="hs-identifier hs-type">validateObject</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-156"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectType"><span class="hs-identifier hs-type">ObjectType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688232898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedObjectType"><span class="hs-identifier hs-type">AnnotatedObjectType</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621688232862"><span class="annot"><span class="annottext">validateObject :: ObjectType -&gt; m AnnotatedObjectType
</span><a href="#local-6989586621688232862"><span class="hs-identifier hs-var hs-var">validateObject</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeDefinition"><span class="hs-identifier hs-type">ObjectTypeDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688232795"><span id="local-6989586621688232796"><span id="local-6989586621688232797"><span id="local-6989586621688232798"><span class="annot"><span class="annottext">Maybe (NonEmpty (TypeRelationship QualifiedTable PGCol))
Maybe Description
NonEmpty (ObjectFieldDefinition GraphQLType)
ObjectTypeName
_otdRelationships :: forall a b c.
ObjectTypeDefinition a b c
-&gt; Maybe (NonEmpty (TypeRelationship b c))
_otdFields :: forall a b c.
ObjectTypeDefinition a b c -&gt; NonEmpty (ObjectFieldDefinition a)
_otdDescription :: forall a b c. ObjectTypeDefinition a b c -&gt; Maybe Description
_otdRelationships :: Maybe (NonEmpty (TypeRelationship QualifiedTable PGCol))
_otdFields :: NonEmpty (ObjectFieldDefinition GraphQLType)
_otdDescription :: Maybe Description
_otdName :: ObjectTypeName
_otdName :: forall a b c. ObjectTypeDefinition a b c -&gt; ObjectTypeName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_otdRelationships"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-158"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232791"><span class="annot"><span class="annottext">fieldNames :: [Name]
</span><a href="#local-6989586621688232791"><span class="hs-identifier hs-var hs-var">fieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-159"></span><span>            </span><span class="annot"><span class="annottext">(ObjectFieldDefinition GraphQLType -&gt; Name)
-&gt; [ObjectFieldDefinition GraphQLType] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ObjectFieldName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unObjectFieldName"><span class="hs-identifier hs-var hs-var">unObjectFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectFieldName -&gt; Name)
-&gt; (ObjectFieldDefinition GraphQLType -&gt; ObjectFieldName)
-&gt; ObjectFieldDefinition GraphQLType
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType -&gt; ObjectFieldName
forall a. ObjectFieldDefinition a -&gt; ObjectFieldName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ofdName"><span class="hs-identifier hs-var hs-var">_ofdName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([ObjectFieldDefinition GraphQLType] -&gt; [Name])
-&gt; [ObjectFieldDefinition GraphQLType] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-160"></span><span>              </span><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition GraphQLType)
-&gt; [ObjectFieldDefinition GraphQLType]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition GraphQLType)
</span><a href="#local-6989586621688232796"><span class="hs-identifier hs-var">_otdFields</span></a></span><span>
</span><span id="line-161"></span><span>          </span><span id="local-6989586621688232788"><span class="annot"><span class="annottext">relNames :: [Name]
</span><a href="#local-6989586621688232788"><span class="hs-identifier hs-var hs-var">relNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-162"></span><span>            </span><span class="annot"><span class="annottext">[Name]
-&gt; (NonEmpty (TypeRelationship QualifiedTable PGCol) -&gt; [Name])
-&gt; Maybe (NonEmpty (TypeRelationship QualifiedTable PGCol))
-&gt; [Name]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span>
</span><span id="line-163"></span><span>              </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-164"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeRelationship QualifiedTable PGCol -&gt; Name)
-&gt; [TypeRelationship QualifiedTable PGCol] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelationshipName -&gt; Name
</span><a href="Hasura.RQL.Types.CustomTypes.html#unRelationshipName"><span class="hs-identifier hs-var hs-var">unRelationshipName</span></a></span><span> </span><span class="annot"><span class="annottext">(RelationshipName -&gt; Name)
-&gt; (TypeRelationship QualifiedTable PGCol -&gt; RelationshipName)
-&gt; TypeRelationship QualifiedTable PGCol
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeRelationship QualifiedTable PGCol -&gt; RelationshipName
forall t f. TypeRelationship t f -&gt; RelationshipName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_trName"><span class="hs-identifier hs-var hs-var">_trName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([TypeRelationship QualifiedTable PGCol] -&gt; [Name])
-&gt; (NonEmpty (TypeRelationship QualifiedTable PGCol)
    -&gt; [TypeRelationship QualifiedTable PGCol])
-&gt; NonEmpty (TypeRelationship QualifiedTable PGCol)
-&gt; [Name]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (TypeRelationship QualifiedTable PGCol)
-&gt; [TypeRelationship QualifiedTable PGCol]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>              </span><span class="annot"><span class="annottext">Maybe (NonEmpty (TypeRelationship QualifiedTable PGCol))
</span><a href="#local-6989586621688232795"><span class="hs-identifier hs-var">_otdRelationships</span></a></span><span>
</span><span id="line-166"></span><span>          </span><span id="local-6989586621688232784"><span class="annot"><span class="annottext">duplicateFieldNames :: HashSet Name
</span><a href="#local-6989586621688232784"><span class="hs-identifier hs-var hs-var">duplicateFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; HashSet Name
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="Data.List.Extended.html#duplicates"><span class="hs-identifier hs-var">L.duplicates</span></a></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; HashSet Name) -&gt; [Name] -&gt; HashSet Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688232791"><span class="hs-identifier hs-var">fieldNames</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; [Name]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688232788"><span class="hs-identifier hs-var">relNames</span></a></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>      </span><span class="hs-comment">-- check for duplicate field names</span><span>
</span><span id="line-169"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet Name -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232784"><span class="hs-identifier hs-var">duplicateFieldNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m ()
forall e (m :: * -&gt; *). MonadValidate e m =&gt; e -&gt; m ()
</span><span class="hs-identifier hs-var">dispute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m ())
-&gt; [CustomTypeValidationError] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; HashSet Name -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectDuplicateFields"><span class="hs-identifier hs-var">ObjectDuplicateFields</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232784"><span class="hs-identifier hs-var">duplicateFieldNames</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>      </span><span id="local-6989586621688232782"><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
</span><a href="#local-6989586621688232782"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition GraphQLType)
-&gt; (ObjectFieldDefinition GraphQLType
    -&gt; m (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)))
-&gt; m (NonEmpty
        (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition GraphQLType)
</span><a href="#local-6989586621688232796"><span class="hs-identifier hs-var">_otdFields</span></a></span><span> </span><span class="annot"><span class="annottext">((ObjectFieldDefinition GraphQLType
  -&gt; m (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)))
 -&gt; m (NonEmpty
         (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))))
-&gt; (ObjectFieldDefinition GraphQLType
    -&gt; m (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)))
-&gt; m (NonEmpty
        (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688232780"><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType
</span><a href="#local-6989586621688232780"><span class="hs-identifier hs-var">objectField</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232779"><span class="annot"><span class="annottext">fieldName :: ObjectFieldName
</span><a href="#local-6989586621688232779"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType -&gt; ObjectFieldName
forall a. ObjectFieldDefinition a -&gt; ObjectFieldName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ofdName"><span class="hs-identifier hs-var hs-var">_ofdName</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType
</span><a href="#local-6989586621688232780"><span class="hs-identifier hs-var">objectField</span></a></span><span>
</span><span id="line-174"></span><span>        </span><span class="hs-comment">-- check that arguments are not defined</span><span>
</span><span id="line-175"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Value -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Bool) -&gt; Maybe Value -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType -&gt; Maybe Value
forall a. ObjectFieldDefinition a -&gt; Maybe Value
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ofdArguments"><span class="hs-identifier hs-var hs-var">_ofdArguments</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType
</span><a href="#local-6989586621688232780"><span class="hs-identifier hs-var">objectField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-176"></span><span>          </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m ()
forall e (m :: * -&gt; *). MonadValidate e m =&gt; e -&gt; m ()
</span><span class="hs-identifier hs-var">dispute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m ())
-&gt; [CustomTypeValidationError] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-177"></span><span>            </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-178"></span><span>              </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; ObjectFieldName -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldArgumentsNotAllowed"><span class="hs-identifier hs-var">ObjectFieldArgumentsNotAllowed</span></a></span><span>
</span><span id="line-179"></span><span>                </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span>
</span><span id="line-180"></span><span>                </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232779"><span class="hs-identifier hs-var">fieldName</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>        </span><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType
-&gt; (GraphQLType -&gt; m (GType, AnnotatedObjectFieldType))
-&gt; m (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldDefinition GraphQLType
</span><a href="#local-6989586621688232780"><span class="hs-identifier hs-var">objectField</span></a></span><span> </span><span class="annot"><span class="annottext">((GraphQLType -&gt; m (GType, AnnotatedObjectFieldType))
 -&gt; m (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)))
-&gt; (GraphQLType -&gt; m (GType, AnnotatedObjectFieldType))
-&gt; m (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688232773"><span class="annot"><span class="annottext">GraphQLType
</span><a href="#local-6989586621688232773"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-183"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232772"><span class="annot"><span class="annottext">fieldBaseType :: Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var hs-var">fieldBaseType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><span class="hs-identifier hs-var">G.getBaseType</span></span><span> </span><span class="annot"><span class="annottext">(GType -&gt; Name) -&gt; GType -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GraphQLType -&gt; GType
</span><a href="Hasura.RQL.Types.CustomTypes.html#unGraphQLType"><span class="hs-identifier hs-var hs-var">unGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLType
</span><a href="#local-6989586621688232773"><span class="hs-identifier hs-var">fieldType</span></a></span><span>
</span><span id="line-184"></span><span>          </span><span id="local-6989586621688232771"><span class="annot"><span class="annottext">AnnotatedObjectFieldType
</span><a href="#local-6989586621688232771"><span class="hs-identifier hs-var">annotatedObjectFieldType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-185"></span><span>            </span><span class="hs-keyword">if</span><span>
</span><span id="line-186"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688232770"><span class="annot"><span class="annottext">ScalarTypeDefinition
</span><a href="#local-6989586621688232770"><span class="hs-identifier hs-var">scalarDef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; HashMap Name ScalarTypeDefinition -&gt; Maybe ScalarTypeDefinition
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name ScalarTypeDefinition
</span><a href="#local-6989586621688232856"><span class="hs-identifier hs-var">scalarTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-187"></span><span>                  </span><span class="annot"><span class="annottext">AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType)
-&gt; AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedScalarType -&gt; AnnotatedObjectFieldType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AOFTScalar"><span class="hs-identifier hs-var">AOFTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedScalarType -&gt; AnnotatedObjectFieldType)
-&gt; AnnotatedScalarType -&gt; AnnotatedObjectFieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeDefinition -&gt; AnnotatedScalarType
</span><a href="Hasura.RQL.Types.CustomTypes.html#ASTCustom"><span class="hs-identifier hs-var">ASTCustom</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeDefinition
</span><a href="#local-6989586621688232770"><span class="hs-identifier hs-var">scalarDef</span></a></span><span>
</span><span id="line-188"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688232767"><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688232767"><span class="hs-identifier hs-var">enumDef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; HashMap Name EnumTypeDefinition -&gt; Maybe EnumTypeDefinition
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name EnumTypeDefinition
</span><a href="#local-6989586621688232853"><span class="hs-identifier hs-var">enumTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-189"></span><span>                  </span><span class="annot"><span class="annottext">AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType)
-&gt; AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition -&gt; AnnotatedObjectFieldType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AOFTEnum"><span class="hs-identifier hs-var">AOFTEnum</span></a></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688232767"><span class="hs-identifier hs-var">enumDef</span></a></span><span>
</span><span id="line-190"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; HashMap Name ObjectType -&gt; Bool
forall k a. (Eq k, Hashable k) =&gt; k -&gt; HashMap k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.member</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name ObjectType
</span><a href="#local-6989586621688232830"><span class="hs-identifier hs-var">objectTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>                  </span><span class="annot"><span class="annottext">AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType)
-&gt; AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; AnnotatedObjectFieldType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AOFTObject"><span class="hs-identifier hs-var">AOFTObject</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span>
</span><span id="line-192"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688232763"><span class="annot"><span class="annottext">AnnotatedObjectFieldType
</span><a href="#local-6989586621688232763"><span class="hs-identifier hs-var">scalarInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
-&gt; Name
-&gt; (PGScalarType -&gt; AnnotatedObjectFieldType)
-&gt; Maybe AnnotatedObjectFieldType
forall a.
DMap BackendTag ScalarSet -&gt; Name -&gt; (PGScalarType -&gt; a) -&gt; Maybe a
</span><a href="Hasura.RQL.DDL.CustomTypes.html#lookupPGScalar"><span class="hs-identifier hs-var">lookupPGScalar</span></a></span><span> </span><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
</span><a href="#local-6989586621688232883"><span class="hs-identifier hs-var">allScalars</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotatedScalarType -&gt; AnnotatedObjectFieldType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AOFTScalar"><span class="hs-identifier hs-var">AOFTScalar</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedScalarType -&gt; AnnotatedObjectFieldType)
-&gt; (PGScalarType -&gt; AnnotatedScalarType)
-&gt; PGScalarType
-&gt; AnnotatedObjectFieldType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; ScalarType ('Postgres 'Vanilla) -&gt; AnnotatedScalarType
</span><a href="Hasura.RQL.Types.CustomTypes.html#ASTReusedScalar"><span class="hs-identifier hs-var">ASTReusedScalar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-193"></span><span>                  </span><span class="annot"><span class="annottext">AnnotatedObjectFieldType -&gt; m AnnotatedObjectFieldType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectFieldType
</span><a href="#local-6989586621688232763"><span class="hs-identifier hs-var">scalarInfo</span></a></span><span>
</span><span id="line-194"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-195"></span><span>                  </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m AnnotatedObjectFieldType
forall e (m :: * -&gt; *) a. MonadValidate e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">refute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m AnnotatedObjectFieldType)
-&gt; [CustomTypeValidationError] -&gt; m AnnotatedObjectFieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-196"></span><span>                    </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-197"></span><span>                      </span><span class="annot"><span class="annottext">ObjectTypeName
-&gt; ObjectFieldName -&gt; Name -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldTypeDoesNotExist"><span class="hs-identifier hs-var">ObjectFieldTypeDoesNotExist</span></a></span><span>
</span><span id="line-198"></span><span>                        </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span>
</span><span id="line-199"></span><span>                        </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232779"><span class="hs-identifier hs-var">fieldName</span></a></span><span>
</span><span id="line-200"></span><span>                        </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232772"><span class="hs-identifier hs-var">fieldBaseType</span></a></span><span>
</span><span id="line-201"></span><span>          </span><span class="annot"><span class="annottext">(GType, AnnotatedObjectFieldType)
-&gt; m (GType, AnnotatedObjectFieldType)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GraphQLType -&gt; GType
</span><a href="Hasura.RQL.Types.CustomTypes.html#unGraphQLType"><span class="hs-identifier hs-var hs-var">unGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLType
</span><a href="#local-6989586621688232773"><span class="hs-identifier hs-var">fieldType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AnnotatedObjectFieldType
</span><a href="#local-6989586621688232771"><span class="hs-identifier hs-var">annotatedObjectFieldType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232761"><span class="annot"><span class="annottext">fieldsMap :: HashMap ObjectFieldName GType
</span><a href="#local-6989586621688232761"><span class="hs-identifier hs-var hs-var">fieldsMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-204"></span><span>            </span><span class="annot"><span class="annottext">[(ObjectFieldName, GType)] -&gt; HashMap ObjectFieldName GType
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(ObjectFieldName, GType)] -&gt; HashMap ObjectFieldName GType)
-&gt; [(ObjectFieldName, GType)] -&gt; HashMap ObjectFieldName GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-205"></span><span>              </span><span class="annot"><span class="annottext">(ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
 -&gt; (ObjectFieldName, GType))
-&gt; [ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
-&gt; [(ObjectFieldName, GType)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
-&gt; ObjectFieldName
forall a. ObjectFieldDefinition a -&gt; ObjectFieldName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ofdName"><span class="hs-identifier hs-var hs-var">_ofdName</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
 -&gt; ObjectFieldName)
-&gt; (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
    -&gt; GType)
-&gt; ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
-&gt; (ObjectFieldName, GType)
forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><span class="hs-operator hs-var">&amp;&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GType, AnnotatedObjectFieldType) -&gt; GType
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((GType, AnnotatedObjectFieldType) -&gt; GType)
-&gt; (ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
    -&gt; (GType, AnnotatedObjectFieldType))
-&gt; ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
-&gt; GType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldDefinition (GType, AnnotatedObjectFieldType)
-&gt; (GType, AnnotatedObjectFieldType)
forall a. ObjectFieldDefinition a -&gt; a
</span><a href="Hasura.RQL.Types.CustomTypes.html#_ofdType"><span class="hs-identifier hs-var hs-var">_ofdType</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
 -&gt; [(ObjectFieldName, GType)])
-&gt; [ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
-&gt; [(ObjectFieldName, GType)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
-&gt; [ObjectFieldDefinition (GType, AnnotatedObjectFieldType)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
</span><a href="#local-6989586621688232782"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span>      </span><span id="local-6989586621688232757"><span class="annot"><span class="annottext">Maybe
  (NonEmpty
     (TypeRelationship
        (TableInfo ('Postgres 'Vanilla))
        (ColumnInfo ('Postgres 'Vanilla))))
</span><a href="#local-6989586621688232757"><span class="hs-identifier hs-var">annotatedRelationships</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (TypeRelationship QualifiedTable PGCol))
-&gt; (NonEmpty (TypeRelationship QualifiedTable PGCol)
    -&gt; m (NonEmpty
            (TypeRelationship
               (TableInfo ('Postgres 'Vanilla))
               (ColumnInfo ('Postgres 'Vanilla)))))
-&gt; m (Maybe
        (NonEmpty
           (TypeRelationship
              (TableInfo ('Postgres 'Vanilla))
              (ColumnInfo ('Postgres 'Vanilla)))))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (TypeRelationship QualifiedTable PGCol))
</span><a href="#local-6989586621688232795"><span class="hs-identifier hs-var">_otdRelationships</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmpty (TypeRelationship QualifiedTable PGCol)
  -&gt; m (NonEmpty
          (TypeRelationship
             (TableInfo ('Postgres 'Vanilla))
             (ColumnInfo ('Postgres 'Vanilla)))))
 -&gt; m (Maybe
         (NonEmpty
            (TypeRelationship
               (TableInfo ('Postgres 'Vanilla))
               (ColumnInfo ('Postgres 'Vanilla))))))
-&gt; (NonEmpty (TypeRelationship QualifiedTable PGCol)
    -&gt; m (NonEmpty
            (TypeRelationship
               (TableInfo ('Postgres 'Vanilla))
               (ColumnInfo ('Postgres 'Vanilla)))))
-&gt; m (Maybe
        (NonEmpty
           (TypeRelationship
              (TableInfo ('Postgres 'Vanilla))
              (ColumnInfo ('Postgres 'Vanilla)))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688232756"><span class="annot"><span class="annottext">NonEmpty (TypeRelationship QualifiedTable PGCol)
</span><a href="#local-6989586621688232756"><span class="hs-identifier hs-var">relationships</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232755"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688232755"><span class="hs-identifier hs-var">headSource</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">NE.:|</span></span><span> </span><span id="local-6989586621688232753"><span class="annot"><span class="annottext">[SourceName]
</span><a href="#local-6989586621688232753"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeRelationship QualifiedTable PGCol -&gt; SourceName
forall t f. TypeRelationship t f -&gt; SourceName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_trSource"><span class="hs-identifier hs-var hs-var">_trSource</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeRelationship QualifiedTable PGCol -&gt; SourceName)
-&gt; NonEmpty (TypeRelationship QualifiedTable PGCol)
-&gt; NonEmpty SourceName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (TypeRelationship QualifiedTable PGCol)
</span><a href="#local-6989586621688232756"><span class="hs-identifier hs-var">relationships</span></a></span><span>
</span><span id="line-209"></span><span>        </span><span class="hs-comment">-- this check is needed to ensure that custom type relationships are all defined to a single source</span><span>
</span><span id="line-210"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SourceName -&gt; Bool) -&gt; [SourceName] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688232755"><span class="hs-identifier hs-var">headSource</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; SourceName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SourceName]
</span><a href="#local-6989586621688232753"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-211"></span><span>          </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m ()
forall e (m :: * -&gt; *) a. MonadValidate e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">refute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m ())
-&gt; [CustomTypeValidationError] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipMultiSources"><span class="hs-identifier hs-var">ObjectRelationshipMultiSources</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span>
</span><span id="line-212"></span><span>        </span><span class="annot"><span class="annottext">NonEmpty (TypeRelationship QualifiedTable PGCol)
-&gt; (TypeRelationship QualifiedTable PGCol
    -&gt; m (TypeRelationship
            (TableInfo ('Postgres 'Vanilla))
            (ColumnInfo ('Postgres 'Vanilla))))
-&gt; m (NonEmpty
        (TypeRelationship
           (TableInfo ('Postgres 'Vanilla))
           (ColumnInfo ('Postgres 'Vanilla))))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (TypeRelationship QualifiedTable PGCol)
</span><a href="#local-6989586621688232756"><span class="hs-identifier hs-var">relationships</span></a></span><span> </span><span class="annot"><span class="annottext">((TypeRelationship QualifiedTable PGCol
  -&gt; m (TypeRelationship
          (TableInfo ('Postgres 'Vanilla))
          (ColumnInfo ('Postgres 'Vanilla))))
 -&gt; m (NonEmpty
         (TypeRelationship
            (TableInfo ('Postgres 'Vanilla))
            (ColumnInfo ('Postgres 'Vanilla)))))
-&gt; (TypeRelationship QualifiedTable PGCol
    -&gt; m (TypeRelationship
            (TableInfo ('Postgres 'Vanilla))
            (ColumnInfo ('Postgres 'Vanilla))))
-&gt; m (NonEmpty
        (TypeRelationship
           (TableInfo ('Postgres 'Vanilla))
           (ColumnInfo ('Postgres 'Vanilla))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#TypeRelationship"><span class="hs-identifier hs-type">TypeRelationship</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688232744"><span id="local-6989586621688232745"><span id="local-6989586621688232746"><span id="local-6989586621688232747"><span id="local-6989586621688232748"><span class="annot"><span class="annottext">HashMap ObjectFieldName PGCol
SourceName
RelType
QualifiedTable
RelationshipName
_trFieldMapping :: forall t f. TypeRelationship t f -&gt; HashMap ObjectFieldName f
_trRemoteTable :: forall t f. TypeRelationship t f -&gt; t
_trType :: forall t f. TypeRelationship t f -&gt; RelType
_trFieldMapping :: HashMap ObjectFieldName PGCol
_trRemoteTable :: QualifiedTable
_trSource :: SourceName
_trType :: RelType
_trName :: RelationshipName
_trSource :: forall t f. TypeRelationship t f -&gt; SourceName
_trName :: forall t f. TypeRelationship t f -&gt; RelationshipName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_trFieldMapping"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-213"></span><span>          </span><span class="hs-comment">--check that the table exists</span><span>
</span><span id="line-214"></span><span>          </span><span id="local-6989586621688232740"><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688232740"><span class="hs-identifier hs-var">remoteTableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-215"></span><span>            </span><span class="annot"><span class="annottext">Maybe (TableInfo ('Postgres 'Vanilla))
-&gt; m (TableInfo ('Postgres 'Vanilla))
-&gt; m (TableInfo ('Postgres 'Vanilla))
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
-&gt; HashMap
     SourceName
     (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
-&gt; Maybe (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688232755"><span class="hs-identifier hs-var">headSource</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap
  SourceName
  (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688232847"><span class="hs-identifier hs-var">sourceTables</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
-&gt; (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
    -&gt; Maybe (TableInfo ('Postgres 'Vanilla)))
-&gt; Maybe (TableInfo ('Postgres 'Vanilla))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
-&gt; Maybe (TableInfo ('Postgres 'Vanilla))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688232745"><span class="hs-identifier hs-var">_trRemoteTable</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (TableInfo ('Postgres 'Vanilla))
 -&gt; m (TableInfo ('Postgres 'Vanilla)))
-&gt; m (TableInfo ('Postgres 'Vanilla))
-&gt; m (TableInfo ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-216"></span><span>              </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m (TableInfo ('Postgres 'Vanilla))
forall e (m :: * -&gt; *) a. MonadValidate e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">refute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m (TableInfo ('Postgres 'Vanilla)))
-&gt; [CustomTypeValidationError]
-&gt; m (TableInfo ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-217"></span><span>                </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-218"></span><span>                  </span><span class="annot"><span class="annottext">ObjectTypeName
-&gt; RelationshipName -&gt; QualifiedTable -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipTableDoesNotExist"><span class="hs-identifier hs-var">ObjectRelationshipTableDoesNotExist</span></a></span><span>
</span><span id="line-219"></span><span>                    </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span>
</span><span id="line-220"></span><span>                    </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232748"><span class="hs-identifier hs-var">_trName</span></a></span><span>
</span><span id="line-221"></span><span>                    </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688232745"><span class="hs-identifier hs-var">_trRemoteTable</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>          </span><span class="hs-comment">-- check that the column mapping is sane</span><span>
</span><span id="line-224"></span><span>          </span><span id="local-6989586621688232737"><span class="annot"><span class="annottext">HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))
</span><a href="#local-6989586621688232737"><span class="hs-identifier hs-var">annotatedFieldMapping</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((ObjectFieldName -&gt; PGCol -&gt; m (ColumnInfo ('Postgres 'Vanilla)))
 -&gt; HashMap ObjectFieldName PGCol
 -&gt; m (HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))))
-&gt; HashMap ObjectFieldName PGCol
-&gt; (ObjectFieldName
    -&gt; PGCol -&gt; m (ColumnInfo ('Postgres 'Vanilla)))
-&gt; m (HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla)))
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(ObjectFieldName -&gt; PGCol -&gt; m (ColumnInfo ('Postgres 'Vanilla)))
-&gt; HashMap ObjectFieldName PGCol
-&gt; m (HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla)))
forall (f :: * -&gt; *) k v1 v2.
Applicative f =&gt;
(k -&gt; v1 -&gt; f v2) -&gt; HashMap k v1 -&gt; f (HashMap k v2)
</span><span class="hs-identifier hs-var">Map.traverseWithKey</span></span><span> </span><span class="annot"><span class="annottext">HashMap ObjectFieldName PGCol
</span><a href="#local-6989586621688232744"><span class="hs-identifier hs-var">_trFieldMapping</span></a></span><span> </span><span class="annot"><span class="annottext">((ObjectFieldName -&gt; PGCol -&gt; m (ColumnInfo ('Postgres 'Vanilla)))
 -&gt; m (HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))))
-&gt; (ObjectFieldName
    -&gt; PGCol -&gt; m (ColumnInfo ('Postgres 'Vanilla)))
-&gt; m (HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-225"></span><span>            </span><span class="hs-glyph">\</span><span id="local-6989586621688232734"><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232734"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688232733"><span class="annot"><span class="annottext">PGCol
</span><a href="#local-6989586621688232733"><span class="hs-identifier hs-var">columnName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-226"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ObjectFieldName -&gt; HashMap ObjectFieldName GType -&gt; Maybe GType
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232734"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap ObjectFieldName GType
</span><a href="#local-6989586621688232761"><span class="hs-identifier hs-var">fieldsMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-227"></span><span>                </span><span class="annot"><span class="annottext">Maybe GType
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-228"></span><span>                  </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m ()
forall e (m :: * -&gt; *). MonadValidate e m =&gt; e -&gt; m ()
</span><span class="hs-identifier hs-var">dispute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m ())
-&gt; [CustomTypeValidationError] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-229"></span><span>                    </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-230"></span><span>                      </span><span class="annot"><span class="annottext">ObjectTypeName
-&gt; RelationshipName -&gt; ObjectFieldName -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipFieldDoesNotExist"><span class="hs-identifier hs-var">ObjectRelationshipFieldDoesNotExist</span></a></span><span>
</span><span id="line-231"></span><span>                        </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span>
</span><span id="line-232"></span><span>                        </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232748"><span class="hs-identifier hs-var">_trName</span></a></span><span>
</span><span id="line-233"></span><span>                        </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232734"><span class="hs-identifier hs-var">fieldName</span></a></span><span>
</span><span id="line-234"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688232731"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688232731"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-235"></span><span>                  </span><span class="hs-comment">-- the field should be a non-list type scalar</span><span>
</span><span id="line-236"></span><span>                  </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType -&gt; Bool
</span><span class="hs-identifier hs-var">G.isListType</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688232731"><span class="hs-identifier hs-var">fieldType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-237"></span><span>                    </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m ()
forall e (m :: * -&gt; *). MonadValidate e m =&gt; e -&gt; m ()
</span><span class="hs-identifier hs-var">dispute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError] -&gt; m ())
-&gt; [CustomTypeValidationError] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-238"></span><span>                      </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-239"></span><span>                        </span><span class="annot"><span class="annottext">ObjectTypeName
-&gt; RelationshipName -&gt; ObjectFieldName -&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipFieldListType"><span class="hs-identifier hs-var">ObjectRelationshipFieldListType</span></a></span><span>
</span><span id="line-240"></span><span>                          </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span>
</span><span id="line-241"></span><span>                          </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232748"><span class="hs-identifier hs-var">_trName</span></a></span><span>
</span><span id="line-242"></span><span>                          </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232734"><span class="hs-identifier hs-var">fieldName</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span>              </span><span class="hs-comment">-- the column should be a column of the table</span><span>
</span><span id="line-245"></span><span>              </span><span class="annot"><span class="annottext">Maybe (ColumnInfo ('Postgres 'Vanilla))
-&gt; m (ColumnInfo ('Postgres 'Vanilla))
-&gt; m (ColumnInfo ('Postgres 'Vanilla))
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
-&gt; FieldName -&gt; Maybe (ColumnInfo ('Postgres 'Vanilla))
forall (b :: BackendType).
TableInfo b -&gt; FieldName -&gt; Maybe (ColumnInfo b)
</span><a href="Hasura.RQL.Types.Table.html#getColumnInfoM"><span class="hs-identifier hs-var">getColumnInfoM</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688232740"><span class="hs-identifier hs-var">remoteTableInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Column ('Postgres 'Vanilla) -&gt; FieldName
forall (b :: BackendType). Backend b =&gt; Column b -&gt; FieldName
</span><a href="Hasura.RQL.Types.Column.html#fromCol"><span class="hs-identifier hs-var">fromCol</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Column ('Postgres 'Vanilla)
PGCol
</span><a href="#local-6989586621688232733"><span class="hs-identifier hs-var">columnName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (ColumnInfo ('Postgres 'Vanilla))
 -&gt; m (ColumnInfo ('Postgres 'Vanilla)))
-&gt; m (ColumnInfo ('Postgres 'Vanilla))
-&gt; m (ColumnInfo ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-246"></span><span>                </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; m (ColumnInfo ('Postgres 'Vanilla))
forall e (m :: * -&gt; *) a. MonadValidate e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">refute</span></span><span> </span><span class="annot"><span class="annottext">([CustomTypeValidationError]
 -&gt; m (ColumnInfo ('Postgres 'Vanilla)))
-&gt; [CustomTypeValidationError]
-&gt; m (ColumnInfo ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-247"></span><span>                  </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; [CustomTypeValidationError])
-&gt; CustomTypeValidationError -&gt; [CustomTypeValidationError]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-248"></span><span>                    </span><span class="annot"><span class="annottext">ObjectTypeName
-&gt; RelationshipName
-&gt; QualifiedTable
-&gt; PGCol
-&gt; CustomTypeValidationError
</span><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipColumnDoesNotExist"><span class="hs-identifier hs-var">ObjectRelationshipColumnDoesNotExist</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span> </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232748"><span class="hs-identifier hs-var">_trName</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688232745"><span class="hs-identifier hs-var">_trRemoteTable</span></a></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><a href="#local-6989586621688232733"><span class="hs-identifier hs-var">columnName</span></a></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span>          </span><span class="annot"><span class="annottext">TypeRelationship
  (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla))
-&gt; m (TypeRelationship
        (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TypeRelationship
   (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla))
 -&gt; m (TypeRelationship
         (TableInfo ('Postgres 'Vanilla))
         (ColumnInfo ('Postgres 'Vanilla))))
-&gt; TypeRelationship
     (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla))
-&gt; m (TypeRelationship
        (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelationshipName
-&gt; RelType
-&gt; SourceName
-&gt; TableInfo ('Postgres 'Vanilla)
-&gt; HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))
-&gt; TypeRelationship
     (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla))
forall t f.
RelationshipName
-&gt; RelType
-&gt; SourceName
-&gt; t
-&gt; HashMap ObjectFieldName f
-&gt; TypeRelationship t f
</span><a href="Hasura.RQL.Types.CustomTypes.html#TypeRelationship"><span class="hs-identifier hs-var">TypeRelationship</span></a></span><span> </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232748"><span class="hs-identifier hs-var">_trName</span></a></span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="#local-6989586621688232747"><span class="hs-identifier hs-var">_trType</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688232746"><span class="hs-identifier hs-var">_trSource</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688232740"><span class="hs-identifier hs-var">remoteTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap ObjectFieldName (ColumnInfo ('Postgres 'Vanilla))
</span><a href="#local-6989586621688232737"><span class="hs-identifier hs-var">annotatedFieldMapping</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232725"><span class="annot"><span class="annottext">sourceConfig :: Maybe (SourceName, PGSourceConfig)
</span><a href="#local-6989586621688232725"><span class="hs-identifier hs-var hs-var">sourceConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>            </span><span id="local-6989586621688232724"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688232724"><span class="hs-identifier hs-var">source</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeRelationship
  (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla))
-&gt; SourceName
forall t f. TypeRelationship t f -&gt; SourceName
</span><a href="Hasura.RQL.Types.CustomTypes.html#_trSource"><span class="hs-identifier hs-var hs-var">_trSource</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeRelationship
   (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla))
 -&gt; SourceName)
-&gt; (NonEmpty
      (TypeRelationship
         (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla)))
    -&gt; TypeRelationship
         (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla)))
-&gt; NonEmpty
     (TypeRelationship
        (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla)))
-&gt; SourceName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty
  (TypeRelationship
     (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla)))
-&gt; TypeRelationship
     (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla))
forall a. NonEmpty a -&gt; a
</span><span class="hs-identifier hs-var">NE.head</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty
   (TypeRelationship
      (TableInfo ('Postgres 'Vanilla)) (ColumnInfo ('Postgres 'Vanilla)))
 -&gt; SourceName)
-&gt; Maybe
     (NonEmpty
        (TypeRelationship
           (TableInfo ('Postgres 'Vanilla))
           (ColumnInfo ('Postgres 'Vanilla))))
-&gt; Maybe SourceName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe
  (NonEmpty
     (TypeRelationship
        (TableInfo ('Postgres 'Vanilla))
        (ColumnInfo ('Postgres 'Vanilla))))
</span><a href="#local-6989586621688232757"><span class="hs-identifier hs-var">annotatedRelationships</span></a></span><span>
</span><span id="line-254"></span><span>            </span><span id="local-6989586621688232722"><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621688232722"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; SourceCache -&gt; Maybe BackendSourceInfo
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688232724"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621688232885"><span class="hs-identifier hs-var">sources</span></a></span><span>
</span><span id="line-255"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688232724"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PGSourceConfig -&gt; (SourceName, PGSourceConfig))
-&gt; Maybe PGSourceConfig -&gt; Maybe (SourceName, PGSourceConfig)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo -&gt; Maybe (SourceConfig ('Postgres 'Vanilla))
forall (b :: BackendType).
HasTag b =&gt;
BackendSourceInfo -&gt; Maybe (SourceConfig b)
</span><a href="Hasura.RQL.Types.Source.html#unsafeSourceConfiguration"><span class="hs-identifier hs-var">unsafeSourceConfiguration</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621688232722"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span>      </span><span class="annot"><span class="annottext">AnnotatedObjectType -&gt; m AnnotatedObjectType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedObjectType -&gt; m AnnotatedObjectType)
-&gt; AnnotatedObjectType -&gt; m AnnotatedObjectType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-258"></span><span>        </span><span class="annot"><span class="annottext">(ObjectTypeDefinition
   (GType, AnnotatedObjectFieldType)
   (TableInfo ('Postgres 'Vanilla))
   (ColumnInfo ('Postgres 'Vanilla))
 -&gt; Maybe (SourceName, PGSourceConfig) -&gt; AnnotatedObjectType)
-&gt; Maybe (SourceName, PGSourceConfig)
-&gt; ObjectTypeDefinition
     (GType, AnnotatedObjectFieldType)
     (TableInfo ('Postgres 'Vanilla))
     (ColumnInfo ('Postgres 'Vanilla))
-&gt; AnnotatedObjectType
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition
  (GType, AnnotatedObjectFieldType)
  (TableInfo ('Postgres 'Vanilla))
  (ColumnInfo ('Postgres 'Vanilla))
-&gt; Maybe (SourceName, SourceConfig ('Postgres 'Vanilla))
-&gt; AnnotatedObjectType
ObjectTypeDefinition
  (GType, AnnotatedObjectFieldType)
  (TableInfo ('Postgres 'Vanilla))
  (ColumnInfo ('Postgres 'Vanilla))
-&gt; Maybe (SourceName, PGSourceConfig) -&gt; AnnotatedObjectType
</span><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedObjectType"><span class="hs-identifier hs-var">AnnotatedObjectType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SourceName, PGSourceConfig)
</span><a href="#local-6989586621688232725"><span class="hs-identifier hs-var">sourceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectTypeDefinition
   (GType, AnnotatedObjectFieldType)
   (TableInfo ('Postgres 'Vanilla))
   (ColumnInfo ('Postgres 'Vanilla))
 -&gt; AnnotatedObjectType)
-&gt; ObjectTypeDefinition
     (GType, AnnotatedObjectFieldType)
     (TableInfo ('Postgres 'Vanilla))
     (ColumnInfo ('Postgres 'Vanilla))
-&gt; AnnotatedObjectType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-259"></span><span>          </span><span class="annot"><span class="annottext">ObjectTypeName
-&gt; Maybe Description
-&gt; NonEmpty
     (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
-&gt; Maybe
     (NonEmpty
        (TypeRelationship
           (TableInfo ('Postgres 'Vanilla))
           (ColumnInfo ('Postgres 'Vanilla))))
-&gt; ObjectTypeDefinition
     (GType, AnnotatedObjectFieldType)
     (TableInfo ('Postgres 'Vanilla))
     (ColumnInfo ('Postgres 'Vanilla))
forall a b c.
ObjectTypeName
-&gt; Maybe Description
-&gt; NonEmpty (ObjectFieldDefinition a)
-&gt; Maybe (NonEmpty (TypeRelationship b c))
-&gt; ObjectTypeDefinition a b c
</span><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeDefinition"><span class="hs-identifier hs-var">ObjectTypeDefinition</span></a></span><span>
</span><span id="line-260"></span><span>            </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232798"><span class="hs-identifier hs-var">_otdName</span></a></span><span>
</span><span id="line-261"></span><span>            </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688232797"><span class="hs-identifier hs-var">_otdDescription</span></a></span><span>
</span><span id="line-262"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty (ObjectFieldDefinition (GType, AnnotatedObjectFieldType))
</span><a href="#local-6989586621688232782"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-263"></span><span>            </span><span class="annot"><span class="annottext">Maybe
  (NonEmpty
     (TypeRelationship
        (TableInfo ('Postgres 'Vanilla))
        (ColumnInfo ('Postgres 'Vanilla))))
</span><a href="#local-6989586621688232757"><span class="hs-identifier hs-var">annotatedRelationships</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-comment">-- see Note [Postgres scalars in custom types]</span><span>
</span><span id="line-266"></span><span id="local-6989586621688233007"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#lookupPGScalar"><span class="hs-identifier hs-type">lookupPGScalar</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-267"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">DMap.DMap</span></span><span> </span><span class="annot"><a href="Hasura.SQL.Tag.html#BackendTag"><span class="hs-identifier hs-type">BackendTag</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ScalarSet"><span class="hs-identifier hs-type">ScalarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#PGScalarType"><span class="hs-identifier hs-type">PGScalarType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688233007"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-270"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621688233007"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-271"></span><span id="lookupPGScalar"><span class="annot"><span class="annottext">lookupPGScalar :: DMap BackendTag ScalarSet -&gt; Name -&gt; (PGScalarType -&gt; a) -&gt; Maybe a
</span><a href="Hasura.RQL.DDL.CustomTypes.html#lookupPGScalar"><span class="hs-identifier hs-var hs-var">lookupPGScalar</span></a></span></span><span> </span><span id="local-6989586621688232719"><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
</span><a href="#local-6989586621688232719"><span class="hs-identifier hs-var">allScalars</span></a></span></span><span> </span><span id="local-6989586621688232718"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232718"><span class="hs-identifier hs-var">baseType</span></a></span></span><span> </span><span id="local-6989586621688232717"><span class="annot"><span class="annottext">PGScalarType -&gt; a
</span><a href="#local-6989586621688232717"><span class="hs-identifier hs-var">callback</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Maybe a
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Foldable t, Alternative f) =&gt;
t a -&gt; f a
</span><a href="Hasura.Prelude.html#afold"><span class="hs-identifier hs-var">afold</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Maybe a) -&gt; Maybe a -&gt; Maybe a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ScalarSet"><span class="hs-identifier hs-type">ScalarSet</span></a></span><span> </span><span id="local-6989586621688232714"><span class="annot"><span class="annottext">HashSet (ScalarType ('Postgres 'Vanilla))
</span><a href="#local-6989586621688232714"><span class="hs-identifier hs-var">scalars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BackendTag ('Postgres 'Vanilla)
-&gt; DMap BackendTag ScalarSet
-&gt; Maybe (ScalarSet ('Postgres 'Vanilla))
forall k1 (k2 :: k1 -&gt; *) (f :: k1 -&gt; *) (v :: k1).
GCompare k2 =&gt;
k2 v -&gt; DMap k2 f -&gt; Maybe (f v)
</span><span class="hs-identifier hs-var">DMap.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasTag ('Postgres 'Vanilla) =&gt; BackendTag ('Postgres 'Vanilla)
forall (b :: BackendType). HasTag b =&gt; BackendTag b
</span><a href="Hasura.SQL.Tag.html#backendTag"><span class="hs-identifier hs-var">backendTag</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(DMap BackendTag ScalarSet
 -&gt; Maybe (ScalarSet ('Postgres 'Vanilla)))
-&gt; DMap BackendTag ScalarSet
-&gt; Maybe (ScalarSet ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
</span><a href="#local-6989586621688232719"><span class="hs-identifier hs-var">allScalars</span></a></span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688232711"><span class="annot"><span class="annottext">scalarsMap :: HashMap Name PGScalarType
</span><a href="#local-6989586621688232711"><span class="hs-identifier hs-var hs-var">scalarsMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Name, PGScalarType)] -&gt; HashMap Name PGScalarType
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Name, PGScalarType)] -&gt; HashMap Name PGScalarType)
-&gt; [(Name, PGScalarType)] -&gt; HashMap Name PGScalarType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-274"></span><span>        </span><span id="local-6989586621688232710"><span class="annot"><span class="annottext">PGScalarType
</span><a href="#local-6989586621688232710"><span class="hs-identifier hs-var">scalar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HashSet PGScalarType -&gt; [PGScalarType]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (ScalarType ('Postgres 'Vanilla))
HashSet PGScalarType
</span><a href="#local-6989586621688232714"><span class="hs-identifier hs-var">scalars</span></a></span><span>
</span><span id="line-275"></span><span>        </span><span id="local-6989586621688232708"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232708"><span class="hs-identifier hs-var">scalarName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either QErr Name -&gt; [Name]
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Foldable t, Alternative f) =&gt;
t a -&gt; f a
</span><a href="Hasura.Prelude.html#afold"><span class="hs-identifier hs-var">afold</span></a></span><span> </span><span class="annot"><span class="annottext">(Either QErr Name -&gt; [Name]) -&gt; Either QErr Name -&gt; [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarType ('Postgres 'Vanilla) -&gt; Either QErr Name
forall (b :: BackendType).
Backend b =&gt;
ScalarType b -&gt; Either QErr Name
</span><a href="Hasura.RQL.Types.Backend.html#scalarTypeGraphQLName"><span class="hs-identifier hs-var">scalarTypeGraphQLName</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ScalarType ('Postgres 'Vanilla)
PGScalarType
</span><a href="#local-6989586621688232710"><span class="hs-identifier hs-var">scalar</span></a></span><span>
</span><span id="line-276"></span><span>        </span><span class="annot"><span class="annottext">(Name, PGScalarType) -&gt; [(Name, PGScalarType)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232708"><span class="hs-identifier hs-var">scalarName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PGScalarType
</span><a href="#local-6989586621688232710"><span class="hs-identifier hs-var">scalar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>  </span><span id="local-6989586621688232706"><span class="annot"><span class="annottext">PGScalarType
</span><a href="#local-6989586621688232706"><span class="hs-identifier hs-var">match</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe PGScalarType -&gt; Maybe PGScalarType
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Foldable t, Alternative f) =&gt;
t a -&gt; f a
</span><a href="Hasura.Prelude.html#afold"><span class="hs-identifier hs-var">afold</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe PGScalarType -&gt; Maybe PGScalarType)
-&gt; Maybe PGScalarType -&gt; Maybe PGScalarType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; HashMap Name PGScalarType -&gt; Maybe PGScalarType
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232718"><span class="hs-identifier hs-var">baseType</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name PGScalarType
</span><a href="#local-6989586621688232711"><span class="hs-identifier hs-var">scalarsMap</span></a></span><span>
</span><span id="line-278"></span><span>  </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe a) -&gt; a -&gt; Maybe a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PGScalarType -&gt; a
</span><a href="#local-6989586621688232717"><span class="hs-identifier hs-var">callback</span></a></span><span> </span><span class="annot"><span class="annottext">PGScalarType
</span><a href="#local-6989586621688232706"><span class="hs-identifier hs-var">match</span></a></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-keyword">data</span><span> </span><span id="CustomTypeValidationError"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#CustomTypeValidationError"><span class="hs-identifier hs-var">CustomTypeValidationError</span></a></span></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | type names have to be unique across all types</span><span>
</span><span id="line-282"></span><span>    </span><span id="DuplicateTypeNames"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#DuplicateTypeNames"><span class="hs-identifier hs-var">DuplicateTypeNames</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | field name and the field's base type</span><span>
</span><span id="line-284"></span><span>    </span><span id="InputObjectFieldTypeDoesNotExist"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#InputObjectFieldTypeDoesNotExist"><span class="hs-identifier hs-var">InputObjectFieldTypeDoesNotExist</span></a></span></span><span>
</span><span id="line-285"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#InputObjectTypeName"><span class="hs-identifier hs-type">InputObjectTypeName</span></a></span><span>
</span><span id="line-286"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#InputObjectFieldName"><span class="hs-identifier hs-type">InputObjectFieldName</span></a></span><span>
</span><span id="line-287"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | duplicate field declaration in input objects</span><span>
</span><span id="line-289"></span><span>    </span><span id="InputObjectDuplicateFields"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#InputObjectDuplicateFields"><span class="hs-identifier hs-var">InputObjectDuplicateFields</span></a></span></span><span>
</span><span id="line-290"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#InputObjectTypeName"><span class="hs-identifier hs-type">InputObjectTypeName</span></a></span><span>
</span><span id="line-291"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#InputObjectFieldName"><span class="hs-identifier hs-type">InputObjectFieldName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | field name and the field's base type</span><span>
</span><span id="line-293"></span><span>    </span><span id="ObjectFieldTypeDoesNotExist"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldTypeDoesNotExist"><span class="hs-identifier hs-var">ObjectFieldTypeDoesNotExist</span></a></span></span><span>
</span><span id="line-294"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span>
</span><span id="line-295"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectFieldName"><span class="hs-identifier hs-type">ObjectFieldName</span></a></span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | duplicate field declaration in objects</span><span>
</span><span id="line-298"></span><span>    </span><span id="ObjectDuplicateFields"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectDuplicateFields"><span class="hs-identifier hs-var">ObjectDuplicateFields</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | object fields can't have arguments</span><span>
</span><span id="line-300"></span><span>    </span><span id="ObjectFieldArgumentsNotAllowed"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldArgumentsNotAllowed"><span class="hs-identifier hs-var">ObjectFieldArgumentsNotAllowed</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectFieldName"><span class="hs-identifier hs-type">ObjectFieldName</span></a></span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | object fields can't have object types as base types</span><span>
</span><span id="line-302"></span><span>    </span><span id="ObjectFieldObjectBaseType"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldObjectBaseType"><span class="hs-identifier hs-var">ObjectFieldObjectBaseType</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectFieldName"><span class="hs-identifier hs-type">ObjectFieldName</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | The table specified in the relationship does not exist</span><span>
</span><span id="line-304"></span><span>    </span><span id="ObjectRelationshipTableDoesNotExist"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipTableDoesNotExist"><span class="hs-identifier hs-var">ObjectRelationshipTableDoesNotExist</span></a></span></span><span>
</span><span id="line-305"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span>
</span><span id="line-306"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#RelationshipName"><span class="hs-identifier hs-type">RelationshipName</span></a></span><span>
</span><span id="line-307"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedTable"><span class="hs-identifier hs-type">QualifiedTable</span></a></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | The field specified in the relationship mapping does not exist</span><span>
</span><span id="line-309"></span><span>    </span><span id="ObjectRelationshipFieldDoesNotExist"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipFieldDoesNotExist"><span class="hs-identifier hs-var">ObjectRelationshipFieldDoesNotExist</span></a></span></span><span>
</span><span id="line-310"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span>
</span><span id="line-311"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#RelationshipName"><span class="hs-identifier hs-type">RelationshipName</span></a></span><span>
</span><span id="line-312"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectFieldName"><span class="hs-identifier hs-type">ObjectFieldName</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | The field specified in the relationship mapping is a list type</span><span>
</span><span id="line-314"></span><span>    </span><span id="ObjectRelationshipFieldListType"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipFieldListType"><span class="hs-identifier hs-var">ObjectRelationshipFieldListType</span></a></span></span><span>
</span><span id="line-315"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span>
</span><span id="line-316"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#RelationshipName"><span class="hs-identifier hs-type">RelationshipName</span></a></span><span>
</span><span id="line-317"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectFieldName"><span class="hs-identifier hs-type">ObjectFieldName</span></a></span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | The column specified in the relationship mapping does not exist</span><span>
</span><span id="line-319"></span><span>    </span><span id="ObjectRelationshipColumnDoesNotExist"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipColumnDoesNotExist"><span class="hs-identifier hs-var">ObjectRelationshipColumnDoesNotExist</span></a></span></span><span>
</span><span id="line-320"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span>
</span><span id="line-321"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#RelationshipName"><span class="hs-identifier hs-type">RelationshipName</span></a></span><span>
</span><span id="line-322"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedTable"><span class="hs-identifier hs-type">QualifiedTable</span></a></span><span>
</span><span id="line-323"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#PGCol"><span class="hs-identifier hs-type">PGCol</span></a></span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Object relationship refers to table in multiple sources</span><span>
</span><span id="line-325"></span><span>    </span><span id="ObjectRelationshipMultiSources"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipMultiSources"><span class="hs-identifier hs-var">ObjectRelationshipMultiSources</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ObjectTypeName"><span class="hs-identifier hs-type">ObjectTypeName</span></a></span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | duplicate enum values</span><span>
</span><span id="line-327"></span><span>    </span><span id="DuplicateEnumValues"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#DuplicateEnumValues"><span class="hs-identifier hs-var">DuplicateEnumValues</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#EnumTypeName"><span class="hs-identifier hs-type">EnumTypeName</span></a></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.EnumValue</span></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688232699"><span id="local-6989586621688232701"><span id="local-6989586621688232703"><span class="annot"><span class="annottext">Int -&gt; CustomTypeValidationError -&gt; ShowS
[CustomTypeValidationError] -&gt; ShowS
CustomTypeValidationError -&gt; String
(Int -&gt; CustomTypeValidationError -&gt; ShowS)
-&gt; (CustomTypeValidationError -&gt; String)
-&gt; ([CustomTypeValidationError] -&gt; ShowS)
-&gt; Show CustomTypeValidationError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [CustomTypeValidationError] -&gt; ShowS
$cshowList :: [CustomTypeValidationError] -&gt; ShowS
show :: CustomTypeValidationError -&gt; String
$cshow :: CustomTypeValidationError -&gt; String
showsPrec :: Int -&gt; CustomTypeValidationError -&gt; ShowS
$cshowsPrec :: Int -&gt; CustomTypeValidationError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688232694"><span id="local-6989586621688232696"><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; CustomTypeValidationError -&gt; Bool
(CustomTypeValidationError -&gt; CustomTypeValidationError -&gt; Bool)
-&gt; (CustomTypeValidationError -&gt; CustomTypeValidationError -&gt; Bool)
-&gt; Eq CustomTypeValidationError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CustomTypeValidationError -&gt; CustomTypeValidationError -&gt; Bool
$c/= :: CustomTypeValidationError -&gt; CustomTypeValidationError -&gt; Bool
== :: CustomTypeValidationError -&gt; CustomTypeValidationError -&gt; Bool
$c== :: CustomTypeValidationError -&gt; CustomTypeValidationError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#showCustomTypeValidationError"><span class="hs-identifier hs-type">showCustomTypeValidationError</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-331"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#CustomTypeValidationError"><span class="hs-identifier hs-type">CustomTypeValidationError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-332"></span><span id="showCustomTypeValidationError"><span class="annot"><span class="annottext">showCustomTypeValidationError :: CustomTypeValidationError -&gt; Text
</span><a href="Hasura.RQL.DDL.CustomTypes.html#showCustomTypeValidationError"><span class="hs-identifier hs-var hs-var">showCustomTypeValidationError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-333"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#DuplicateTypeNames"><span class="hs-identifier hs-type">DuplicateTypeNames</span></a></span><span> </span><span id="local-6989586621688232691"><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232691"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;duplicate type names: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet Name -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#dquoteList"><span class="hs-identifier hs-var">dquoteList</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232691"><span class="hs-identifier hs-var">types</span></a></span><span>
</span><span id="line-335"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#InputObjectFieldTypeDoesNotExist"><span class="hs-identifier hs-type">InputObjectFieldTypeDoesNotExist</span></a></span><span> </span><span id="local-6989586621688232689"><span class="annot"><span class="annottext">InputObjectTypeName
</span><a href="#local-6989586621688232689"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232688"><span class="annot"><span class="annottext">InputObjectFieldName
</span><a href="#local-6989586621688232688"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688232687"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232687"><span class="hs-identifier hs-var">fieldTy</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232687"><span class="hs-identifier hs-var">fieldTy</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; for field &quot;</span></span><span>
</span><span id="line-337"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputObjectFieldName
</span><a href="#local-6989586621688232688"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectFieldName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in &quot;</span></span><span>
</span><span id="line-338"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; input object type &quot;</span></span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeName
</span><a href="#local-6989586621688232689"><span class="hs-identifier hs-var">objType</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not exist&quot;</span></span><span>
</span><span id="line-340"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#InputObjectDuplicateFields"><span class="hs-identifier hs-type">InputObjectDuplicateFields</span></a></span><span> </span><span id="local-6989586621688232685"><span class="annot"><span class="annottext">InputObjectTypeName
</span><a href="#local-6989586621688232685"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232684"><span class="annot"><span class="annottext">HashSet InputObjectFieldName
</span><a href="#local-6989586621688232684"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the input object &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeName
</span><a href="#local-6989586621688232685"><span class="hs-identifier hs-var">objType</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; has duplicate fields: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet InputObjectFieldName -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#dquoteList"><span class="hs-identifier hs-var">dquoteList</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet InputObjectFieldName
</span><a href="#local-6989586621688232684"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-342"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldTypeDoesNotExist"><span class="hs-identifier hs-type">ObjectFieldTypeDoesNotExist</span></a></span><span> </span><span id="local-6989586621688232683"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232683"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232682"><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232682"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688232681"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232681"><span class="hs-identifier hs-var">fieldTy</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232681"><span class="hs-identifier hs-var">fieldTy</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; for field &quot;</span></span><span>
</span><span id="line-344"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232682"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in &quot;</span></span><span>
</span><span id="line-345"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; object type &quot;</span></span><span>
</span><span id="line-346"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232683"><span class="hs-identifier hs-var">objType</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not exist&quot;</span></span><span>
</span><span id="line-347"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectDuplicateFields"><span class="hs-identifier hs-type">ObjectDuplicateFields</span></a></span><span> </span><span id="local-6989586621688232680"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232680"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232679"><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232679"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-348"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the object &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232680"><span class="hs-identifier hs-var">objType</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; has duplicate fields: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet Name -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#dquoteList"><span class="hs-identifier hs-var">dquoteList</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Name
</span><a href="#local-6989586621688232679"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-349"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldArgumentsNotAllowed"><span class="hs-identifier hs-type">ObjectFieldArgumentsNotAllowed</span></a></span><span> </span><span id="local-6989586621688232678"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232678"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-350"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the object &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232678"><span class="hs-identifier hs-var">objType</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; can't have arguments&quot;</span></span><span>
</span><span id="line-351"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectFieldObjectBaseType"><span class="hs-identifier hs-type">ObjectFieldObjectBaseType</span></a></span><span> </span><span id="local-6989586621688232677"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232677"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232676"><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232676"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688232675"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232675"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-352"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688232675"><span class="hs-identifier hs-var">fieldType</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; of the field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232676"><span class="hs-identifier hs-var">fieldName</span></a></span><span>
</span><span id="line-353"></span><span>      </span><span class="annot"><span class="annottext">ObjectFieldName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in the object type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232677"><span class="hs-identifier hs-var">objType</span></a></span><span>
</span><span id="line-354"></span><span>      </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; is object type which isn't allowed&quot;</span></span><span>
</span><span id="line-355"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipTableDoesNotExist"><span class="hs-identifier hs-type">ObjectRelationshipTableDoesNotExist</span></a></span><span> </span><span id="local-6989586621688232674"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232674"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232673"><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232673"><span class="hs-identifier hs-var">relName</span></a></span></span><span> </span><span id="local-6989586621688232672"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688232672"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-356"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the remote table &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688232672"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedTable -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; for relationship &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232673"><span class="hs-identifier hs-var">relName</span></a></span><span>
</span><span id="line-357"></span><span>      </span><span class="annot"><span class="annottext">RelationshipName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; of object type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232674"><span class="hs-identifier hs-var">objType</span></a></span><span>
</span><span id="line-358"></span><span>      </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not exist&quot;</span></span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipFieldDoesNotExist"><span class="hs-identifier hs-type">ObjectRelationshipFieldDoesNotExist</span></a></span><span> </span><span id="local-6989586621688232671"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232671"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232670"><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232670"><span class="hs-identifier hs-var">relName</span></a></span></span><span> </span><span id="local-6989586621688232669"><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232669"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232669"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; for relationship &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232670"><span class="hs-identifier hs-var">relName</span></a></span><span>
</span><span id="line-361"></span><span>      </span><span class="annot"><span class="annottext">RelationshipName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in object type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232671"><span class="hs-identifier hs-var">objType</span></a></span><span>
</span><span id="line-362"></span><span>      </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not exist&quot;</span></span><span>
</span><span id="line-363"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipFieldListType"><span class="hs-identifier hs-type">ObjectRelationshipFieldListType</span></a></span><span> </span><span id="local-6989586621688232668"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232668"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232667"><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232667"><span class="hs-identifier hs-var">relName</span></a></span></span><span> </span><span id="local-6989586621688232666"><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232666"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-364"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the type of the field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName
</span><a href="#local-6989586621688232666"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectFieldName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; for relationship &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232667"><span class="hs-identifier hs-var">relName</span></a></span><span>
</span><span id="line-365"></span><span>      </span><span class="annot"><span class="annottext">RelationshipName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in object type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232668"><span class="hs-identifier hs-var">objType</span></a></span><span>
</span><span id="line-366"></span><span>      </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; is a list type&quot;</span></span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipColumnDoesNotExist"><span class="hs-identifier hs-type">ObjectRelationshipColumnDoesNotExist</span></a></span><span> </span><span id="local-6989586621688232665"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232665"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span id="local-6989586621688232664"><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232664"><span class="hs-identifier hs-var">relName</span></a></span></span><span> </span><span id="local-6989586621688232663"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688232663"><span class="hs-identifier hs-var">remoteTable</span></a></span></span><span> </span><span id="local-6989586621688232662"><span class="annot"><span class="annottext">PGCol
</span><a href="#local-6989586621688232662"><span class="hs-identifier hs-var">column</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-368"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the column &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><a href="#local-6989586621688232662"><span class="hs-identifier hs-var">column</span></a></span><span> </span><span class="annot"><span class="annottext">PGCol -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; of remote table &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688232663"><span class="hs-identifier hs-var">remoteTable</span></a></span><span>
</span><span id="line-369"></span><span>      </span><span class="annot"><span class="annottext">QualifiedTable -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; for relationship &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">RelationshipName
</span><a href="#local-6989586621688232664"><span class="hs-identifier hs-var">relName</span></a></span><span>
</span><span id="line-370"></span><span>      </span><span class="annot"><span class="annottext">RelationshipName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; of object type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232665"><span class="hs-identifier hs-var">objType</span></a></span><span>
</span><span id="line-371"></span><span>      </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not exist&quot;</span></span><span>
</span><span id="line-372"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#ObjectRelationshipMultiSources"><span class="hs-identifier hs-type">ObjectRelationshipMultiSources</span></a></span><span> </span><span id="local-6989586621688232661"><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232661"><span class="hs-identifier hs-var">objType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-373"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the object &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName
</span><a href="#local-6989586621688232661"><span class="hs-identifier hs-var">objType</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; has relationships refers to tables in multiple sources&quot;</span></span><span>
</span><span id="line-374"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#DuplicateEnumValues"><span class="hs-identifier hs-type">DuplicateEnumValues</span></a></span><span> </span><span id="local-6989586621688232660"><span class="annot"><span class="annottext">EnumTypeName
</span><a href="#local-6989586621688232660"><span class="hs-identifier hs-var">tyName</span></a></span></span><span> </span><span id="local-6989586621688232659"><span class="annot"><span class="annottext">HashSet EnumValue
</span><a href="#local-6989586621688232659"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the enum type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EnumTypeName
</span><a href="#local-6989586621688232660"><span class="hs-identifier hs-var">tyName</span></a></span><span> </span><span class="annot"><span class="annottext">EnumTypeName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; has duplicate values: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet EnumValue -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#dquoteList"><span class="hs-identifier hs-var">dquoteList</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet EnumValue
</span><a href="#local-6989586621688232659"><span class="hs-identifier hs-var">values</span></a></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span id="local-6989586621688232658"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#runSetCustomTypes"><span class="hs-identifier hs-type">runSetCustomTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688232658"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#CacheRWM"><span class="hs-identifier hs-type">CacheRWM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688232658"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-380"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#MetadataM"><span class="hs-identifier hs-type">MetadataM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688232658"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-382"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#CustomTypes"><span class="hs-identifier hs-type">CustomTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-383"></span><span>  </span><span class="annot"><a href="#local-6989586621688232658"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span></span><span>
</span><span id="line-384"></span><span id="runSetCustomTypes"><span class="annot"><span class="annottext">runSetCustomTypes :: CustomTypes -&gt; m EncJSON
</span><a href="Hasura.RQL.DDL.CustomTypes.html#runSetCustomTypes"><span class="hs-identifier hs-var hs-var">runSetCustomTypes</span></a></span></span><span> </span><span id="local-6989586621688232656"><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232656"><span class="hs-identifier hs-var">customTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-385"></span><span>  </span><span class="annot"><span class="annottext">MetadataObjId -&gt; MetadataModifier -&gt; m ()
forall (m :: * -&gt; *).
(QErrM m, CacheRWM m, MetadataM m) =&gt;
MetadataObjId -&gt; MetadataModifier -&gt; m ()
</span><a href="Hasura.RQL.Types.SchemaCache.Build.html#buildSchemaCacheFor"><span class="hs-identifier hs-var">buildSchemaCacheFor</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOCustomTypes"><span class="hs-identifier hs-var">MOCustomTypes</span></a></span><span> </span><span class="annot"><span class="annottext">(MetadataModifier -&gt; m ()) -&gt; MetadataModifier -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-386"></span><span>    </span><span class="annot"><span class="annottext">(Metadata -&gt; Metadata) -&gt; MetadataModifier
</span><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-var">MetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">((Metadata -&gt; Metadata) -&gt; MetadataModifier)
-&gt; (Metadata -&gt; Metadata) -&gt; MetadataModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypes -&gt; Identity CustomTypes)
-&gt; Metadata -&gt; Identity Metadata
Lens' Metadata CustomTypes
</span><a href="Hasura.RQL.Types.Metadata.html#metaCustomTypes"><span class="hs-identifier hs-var">metaCustomTypes</span></a></span><span> </span><span class="annot"><span class="annottext">((CustomTypes -&gt; Identity CustomTypes)
 -&gt; Metadata -&gt; Identity Metadata)
-&gt; CustomTypes -&gt; Metadata -&gt; Metadata
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232656"><span class="hs-identifier hs-var">customTypes</span></a></span><span>
</span><span id="line-387"></span><span>  </span><span class="annot"><span class="annottext">EncJSON -&gt; m EncJSON
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EncJSON
</span><a href="Hasura.RQL.Types.Common.html#successMsg"><span class="hs-identifier hs-var">successMsg</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#clearCustomTypesInMetadata"><span class="hs-identifier hs-type">clearCustomTypesInMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-type">MetadataModifier</span></a></span><span>
</span><span id="line-390"></span><span id="clearCustomTypesInMetadata"><span class="annot"><span class="annottext">clearCustomTypesInMetadata :: MetadataModifier
</span><a href="Hasura.RQL.DDL.CustomTypes.html#clearCustomTypesInMetadata"><span class="hs-identifier hs-var hs-var">clearCustomTypesInMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-391"></span><span>  </span><span class="annot"><span class="annottext">(Metadata -&gt; Metadata) -&gt; MetadataModifier
</span><a href="Hasura.RQL.Types.Metadata.html#MetadataModifier"><span class="hs-identifier hs-var">MetadataModifier</span></a></span><span> </span><span class="annot"><span class="annottext">((Metadata -&gt; Metadata) -&gt; MetadataModifier)
-&gt; (Metadata -&gt; Metadata) -&gt; MetadataModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(CustomTypes -&gt; Identity CustomTypes)
-&gt; Metadata -&gt; Identity Metadata
Lens' Metadata CustomTypes
</span><a href="Hasura.RQL.Types.Metadata.html#metaCustomTypes"><span class="hs-identifier hs-var">metaCustomTypes</span></a></span><span> </span><span class="annot"><span class="annottext">((CustomTypes -&gt; Identity CustomTypes)
 -&gt; Metadata -&gt; Identity Metadata)
-&gt; CustomTypes -&gt; Metadata -&gt; Metadata
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="Hasura.RQL.Types.CustomTypes.html#emptyCustomTypes"><span class="hs-identifier hs-var">emptyCustomTypes</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span id="local-6989586621688232649"><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#resolveCustomTypes"><span class="hs-identifier hs-type">resolveCustomTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-394"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688232649"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-395"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-396"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#CustomTypes"><span class="hs-identifier hs-type">CustomTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-397"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">DMap.DMap</span></span><span> </span><span class="annot"><a href="Hasura.SQL.Tag.html#BackendTag"><span class="hs-identifier hs-type">BackendTag</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#ScalarSet"><span class="hs-identifier hs-type">ScalarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-398"></span><span>  </span><span class="annot"><a href="#local-6989586621688232649"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#AnnotatedCustomTypes"><span class="hs-identifier hs-type">AnnotatedCustomTypes</span></a></span></span><span>
</span><span id="line-399"></span><span id="resolveCustomTypes"><span class="annot"><span class="annottext">resolveCustomTypes :: SourceCache
-&gt; CustomTypes
-&gt; DMap BackendTag ScalarSet
-&gt; m AnnotatedCustomTypes
</span><a href="Hasura.RQL.DDL.CustomTypes.html#resolveCustomTypes"><span class="hs-identifier hs-var hs-var">resolveCustomTypes</span></a></span></span><span> </span><span id="local-6989586621688232648"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621688232648"><span class="hs-identifier hs-var">sources</span></a></span></span><span> </span><span id="local-6989586621688232647"><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232647"><span class="hs-identifier hs-var">customTypes</span></a></span></span><span> </span><span id="local-6989586621688232646"><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
</span><a href="#local-6989586621688232646"><span class="hs-identifier hs-var">allScalars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-400"></span><span>  </span><span class="annot"><span class="annottext">Validate [CustomTypeValidationError] AnnotatedCustomTypes
-&gt; Either [CustomTypeValidationError] AnnotatedCustomTypes
forall e a. Validate e a -&gt; Either e a
</span><span class="hs-identifier hs-var">runValidate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceCache
-&gt; CustomTypes
-&gt; DMap BackendTag ScalarSet
-&gt; Validate [CustomTypeValidationError] AnnotatedCustomTypes
forall (m :: * -&gt; *).
MonadValidate [CustomTypeValidationError] m =&gt;
SourceCache
-&gt; CustomTypes
-&gt; DMap BackendTag ScalarSet
-&gt; m AnnotatedCustomTypes
</span><a href="Hasura.RQL.DDL.CustomTypes.html#validateCustomTypeDefinitions"><span class="hs-identifier hs-var">validateCustomTypeDefinitions</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621688232648"><span class="hs-identifier hs-var">sources</span></a></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621688232647"><span class="hs-identifier hs-var">customTypes</span></a></span><span> </span><span class="annot"><span class="annottext">DMap BackendTag ScalarSet
</span><a href="#local-6989586621688232646"><span class="hs-identifier hs-var">allScalars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>    </span><span class="annot"><span class="annottext">Either [CustomTypeValidationError] AnnotatedCustomTypes
-&gt; ([CustomTypeValidationError] -&gt; m AnnotatedCustomTypes)
-&gt; m AnnotatedCustomTypes
forall (m :: * -&gt; *) e a.
Applicative m =&gt;
Either e a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="Hasura.Prelude.html#onLeft"><span class="hs-operator hs-var">`onLeft`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m AnnotatedCustomTypes
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#ConstraintViolation"><span class="hs-identifier hs-var">ConstraintViolation</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m AnnotatedCustomTypes)
-&gt; ([CustomTypeValidationError] -&gt; Text)
-&gt; [CustomTypeValidationError]
-&gt; m AnnotatedCustomTypes
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[CustomTypeValidationError] -&gt; Text
</span><a href="#local-6989586621688232641"><span class="hs-identifier hs-var">showErrors</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-403"></span><span>    </span><span class="annot"><a href="#local-6989586621688232641"><span class="hs-identifier hs-type">showErrors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.DDL.CustomTypes.html#CustomTypeValidationError"><span class="hs-identifier hs-type">CustomTypeValidationError</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621688232641"><span class="annot"><span class="annottext">showErrors :: [CustomTypeValidationError] -&gt; Text
</span><a href="#local-6989586621688232641"><span class="hs-identifier hs-var hs-var">showErrors</span></a></span></span><span> </span><span id="local-6989586621688232640"><span class="annot"><span class="annottext">[CustomTypeValidationError]
</span><a href="#local-6989586621688232640"><span class="hs-identifier hs-var">allErrors</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-405"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;validation for the given custom types failed &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688232639"><span class="hs-identifier hs-var">reasonsMessage</span></a></span><span>
</span><span id="line-406"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-407"></span><span>        </span><span id="local-6989586621688232639"><span class="annot"><span class="annottext">reasonsMessage :: Text
</span><a href="#local-6989586621688232639"><span class="hs-identifier hs-var hs-var">reasonsMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[CustomTypeValidationError]
</span><a href="#local-6989586621688232640"><span class="hs-identifier hs-var">allErrors</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-408"></span><span>          </span><span class="hs-special">[</span><span id="local-6989586621688232638"><span class="annot"><span class="annottext">CustomTypeValidationError
</span><a href="#local-6989586621688232638"><span class="hs-identifier hs-var">singleError</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;because &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; Text
</span><a href="Hasura.RQL.DDL.CustomTypes.html#showCustomTypeValidationError"><span class="hs-identifier hs-var">showCustomTypeValidationError</span></a></span><span> </span><span class="annot"><span class="annottext">CustomTypeValidationError
</span><a href="#local-6989586621688232638"><span class="hs-identifier hs-var">singleError</span></a></span><span>
</span><span id="line-409"></span><span>          </span><span class="annot"><span class="annottext">[CustomTypeValidationError]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-410"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;for the following reasons:\n&quot;</span></span><span>
</span><span id="line-411"></span><span>              </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.unlines</span></span><span>
</span><span id="line-412"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CustomTypeValidationError -&gt; Text)
-&gt; [CustomTypeValidationError] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;  &#8226; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text)
-&gt; (CustomTypeValidationError -&gt; Text)
-&gt; CustomTypeValidationError
-&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CustomTypeValidationError -&gt; Text
</span><a href="Hasura.RQL.DDL.CustomTypes.html#showCustomTypeValidationError"><span class="hs-identifier hs-var">showCustomTypeValidationError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CustomTypeValidationError]
</span><a href="#local-6989586621688232640"><span class="hs-identifier hs-var">allErrors</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span></pre></body></html>