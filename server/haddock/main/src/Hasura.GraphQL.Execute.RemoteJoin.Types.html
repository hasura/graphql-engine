<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.GraphQL.Execute.RemoteJoin.Types</span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Remote joins tree</span></span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinTree"><span class="hs-identifier">JoinTree</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinNode"><span class="hs-identifier">JoinNode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoins"><span class="hs-identifier">RemoteJoins</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#QualifiedFieldName"><span class="hs-identifier">QualifiedFieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getRemoteSchemaJoins"><span class="hs-identifier">getRemoteSchemaJoins</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Individual join information</span></span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoin"><span class="hs-identifier">RemoteJoin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinCallId"><span class="hs-identifier">JoinCallId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinColumnAlias"><span class="hs-identifier">JoinColumnAlias</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getAliasFieldName"><span class="hs-identifier">getAliasFieldName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getPhantomFields"><span class="hs-identifier">getPhantomFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getJoinColumnMapping"><span class="hs-identifier">getJoinColumnMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Join to source</span></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSourceJoin"><span class="hs-identifier">RemoteSourceJoin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Join to schema</span></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier">RemoteSchemaJoin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Join arguments</span></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArgumentId"><span class="hs-identifier">JoinArgumentId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArgument"><span class="hs-identifier">JoinArgument</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArguments"><span class="hs-identifier">JoinArguments</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/src"><span class="hs-identifier">Data.Aeson.Ordered</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AO</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.HashMap.Strict.NonEmpty.html"><span class="hs-identifier">Data.HashMap.Strict.NonEmpty</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEMap</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html"><span class="hs-identifier">Hasura.RQL.IR.RemoteSchema</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html"><span class="hs-identifier">Hasura.RQL.IR.Select</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html"><span class="hs-identifier">Hasura.RQL.IR.Value</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html"><span class="hs-identifier">Hasura.RQL.Types.Backend</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.ToSchema.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.ToSchema</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html"><span class="hs-identifier">Hasura.RQL.Types.RemoteSchema</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.ResultCustomization</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.SQL.AnyBackend.html"><span class="hs-identifier">Hasura.SQL.AnyBackend</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AB</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-50"></span><span class="hs-comment">-- Remote joins tree</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">-- | A JoinTree represents the set of operations that need to be executed to</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- enrich the response of a source with data from remote sources. A tree</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- structure is used to capture the locations in the response where the join</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- has to happpen as it offers an efficient traversal mechanism.</span><span>
</span><span id="line-56"></span><span class="hs-comment">--</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- For a query such as this:</span><span>
</span><span id="line-58"></span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- {</span><span>
</span><span id="line-60"></span><span class="hs-comment">--   city {</span><span>
</span><span id="line-61"></span><span class="hs-comment">--     name</span><span>
</span><span id="line-62"></span><span class="hs-comment">--     code</span><span>
</span><span id="line-63"></span><span class="hs-comment">--     # weather is a remote relationship</span><span>
</span><span id="line-64"></span><span class="hs-comment">--     weather { forecast }</span><span>
</span><span id="line-65"></span><span class="hs-comment">--     state {</span><span>
</span><span id="line-66"></span><span class="hs-comment">--     # weather is a remote relationship</span><span>
</span><span id="line-67"></span><span class="hs-comment">--       weather { forecast }</span><span>
</span><span id="line-68"></span><span class="hs-comment">--     }</span><span>
</span><span id="line-69"></span><span class="hs-comment">--   }</span><span>
</span><span id="line-70"></span><span class="hs-comment">--  }</span><span>
</span><span id="line-71"></span><span class="hs-comment">--</span><span>
</span><span id="line-72"></span><span class="hs-comment">--  the join tree would look like</span><span>
</span><span id="line-73"></span><span class="hs-comment">--  [</span><span>
</span><span id="line-74"></span><span class="hs-comment">--  , (&quot;weather&quot;, Leaf RemoteJoinInfoOfWeather),</span><span>
</span><span id="line-75"></span><span class="hs-comment">--  , (&quot;state&quot;, [ (&quot;weather&quot;, Leaf RemoteJoinInfoOfWeather) ])</span><span>
</span><span id="line-76"></span><span class="hs-comment">--  ]</span><span>
</span><span id="line-77"></span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- Note that the same join tree will be emitted even if 'city' is of type</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- '[City]' and 'state' is of type [State], we currently do not capture any</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- information if any of the fields in the path expect json arrays. It is</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- similar in spirit to a GraphQL selection set in this regard.</span><span>
</span><span id="line-82"></span><span class="hs-comment">--</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- This structure is somewhat similar to a prefix tree such as 'Data.Trie.Trie',</span><span>
</span><span id="line-84"></span><span class="hs-comment">-- but has two additional guarantees:</span><span>
</span><span id="line-85"></span><span class="hs-comment">--   - a 'JoinTree' is never empty,</span><span>
</span><span id="line-86"></span><span class="hs-comment">--   - there cannot exist a pair of values for which one's prefix key is a</span><span>
</span><span id="line-87"></span><span class="hs-comment">--     subset of the other: every value is effectively a leaf.</span><span>
</span><span id="line-88"></span><span id="local-6989586621689490624"><span id="local-6989586621689490625"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="JoinTree"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinTree"><span class="hs-identifier hs-var">JoinTree</span></a></span></span><span> </span><span id="local-6989586621689490623"><span class="annot"><a href="#local-6989586621689490623"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JoinTree"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinTree"><span class="hs-identifier hs-var">JoinTree</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unJoinTree"><span class="annot"><span class="annottext">JoinTree a -&gt; NEHashMap QualifiedFieldName (JoinNode a)
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#unJoinTree"><span class="hs-identifier hs-var hs-var">unJoinTree</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.HashMap.Strict.NonEmpty.html#NEHashMap"><span class="hs-identifier hs-type">NEMap.NEHashMap</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#QualifiedFieldName"><span class="hs-identifier hs-type">QualifiedFieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinNode"><span class="hs-identifier hs-type">JoinNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490623"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490615"><span id="local-6989586621689490617"><span id="local-6989586621689490619"><span class="annot"><span class="annottext">Int -&gt; JoinTree a -&gt; ShowS
[JoinTree a] -&gt; ShowS
JoinTree a -&gt; String
(Int -&gt; JoinTree a -&gt; ShowS)
-&gt; (JoinTree a -&gt; String)
-&gt; ([JoinTree a] -&gt; ShowS)
-&gt; Show (JoinTree a)
forall a. Show a =&gt; Int -&gt; JoinTree a -&gt; ShowS
forall a. Show a =&gt; [JoinTree a] -&gt; ShowS
forall a. Show a =&gt; JoinTree a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [JoinTree a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [JoinTree a] -&gt; ShowS
show :: JoinTree a -&gt; String
$cshow :: forall a. Show a =&gt; JoinTree a -&gt; String
showsPrec :: Int -&gt; JoinTree a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; JoinTree a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490610"><span id="local-6989586621689490612"><span class="annot"><span class="annottext">JoinTree a -&gt; JoinTree a -&gt; Bool
(JoinTree a -&gt; JoinTree a -&gt; Bool)
-&gt; (JoinTree a -&gt; JoinTree a -&gt; Bool) -&gt; Eq (JoinTree a)
forall a. Eq a =&gt; JoinTree a -&gt; JoinTree a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: JoinTree a -&gt; JoinTree a -&gt; Bool
$c/= :: forall a. Eq a =&gt; JoinTree a -&gt; JoinTree a -&gt; Bool
== :: JoinTree a -&gt; JoinTree a -&gt; Bool
$c== :: forall a. Eq a =&gt; JoinTree a -&gt; JoinTree a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490605"><span id="local-6989586621689490607"><span class="annot"><span class="annottext">a -&gt; JoinTree b -&gt; JoinTree a
(a -&gt; b) -&gt; JoinTree a -&gt; JoinTree b
(forall a b. (a -&gt; b) -&gt; JoinTree a -&gt; JoinTree b)
-&gt; (forall a b. a -&gt; JoinTree b -&gt; JoinTree a) -&gt; Functor JoinTree
forall a b. a -&gt; JoinTree b -&gt; JoinTree a
forall a b. (a -&gt; b) -&gt; JoinTree a -&gt; JoinTree b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; JoinTree b -&gt; JoinTree a
$c&lt;$ :: forall a b. a -&gt; JoinTree b -&gt; JoinTree a
fmap :: (a -&gt; b) -&gt; JoinTree a -&gt; JoinTree b
$cfmap :: forall a b. (a -&gt; b) -&gt; JoinTree a -&gt; JoinTree b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490570"><span id="local-6989586621689490572"><span id="local-6989586621689490574"><span id="local-6989586621689490576"><span id="local-6989586621689490578"><span id="local-6989586621689490580"><span id="local-6989586621689490582"><span id="local-6989586621689490584"><span id="local-6989586621689490586"><span id="local-6989586621689490588"><span id="local-6989586621689490590"><span id="local-6989586621689490592"><span id="local-6989586621689490594"><span id="local-6989586621689490596"><span id="local-6989586621689490598"><span id="local-6989586621689490600"><span id="local-6989586621689490602"><span class="annot"><span class="annottext">JoinTree a -&gt; Bool
(a -&gt; m) -&gt; JoinTree a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
(forall m. Monoid m =&gt; JoinTree m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinTree a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinTree a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; JoinTree a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; JoinTree a -&gt; a)
-&gt; (forall a. JoinTree a -&gt; [a])
-&gt; (forall a. JoinTree a -&gt; Bool)
-&gt; (forall a. JoinTree a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; JoinTree a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; JoinTree a -&gt; a)
-&gt; (forall a. Ord a =&gt; JoinTree a -&gt; a)
-&gt; (forall a. Num a =&gt; JoinTree a -&gt; a)
-&gt; (forall a. Num a =&gt; JoinTree a -&gt; a)
-&gt; Foldable JoinTree
forall a. Eq a =&gt; a -&gt; JoinTree a -&gt; Bool
forall a. Num a =&gt; JoinTree a -&gt; a
forall a. Ord a =&gt; JoinTree a -&gt; a
forall m. Monoid m =&gt; JoinTree m -&gt; m
forall a. JoinTree a -&gt; Bool
forall a. JoinTree a -&gt; Int
forall a. JoinTree a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; JoinTree a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinTree a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: JoinTree a -&gt; a
$cproduct :: forall a. Num a =&gt; JoinTree a -&gt; a
sum :: JoinTree a -&gt; a
$csum :: forall a. Num a =&gt; JoinTree a -&gt; a
minimum :: JoinTree a -&gt; a
$cminimum :: forall a. Ord a =&gt; JoinTree a -&gt; a
maximum :: JoinTree a -&gt; a
$cmaximum :: forall a. Ord a =&gt; JoinTree a -&gt; a
elem :: a -&gt; JoinTree a -&gt; Bool
$celem :: forall a. Eq a =&gt; a -&gt; JoinTree a -&gt; Bool
length :: JoinTree a -&gt; Int
$clength :: forall a. JoinTree a -&gt; Int
null :: JoinTree a -&gt; Bool
$cnull :: forall a. JoinTree a -&gt; Bool
toList :: JoinTree a -&gt; [a]
$ctoList :: forall a. JoinTree a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; JoinTree a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; JoinTree a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; JoinTree a -&gt; a
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; JoinTree a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinTree a -&gt; b
foldMap' :: (a -&gt; m) -&gt; JoinTree a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinTree a -&gt; m
foldMap :: (a -&gt; m) -&gt; JoinTree a -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinTree a -&gt; m
fold :: JoinTree m -&gt; m
$cfold :: forall m. Monoid m =&gt; JoinTree m -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490559"><span id="local-6989586621689490561"><span id="local-6989586621689490563"><span id="local-6989586621689490565"><span class="annot"><span class="annottext">Functor JoinTree
Foldable JoinTree
Functor JoinTree
-&gt; Foldable JoinTree
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; JoinTree a -&gt; f (JoinTree b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    JoinTree (f a) -&gt; f (JoinTree a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; JoinTree a -&gt; m (JoinTree b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    JoinTree (m a) -&gt; m (JoinTree a))
-&gt; Traversable JoinTree
(a -&gt; f b) -&gt; JoinTree a -&gt; f (JoinTree b)
forall (t :: * -&gt; *).
Functor t
-&gt; Foldable t
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a. Monad m =&gt; JoinTree (m a) -&gt; m (JoinTree a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
JoinTree (f a) -&gt; f (JoinTree a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; JoinTree a -&gt; m (JoinTree b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; JoinTree a -&gt; f (JoinTree b)
sequence :: JoinTree (m a) -&gt; m (JoinTree a)
$csequence :: forall (m :: * -&gt; *) a. Monad m =&gt; JoinTree (m a) -&gt; m (JoinTree a)
mapM :: (a -&gt; m b) -&gt; JoinTree a -&gt; m (JoinTree b)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; JoinTree a -&gt; m (JoinTree b)
sequenceA :: JoinTree (f a) -&gt; f (JoinTree a)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
JoinTree (f a) -&gt; f (JoinTree a)
traverse :: (a -&gt; f b) -&gt; JoinTree a -&gt; f (JoinTree b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; JoinTree a -&gt; f (JoinTree b)
$cp2Traversable :: Foldable JoinTree
$cp1Traversable :: Functor JoinTree
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. JoinTree a -&gt; Rep (JoinTree a) x)
-&gt; (forall x. Rep (JoinTree a) x -&gt; JoinTree a)
-&gt; Generic (JoinTree a)
forall x. Rep (JoinTree a) x -&gt; JoinTree a
forall x. JoinTree a -&gt; Rep (JoinTree a) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall a x. Rep (JoinTree a) x -&gt; JoinTree a
forall a x. JoinTree a -&gt; Rep (JoinTree a) x
$cto :: forall a x. Rep (JoinTree a) x -&gt; JoinTree a
$cfrom :: forall a x. JoinTree a -&gt; Rep (JoinTree a) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490549"><span id="local-6989586621689490551"><span id="local-6989586621689490553"><span class="annot"><span class="annottext">b -&gt; JoinTree a -&gt; JoinTree a
NonEmpty (JoinTree a) -&gt; JoinTree a
JoinTree a -&gt; JoinTree a -&gt; JoinTree a
(JoinTree a -&gt; JoinTree a -&gt; JoinTree a)
-&gt; (NonEmpty (JoinTree a) -&gt; JoinTree a)
-&gt; (forall b. Integral b =&gt; b -&gt; JoinTree a -&gt; JoinTree a)
-&gt; Semigroup (JoinTree a)
forall b. Integral b =&gt; b -&gt; JoinTree a -&gt; JoinTree a
forall a. NonEmpty (JoinTree a) -&gt; JoinTree a
forall a. JoinTree a -&gt; JoinTree a -&gt; JoinTree a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
forall a b. Integral b =&gt; b -&gt; JoinTree a -&gt; JoinTree a
stimes :: b -&gt; JoinTree a -&gt; JoinTree a
$cstimes :: forall a b. Integral b =&gt; b -&gt; JoinTree a -&gt; JoinTree a
sconcat :: NonEmpty (JoinTree a) -&gt; JoinTree a
$csconcat :: forall a. NonEmpty (JoinTree a) -&gt; JoinTree a
&lt;&gt; :: JoinTree a -&gt; JoinTree a -&gt; JoinTree a
$c&lt;&gt; :: forall a. JoinTree a -&gt; JoinTree a -&gt; JoinTree a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-comment">-- | A field name annotated with an optional type name.</span><span>
</span><span id="line-93"></span><span class="hs-comment">--</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- To deal with ambiguous join paths, such as those that emerge from GraphQL</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- interfaces or GraphQL unions, we do not just keep track of the fields' name,</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- but also, optionally, of their type. Whenever a selection set is deemed</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- ambiguous, we insert a reserved field in the query to retrieve the typename,</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- @__hasura_internal_typename@; when traversing the join tree, if that key is</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- present, then we use it alongside the field name when querying the join tree</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- (see @traverseObject@ in the @Join@ module).</span><span>
</span><span id="line-101"></span><span class="hs-comment">--</span><span>
</span><span id="line-102"></span><span class="hs-comment">-- We use 'Text' for the representation of the field name instead of</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- 'FieldName', for simplicity: the join tree is only meant to be queried using</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- the values we get in the reponse, which will be unrestricted text.</span><span>
</span><span id="line-105"></span><span id="local-6989586621689490546"><span id="local-6989586621689490547"></span></span><span class="hs-keyword">data</span><span> </span><span id="QualifiedFieldName"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#QualifiedFieldName"><span class="hs-identifier hs-var">QualifiedFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="QualifiedFieldName"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#QualifiedFieldName"><span class="hs-identifier hs-var">QualifiedFieldName</span></a></span></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_qfTypeName"><span class="annot"><span class="annottext">QualifiedFieldName -&gt; Maybe Text
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_qfTypeName"><span class="hs-identifier hs-var hs-var">_qfTypeName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>    </span><span id="_qfFieldName"><span class="annot"><span class="annottext">QualifiedFieldName -&gt; Text
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_qfFieldName"><span class="hs-identifier hs-var hs-var">_qfFieldName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490537"><span id="local-6989586621689490539"><span id="local-6989586621689490541"><span class="annot"><span class="annottext">Int -&gt; QualifiedFieldName -&gt; ShowS
[QualifiedFieldName] -&gt; ShowS
QualifiedFieldName -&gt; String
(Int -&gt; QualifiedFieldName -&gt; ShowS)
-&gt; (QualifiedFieldName -&gt; String)
-&gt; ([QualifiedFieldName] -&gt; ShowS)
-&gt; Show QualifiedFieldName
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [QualifiedFieldName] -&gt; ShowS
$cshowList :: [QualifiedFieldName] -&gt; ShowS
show :: QualifiedFieldName -&gt; String
$cshow :: QualifiedFieldName -&gt; String
showsPrec :: Int -&gt; QualifiedFieldName -&gt; ShowS
$cshowsPrec :: Int -&gt; QualifiedFieldName -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490533"><span id="local-6989586621689490535"><span class="annot"><span class="annottext">QualifiedFieldName -&gt; QualifiedFieldName -&gt; Bool
(QualifiedFieldName -&gt; QualifiedFieldName -&gt; Bool)
-&gt; (QualifiedFieldName -&gt; QualifiedFieldName -&gt; Bool)
-&gt; Eq QualifiedFieldName
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: QualifiedFieldName -&gt; QualifiedFieldName -&gt; Bool
$c/= :: QualifiedFieldName -&gt; QualifiedFieldName -&gt; Bool
== :: QualifiedFieldName -&gt; QualifiedFieldName -&gt; Bool
$c== :: QualifiedFieldName -&gt; QualifiedFieldName -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. QualifiedFieldName -&gt; Rep QualifiedFieldName x)
-&gt; (forall x. Rep QualifiedFieldName x -&gt; QualifiedFieldName)
-&gt; Generic QualifiedFieldName
forall x. Rep QualifiedFieldName x -&gt; QualifiedFieldName
forall x. QualifiedFieldName -&gt; Rep QualifiedFieldName x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep QualifiedFieldName x -&gt; QualifiedFieldName
$cfrom :: forall x. QualifiedFieldName -&gt; Rep QualifiedFieldName x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490527"><span id="local-6989586621689490529"><span class="annot"><span class="annottext">Int -&gt; QualifiedFieldName -&gt; Int
QualifiedFieldName -&gt; Int
(Int -&gt; QualifiedFieldName -&gt; Int)
-&gt; (QualifiedFieldName -&gt; Int) -&gt; Hashable QualifiedFieldName
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: QualifiedFieldName -&gt; Int
$chash :: QualifiedFieldName -&gt; Int
hashWithSalt :: Int -&gt; QualifiedFieldName -&gt; Int
$chashWithSalt :: Int -&gt; QualifiedFieldName -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-comment">-- | Each leaf associates a mapping from typename to actual join info.</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- This allows to disambiguate between different remote joins with the same name</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- in a given selection set, which might happen with union or interface</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- fragments.</span><span>
</span><span id="line-116"></span><span id="local-6989586621689490524"><span id="local-6989586621689490525"></span></span><span class="hs-keyword">data</span><span> </span><span id="JoinNode"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinNode"><span class="hs-identifier hs-var">JoinNode</span></a></span></span><span> </span><span id="local-6989586621689490523"><span class="annot"><a href="#local-6989586621689490523"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Leaf"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#Leaf"><span class="hs-identifier hs-var">Leaf</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621689490523"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Tree"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#Tree"><span class="hs-identifier hs-var">Tree</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinTree"><span class="hs-identifier hs-type">JoinTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490523"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490517"><span id="local-6989586621689490519"><span class="annot"><span class="annottext">JoinNode a -&gt; JoinNode a -&gt; Bool
(JoinNode a -&gt; JoinNode a -&gt; Bool)
-&gt; (JoinNode a -&gt; JoinNode a -&gt; Bool) -&gt; Eq (JoinNode a)
forall a. Eq a =&gt; JoinNode a -&gt; JoinNode a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: JoinNode a -&gt; JoinNode a -&gt; Bool
$c/= :: forall a. Eq a =&gt; JoinNode a -&gt; JoinNode a -&gt; Bool
== :: JoinNode a -&gt; JoinNode a -&gt; Bool
$c== :: forall a. Eq a =&gt; JoinNode a -&gt; JoinNode a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490483"><span id="local-6989586621689490485"><span id="local-6989586621689490487"><span id="local-6989586621689490489"><span id="local-6989586621689490491"><span id="local-6989586621689490493"><span id="local-6989586621689490495"><span id="local-6989586621689490497"><span id="local-6989586621689490499"><span id="local-6989586621689490501"><span id="local-6989586621689490503"><span id="local-6989586621689490505"><span id="local-6989586621689490507"><span id="local-6989586621689490509"><span id="local-6989586621689490511"><span id="local-6989586621689490513"><span id="local-6989586621689490515"><span class="annot"><span class="annottext">JoinNode a -&gt; Bool
(a -&gt; m) -&gt; JoinNode a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
(forall m. Monoid m =&gt; JoinNode m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinNode a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinNode a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; JoinNode a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; JoinNode a -&gt; a)
-&gt; (forall a. JoinNode a -&gt; [a])
-&gt; (forall a. JoinNode a -&gt; Bool)
-&gt; (forall a. JoinNode a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; JoinNode a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; JoinNode a -&gt; a)
-&gt; (forall a. Ord a =&gt; JoinNode a -&gt; a)
-&gt; (forall a. Num a =&gt; JoinNode a -&gt; a)
-&gt; (forall a. Num a =&gt; JoinNode a -&gt; a)
-&gt; Foldable JoinNode
forall a. Eq a =&gt; a -&gt; JoinNode a -&gt; Bool
forall a. Num a =&gt; JoinNode a -&gt; a
forall a. Ord a =&gt; JoinNode a -&gt; a
forall m. Monoid m =&gt; JoinNode m -&gt; m
forall a. JoinNode a -&gt; Bool
forall a. JoinNode a -&gt; Int
forall a. JoinNode a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; JoinNode a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinNode a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: JoinNode a -&gt; a
$cproduct :: forall a. Num a =&gt; JoinNode a -&gt; a
sum :: JoinNode a -&gt; a
$csum :: forall a. Num a =&gt; JoinNode a -&gt; a
minimum :: JoinNode a -&gt; a
$cminimum :: forall a. Ord a =&gt; JoinNode a -&gt; a
maximum :: JoinNode a -&gt; a
$cmaximum :: forall a. Ord a =&gt; JoinNode a -&gt; a
elem :: a -&gt; JoinNode a -&gt; Bool
$celem :: forall a. Eq a =&gt; a -&gt; JoinNode a -&gt; Bool
length :: JoinNode a -&gt; Int
$clength :: forall a. JoinNode a -&gt; Int
null :: JoinNode a -&gt; Bool
$cnull :: forall a. JoinNode a -&gt; Bool
toList :: JoinNode a -&gt; [a]
$ctoList :: forall a. JoinNode a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; JoinNode a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; JoinNode a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; JoinNode a -&gt; a
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; JoinNode a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; JoinNode a -&gt; b
foldMap' :: (a -&gt; m) -&gt; JoinNode a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinNode a -&gt; m
foldMap :: (a -&gt; m) -&gt; JoinNode a -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; JoinNode a -&gt; m
fold :: JoinNode m -&gt; m
$cfold :: forall m. Monoid m =&gt; JoinNode m -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490479"><span id="local-6989586621689490481"><span class="annot"><span class="annottext">a -&gt; JoinNode b -&gt; JoinNode a
(a -&gt; b) -&gt; JoinNode a -&gt; JoinNode b
(forall a b. (a -&gt; b) -&gt; JoinNode a -&gt; JoinNode b)
-&gt; (forall a b. a -&gt; JoinNode b -&gt; JoinNode a) -&gt; Functor JoinNode
forall a b. a -&gt; JoinNode b -&gt; JoinNode a
forall a b. (a -&gt; b) -&gt; JoinNode a -&gt; JoinNode b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; JoinNode b -&gt; JoinNode a
$c&lt;$ :: forall a b. a -&gt; JoinNode b -&gt; JoinNode a
fmap :: (a -&gt; b) -&gt; JoinNode a -&gt; JoinNode b
$cfmap :: forall a b. (a -&gt; b) -&gt; JoinNode a -&gt; JoinNode b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. JoinNode a -&gt; Rep (JoinNode a) x)
-&gt; (forall x. Rep (JoinNode a) x -&gt; JoinNode a)
-&gt; Generic (JoinNode a)
forall x. Rep (JoinNode a) x -&gt; JoinNode a
forall x. JoinNode a -&gt; Rep (JoinNode a) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall a x. Rep (JoinNode a) x -&gt; JoinNode a
forall a x. JoinNode a -&gt; Rep (JoinNode a) x
$cto :: forall a x. Rep (JoinNode a) x -&gt; JoinNode a
$cfrom :: forall a x. JoinNode a -&gt; Rep (JoinNode a) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490467"><span id="local-6989586621689490469"><span id="local-6989586621689490471"><span id="local-6989586621689490473"><span class="annot"><span class="annottext">Functor JoinNode
Foldable JoinNode
Functor JoinNode
-&gt; Foldable JoinNode
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; JoinNode a -&gt; f (JoinNode b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    JoinNode (f a) -&gt; f (JoinNode a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; JoinNode a -&gt; m (JoinNode b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    JoinNode (m a) -&gt; m (JoinNode a))
-&gt; Traversable JoinNode
(a -&gt; f b) -&gt; JoinNode a -&gt; f (JoinNode b)
forall (t :: * -&gt; *).
Functor t
-&gt; Foldable t
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a. Monad m =&gt; JoinNode (m a) -&gt; m (JoinNode a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
JoinNode (f a) -&gt; f (JoinNode a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; JoinNode a -&gt; m (JoinNode b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; JoinNode a -&gt; f (JoinNode b)
sequence :: JoinNode (m a) -&gt; m (JoinNode a)
$csequence :: forall (m :: * -&gt; *) a. Monad m =&gt; JoinNode (m a) -&gt; m (JoinNode a)
mapM :: (a -&gt; m b) -&gt; JoinNode a -&gt; m (JoinNode b)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; JoinNode a -&gt; m (JoinNode b)
sequenceA :: JoinNode (f a) -&gt; f (JoinNode a)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
JoinNode (f a) -&gt; f (JoinNode a)
traverse :: (a -&gt; f b) -&gt; JoinNode a -&gt; f (JoinNode b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; JoinNode a -&gt; f (JoinNode b)
$cp2Traversable :: Foldable JoinNode
$cp1Traversable :: Functor JoinNode
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490461"><span id="local-6989586621689490463"><span id="local-6989586621689490465"><span class="annot"><span class="annottext">Int -&gt; JoinNode a -&gt; ShowS
[JoinNode a] -&gt; ShowS
JoinNode a -&gt; String
(Int -&gt; JoinNode a -&gt; ShowS)
-&gt; (JoinNode a -&gt; String)
-&gt; ([JoinNode a] -&gt; ShowS)
-&gt; Show (JoinNode a)
forall a. Show a =&gt; Int -&gt; JoinNode a -&gt; ShowS
forall a. Show a =&gt; [JoinNode a] -&gt; ShowS
forall a. Show a =&gt; JoinNode a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [JoinNode a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [JoinNode a] -&gt; ShowS
show :: JoinNode a -&gt; String
$cshow :: forall a. Show a =&gt; JoinNode a -&gt; String
showsPrec :: Int -&gt; JoinNode a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; JoinNode a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">type</span><span> </span><span id="RemoteJoins"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoins"><span class="hs-identifier hs-var">RemoteJoins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinTree"><span class="hs-identifier hs-type">JoinTree</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoin"><span class="hs-identifier hs-type">RemoteJoin</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- | Collect all the remote joins to a remote schema from a join tree.</span><span>
</span><span id="line-124"></span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getRemoteSchemaJoins"><span class="hs-identifier hs-type">getRemoteSchemaJoins</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoins"><span class="hs-identifier hs-type">RemoteJoins</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-type">RemoteSchemaJoin</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span id="getRemoteSchemaJoins"><span class="annot"><span class="annottext">getRemoteSchemaJoins :: RemoteJoins -&gt; [RemoteSchemaJoin]
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getRemoteSchemaJoins"><span class="hs-identifier hs-var hs-var">getRemoteSchemaJoins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RemoteJoin -&gt; [RemoteSchemaJoin])
-&gt; [RemoteJoin] -&gt; [RemoteSchemaJoin]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">RemoteJoin -&gt; [RemoteSchemaJoin]
</span><a href="#local-6989586621689490459"><span class="hs-identifier hs-var">getRemoteSchemaJoin</span></a></span><span> </span><span class="annot"><span class="annottext">([RemoteJoin] -&gt; [RemoteSchemaJoin])
-&gt; (RemoteJoins -&gt; [RemoteJoin])
-&gt; RemoteJoins
-&gt; [RemoteSchemaJoin]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RemoteJoins -&gt; [RemoteJoin]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><a href="#local-6989586621689490459"><span class="hs-identifier hs-type">getRemoteSchemaJoin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoin"><span class="hs-identifier hs-type">RemoteJoin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-type">RemoteSchemaJoin</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-128"></span><span>    </span><span id="local-6989586621689490459"><span class="annot"><span class="annottext">getRemoteSchemaJoin :: RemoteJoin -&gt; [RemoteSchemaJoin]
</span><a href="#local-6989586621689490459"><span class="hs-identifier hs-var hs-var">getRemoteSchemaJoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-129"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoinSource"><span class="hs-identifier hs-type">RemoteJoinSource</span></a></span><span> </span><span class="annot"><span class="annottext">AnyBackend RemoteSourceJoin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689490455"><span class="annot"><span class="annottext">Maybe RemoteJoins
</span><a href="#local-6989586621689490455"><span class="hs-identifier hs-var">remoteJoins</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaJoin]
-&gt; (RemoteJoins -&gt; [RemoteSchemaJoin])
-&gt; Maybe RemoteJoins
-&gt; [RemoteSchemaJoin]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">RemoteJoins -&gt; [RemoteSchemaJoin]
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getRemoteSchemaJoins"><span class="hs-identifier hs-var">getRemoteSchemaJoins</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RemoteJoins
</span><a href="#local-6989586621689490455"><span class="hs-identifier hs-var">remoteJoins</span></a></span><span>
</span><span id="line-130"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoinRemoteSchema"><span class="hs-identifier hs-type">RemoteJoinRemoteSchema</span></a></span><span> </span><span id="local-6989586621689490452"><span class="annot"><span class="annottext">RemoteSchemaJoin
</span><a href="#local-6989586621689490452"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621689490451"><span class="annot"><span class="annottext">Maybe RemoteJoins
</span><a href="#local-6989586621689490451"><span class="hs-identifier hs-var">remoteJoins</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaJoin
</span><a href="#local-6989586621689490452"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaJoin -&gt; [RemoteSchemaJoin] -&gt; [RemoteSchemaJoin]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaJoin]
-&gt; (RemoteJoins -&gt; [RemoteSchemaJoin])
-&gt; Maybe RemoteJoins
-&gt; [RemoteSchemaJoin]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">RemoteJoins -&gt; [RemoteSchemaJoin]
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getRemoteSchemaJoins"><span class="hs-identifier hs-var">getRemoteSchemaJoins</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RemoteJoins
</span><a href="#local-6989586621689490451"><span class="hs-identifier hs-var">remoteJoins</span></a></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- Individual join information</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | An individual join entry point in a 'JoinTree'.</span><span>
</span><span id="line-136"></span><span class="hs-comment">--</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- Either a join against a source, or against a remote schema. In either case,</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- the constructor will contain that particular join's information (a</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- 'RemoteSourceJoin' or 'RemoteSchemaJoin' respectively) and, recursively, the</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- set of follow-up 'RemoteJoins' from that target, if any.</span><span>
</span><span id="line-141"></span><span id="local-6989586621689490449"><span id="local-6989586621689490450"></span></span><span class="hs-keyword">data</span><span> </span><span id="RemoteJoin"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoin"><span class="hs-identifier hs-var">RemoteJoin</span></a></span></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RemoteJoinSource"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoinSource"><span class="hs-identifier hs-var">RemoteJoinSource</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.SQL.AnyBackend.html#AnyBackend"><span class="hs-identifier hs-type">AB.AnyBackend</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSourceJoin"><span class="hs-identifier hs-type">RemoteSourceJoin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoins"><span class="hs-identifier hs-type">RemoteJoins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RemoteJoinRemoteSchema"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoinRemoteSchema"><span class="hs-identifier hs-var">RemoteJoinRemoteSchema</span></a></span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-type">RemoteSchemaJoin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoins"><span class="hs-identifier hs-type">RemoteJoins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490445"><span id="local-6989586621689490447"><span class="annot"><span class="annottext">RemoteJoin -&gt; RemoteJoin -&gt; Bool
(RemoteJoin -&gt; RemoteJoin -&gt; Bool)
-&gt; (RemoteJoin -&gt; RemoteJoin -&gt; Bool) -&gt; Eq RemoteJoin
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RemoteJoin -&gt; RemoteJoin -&gt; Bool
$c/= :: RemoteJoin -&gt; RemoteJoin -&gt; Bool
== :: RemoteJoin -&gt; RemoteJoin -&gt; Bool
$c== :: RemoteJoin -&gt; RemoteJoin -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. RemoteJoin -&gt; Rep RemoteJoin x)
-&gt; (forall x. Rep RemoteJoin x -&gt; RemoteJoin) -&gt; Generic RemoteJoin
forall x. Rep RemoteJoin x -&gt; RemoteJoin
forall x. RemoteJoin -&gt; Rep RemoteJoin x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep RemoteJoin x -&gt; RemoteJoin
$cfrom :: forall x. RemoteJoin -&gt; Rep RemoteJoin x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-comment">-- | A unique id that gets assigned to each 'RemoteJoin' (this is to avoid the</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- requirement of Ord/Hashable implementation for RemoteJoin)</span><span>
</span><span id="line-148"></span><span class="hs-keyword">type</span><span> </span><span id="JoinCallId"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinCallId"><span class="hs-identifier hs-var">JoinCallId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-comment">-- | Disambiguates between 'FieldName's which are provided as part of the</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- GraphQL selection provided by the user (i.e. 'JCSelected') and those which</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- we need to retreive data but which are not expressly requested (i.e.</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- 'JCPhantom').</span><span>
</span><span id="line-154"></span><span class="hs-comment">--</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- After processing the remote join, we remove all phantom 'FieldName's and</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- only return those which fall under the 'JCSelected' branch of this type.</span><span>
</span><span id="line-157"></span><span id="local-6989586621689490441"><span id="local-6989586621689490442"></span></span><span class="hs-keyword">data</span><span> </span><span id="JoinColumnAlias"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinColumnAlias"><span class="hs-identifier hs-var">JoinColumnAlias</span></a></span></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | This fieldname is already part of the response.</span><span>
</span><span id="line-159"></span><span>    </span><span id="JCSelected"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JCSelected"><span class="hs-identifier hs-var">JCSelected</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This is explicitly added for the join.</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-comment">-- Such keys will have to be removed from the response eventually.</span><span>
</span><span id="line-163"></span><span>    </span><span id="JCPhantom"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JCPhantom"><span class="hs-identifier hs-var">JCPhantom</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490435"><span id="local-6989586621689490437"><span class="annot"><span class="annottext">JoinColumnAlias -&gt; JoinColumnAlias -&gt; Bool
(JoinColumnAlias -&gt; JoinColumnAlias -&gt; Bool)
-&gt; (JoinColumnAlias -&gt; JoinColumnAlias -&gt; Bool)
-&gt; Eq JoinColumnAlias
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: JoinColumnAlias -&gt; JoinColumnAlias -&gt; Bool
$c/= :: JoinColumnAlias -&gt; JoinColumnAlias -&gt; Bool
== :: JoinColumnAlias -&gt; JoinColumnAlias -&gt; Bool
$c== :: JoinColumnAlias -&gt; JoinColumnAlias -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. JoinColumnAlias -&gt; Rep JoinColumnAlias x)
-&gt; (forall x. Rep JoinColumnAlias x -&gt; JoinColumnAlias)
-&gt; Generic JoinColumnAlias
forall x. Rep JoinColumnAlias x -&gt; JoinColumnAlias
forall x. JoinColumnAlias -&gt; Rep JoinColumnAlias x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep JoinColumnAlias x -&gt; JoinColumnAlias
$cfrom :: forall x. JoinColumnAlias -&gt; Rep JoinColumnAlias x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490427"><span id="local-6989586621689490429"><span id="local-6989586621689490431"><span class="annot"><span class="annottext">Int -&gt; JoinColumnAlias -&gt; ShowS
[JoinColumnAlias] -&gt; ShowS
JoinColumnAlias -&gt; String
(Int -&gt; JoinColumnAlias -&gt; ShowS)
-&gt; (JoinColumnAlias -&gt; String)
-&gt; ([JoinColumnAlias] -&gt; ShowS)
-&gt; Show JoinColumnAlias
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [JoinColumnAlias] -&gt; ShowS
$cshowList :: [JoinColumnAlias] -&gt; ShowS
show :: JoinColumnAlias -&gt; String
$cshow :: JoinColumnAlias -&gt; String
showsPrec :: Int -&gt; JoinColumnAlias -&gt; ShowS
$cshowsPrec :: Int -&gt; JoinColumnAlias -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490423"><span id="local-6989586621689490425"><span class="annot"><span class="annottext">Int -&gt; JoinColumnAlias -&gt; Int
JoinColumnAlias -&gt; Int
(Int -&gt; JoinColumnAlias -&gt; Int)
-&gt; (JoinColumnAlias -&gt; Int) -&gt; Hashable JoinColumnAlias
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: JoinColumnAlias -&gt; Int
$chash :: JoinColumnAlias -&gt; Int
hashWithSalt :: Int -&gt; JoinColumnAlias -&gt; Int
$chashWithSalt :: Int -&gt; JoinColumnAlias -&gt; Int
</span><a href="#local-6989586621689490423"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | Extracts the field name from the 'JoinColumnAlias', regardless of whether</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- the field is requested by the user of a &quot;phantom&quot; field.</span><span>
</span><span id="line-169"></span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getAliasFieldName"><span class="hs-identifier hs-type">getAliasFieldName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinColumnAlias"><span class="hs-identifier hs-type">JoinColumnAlias</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span>
</span><span id="line-170"></span><span id="getAliasFieldName"><span class="annot"><span class="annottext">getAliasFieldName :: JoinColumnAlias -&gt; FieldName
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getAliasFieldName"><span class="hs-identifier hs-var hs-var">getAliasFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JCSelected"><span class="hs-identifier hs-type">JCSelected</span></a></span><span> </span><span id="local-6989586621689490422"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621689490422"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621689490422"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JCPhantom"><span class="hs-identifier hs-type">JCPhantom</span></a></span><span> </span><span id="local-6989586621689490421"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621689490421"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621689490421"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-comment">-- | Extracts the list of phantom field names out of a given 'RemoteJoin',</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- i.e. the name of the fields that must be part of the query but were not</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- requested by the user.</span><span>
</span><span id="line-177"></span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getPhantomFields"><span class="hs-identifier hs-type">getPhantomFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoin"><span class="hs-identifier hs-type">RemoteJoin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-178"></span><span id="getPhantomFields"><span class="annot"><span class="annottext">getPhantomFields :: RemoteJoin -&gt; [FieldName]
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getPhantomFields"><span class="hs-identifier hs-var hs-var">getPhantomFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><span class="annottext">(JoinColumnAlias -&gt; Maybe FieldName)
-&gt; [JoinColumnAlias] -&gt; [FieldName]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">JoinColumnAlias -&gt; Maybe FieldName
</span><a href="#local-6989586621689490419"><span class="hs-identifier hs-var">getPhantomFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">([JoinColumnAlias] -&gt; [FieldName])
-&gt; (RemoteJoin -&gt; [JoinColumnAlias]) -&gt; RemoteJoin -&gt; [FieldName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName JoinColumnAlias -&gt; [JoinColumnAlias]
forall k v. HashMap k v -&gt; [v]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">(HashMap FieldName JoinColumnAlias -&gt; [JoinColumnAlias])
-&gt; (RemoteJoin -&gt; HashMap FieldName JoinColumnAlias)
-&gt; RemoteJoin
-&gt; [JoinColumnAlias]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RemoteJoin -&gt; HashMap FieldName JoinColumnAlias
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getJoinColumnMapping"><span class="hs-identifier hs-var">getJoinColumnMapping</span></a></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="#local-6989586621689490419"><span class="hs-identifier hs-type">getPhantomFieldName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinColumnAlias"><span class="hs-identifier hs-type">JoinColumnAlias</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span id="local-6989586621689490419"><span class="annot"><span class="annottext">getPhantomFieldName :: JoinColumnAlias -&gt; Maybe FieldName
</span><a href="#local-6989586621689490419"><span class="hs-identifier hs-var hs-var">getPhantomFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-183"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JCSelected"><span class="hs-identifier hs-type">JCSelected</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe FieldName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-184"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JCPhantom"><span class="hs-identifier hs-type">JCPhantom</span></a></span><span> </span><span id="local-6989586621689490417"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621689490417"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Maybe FieldName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621689490417"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- | Extracts an abstracted field mapping for a particular 'RemoteJoin', using a</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- common representation.</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- The RHS of the mapping uses 'JoinColumnAlias' instead of 'FieldName' to</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- differentiate between selected fields and phantom fields (see</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- 'JoinColumnAlias').</span><span>
</span><span id="line-192"></span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getJoinColumnMapping"><span class="hs-identifier hs-type">getJoinColumnMapping</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoin"><span class="hs-identifier hs-type">RemoteJoin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map.HashMap</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinColumnAlias"><span class="hs-identifier hs-type">JoinColumnAlias</span></a></span><span>
</span><span id="line-193"></span><span id="getJoinColumnMapping"><span class="annot"><span class="annottext">getJoinColumnMapping :: RemoteJoin -&gt; HashMap FieldName JoinColumnAlias
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#getJoinColumnMapping"><span class="hs-identifier hs-var hs-var">getJoinColumnMapping</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoinSource"><span class="hs-identifier hs-type">RemoteJoinSource</span></a></span><span> </span><span id="local-6989586621689490416"><span class="annot"><span class="annottext">AnyBackend RemoteSourceJoin
</span><a href="#local-6989586621689490416"><span class="hs-identifier hs-var">sourceJoin</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe RemoteJoins
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnyBackend RemoteSourceJoin
-&gt; (forall (b :: BackendType).
    RemoteSourceJoin b -&gt; HashMap FieldName JoinColumnAlias)
-&gt; HashMap FieldName JoinColumnAlias
forall (i :: BackendType -&gt; *) r.
AnyBackend i -&gt; (forall (b :: BackendType). i b -&gt; r) -&gt; r
</span><a href="Hasura.SQL.AnyBackend.html#runBackend"><span class="hs-identifier hs-var">AB.runBackend</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">AnyBackend RemoteSourceJoin
</span><a href="#local-6989586621689490416"><span class="hs-identifier hs-var">sourceJoin</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSourceJoin"><span class="hs-identifier hs-type">RemoteSourceJoin</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621689490413"><span class="annot"><span class="annottext">HashMap FieldName (JoinColumnAlias, (Column b, ScalarType b))
_rsjJoinColumns :: forall (b :: BackendType).
RemoteSourceJoin b
-&gt; HashMap FieldName (JoinColumnAlias, (Column b, ScalarType b))
_rsjJoinColumns :: HashMap FieldName (JoinColumnAlias, (Column b, ScalarType b))
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjJoinColumns"><span class="hs-identifier hs-var hs-var">_rsjJoinColumns</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><span class="annottext">((JoinColumnAlias, (Column b, ScalarType b)) -&gt; JoinColumnAlias)
-&gt; HashMap FieldName (JoinColumnAlias, (Column b, ScalarType b))
-&gt; HashMap FieldName JoinColumnAlias
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(JoinColumnAlias, (Column b, ScalarType b)) -&gt; JoinColumnAlias
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (JoinColumnAlias, (Column b, ScalarType b))
</span><a href="#local-6989586621689490413"><span class="hs-identifier hs-var">_rsjJoinColumns</span></a></span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoinRemoteSchema"><span class="hs-identifier hs-type">RemoteJoinRemoteSchema</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-type">RemoteSchemaJoin</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621689490410"><span class="annot"><span class="annottext">HashMap FieldName JoinColumnAlias
_rsjJoinColumnAliases :: RemoteSchemaJoin -&gt; HashMap FieldName JoinColumnAlias
_rsjJoinColumnAliases :: HashMap FieldName JoinColumnAlias
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjJoinColumnAliases"><span class="hs-identifier hs-var hs-var">_rsjJoinColumnAliases</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">Maybe RemoteJoins
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="annottext">HashMap FieldName JoinColumnAlias
</span><a href="#local-6989586621689490410"><span class="hs-identifier hs-var">_rsjJoinColumnAliases</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- Join to source</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-comment">-- | A 'RemoteSourceJoin' contains all the contextual information required for</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- the execution of a join against a source, translated from the IR's</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- representation of a selection (see 'AnnFieldG').</span><span>
</span><span id="line-207"></span><span id="local-6989586621689490407"><span id="local-6989586621689490408"></span></span><span class="hs-keyword">data</span><span> </span><span id="RemoteSourceJoin"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSourceJoin"><span class="hs-identifier hs-var">RemoteSourceJoin</span></a></span></span><span> </span><span id="local-6989586621689490671"><span class="annot"><a href="#local-6989586621689490671"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RemoteSourceJoin"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSourceJoin"><span class="hs-identifier hs-var">RemoteSourceJoin</span></a></span></span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_rsjSource"><span class="annot"><span class="annottext">RemoteSourceJoin b -&gt; SourceName
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjSource"><span class="hs-identifier hs-var hs-var">_rsjSource</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-209"></span><span>    </span><span id="_rsjSourceConfig"><span class="annot"><span class="annottext">RemoteSourceJoin b -&gt; SourceConfig b
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjSourceConfig"><span class="hs-identifier hs-var hs-var">_rsjSourceConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#SourceConfig"><span class="hs-identifier hs-type">SourceConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490671"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-210"></span><span>    </span><span id="_rsjRelationship"><span class="annot"><span class="annottext">RemoteSourceJoin b
-&gt; SourceRelationshipSelection b Void UnpreparedValue
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjRelationship"><span class="hs-identifier hs-var hs-var">_rsjRelationship</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#SourceRelationshipSelection"><span class="hs-identifier hs-type">IR.SourceRelationshipSelection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490671"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-211"></span><span>    </span><span id="_rsjJoinColumns"><span class="annot"><span class="annottext">RemoteSourceJoin b
-&gt; HashMap FieldName (JoinColumnAlias, (Column b, ScalarType b))
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjJoinColumns"><span class="hs-identifier hs-var hs-var">_rsjJoinColumns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map.HashMap</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinColumnAlias"><span class="hs-identifier hs-type">JoinColumnAlias</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490671"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#ScalarType"><span class="hs-identifier hs-type">ScalarType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490671"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. RemoteSourceJoin b -&gt; Rep (RemoteSourceJoin b) x)
-&gt; (forall x. Rep (RemoteSourceJoin b) x -&gt; RemoteSourceJoin b)
-&gt; Generic (RemoteSourceJoin b)
forall x. Rep (RemoteSourceJoin b) x -&gt; RemoteSourceJoin b
forall x. RemoteSourceJoin b -&gt; Rep (RemoteSourceJoin b) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (b :: BackendType) x.
Rep (RemoteSourceJoin b) x -&gt; RemoteSourceJoin b
forall (b :: BackendType) x.
RemoteSourceJoin b -&gt; Rep (RemoteSourceJoin b) x
$cto :: forall (b :: BackendType) x.
Rep (RemoteSourceJoin b) x -&gt; RemoteSourceJoin b
$cfrom :: forall (b :: BackendType) x.
RemoteSourceJoin b -&gt; Rep (RemoteSourceJoin b) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span id="local-6989586621689490395"><span id="local-6989586621689490397"><span id="local-6989586621689490399"><span id="local-6989586621689490401"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#ScalarValue"><span class="hs-identifier hs-type">ScalarValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#SourceConfig"><span class="hs-identifier hs-type">SourceConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#BooleanOperators"><span class="hs-identifier hs-type">BooleanOperators</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#FunctionArgumentExp"><span class="hs-identifier hs-type">FunctionArgumentExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSourceJoin"><span class="hs-identifier hs-type">RemoteSourceJoin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490401"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span id="local-6989586621689490390"><span id="local-6989586621689490392"><span id="local-6989586621689490394"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490394"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-226"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#ScalarValue"><span class="hs-identifier hs-type">ScalarValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490394"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#BooleanOperators"><span class="hs-identifier hs-type">BooleanOperators</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490394"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490394"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#FunctionArgumentExp"><span class="hs-identifier hs-type">FunctionArgumentExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490394"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490394"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSourceJoin"><span class="hs-identifier hs-type">RemoteSourceJoin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689490394"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- Join to schema</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- | A 'RemoteSchemaJoin' contains all the contextual information required for</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- the execution of a join against a remote schema, translated from the IR's</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- representation of a selection (see 'AnnFieldG').</span><span>
</span><span id="line-238"></span><span id="local-6989586621689490388"><span id="local-6989586621689490389"></span></span><span class="hs-keyword">data</span><span> </span><span id="RemoteSchemaJoin"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-var">RemoteSchemaJoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RemoteSchemaJoin"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-var">RemoteSchemaJoin</span></a></span></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | User-provided arguments with variables.</span><span>
</span><span id="line-240"></span><span>    </span><span id="_rsjArgs"><span class="annot"><span class="annottext">RemoteSchemaJoin -&gt; HashMap Name (InputValue RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjArgs"><span class="hs-identifier hs-var hs-var">_rsjArgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map.HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Variable.html#InputValue"><span class="hs-identifier hs-type">P.InputValue</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-comment">-- | Customizer for JSON result from the remote server.</span><span>
</span><span id="line-242"></span><span>    </span><span id="_rsjResultCustomizer"><span class="annot"><span class="annottext">RemoteSchemaJoin -&gt; ResultCustomizer
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjResultCustomizer"><span class="hs-identifier hs-var hs-var">_rsjResultCustomizer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html#ResultCustomizer"><span class="hs-identifier hs-type">ResultCustomizer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-comment">-- | User-provided selection set of remote field.</span><span>
</span><span id="line-244"></span><span>    </span><span id="_rsjSelSet"><span class="annot"><span class="annottext">RemoteSchemaJoin -&gt; SelectionSet Void RemoteSchemaVariable
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjSelSet"><span class="hs-identifier hs-var hs-var">_rsjSelSet</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#SelectionSet"><span class="hs-identifier hs-type">IR.SelectionSet</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-comment">-- | A map of the join column to its alias in the response</span><span>
</span><span id="line-246"></span><span>    </span><span id="_rsjJoinColumnAliases"><span class="annot"><span class="annottext">RemoteSchemaJoin -&gt; HashMap FieldName JoinColumnAlias
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjJoinColumnAliases"><span class="hs-identifier hs-var hs-var">_rsjJoinColumnAliases</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map.HashMap</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinColumnAlias"><span class="hs-identifier hs-type">JoinColumnAlias</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-comment">-- | Remote server fields.</span><span>
</span><span id="line-248"></span><span>    </span><span id="_rsjFieldCall"><span class="annot"><span class="annottext">RemoteSchemaJoin -&gt; NonEmpty FieldCall
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjFieldCall"><span class="hs-identifier hs-var hs-var">_rsjFieldCall</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.ToSchema.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-comment">-- | The remote schema server info.</span><span>
</span><span id="line-250"></span><span>    </span><span id="_rsjRemoteSchema"><span class="annot"><span class="annottext">RemoteSchemaJoin -&gt; RemoteSchemaInfo
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_rsjRemoteSchema"><span class="hs-identifier hs-var hs-var">_rsjRemoteSchema</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInfo"><span class="hs-identifier hs-type">RemoteSchemaInfo</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. RemoteSchemaJoin -&gt; Rep RemoteSchemaJoin x)
-&gt; (forall x. Rep RemoteSchemaJoin x -&gt; RemoteSchemaJoin)
-&gt; Generic RemoteSchemaJoin
forall x. Rep RemoteSchemaJoin x -&gt; RemoteSchemaJoin
forall x. RemoteSchemaJoin -&gt; Rep RemoteSchemaJoin x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep RemoteSchemaJoin x -&gt; RemoteSchemaJoin
$cfrom :: forall x. RemoteSchemaJoin -&gt; Rep RemoteSchemaJoin x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- NOTE: This cannot be derived automatically, as 'RemoteResultCustomizer' does</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- not permit a proper 'Eq' instance (it's a newtype around a function).</span><span>
</span><span id="line-256"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689490378"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-type">RemoteSchemaJoin</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-257"></span><span>  </span><span id="local-6989586621689490377"><span class="annot"><span class="annottext">== :: RemoteSchemaJoin -&gt; RemoteSchemaJoin -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(==)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((HashMap Name (InputValue RemoteSchemaVariable),
  SelectionSet Void RemoteSchemaVariable,
  HashMap FieldName JoinColumnAlias, NonEmpty FieldCall,
  RemoteSchemaInfo)
 -&gt; (HashMap Name (InputValue RemoteSchemaVariable),
     SelectionSet Void RemoteSchemaVariable,
     HashMap FieldName JoinColumnAlias, NonEmpty FieldCall,
     RemoteSchemaInfo)
 -&gt; Bool)
-&gt; (RemoteSchemaJoin
    -&gt; (HashMap Name (InputValue RemoteSchemaVariable),
        SelectionSet Void RemoteSchemaVariable,
        HashMap FieldName JoinColumnAlias, NonEmpty FieldCall,
        RemoteSchemaInfo))
-&gt; RemoteSchemaJoin
-&gt; RemoteSchemaJoin
-&gt; Bool
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">on</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Name (InputValue RemoteSchemaVariable),
 SelectionSet Void RemoteSchemaVariable,
 HashMap FieldName JoinColumnAlias, NonEmpty FieldCall,
 RemoteSchemaInfo)
-&gt; (HashMap Name (InputValue RemoteSchemaVariable),
    SelectionSet Void RemoteSchemaVariable,
    HashMap FieldName JoinColumnAlias, NonEmpty FieldCall,
    RemoteSchemaInfo)
-&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteSchemaJoin"><span class="hs-identifier hs-type">RemoteSchemaJoin</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621689490370"><span id="local-6989586621689490371"><span id="local-6989586621689490372"><span id="local-6989586621689490373"><span id="local-6989586621689490374"><span id="local-6989586621689490375"><span class="annot"><span class="annottext">NonEmpty FieldCall
HashMap Name (InputValue RemoteSchemaVariable)
HashMap FieldName JoinColumnAlias
ResultCustomizer
RemoteSchemaInfo
SelectionSet Void RemoteSchemaVariable
_rsjRemoteSchema :: RemoteSchemaInfo
_rsjFieldCall :: NonEmpty FieldCall
_rsjJoinColumnAliases :: HashMap FieldName JoinColumnAlias
_rsjSelSet :: SelectionSet Void RemoteSchemaVariable
_rsjResultCustomizer :: ResultCustomizer
_rsjArgs :: HashMap Name (InputValue RemoteSchemaVariable)
_rsjRemoteSchema :: RemoteSchemaJoin -&gt; RemoteSchemaInfo
_rsjFieldCall :: RemoteSchemaJoin -&gt; NonEmpty FieldCall
_rsjSelSet :: RemoteSchemaJoin -&gt; SelectionSet Void RemoteSchemaVariable
_rsjResultCustomizer :: RemoteSchemaJoin -&gt; ResultCustomizer
_rsjArgs :: RemoteSchemaJoin -&gt; HashMap Name (InputValue RemoteSchemaVariable)
_rsjJoinColumnAliases :: RemoteSchemaJoin -&gt; HashMap FieldName JoinColumnAlias
</span><a href="#local-6989586621689490370"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap Name (InputValue RemoteSchemaVariable)
</span><a href="#local-6989586621689490375"><span class="hs-identifier hs-var">_rsjArgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SelectionSet Void RemoteSchemaVariable
</span><a href="#local-6989586621689490373"><span class="hs-identifier hs-var">_rsjSelSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName JoinColumnAlias
</span><a href="#local-6989586621689490372"><span class="hs-identifier hs-var">_rsjJoinColumnAliases</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621689490371"><span class="hs-identifier hs-var">_rsjFieldCall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621689490370"><span class="hs-identifier hs-var">_rsjRemoteSchema</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-261"></span><span class="hs-comment">-- Join arguments</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-comment">-- | A map of fieldname to values extracted from each LHS row/object</span><span>
</span><span id="line-264"></span><span class="hs-comment">--</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- For example, if a remote relationship 'weather' on 'city' table</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- is defined as follows:</span><span>
</span><span id="line-267"></span><span class="hs-comment">--   city.weather = get_weather(city: city.code, cityState: city.state_code)</span><span>
</span><span id="line-268"></span><span class="hs-comment">-- a join argument for this join would have the values of columns 'code' and</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- 'state_code' for each 'city' row that participates in the join</span><span>
</span><span id="line-270"></span><span id="local-6989586621689490368"><span id="local-6989586621689490369"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="JoinArgument"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArgument"><span class="hs-identifier hs-var">JoinArgument</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JoinArgument"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArgument"><span class="hs-identifier hs-var">JoinArgument</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unJoinArgument"><span class="annot"><span class="annottext">JoinArgument -&gt; HashMap FieldName Value
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#unJoinArgument"><span class="hs-identifier hs-var hs-var">unJoinArgument</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map.HashMap</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/src"><span class="hs-identifier hs-type">AO.Value</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490362"><span id="local-6989586621689490364"><span class="annot"><span class="annottext">JoinArgument -&gt; JoinArgument -&gt; Bool
(JoinArgument -&gt; JoinArgument -&gt; Bool)
-&gt; (JoinArgument -&gt; JoinArgument -&gt; Bool) -&gt; Eq JoinArgument
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: JoinArgument -&gt; JoinArgument -&gt; Bool
$c/= :: JoinArgument -&gt; JoinArgument -&gt; Bool
== :: JoinArgument -&gt; JoinArgument -&gt; Bool
$c== :: JoinArgument -&gt; JoinArgument -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. JoinArgument -&gt; Rep JoinArgument x)
-&gt; (forall x. Rep JoinArgument x -&gt; JoinArgument)
-&gt; Generic JoinArgument
forall x. Rep JoinArgument x -&gt; JoinArgument
forall x. JoinArgument -&gt; Rep JoinArgument x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep JoinArgument x -&gt; JoinArgument
$cfrom :: forall x. JoinArgument -&gt; Rep JoinArgument x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689490354"><span id="local-6989586621689490356"><span id="local-6989586621689490358"><span class="annot"><span class="annottext">Int -&gt; JoinArgument -&gt; ShowS
[JoinArgument] -&gt; ShowS
JoinArgument -&gt; String
(Int -&gt; JoinArgument -&gt; ShowS)
-&gt; (JoinArgument -&gt; String)
-&gt; ([JoinArgument] -&gt; ShowS)
-&gt; Show JoinArgument
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [JoinArgument] -&gt; ShowS
$cshowList :: [JoinArgument] -&gt; ShowS
show :: JoinArgument -&gt; String
$cshow :: JoinArgument -&gt; String
showsPrec :: Int -&gt; JoinArgument -&gt; ShowS
$cshowsPrec :: Int -&gt; JoinArgument -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621689490350"><span id="local-6989586621689490352"><span class="annot"><span class="annottext">Int -&gt; JoinArgument -&gt; Int
JoinArgument -&gt; Int
(Int -&gt; JoinArgument -&gt; Int)
-&gt; (JoinArgument -&gt; Int) -&gt; Hashable JoinArgument
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: JoinArgument -&gt; Int
$chash :: JoinArgument -&gt; Int
hashWithSalt :: Int -&gt; JoinArgument -&gt; Int
$chashWithSalt :: Int -&gt; JoinArgument -&gt; Int
</span><a href="#local-6989586621689490350"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-comment">-- | A unique id assigned to each join argument</span><span>
</span><span id="line-275"></span><span class="hs-keyword">type</span><span> </span><span id="JoinArgumentId"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArgumentId"><span class="hs-identifier hs-var">JoinArgumentId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span id="local-6989586621689490348"><span id="local-6989586621689490349"></span></span><span class="hs-keyword">data</span><span> </span><span id="JoinArguments"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArguments"><span class="hs-identifier hs-var">JoinArguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JoinArguments"><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArguments"><span class="hs-identifier hs-var">JoinArguments</span></a></span></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | The 'RemoteJoin' associated with the join arguments within this</span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-comment">-- structure.</span><span>
</span><span id="line-280"></span><span>    </span><span id="_jalJoin"><span class="annot"><span class="annottext">JoinArguments -&gt; RemoteJoin
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_jalJoin"><span class="hs-identifier hs-var hs-var">_jalJoin</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#RemoteJoin"><span class="hs-identifier hs-type">RemoteJoin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-comment">-- | Arguments for which we must fetch a response from the remote, along with</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-comment">-- the identifiers that are used to stitch the final response together.</span><span>
</span><span id="line-283"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-comment">-- NOTE: 'Map.HashMap' is used to deduplicate multiple 'JoinArgument's so that</span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-comment">-- we avoid fetching more data from a remote than is necessary (i.e. in the</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-comment">-- case of duplicate arguments).</span><span>
</span><span id="line-287"></span><span>    </span><span id="_jalArguments"><span class="annot"><span class="annottext">JoinArguments -&gt; HashMap JoinArgument Int
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_jalArguments"><span class="hs-identifier hs-var hs-var">_jalArguments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map.HashMap</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArgument"><span class="hs-identifier hs-type">JoinArgument</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#JoinArgumentId"><span class="hs-identifier hs-type">JoinArgumentId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-comment">-- | The 'FieldName' associated with the &quot;replacement token&quot; for this join</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-comment">-- argument.</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-comment">-- NOTE: We need this for query logging; ideally we would use the full path</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-comment">-- for the GraphQL query associated with this remote join, but we don't have</span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-comment">-- access to that here so this is the next best thing to do.</span><span>
</span><span id="line-294"></span><span>    </span><span id="_jalFieldName"><span class="annot"><span class="annottext">JoinArguments -&gt; FieldName
</span><a href="Hasura.GraphQL.Execute.RemoteJoin.Types.html#_jalFieldName"><span class="hs-identifier hs-var hs-var">_jalFieldName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. JoinArguments -&gt; Rep JoinArguments x)
-&gt; (forall x. Rep JoinArguments x -&gt; JoinArguments)
-&gt; Generic JoinArguments
forall x. Rep JoinArguments x -&gt; JoinArguments
forall x. JoinArguments -&gt; Rep JoinArguments x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep JoinArguments x -&gt; JoinArguments
$cfrom :: forall x. JoinArguments -&gt; Rep JoinArguments x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span></pre></body></html>