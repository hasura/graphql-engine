- description: Try to add a POST rest endpoint with arguments
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: create_rest_endpoint
    args:
      url: recurse_arg
      name: recurse_arg
      methods:
      - POST
      definition:
        query:
          collection_name: test_collection
          query_name: mutation_recursive_arg

- description: Call openapi json endpoint
  url: /api/swagger/json
  method: GET
  status: 200
  query:
  response:
    openapi: 3.0.0
    info:
      version: ''
      title: Rest Endpoints
      description: This OpenAPI specification is automatically generated by Hasura.
    paths:
      /api/rest/recurse_arg:
        post:
          summary: recurse_arg
          description: "***\nThe GraphQl query for this endpoint is:\n``` graphql\n\
            mutation MyMutation($object: test_table_recurse_insert_input!) { insert_test_table_recurse_one(object:\
            \ $object) { id } }\n```"
          parameters:
          - schema:
              type: string
            in: header
            name: x-hasura-admin-secret
            description: Your x-hasura-admin-secret will be used for authentication
              of the API request.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    object:
                      $ref: '#/components/schemas/test_table_recurse_insert_input!'
            description: Query parameters can also be provided in the request body as
              a JSON object
          responses:
            '200':
              content:
                application/json:
                  schema:
                    properties:
                      insert_test_table_recurse_one:
                        title: test_table_recurse
                        type: object
                        description: columns and relationships of "test_table_recurse"
                        nullable: true
                        properties:
                          id:
                            $ref: '#/components/schemas/uuid!'
              description: Responses for POST /api/rest/recurse_arg
    components:
      schemas:
        test_table_recurse_insert_input!:
          title: test_table_recurse_insert_input
          type: object
          description: input type for inserting data into table "test_table_recurse"
          nullable: false
          properties:
            random_data:
              title: String
              type: string
              nullable: true
            id:
              $ref: '#/components/schemas/uuid'
            recurse_rel:
              $ref: '#/components/schemas/test_table_recurse_obj_rel_insert_input'
        test_table_recurse_obj_rel_insert_input:
          title: test_table_recurse_obj_rel_insert_input
          type: object
          description: input type for inserting object relation for remote table "test_table_recurse"
          nullable: true
          properties:
            data:
              $ref: '#/components/schemas/test_table_recurse_insert_input!'
        uuid:
          title: uuid
          type: string
          nullable: true
          pattern: '[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89aAbB][a-f0-9]{3}-[a-f0-9]{12}'
        uuid!:
          title: uuid
          type: string
          nullable: false
          pattern: '[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89aAbB][a-f0-9]{3}-[a-f0-9]{12}'

- description: Try to remove the endpoint
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: drop_rest_endpoint
    args:
      name: recurse_arg
