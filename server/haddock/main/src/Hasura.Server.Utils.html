<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.Server.Utils</span><span>
</span><span id="line-2"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html#APIVersion"><span class="hs-identifier">APIVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#DeprecatedEnvVars"><span class="hs-identifier">DeprecatedEnvVars</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#EnvVarsMovedToMetadata"><span class="hs-identifier">EnvVarsMovedToMetadata</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#adminSecretHeader"><span class="hs-identifier">adminSecretHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#commonClientHeadersIgnored"><span class="hs-identifier">commonClientHeadersIgnored</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#cryptoHash"><span class="hs-identifier">cryptoHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#deprecatedAccessKeyHeader"><span class="hs-identifier">deprecatedAccessKeyHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#deprecatedEnvVars"><span class="hs-identifier">deprecatedEnvVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#englishList"><span class="hs-identifier">englishList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#envVarsMovedToMetadata"><span class="hs-identifier">envVarsMovedToMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier">executeJSONPath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#filterHeaders"><span class="hs-identifier">filterHeaders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#fmapL"><span class="hs-identifier">fmapL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#generateFingerprint"><span class="hs-identifier">generateFingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#getRequestHeader"><span class="hs-identifier">getRequestHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#getValFromEnvOrScript"><span class="hs-identifier">getValFromEnvOrScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#gzipHeader"><span class="hs-identifier">gzipHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#httpExceptToJSON"><span class="hs-identifier">httpExceptToJSON</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#isReqUserId"><span class="hs-identifier">isReqUserId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#isSessionVariable"><span class="hs-identifier">isSessionVariable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#jsonHeader"><span class="hs-identifier">jsonHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#makeReasonMessage"><span class="hs-identifier">makeReasonMessage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#mkClientHeadersForward"><span class="hs-identifier">mkClientHeadersForward</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#mkSetCookieHeaders"><span class="hs-identifier">mkSetCookieHeaders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#parseConnLifeTime"><span class="hs-identifier">parseConnLifeTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#parseStringAsBool"><span class="hs-identifier">parseStringAsBool</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#quoteRegex"><span class="hs-identifier">quoteRegex</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#readIsoLevel"><span class="hs-identifier">readIsoLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#redactSensitiveHeader"><span class="hs-identifier">redactSensitiveHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#requestIdHeader"><span class="hs-identifier">requestIdHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#sqlHeader"><span class="hs-identifier">sqlHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#htmlHeader"><span class="hs-identifier">htmlHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#useBackendOnlyPermissionsHeader"><span class="hs-identifier">useBackendOnlyPermissionsHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#userIdHeader"><span class="hs-identifier">userIdHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#userRoleHeader"><span class="hs-identifier">userRoleHeader</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#sessionVariablePrefix"><span class="hs-identifier">sessionVariablePrefix</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">where</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/lens-4.19.2-daf3092aeea9938626e934a14668e9805779308a8fd5b5104ece8391dad21dcb/share/doc/html/src"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/lens-4.19.2-daf3092aeea9938626e934a14668e9805779308a8fd5b5104ece8391dad21dcb/share/doc/html/src"><span class="hs-operator">(^..)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/cryptonite-0.28-3f2248fbe68e5efcd97603d2514825d85aecf953096454a5dc2f4018e47bbeb0/share/doc/html/src"><span class="hs-identifier">Crypto.Hash</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Crypto</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier">Data.Aeson.Internal</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/memory-0.15.0-af2fb57d431a7116d6ca7780be11f5312fc7d21fc96e29c6292451670342ee3c/share/doc/html/src"><span class="hs-identifier">Data.ByteArray</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/memory-0.15.0-af2fb57d431a7116d6ca7780be11f5312fc7d21fc96e29c6292451670342ee3c/share/doc/html/src"><span class="hs-identifier">convert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/base16-bytestring-1.0.1.0-365207190e0c37e60f42c0937368464259f58c81e8dc3d28f4230ffa6fe76730/share/doc/html/src"><span class="hs-identifier">Data.ByteString.Base16</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Base16</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BL</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/case-insensitive-1.2.1.0-f37403c31ae30565f4f5185c9552cd5be5494779aefc01c8b942134bc67ffc9b/share/doc/html/src"><span class="hs-identifier">Data.CaseInsensitive</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/ci-info-0.1.0.0-78d6c532ce72dc739a30f8e52e322a127befec2efbb3bd97efa3173471f3263b/share/doc/html/src"><span class="hs-identifier">CI</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Char</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/file-embed-0.0.13.0-68939e3955a09100c2ff24e1a35278f5f3a4982becdb183210b9ef3228803fd5/share/doc/html/src"><span class="hs-identifier">Data.FileEmbed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/file-embed-0.0.13.0-68939e3955a09100c2ff24e1a35278f5f3a4982becdb183210b9ef3228803fd5/share/doc/html/src"><span class="hs-identifier">makeRelativeToProject</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/unordered-containers-0.2.13.0-3905cc0dd583bf2295f4fffefb94c9b368aca205fb5d2fe8619d64b3bfba7af9/share/doc/html/src"><span class="hs-identifier">Data.HashSet</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier">Data.Text.IO</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TI</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier">Data.Time</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/uuid-1.3.13-138e161e8724015bd781a6bb16bbee975ffea1e21ae40dbd2cc1b069b48b6fd2/share/doc/html/src"><span class="hs-identifier">Data.UUID</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UUID</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/uuid-1.3.13-138e161e8724015bd781a6bb16bbee975ffea1e21ae40dbd2cc1b069b48b6fd2/share/doc/html/src"><span class="hs-identifier">Data.UUID.V4</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UUID</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/vector-0.12.2.0-654a7d99ca0e2ee63ef5ea85f3b572641bdd0ed99c3ce831f8a181b6c6af61eb/share/doc/html/src"><span class="hs-identifier">Data.Vector</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/pg-client-0.1.0-25b31efe2444cb76aa2939f99040399278f7a20b0fefdb30fa4af9b1c213eb3c/share/doc/html/src"><span class="hs-identifier">Database.PG.Query</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Q</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Base.Instances.html"><span class="hs-identifier">Hasura.Base.Instances</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier">Language.Haskell.TH.Syntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier">Q</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier">TExp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier">Language.Haskell.TH.Syntax</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TH</span></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier">Network.HTTP.Client</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HC</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier">Network.HTTP.Types</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HTTP</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/wreq-0.5.3.3-941ba3e6a8f3d536b96e0e3315fab6fb334515b429932c189fd8e943ca1a105b/share/doc/html/src"><span class="hs-identifier">Network.Wreq</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Wreq</span></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">System.Environment</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">System.Exit</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/process-1.6.13.2/src"><span class="hs-identifier">System.Process</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/regex-tdfa-1.3.1.0-04a0769e9ccf56c099670ee71157c228a9e1bac1cf507bf75caf81bbbd859766/share/doc/html/src"><span class="hs-identifier">Text.Regex.TDFA</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TDFA</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/regex-tdfa-1.3.1.0-04a0769e9ccf56c099670ee71157c228a9e1bac1cf507bf75caf81bbbd859766/share/doc/html/src"><span class="hs-identifier">Text.Regex.TDFA.ReadRegex</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TDFA</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/regex-tdfa-1.3.1.0-04a0769e9ccf56c099670ee71157c228a9e1bac1cf507bf75caf81bbbd859766/share/doc/html/src"><span class="hs-identifier">Text.Regex.TDFA.TDFA</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TDFA</span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="annot"><a href="Hasura.Server.Utils.html#jsonHeader"><span class="hs-identifier hs-type">jsonHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span>
</span><span id="line-78"></span><span id="jsonHeader"><span class="annot"><span class="annottext">jsonHeader :: Header
</span><a href="Hasura.Server.Utils.html#jsonHeader"><span class="hs-identifier hs-var hs-var">jsonHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Content-Type&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;application/json; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="annot"><a href="Hasura.Server.Utils.html#sqlHeader"><span class="hs-identifier hs-type">sqlHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span>
</span><span id="line-81"></span><span id="sqlHeader"><span class="annot"><span class="annottext">sqlHeader :: Header
</span><a href="Hasura.Server.Utils.html#sqlHeader"><span class="hs-identifier hs-var hs-var">sqlHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Content-Type&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;application/sql; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="annot"><a href="Hasura.Server.Utils.html#htmlHeader"><span class="hs-identifier hs-type">htmlHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span>
</span><span id="line-84"></span><span id="htmlHeader"><span class="annot"><span class="annottext">htmlHeader :: Header
</span><a href="Hasura.Server.Utils.html#htmlHeader"><span class="hs-identifier hs-var hs-var">htmlHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Content-Type&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;text/html; charset=utf-8&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="annot"><a href="Hasura.Server.Utils.html#gzipHeader"><span class="hs-identifier hs-type">gzipHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span>
</span><span id="line-87"></span><span id="gzipHeader"><span class="annot"><span class="annottext">gzipHeader :: Header
</span><a href="Hasura.Server.Utils.html#gzipHeader"><span class="hs-identifier hs-var hs-var">gzipHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Content-Encoding&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;gzip&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span id="local-6989586621690136128"><span class="annot"><a href="Hasura.Server.Utils.html#userRoleHeader"><span class="hs-identifier hs-type">userRoleHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136128"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690136128"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-90"></span><span id="userRoleHeader"><span class="annot"><span class="annottext">userRoleHeader :: a
</span><a href="Hasura.Server.Utils.html#userRoleHeader"><span class="hs-identifier hs-var hs-var">userRoleHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;x-hasura-role&quot;</span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span id="local-6989586621690136127"><span class="annot"><a href="Hasura.Server.Utils.html#deprecatedAccessKeyHeader"><span class="hs-identifier hs-type">deprecatedAccessKeyHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136127"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690136127"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-93"></span><span id="deprecatedAccessKeyHeader"><span class="annot"><span class="annottext">deprecatedAccessKeyHeader :: a
</span><a href="Hasura.Server.Utils.html#deprecatedAccessKeyHeader"><span class="hs-identifier hs-var hs-var">deprecatedAccessKeyHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;x-hasura-access-key&quot;</span></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span id="local-6989586621690136126"><span class="annot"><a href="Hasura.Server.Utils.html#adminSecretHeader"><span class="hs-identifier hs-type">adminSecretHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136126"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690136126"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-96"></span><span id="adminSecretHeader"><span class="annot"><span class="annottext">adminSecretHeader :: a
</span><a href="Hasura.Server.Utils.html#adminSecretHeader"><span class="hs-identifier hs-var hs-var">adminSecretHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;x-hasura-admin-secret&quot;</span></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span id="local-6989586621690136125"><span class="annot"><a href="Hasura.Server.Utils.html#userIdHeader"><span class="hs-identifier hs-type">userIdHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136125"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690136125"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-99"></span><span id="userIdHeader"><span class="annot"><span class="annottext">userIdHeader :: a
</span><a href="Hasura.Server.Utils.html#userIdHeader"><span class="hs-identifier hs-var hs-var">userIdHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;x-hasura-user-id&quot;</span></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span id="local-6989586621690136124"><span class="annot"><a href="Hasura.Server.Utils.html#requestIdHeader"><span class="hs-identifier hs-type">requestIdHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136124"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690136124"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-102"></span><span id="requestIdHeader"><span class="annot"><span class="annottext">requestIdHeader :: a
</span><a href="Hasura.Server.Utils.html#requestIdHeader"><span class="hs-identifier hs-var hs-var">requestIdHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;x-request-id&quot;</span></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span id="local-6989586621690136123"><span class="annot"><a href="Hasura.Server.Utils.html#useBackendOnlyPermissionsHeader"><span class="hs-identifier hs-type">useBackendOnlyPermissionsHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136123"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690136123"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-105"></span><span id="useBackendOnlyPermissionsHeader"><span class="annot"><span class="annottext">useBackendOnlyPermissionsHeader :: a
</span><a href="Hasura.Server.Utils.html#useBackendOnlyPermissionsHeader"><span class="hs-identifier hs-var hs-var">useBackendOnlyPermissionsHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;x-hasura-use-backend-only-permissions&quot;</span></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="annot"><a href="Hasura.Server.Utils.html#getRequestHeader"><span class="hs-identifier hs-type">getRequestHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.HeaderName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-108"></span><span id="getRequestHeader"><span class="annot"><span class="annottext">getRequestHeader :: HeaderName -&gt; [Header] -&gt; Maybe ByteString
</span><a href="Hasura.Server.Utils.html#getRequestHeader"><span class="hs-identifier hs-var hs-var">getRequestHeader</span></a></span></span><span> </span><span id="local-6989586621690136122"><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136122"><span class="hs-identifier hs-var">hdrName</span></a></span></span><span> </span><span id="local-6989586621690136121"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690136121"><span class="hs-identifier hs-var">hdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Header -&gt; ByteString
forall a b. (a, b) -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(Header -&gt; ByteString) -&gt; Maybe Header -&gt; Maybe ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Header
</span><a href="#local-6989586621690136119"><span class="hs-identifier hs-var">mHeader</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>    </span><span id="local-6989586621690136119"><span class="annot"><span class="annottext">mHeader :: Maybe Header
</span><a href="#local-6989586621690136119"><span class="hs-identifier hs-var hs-var">mHeader</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Header -&gt; Bool) -&gt; [Header] -&gt; Maybe Header
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">find</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621690136117"><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621690136117"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Header -&gt; HeaderName
forall a b. (a, b) -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621690136117"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; HeaderName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136122"><span class="hs-identifier hs-var">hdrName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690136121"><span class="hs-identifier hs-var">hdrs</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Hasura.Server.Utils.html#parseStringAsBool"><span class="hs-identifier hs-type">parseStringAsBool</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-113"></span><span id="parseStringAsBool"><span class="annot"><span class="annottext">parseStringAsBool :: String -&gt; Either String Bool
</span><a href="Hasura.Server.Utils.html#parseStringAsBool"><span class="hs-identifier hs-var hs-var">parseStringAsBool</span></a></span></span><span> </span><span id="local-6989586621690136116"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136116"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; String -&gt; String
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toLower</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136116"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621690136113"><span class="hs-identifier hs-var">truthVals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Either String Bool
forall a b. b -&gt; Either a b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; String -&gt; String
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toLower</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136116"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621690136112"><span class="hs-identifier hs-var">falseVals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Either String Bool
forall a b. b -&gt; Either a b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String Bool
forall a b. a -&gt; Either a b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136111"><span class="hs-identifier hs-var">errMsg</span></a></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-118"></span><span>    </span><span id="local-6989586621690136113"><span class="annot"><span class="annottext">truthVals :: [String]
</span><a href="#local-6989586621690136113"><span class="hs-identifier hs-var hs-var">truthVals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;true&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;t&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;yes&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;y&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span>    </span><span id="local-6989586621690136112"><span class="annot"><span class="annottext">falseVals :: [String]
</span><a href="#local-6989586621690136112"><span class="hs-identifier hs-var hs-var">falseVals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;false&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;f&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;no&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;n&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>    </span><span id="local-6989586621690136111"><span class="annot"><span class="annottext">errMsg :: String
</span><a href="#local-6989586621690136111"><span class="hs-identifier hs-var hs-var">errMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-122"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; Not a valid boolean text. &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;True values are &quot;</span></span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621690136113"><span class="hs-identifier hs-var">truthVals</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; and  False values are &quot;</span></span><span>
</span><span id="line-125"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621690136112"><span class="hs-identifier hs-var">falseVals</span></a></span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;. All values are case insensitive&quot;</span></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-comment">-- Get an env var during compile time</span><span>
</span><span id="line-129"></span><span class="annot"><a href="Hasura.Server.Utils.html#getValFromEnvOrScript"><span class="hs-identifier hs-type">getValFromEnvOrScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-type">Q</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-type">TExp</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span id="getValFromEnvOrScript"><span class="annot"><span class="annottext">getValFromEnvOrScript :: String -&gt; String -&gt; Q (TExp String)
</span><a href="Hasura.Server.Utils.html#getValFromEnvOrScript"><span class="hs-identifier hs-var hs-var">getValFromEnvOrScript</span></a></span></span><span> </span><span id="local-6989586621690136108"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136108"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621690136107"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136107"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-131"></span><span>  </span><span id="local-6989586621690136106"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621690136106"><span class="hs-identifier hs-var">maybeVal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe String) -&gt; Q (Maybe String)
forall a. IO a -&gt; Q a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-var">TH.runIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe String) -&gt; Q (Maybe String))
-&gt; IO (Maybe String) -&gt; Q (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Maybe String)
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">lookupEnv</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136108"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621690136106"><span class="hs-identifier hs-var">maybeVal</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621690136103"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136103"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[||</span><span class="hs-identifier">val</span><span class="hs-special">||]</span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><span class="annottext">Maybe String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q (TExp String)
</span><a href="Hasura.Server.Utils.html#runScript"><span class="hs-identifier hs-var">runScript</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136107"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">-- Run a shell script during compile time</span><span>
</span><span id="line-137"></span><span class="annot"><a href="Hasura.Server.Utils.html#runScript"><span class="hs-identifier hs-type">runScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-type">Q</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-type">TExp</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span id="runScript"><span class="annot"><span class="annottext">runScript :: String -&gt; Q (TExp String)
</span><a href="Hasura.Server.Utils.html#runScript"><span class="hs-identifier hs-var hs-var">runScript</span></a></span></span><span> </span><span id="local-6989586621690136101"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136101"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621690136100"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136100"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q String
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/file-embed-0.0.13.0-68939e3955a09100c2ff24e1a35278f5f3a4982becdb183210b9ef3228803fd5/share/doc/html/src"><span class="hs-identifier hs-var">makeRelativeToProject</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136101"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Q ()
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-var">TH.addDependentFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136100"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span id="local-6989586621690136098"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690136098"><span class="hs-identifier hs-var">fileContent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Text -&gt; Q Text
forall a. IO a -&gt; Q a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-var">TH.runIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Text -&gt; Q Text) -&gt; IO Text -&gt; Q Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Text
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-var">TI.readFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136100"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621690136096"><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621690136096"><span class="hs-identifier hs-var">exitCode</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690136095"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136095"><span class="hs-identifier hs-var">stdOut</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690136094"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136094"><span class="hs-identifier hs-var">stdErr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">IO (ExitCode, String, String) -&gt; Q (ExitCode, String, String)
forall a. IO a -&gt; Q a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-var">TH.runIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (ExitCode, String, String) -&gt; Q (ExitCode, String, String))
-&gt; IO (ExitCode, String, String) -&gt; Q (ExitCode, String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-144"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String -&gt; IO (ExitCode, String, String)
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/process-1.6.13.2/src"><span class="hs-identifier hs-var">readProcessWithExitCode</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;/bin/sh&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO (ExitCode, String, String))
-&gt; String -&gt; IO (ExitCode, String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-var">T.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690136098"><span class="hs-identifier hs-var">fileContent</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Q () -&gt; Q ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621690136096"><span class="hs-identifier hs-var">exitCode</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; ExitCode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Q () -&gt; Q ()) -&gt; Q () -&gt; Q ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Q ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q ()) -&gt; String -&gt; Q ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-147"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Running shell script &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136100"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; failed with exit code : &quot;</span></span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621690136096"><span class="hs-identifier hs-var">exitCode</span></a></span><span>
</span><span id="line-149"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; and with error : &quot;</span></span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136094"><span class="hs-identifier hs-var">stdErr</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-special">[||</span><span class="hs-identifier">stdOut</span><span class="hs-special">||]</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">-- | Quotes a regex using Template Haskell so syntax errors can be reported at compile-time.</span><span>
</span><span id="line-154"></span><span class="annot"><a href="Hasura.Server.Utils.html#quoteRegex"><span class="hs-identifier hs-type">quoteRegex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/regex-tdfa-1.3.1.0-04a0769e9ccf56c099670ee71157c228a9e1bac1cf507bf75caf81bbbd859766/share/doc/html/src"><span class="hs-identifier hs-type">TDFA.CompOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/regex-tdfa-1.3.1.0-04a0769e9ccf56c099670ee71157c228a9e1bac1cf507bf75caf81bbbd859766/share/doc/html/src"><span class="hs-identifier hs-type">TDFA.ExecOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-type">Q</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/template-haskell-2.16.0.0/src"><span class="hs-identifier hs-type">TExp</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/regex-tdfa-1.3.1.0-04a0769e9ccf56c099670ee71157c228a9e1bac1cf507bf75caf81bbbd859766/share/doc/html/src"><span class="hs-identifier hs-type">TDFA.Regex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span id="quoteRegex"><span class="annot"><span class="annottext">quoteRegex :: CompOption -&gt; ExecOption -&gt; String -&gt; Q (TExp Regex)
</span><a href="Hasura.Server.Utils.html#quoteRegex"><span class="hs-identifier hs-var hs-var">quoteRegex</span></a></span></span><span> </span><span id="local-6989586621690136088"><span class="annot"><span class="annottext">CompOption
</span><a href="#local-6989586621690136088"><span class="hs-identifier hs-var">compOption</span></a></span></span><span> </span><span id="local-6989586621690136087"><span class="annot"><span class="annottext">ExecOption
</span><a href="#local-6989586621690136087"><span class="hs-identifier hs-var">execOption</span></a></span></span><span> </span><span id="local-6989586621690136086"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136086"><span class="hs-identifier hs-var">regexText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-156"></span><span>  </span><span id="local-6989586621690136085"><span class="annot"><span class="annottext">(Pattern, (GroupIndex, DoPa))
</span><a href="#local-6989586621690136085"><span class="hs-identifier hs-var">regex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either ParseError (Pattern, (GroupIndex, DoPa))
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/regex-tdfa-1.3.1.0-04a0769e9ccf56c099670ee71157c228a9e1bac1cf507bf75caf81bbbd859766/share/doc/html/src"><span class="hs-identifier hs-var">TDFA.parseRegex</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136086"><span class="hs-identifier hs-var">regexText</span></a></span><span> </span><span class="annot"><span class="annottext">Either ParseError (Pattern, (GroupIndex, DoPa))
-&gt; (ParseError -&gt; Q (Pattern, (GroupIndex, DoPa)))
-&gt; Q (Pattern, (GroupIndex, DoPa))
forall (m :: * -&gt; *) e a.
Applicative m =&gt;
Either e a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="Hasura.Prelude.html#onLeft"><span class="hs-operator hs-var">`onLeft`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Q (Pattern, (GroupIndex, DoPa))
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q (Pattern, (GroupIndex, DoPa)))
-&gt; (ParseError -&gt; String)
-&gt; ParseError
-&gt; Q (Pattern, (GroupIndex, DoPa))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">[||</span><span class="hs-identifier">TDFA.patternToRegex</span><span> </span><span class="hs-identifier">regex</span><span> </span><span class="hs-identifier">compOption</span><span> </span><span class="hs-identifier">execOption</span><span class="hs-special">||]</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span id="local-6989586621690136079"><span id="local-6989586621690136080"><span id="local-6989586621690136081"><span class="annot"><a href="Hasura.Server.Utils.html#fmapL"><span class="hs-identifier hs-type">fmapL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621690136081"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690136080"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136081"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136079"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136080"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136079"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-160"></span><span id="fmapL"><span class="annot"><span class="annottext">fmapL :: (a -&gt; a') -&gt; Either a b -&gt; Either a' b
</span><a href="Hasura.Server.Utils.html#fmapL"><span class="hs-identifier hs-var hs-var">fmapL</span></a></span></span><span> </span><span id="local-6989586621690136078"><span class="annot"><span class="annottext">a -&gt; a'
</span><a href="#local-6989586621690136078"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621690136077"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621690136077"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a' -&gt; Either a' b
forall a b. a -&gt; Either a b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a'
</span><a href="#local-6989586621690136078"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621690136077"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span class="annot"><a href="Hasura.Server.Utils.html#fmapL"><span class="hs-identifier hs-var">fmapL</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a'
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621690136076"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621690136076"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; Either a' b
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621690136076"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="annot"><a href="Hasura.Server.Utils.html#generateFingerprint"><span class="hs-identifier hs-type">generateFingerprint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-164"></span><span id="generateFingerprint"><span class="annot"><span class="annottext">generateFingerprint :: IO Text
</span><a href="Hasura.Server.Utils.html#generateFingerprint"><span class="hs-identifier hs-var hs-var">generateFingerprint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UUID -&gt; Text
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/uuid-types-1.0.3-4dcd5bd26f6cfa45ba80338fa5f00f2de4b5c491c6a3811b174bad08732eb731/share/doc/html/src"><span class="hs-identifier hs-var">UUID.toText</span></a></span><span> </span><span class="annot"><span class="annottext">(UUID -&gt; Text) -&gt; IO UUID -&gt; IO Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO UUID
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/uuid-1.3.13-138e161e8724015bd781a6bb16bbee975ffea1e21ae40dbd2cc1b069b48b6fd2/share/doc/html/src"><span class="hs-identifier hs-var">UUID.nextRandom</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">-- json representation of HTTP exception</span><span>
</span><span id="line-167"></span><span class="annot"><a href="Hasura.Server.Utils.html#httpExceptToJSON"><span class="hs-identifier hs-type">httpExceptToJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-type">HC.HttpException</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-168"></span><span id="httpExceptToJSON"><span class="annot"><span class="annottext">httpExceptToJSON :: HttpException -&gt; Value
</span><a href="Hasura.Server.Utils.html#httpExceptToJSON"><span class="hs-identifier hs-var hs-var">httpExceptToJSON</span></a></span></span><span> </span><span id="local-6989586621690136073"><span class="annot"><span class="annottext">HttpException
</span><a href="#local-6989586621690136073"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HttpException
</span><a href="#local-6989586621690136073"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-type">HC.HttpExceptionRequest</span></a></span><span> </span><span id="local-6989586621690136071"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621690136070"><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621690136070"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690136069"><span class="annot"><span class="annottext">reqObj :: Value
</span><a href="#local-6989586621690136069"><span class="hs-identifier hs-var hs-var">reqObj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>          </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">object</span></a></span><span>
</span><span id="line-172"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;host&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; ByteString
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.host</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;port&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; GroupIndex
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.port</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;secure&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Request -&gt; Bool
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.secure</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-175"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; ByteString
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.path</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-176"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; ByteString
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.method</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-177"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;proxy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy -&gt; Text
</span><a href="#local-6989586621690136060"><span class="hs-identifier hs-var">showProxy</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy -&gt; Text) -&gt; Maybe Proxy -&gt; Maybe Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Request -&gt; Maybe Proxy
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.proxy</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-178"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;redirectCount&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; GroupIndex
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.redirectCount</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-179"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;responseTimeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">ResponseTimeout -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; ResponseTimeout
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.responseTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;requestVersion&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">HttpVersion -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; HttpVersion
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-var hs-var">HC.requestVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621690136071"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-182"></span><span>        </span><span id="local-6989586621690136055"><span class="annot"><span class="annottext">msg :: String
</span><a href="#local-6989586621690136055"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HttpExceptionContent -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621690136070"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-183"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;request&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690136069"><span class="hs-identifier hs-var">reqObj</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690136055"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><span class="annottext">HttpException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Value) -&gt; String -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HttpException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">HttpException
</span><a href="#local-6989586621690136073"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>    </span><span id="local-6989586621690136060"><span class="annot"><span class="annottext">showProxy :: Proxy -&gt; Text
</span><a href="#local-6989586621690136060"><span class="hs-identifier hs-var hs-var">showProxy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-type">HC.Proxy</span></a></span><span> </span><span id="local-6989586621690136052"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690136052"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621690136051"><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690136051"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;host: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690136052"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; port: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690136051"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">-- ignore the following request headers from the client</span><span>
</span><span id="line-190"></span><span id="local-6989586621690136212"><span class="annot"><a href="Hasura.Server.Utils.html#commonClientHeadersIgnored"><span class="hs-identifier hs-type">commonClientHeadersIgnored</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136212"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621690136212"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-191"></span><span id="commonClientHeadersIgnored"><span class="annot"><span class="annottext">commonClientHeadersIgnored :: [a]
</span><a href="Hasura.Server.Utils.html#commonClientHeadersIgnored"><span class="hs-identifier hs-var hs-var">commonClientHeadersIgnored</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Content-Length&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Content-MD5&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-194"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;User-Agent&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Host&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Origin&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Referer&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Accept&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Accept-Encoding&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Accept-Language&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Accept-Datetime&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-202"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Cache-Control&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Connection&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;DNT&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Content-Type&quot;</span></span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="annot"><a href="Hasura.Server.Utils.html#sessionVariablePrefix"><span class="hs-identifier hs-type">sessionVariablePrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-209"></span><span id="sessionVariablePrefix"><span class="annot"><span class="annottext">sessionVariablePrefix :: Text
</span><a href="Hasura.Server.Utils.html#sessionVariablePrefix"><span class="hs-identifier hs-var hs-var">sessionVariablePrefix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;x-hasura-&quot;</span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="annot"><a href="Hasura.Server.Utils.html#isSessionVariable"><span class="hs-identifier hs-type">isSessionVariable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-212"></span><span id="isSessionVariable"><span class="annot"><span class="annottext">isSessionVariable :: Text -&gt; Bool
</span><a href="Hasura.Server.Utils.html#isSessionVariable"><span class="hs-identifier hs-var hs-var">isSessionVariable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-var">T.isPrefixOf</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="Hasura.Server.Utils.html#sessionVariablePrefix"><span class="hs-identifier hs-var">sessionVariablePrefix</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; (Text -&gt; Text) -&gt; Text -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-var">T.toLower</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><a href="Hasura.Server.Utils.html#isReqUserId"><span class="hs-identifier hs-type">isReqUserId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-215"></span><span id="isReqUserId"><span class="annot"><span class="annottext">isReqUserId :: Text -&gt; Bool
</span><a href="Hasura.Server.Utils.html#isReqUserId"><span class="hs-identifier hs-var hs-var">isReqUserId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;req_user_id&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; (Text -&gt; Text) -&gt; Text -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-var">T.toLower</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><a href="Hasura.Server.Utils.html#mkClientHeadersForward"><span class="hs-identifier hs-type">mkClientHeadersForward</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-218"></span><span id="mkClientHeadersForward"><span class="annot"><span class="annottext">mkClientHeadersForward :: [Header] -&gt; [Header]
</span><a href="Hasura.Server.Utils.html#mkClientHeadersForward"><span class="hs-identifier hs-var hs-var">mkClientHeadersForward</span></a></span></span><span> </span><span id="local-6989586621690136047"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690136047"><span class="hs-identifier hs-var">reqHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-219"></span><span>  </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690136046"><span class="hs-identifier hs-var">xForwardedHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; [Header] -&gt; [Header]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Header] -&gt; [Header]
forall b. [(HeaderName, b)] -&gt; [(HeaderName, b)]
</span><a href="#local-6989586621690136045"><span class="hs-identifier hs-var">filterSessionVariables</span></a></span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; [Header])
-&gt; ([Header] -&gt; [Header]) -&gt; [Header] -&gt; [Header]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; [Header]
</span><a href="Hasura.Server.Utils.html#filterRequestHeaders"><span class="hs-identifier hs-var">filterRequestHeaders</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690136047"><span class="hs-identifier hs-var">reqHeaders</span></a></span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>    </span><span id="local-6989586621690136045"><span class="annot"><span class="annottext">filterSessionVariables :: [(HeaderName, b)] -&gt; [(HeaderName, b)]
</span><a href="#local-6989586621690136045"><span class="hs-identifier hs-var hs-var">filterSessionVariables</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((HeaderName, b) -&gt; Bool) -&gt; [(HeaderName, b)] -&gt; [(HeaderName, b)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621690136043"><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136043"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="Hasura.Server.Utils.html#isSessionVariable"><span class="hs-identifier hs-var">isSessionVariable</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; Text -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; ByteString -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; ByteString
forall s. CI s -&gt; s
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/case-insensitive-1.2.1.0-f37403c31ae30565f4f5185c9552cd5be5494779aefc01c8b942134bc67ffc9b/share/doc/html/src"><span class="hs-identifier hs-var hs-var">CI.original</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136043"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621690136046"><span class="annot"><span class="annottext">xForwardedHeaders :: [Header]
</span><a href="#local-6989586621690136046"><span class="hs-identifier hs-var hs-var">xForwardedHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Header -&gt; Maybe Header) -&gt; [Header] -&gt; [Header])
-&gt; [Header] -&gt; (Header -&gt; Maybe Header) -&gt; [Header]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">(Header -&gt; Maybe Header) -&gt; [Header] -&gt; [Header]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690136047"><span class="hs-identifier hs-var">reqHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">((Header -&gt; Maybe Header) -&gt; [Header])
-&gt; (Header -&gt; Maybe Header) -&gt; [Header]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621690136038"><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136038"><span class="hs-identifier hs-var">hdrName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690136037"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690136037"><span class="hs-identifier hs-var">hdrValue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-223"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136038"><span class="hs-identifier hs-var">hdrName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-224"></span><span>        </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Host&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Maybe Header
forall a. a -&gt; Maybe a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;X-Forwarded-Host&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690136037"><span class="hs-identifier hs-var">hdrValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>        </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;User-Agent&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Maybe Header
forall a. a -&gt; Maybe a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;X-Forwarded-User-Agent&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690136037"><span class="hs-identifier hs-var">hdrValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>        </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Header
forall a. Maybe a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span id="local-6989586621690136036"><span class="annot"><a href="Hasura.Server.Utils.html#mkSetCookieHeaders"><span class="hs-identifier hs-type">mkSetCookieHeaders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-client-0.7.5-2790395d992dfc64ea2e3ba807a0dfb656b10c1cb420f672d956dc906f189045/share/doc/html/src"><span class="hs-identifier hs-type">Wreq.Response</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690136036"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.ResponseHeaders</span></a></span></span><span>
</span><span id="line-229"></span><span id="mkSetCookieHeaders"><span class="annot"><span class="annottext">mkSetCookieHeaders :: Response a -&gt; [Header]
</span><a href="Hasura.Server.Utils.html#mkSetCookieHeaders"><span class="hs-identifier hs-var hs-var">mkSetCookieHeaders</span></a></span></span><span> </span><span id="local-6989586621690136034"><span class="annot"><span class="annottext">Response a
</span><a href="#local-6989586621690136034"><span class="hs-identifier hs-var">resp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><span class="annottext">(ByteString -&gt; Header) -&gt; [ByteString] -&gt; [Header]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136033"><span class="hs-identifier hs-var">headerName</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([ByteString] -&gt; [Header]) -&gt; [ByteString] -&gt; [Header]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Response a
</span><a href="#local-6989586621690136034"><span class="hs-identifier hs-var">resp</span></a></span><span> </span><span class="annot"><span class="annottext">Response a
-&gt; Getting (Endo [ByteString]) (Response a) ByteString
-&gt; [ByteString]
forall s a. s -&gt; Getting (Endo [a]) s a -&gt; [a]
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/lens-4.19.2-daf3092aeea9938626e934a14668e9805779308a8fd5b5104ece8391dad21dcb/share/doc/html/src"><span class="hs-operator hs-var">^..</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; Traversal' (Response a) ByteString
forall body. HeaderName -&gt; Traversal' (Response body) ByteString
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/wreq-0.5.3.3-941ba3e6a8f3d536b96e0e3315fab6fb334515b429932c189fd8e943ca1a105b/share/doc/html/src"><span class="hs-identifier hs-var">Wreq.responseHeader</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136033"><span class="hs-identifier hs-var">headerName</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621690136033"><span class="annot"><span class="annottext">headerName :: HeaderName
</span><a href="#local-6989586621690136033"><span class="hs-identifier hs-var hs-var">headerName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Set-Cookie&quot;</span></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="annot"><a href="Hasura.Server.Utils.html#filterRequestHeaders"><span class="hs-identifier hs-type">filterRequestHeaders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-235"></span><span id="filterRequestHeaders"><span class="annot"><span class="annottext">filterRequestHeaders :: [Header] -&gt; [Header]
</span><a href="Hasura.Server.Utils.html#filterRequestHeaders"><span class="hs-identifier hs-var hs-var">filterRequestHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-236"></span><span>  </span><span class="annot"><span class="annottext">HashSet HeaderName -&gt; [Header] -&gt; [Header]
</span><a href="Hasura.Server.Utils.html#filterHeaders"><span class="hs-identifier hs-var">filterHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">(HashSet HeaderName -&gt; [Header] -&gt; [Header])
-&gt; HashSet HeaderName -&gt; [Header] -&gt; [Header]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[HeaderName] -&gt; HashSet HeaderName
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/unordered-containers-0.2.13.0-3905cc0dd583bf2295f4fffefb94c9b368aca205fb5d2fe8619d64b3bfba7af9/share/doc/html/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[HeaderName]
forall a. IsString a =&gt; [a]
</span><a href="Hasura.Server.Utils.html#commonClientHeadersIgnored"><span class="hs-identifier hs-var">commonClientHeadersIgnored</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="annot"><a href="Hasura.Server.Utils.html#filterHeaders"><span class="hs-identifier hs-type">filterHeaders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/unordered-containers-0.2.13.0-3905cc0dd583bf2295f4fffefb94c9b368aca205fb5d2fe8619d64b3bfba7af9/share/doc/html/src"><span class="hs-identifier hs-type">Set.HashSet</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.HeaderName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-239"></span><span id="filterHeaders"><span class="annot"><span class="annottext">filterHeaders :: HashSet HeaderName -&gt; [Header] -&gt; [Header]
</span><a href="Hasura.Server.Utils.html#filterHeaders"><span class="hs-identifier hs-var hs-var">filterHeaders</span></a></span></span><span> </span><span id="local-6989586621690136030"><span class="annot"><span class="annottext">HashSet HeaderName
</span><a href="#local-6989586621690136030"><span class="hs-identifier hs-var">list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Header -&gt; Bool) -&gt; [Header] -&gt; [Header]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621690136029"><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136029"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690136029"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; HashSet HeaderName -&gt; Bool
forall a. (Eq a, Hashable a) =&gt; a -&gt; HashSet a -&gt; Bool
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/unordered-containers-0.2.13.0-3905cc0dd583bf2295f4fffefb94c9b368aca205fb5d2fe8619d64b3bfba7af9/share/doc/html/src"><span class="hs-operator hs-var">`Set.member`</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet HeaderName
</span><a href="#local-6989586621690136030"><span class="hs-identifier hs-var">list</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-comment">-- | The version integer</span><span>
</span><span id="line-242"></span><span class="hs-keyword">data</span><span> </span><span id="APIVersion"><span class="annot"><a href="Hasura.Server.Utils.html#APIVersion"><span class="hs-identifier hs-var">APIVersion</span></a></span></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="VIVersion1"><span class="annot"><a href="Hasura.Server.Utils.html#VIVersion1"><span class="hs-identifier hs-var">VIVersion1</span></a></span></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="VIVersion2"><span class="annot"><a href="Hasura.Server.Utils.html#VIVersion2"><span class="hs-identifier hs-var">VIVersion2</span></a></span></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690136020"><span id="local-6989586621690136022"><span id="local-6989586621690136024"><span class="annot"><span class="annottext">GroupIndex -&gt; APIVersion -&gt; String -&gt; String
[APIVersion] -&gt; String -&gt; String
APIVersion -&gt; String
(GroupIndex -&gt; APIVersion -&gt; String -&gt; String)
-&gt; (APIVersion -&gt; String)
-&gt; ([APIVersion] -&gt; String -&gt; String)
-&gt; Show APIVersion
forall a.
(GroupIndex -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [APIVersion] -&gt; String -&gt; String
$cshowList :: [APIVersion] -&gt; String -&gt; String
show :: APIVersion -&gt; String
$cshow :: APIVersion -&gt; String
showsPrec :: GroupIndex -&gt; APIVersion -&gt; String -&gt; String
$cshowsPrec :: GroupIndex -&gt; APIVersion -&gt; String -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690136015"><span id="local-6989586621690136017"><span class="annot"><span class="annottext">APIVersion -&gt; APIVersion -&gt; Bool
(APIVersion -&gt; APIVersion -&gt; Bool)
-&gt; (APIVersion -&gt; APIVersion -&gt; Bool) -&gt; Eq APIVersion
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: APIVersion -&gt; APIVersion -&gt; Bool
$c/= :: APIVersion -&gt; APIVersion -&gt; Bool
== :: APIVersion -&gt; APIVersion -&gt; Bool
$c== :: APIVersion -&gt; APIVersion -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690136007"><span id="local-6989586621690136009"><span id="local-6989586621690136011"><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html#APIVersion"><span class="hs-identifier hs-type">APIVersion</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>  </span><span id="local-6989586621690136005"><span class="annot"><span class="annottext">toJSON :: APIVersion -&gt; Value
</span><a href="#local-6989586621690136005"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><span class="annottext">APIVersion
</span><a href="Hasura.Server.Utils.html#VIVersion1"><span class="hs-identifier hs-var">VIVersion1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GroupIndex -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex
</span><span class="hs-number">1</span></span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">APIVersion
</span><a href="Hasura.Server.Utils.html#VIVersion2"><span class="hs-identifier hs-var">VIVersion2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GroupIndex -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex
</span><span class="hs-number">2</span></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690136002"><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html#APIVersion"><span class="hs-identifier hs-type">APIVersion</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-252"></span><span>  </span><span id="local-6989586621690136000"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser APIVersion
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621690135998"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690135998"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>    </span><span id="local-6989586621690135997"><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690135997"><span class="hs-identifier hs-var">verInt</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser GroupIndex
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">parseJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690135998"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690135997"><span class="hs-identifier hs-var">verInt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-255"></span><span>      </span><span class="annot"><span class="annottext">GroupIndex
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">APIVersion -&gt; Parser APIVersion
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">APIVersion
</span><a href="Hasura.Server.Utils.html#VIVersion1"><span class="hs-identifier hs-var">VIVersion1</span></a></span><span>
</span><span id="line-256"></span><span>      </span><span class="annot"><span class="annottext">GroupIndex
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">APIVersion -&gt; Parser APIVersion
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">APIVersion
</span><a href="Hasura.Server.Utils.html#VIVersion2"><span class="hs-identifier hs-var">VIVersion2</span></a></span><span>
</span><span id="line-257"></span><span>      </span><span id="local-6989586621690135996"><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690135996"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser APIVersion
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser APIVersion) -&gt; String -&gt; Parser APIVersion
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected 1 or 2, encountered &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690135996"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="annot"><a href="Hasura.Server.Utils.html#englishList"><span class="hs-identifier hs-type">englishList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-260"></span><span id="englishList"><span class="annot"><span class="annottext">englishList :: Text -&gt; NonEmpty Text -&gt; Text
</span><a href="Hasura.Server.Utils.html#englishList"><span class="hs-identifier hs-var hs-var">englishList</span></a></span></span><span> </span><span id="local-6989586621690135995"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135995"><span class="hs-identifier hs-var">joiner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-261"></span><span>  </span><span id="local-6989586621690135994"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135994"><span class="hs-identifier hs-var">one</span></a></span></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135994"><span class="hs-identifier hs-var">one</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621690135992"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135992"><span class="hs-identifier hs-var">one</span></a></span></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621690135991"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135991"><span class="hs-identifier hs-var">two</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135992"><span class="hs-identifier hs-var">one</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135995"><span class="hs-identifier hs-var">joiner</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135991"><span class="hs-identifier hs-var">two</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span id="local-6989586621690135990"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621690135990"><span class="hs-identifier hs-var">several</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690135989"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135989"><span class="hs-identifier hs-var">final</span></a></span></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span id="local-6989586621690135988"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621690135988"><span class="hs-identifier hs-var">initials</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Text -&gt; NonEmpty Text
forall a. NonEmpty a -&gt; NonEmpty a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">NE.reverse</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621690135990"><span class="hs-identifier hs-var">several</span></a></span><span>
</span><span id="line-265"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#commaSeparated"><span class="hs-identifier hs-var">commaSeparated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
forall a. [a] -&gt; [a]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621690135988"><span class="hs-identifier hs-var">initials</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135995"><span class="hs-identifier hs-var">joiner</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135989"><span class="hs-identifier hs-var">final</span></a></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span id="local-6989586621690135984"><span class="annot"><a href="Hasura.Server.Utils.html#makeReasonMessage"><span class="hs-identifier hs-type">makeReasonMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621690135984"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621690135984"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-type">Text</span></a></span></span><span>
</span><span id="line-268"></span><span id="makeReasonMessage"><span class="annot"><span class="annottext">makeReasonMessage :: [a] -&gt; (a -&gt; Text) -&gt; Text
</span><a href="Hasura.Server.Utils.html#makeReasonMessage"><span class="hs-identifier hs-var hs-var">makeReasonMessage</span></a></span></span><span> </span><span id="local-6989586621690135983"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621690135983"><span class="hs-identifier hs-var">errors</span></a></span></span><span> </span><span id="local-6989586621690135982"><span class="annot"><span class="annottext">a -&gt; Text
</span><a href="#local-6989586621690135982"><span class="hs-identifier hs-var">showError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621690135983"><span class="hs-identifier hs-var">errors</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621690135981"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621690135981"><span class="hs-identifier hs-var">singleError</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;because &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Text
</span><a href="#local-6989586621690135982"><span class="hs-identifier hs-var">showError</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621690135981"><span class="hs-identifier hs-var">singleError</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-272"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;for the following reasons:\n&quot;</span></span><span>
</span><span id="line-273"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/text-1.2.3.2-4200bf40e86b2107f4b06242de65d549c52e58e8833e72545e35f7712661e715/share/doc/html/src"><span class="hs-identifier hs-var">T.unlines</span></a></span><span>
</span><span id="line-274"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Text) -&gt; [a] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;  &#8226; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text) -&gt; (a -&gt; Text) -&gt; a -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Text
</span><a href="#local-6989586621690135982"><span class="hs-identifier hs-var">showError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621690135983"><span class="hs-identifier hs-var">errors</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="annot"><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier hs-type">executeJSONPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">JSONPath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">IResult</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-277"></span><span id="executeJSONPath"><span class="annot"><span class="annottext">executeJSONPath :: JSONPath -&gt; Value -&gt; IResult Value
</span><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier hs-var hs-var">executeJSONPath</span></a></span></span><span> </span><span id="local-6989586621690135979"><span class="annot"><span class="annottext">JSONPath
</span><a href="#local-6989586621690135979"><span class="hs-identifier hs-var">jsonPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser Value) -&gt; Value -&gt; IResult Value
forall a b. (a -&gt; Parser b) -&gt; a -&gt; IResult b
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">iparse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONPath -&gt; Value -&gt; Parser Value
</span><a href="#local-6989586621690135977"><span class="hs-identifier hs-var">valueParser</span></a></span><span> </span><span class="annot"><span class="annottext">JSONPath
</span><a href="#local-6989586621690135979"><span class="hs-identifier hs-var">jsonPath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-279"></span><span>    </span><span id="local-6989586621690135977"><span class="annot"><span class="annottext">valueParser :: JSONPath -&gt; Value -&gt; Parser Value
</span><a href="#local-6989586621690135977"><span class="hs-identifier hs-var hs-var">valueParser</span></a></span></span><span> </span><span id="local-6989586621690135976"><span class="annot"><span class="annottext">JSONPath
</span><a href="#local-6989586621690135976"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621690135975"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690135975"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">JSONPath
</span><a href="#local-6989586621690135976"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-280"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser Value
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690135975"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-281"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621690135974"><span class="annot"><span class="annottext">JSONPathElement
</span><a href="#local-6989586621690135974"><span class="hs-identifier hs-var">pathElement</span></a></span></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621690135973"><span class="annot"><span class="annottext">JSONPath
</span><a href="#local-6989586621690135973"><span class="hs-identifier hs-var">remaining</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><span class="annottext">JSONPathElement -&gt; Value -&gt; Parser Value
</span><a href="#local-6989586621690135972"><span class="hs-identifier hs-var">parseWithPathElement</span></a></span><span> </span><span class="annot"><span class="annottext">JSONPathElement
</span><a href="#local-6989586621690135974"><span class="hs-identifier hs-var">pathElement</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690135975"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-283"></span><span>          </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser Value) -&gt; Parser Value
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser Value -&gt; JSONPathElement -&gt; Parser Value
forall a. Parser a -&gt; JSONPathElement -&gt; Parser a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">&lt;?&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">JSONPathElement
</span><a href="#local-6989586621690135974"><span class="hs-identifier hs-var">pathElement</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Parser Value -&gt; Parser Value)
-&gt; (Value -&gt; Parser Value) -&gt; Value -&gt; Parser Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">JSONPath -&gt; Value -&gt; Parser Value
</span><a href="#local-6989586621690135977"><span class="hs-identifier hs-var">valueParser</span></a></span><span> </span><span class="annot"><span class="annottext">JSONPath
</span><a href="#local-6989586621690135973"><span class="hs-identifier hs-var">remaining</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-285"></span><span>        </span><span id="local-6989586621690135972"><span class="annot"><span class="annottext">parseWithPathElement :: JSONPathElement -&gt; Value -&gt; Parser Value
</span><a href="#local-6989586621690135972"><span class="hs-identifier hs-var hs-var">parseWithPathElement</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-286"></span><span>          </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span id="local-6989586621690135969"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135969"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser Value) -&gt; Value -&gt; Parser Value
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">withObject</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Object&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690135969"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>          </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621690135965"><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690135965"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-288"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; (Array -&gt; Parser Value) -&gt; Value -&gt; Parser Value
forall a. String -&gt; (Array -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">withArray</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Array -&gt; Parser Value) -&gt; Value -&gt; Parser Value)
-&gt; (Array -&gt; Parser Value) -&gt; Value -&gt; Parser Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-289"></span><span>              </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser Value) -&gt; Maybe Value -&gt; Parser Value
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Parser Value
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array index out of range&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser Value
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Parser Value)
-&gt; (Array -&gt; Maybe Value) -&gt; Array -&gt; Parser Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array -&gt; GroupIndex -&gt; Maybe Value
forall a. Vector a -&gt; GroupIndex -&gt; Maybe a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/vector-0.12.2.0-654a7d99ca0e2ee63ef5ea85f3b572641bdd0ed99c3ce831f8a181b6c6af61eb/share/doc/html/src"><span class="hs-operator hs-var">V.!?</span></a></span><span> </span><span class="annot"><span class="annottext">GroupIndex
</span><a href="#local-6989586621690135965"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="annot"><a href="Hasura.Server.Utils.html#sha1"><span class="hs-identifier hs-type">sha1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">BL.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-292"></span><span id="sha1"><span class="annot"><span class="annottext">sha1 :: ByteString -&gt; ByteString
</span><a href="Hasura.Server.Utils.html#sha1"><span class="hs-identifier hs-var hs-var">sha1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ByteArrayAccess (Digest SHA1), ByteArray ByteString) =&gt;
Digest SHA1 -&gt; ByteString
forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
bin -&gt; bout
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/memory-0.15.0-af2fb57d431a7116d6ca7780be11f5312fc7d21fc96e29c6292451670342ee3c/share/doc/html/src"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(Digest SHA1 -&gt; ByteString)
-&gt; (ByteString -&gt; Digest SHA1) -&gt; ByteString -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HashAlgorithm SHA1 =&gt; ByteString -&gt; Digest SHA1
forall a. HashAlgorithm a =&gt; ByteString -&gt; Digest a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/cryptonite-0.28-3f2248fbe68e5efcd97603d2514825d85aecf953096454a5dc2f4018e47bbeb0/share/doc/html/src"><span class="hs-identifier hs-var">Crypto.hashlazy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/cryptonite-0.28-3f2248fbe68e5efcd97603d2514825d85aecf953096454a5dc2f4018e47bbeb0/share/doc/html/src"><span class="hs-identifier hs-type">Crypto.SHA1</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span id="local-6989586621690135959"><span class="annot"><a href="Hasura.Server.Utils.html#cryptoHash"><span class="hs-identifier hs-type">cryptoHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621690135959"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621690135959"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span></span><span>
</span><span id="line-295"></span><span id="cryptoHash"><span class="annot"><span class="annottext">cryptoHash :: a -&gt; ByteString
</span><a href="Hasura.Server.Utils.html#cryptoHash"><span class="hs-identifier hs-var hs-var">cryptoHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/base16-bytestring-1.0.1.0-365207190e0c37e60f42c0937368464259f58c81e8dc3d28f4230ffa6fe76730/share/doc/html/src"><span class="hs-identifier hs-var">Base16.encode</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; (a -&gt; ByteString) -&gt; a -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="Hasura.Server.Utils.html#sha1"><span class="hs-identifier hs-var">sha1</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; (a -&gt; ByteString) -&gt; a -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/aeson-1.5.5.1-d565b322355c9794eb059b7477592fe0d20db50e9f4ac0ae0328e907dd753173/share/doc/html/src"><span class="hs-identifier hs-var">J.encode</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="annot"><a href="Hasura.Server.Utils.html#readIsoLevel"><span class="hs-identifier hs-type">readIsoLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/pg-client-0.1.0-25b31efe2444cb76aa2939f99040399278f7a20b0fefdb30fa4af9b1c213eb3c/share/doc/html/src"><span class="hs-identifier hs-type">Q.TxIsolation</span></a></span><span>
</span><span id="line-298"></span><span id="readIsoLevel"><span class="annot"><span class="annottext">readIsoLevel :: String -&gt; Either String TxIsolation
</span><a href="Hasura.Server.Utils.html#readIsoLevel"><span class="hs-identifier hs-var hs-var">readIsoLevel</span></a></span></span><span> </span><span id="local-6989586621690135956"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690135956"><span class="hs-identifier hs-var">isoS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621690135956"><span class="hs-identifier hs-var">isoS</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;read-committed&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxIsolation -&gt; Either String TxIsolation
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TxIsolation
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/pg-client-0.1.0-25b31efe2444cb76aa2939f99040399278f7a20b0fefdb30fa4af9b1c213eb3c/share/doc/html/src"><span class="hs-identifier hs-var">Q.ReadCommitted</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;repeatable-read&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxIsolation -&gt; Either String TxIsolation
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TxIsolation
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/pg-client-0.1.0-25b31efe2444cb76aa2939f99040399278f7a20b0fefdb30fa4af9b1c213eb3c/share/doc/html/src"><span class="hs-identifier hs-var">Q.RepeatableRead</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;serializable&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxIsolation -&gt; Either String TxIsolation
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TxIsolation
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/pg-client-0.1.0-25b31efe2444cb76aa2939f99040399278f7a20b0fefdb30fa4af9b1c213eb3c/share/doc/html/src"><span class="hs-identifier hs-var">Q.Serializable</span></a></span><span>
</span><span id="line-303"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String TxIsolation
forall a b. a -&gt; Either a b
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Only expecting read-committed / repeatable-read / serializable&quot;</span></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="annot"><a href="Hasura.Server.Utils.html#parseConnLifeTime"><span class="hs-identifier hs-type">parseConnLifeTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/src"><span class="hs-identifier hs-type">NominalDiffTime</span></a></span><span>
</span><span id="line-306"></span><span id="parseConnLifeTime"><span class="annot"><span class="annottext">parseConnLifeTime :: Maybe NominalDiffTime -&gt; Maybe NominalDiffTime
</span><a href="Hasura.Server.Utils.html#parseConnLifeTime"><span class="hs-identifier hs-var hs-var">parseConnLifeTime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><span class="annottext">Maybe NominalDiffTime
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Maybe NominalDiffTime
forall a. a -&gt; Maybe a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">600</span></span><span> </span><span class="hs-comment">-- Not set by user; use the default timeout</span><span>
</span><span id="line-308"></span><span>  </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe NominalDiffTime
forall a. Maybe a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-comment">-- user wants to disable PG_CONN_LIFETIME</span><span>
</span><span id="line-309"></span><span>  </span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621690135952"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621690135952"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Maybe NominalDiffTime
forall a. a -&gt; Maybe a
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621690135952"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-comment">-- user specified n seconds lifetime</span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="hs-comment">-- | The environment variables that were moved to metadata. These environment</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- variables are available if a v1 hasura project is run an v2 hasura server.</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- These environment variables are marked as deprecated only when the v1 hasura</span><span>
</span><span id="line-314"></span><span class="hs-comment">-- project is migrated to v2 project.</span><span>
</span><span id="line-315"></span><span class="hs-keyword">newtype</span><span> </span><span id="EnvVarsMovedToMetadata"><span class="annot"><a href="Hasura.Server.Utils.html#EnvVarsMovedToMetadata"><span class="hs-identifier hs-var">EnvVarsMovedToMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EnvVarsMovedToMetadata"><span class="annot"><a href="Hasura.Server.Utils.html#EnvVarsMovedToMetadata"><span class="hs-identifier hs-var">EnvVarsMovedToMetadata</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unEnvVarsMovedToMetadata"><span class="annot"><span class="annottext">EnvVarsMovedToMetadata -&gt; [String]
</span><a href="Hasura.Server.Utils.html#unEnvVarsMovedToMetadata"><span class="hs-identifier hs-var hs-var">unEnvVarsMovedToMetadata</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690135944"><span id="local-6989586621690135946"><span id="local-6989586621690135948"><span class="annot"><span class="annottext">GroupIndex -&gt; EnvVarsMovedToMetadata -&gt; String -&gt; String
[EnvVarsMovedToMetadata] -&gt; String -&gt; String
EnvVarsMovedToMetadata -&gt; String
(GroupIndex -&gt; EnvVarsMovedToMetadata -&gt; String -&gt; String)
-&gt; (EnvVarsMovedToMetadata -&gt; String)
-&gt; ([EnvVarsMovedToMetadata] -&gt; String -&gt; String)
-&gt; Show EnvVarsMovedToMetadata
forall a.
(GroupIndex -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [EnvVarsMovedToMetadata] -&gt; String -&gt; String
$cshowList :: [EnvVarsMovedToMetadata] -&gt; String -&gt; String
show :: EnvVarsMovedToMetadata -&gt; String
$cshow :: EnvVarsMovedToMetadata -&gt; String
showsPrec :: GroupIndex -&gt; EnvVarsMovedToMetadata -&gt; String -&gt; String
$cshowsPrec :: GroupIndex -&gt; EnvVarsMovedToMetadata -&gt; String -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="hs-comment">-- | These env vars are completely deprecated</span><span>
</span><span id="line-319"></span><span class="hs-keyword">newtype</span><span> </span><span id="DeprecatedEnvVars"><span class="annot"><a href="Hasura.Server.Utils.html#DeprecatedEnvVars"><span class="hs-identifier hs-var">DeprecatedEnvVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DeprecatedEnvVars"><span class="annot"><a href="Hasura.Server.Utils.html#DeprecatedEnvVars"><span class="hs-identifier hs-var">DeprecatedEnvVars</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unDeprecatedEnvVars"><span class="annot"><span class="annottext">DeprecatedEnvVars -&gt; [String]
</span><a href="Hasura.Server.Utils.html#unDeprecatedEnvVars"><span class="hs-identifier hs-var hs-var">unDeprecatedEnvVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690135936"><span id="local-6989586621690135938"><span id="local-6989586621690135940"><span class="annot"><span class="annottext">GroupIndex -&gt; DeprecatedEnvVars -&gt; String -&gt; String
[DeprecatedEnvVars] -&gt; String -&gt; String
DeprecatedEnvVars -&gt; String
(GroupIndex -&gt; DeprecatedEnvVars -&gt; String -&gt; String)
-&gt; (DeprecatedEnvVars -&gt; String)
-&gt; ([DeprecatedEnvVars] -&gt; String -&gt; String)
-&gt; Show DeprecatedEnvVars
forall a.
(GroupIndex -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [DeprecatedEnvVars] -&gt; String -&gt; String
$cshowList :: [DeprecatedEnvVars] -&gt; String -&gt; String
show :: DeprecatedEnvVars -&gt; String
$cshow :: DeprecatedEnvVars -&gt; String
showsPrec :: GroupIndex -&gt; DeprecatedEnvVars -&gt; String -&gt; String
$cshowsPrec :: GroupIndex -&gt; DeprecatedEnvVars -&gt; String -&gt; String
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="annot"><a href="Hasura.Server.Utils.html#envVarsMovedToMetadata"><span class="hs-identifier hs-type">envVarsMovedToMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html#EnvVarsMovedToMetadata"><span class="hs-identifier hs-type">EnvVarsMovedToMetadata</span></a></span><span>
</span><span id="line-323"></span><span id="envVarsMovedToMetadata"><span class="annot"><span class="annottext">envVarsMovedToMetadata :: EnvVarsMovedToMetadata
</span><a href="Hasura.Server.Utils.html#envVarsMovedToMetadata"><span class="hs-identifier hs-var hs-var">envVarsMovedToMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; EnvVarsMovedToMetadata
</span><a href="Hasura.Server.Utils.html#EnvVarsMovedToMetadata"><span class="hs-identifier hs-var">EnvVarsMovedToMetadata</span></a></span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_NO_OF_RETRIES&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-326"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_PG_CONNECTIONS&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-327"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_PG_TIMEOUT&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-328"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_PG_CONN_LIFETIME&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-329"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_PG_POOL_TIMEOUT&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_USE_PREPARED_STATEMENTS&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-331"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_TX_ISOLATION&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-332"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_CONNECTIONS_PER_READ_REPLICA&quot;</span></span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="annot"><a href="Hasura.Server.Utils.html#deprecatedEnvVars"><span class="hs-identifier hs-type">deprecatedEnvVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html#DeprecatedEnvVars"><span class="hs-identifier hs-type">DeprecatedEnvVars</span></a></span><span>
</span><span id="line-336"></span><span id="deprecatedEnvVars"><span class="annot"><span class="annottext">deprecatedEnvVars :: DeprecatedEnvVars
</span><a href="Hasura.Server.Utils.html#deprecatedEnvVars"><span class="hs-identifier hs-var hs-var">deprecatedEnvVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; DeprecatedEnvVars
</span><a href="Hasura.Server.Utils.html#DeprecatedEnvVars"><span class="hs-identifier hs-var">DeprecatedEnvVars</span></a></span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_PG_STRIPES&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_QUERY_PLAN_CACHE_SIZE&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-340"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HASURA_GRAPHQL_STRIPES_PER_READ_REPLICA&quot;</span></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="annot"><a href="Hasura.Server.Utils.html#sensitiveHeaders"><span class="hs-identifier hs-type">sensitiveHeaders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/unordered-containers-0.2.13.0-3905cc0dd583bf2295f4fffefb94c9b368aca205fb5d2fe8619d64b3bfba7af9/share/doc/html/src"><span class="hs-identifier hs-type">HashSet</span></a></span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.HeaderName</span></a></span><span>
</span><span id="line-344"></span><span id="sensitiveHeaders"><span class="annot"><span class="annottext">sensitiveHeaders :: HashSet HeaderName
</span><a href="Hasura.Server.Utils.html#sensitiveHeaders"><span class="hs-identifier hs-var hs-var">sensitiveHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-345"></span><span>  </span><span class="annot"><span class="annottext">[HeaderName] -&gt; HashSet HeaderName
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/unordered-containers-0.2.13.0-3905cc0dd583bf2295f4fffefb94c9b368aca205fb5d2fe8619d64b3bfba7af9/share/doc/html/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Authorization&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-347"></span><span>      </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Cookie&quot;</span></span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="annot"><a href="Hasura.Server.Utils.html#redactSensitiveHeader"><span class="hs-identifier hs-type">redactSensitiveHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/nicuveo/.cabal/store/ghc-8.10.7/http-types-0.12.3-67581715184560fd6ad1570935f59db45bbfc9d69528eb11dab5ba2d42eb2e12/share/doc/html/src"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span>
</span><span id="line-351"></span><span id="redactSensitiveHeader"><span class="annot"><span class="annottext">redactSensitiveHeader :: Header -&gt; Header
</span><a href="Hasura.Server.Utils.html#redactSensitiveHeader"><span class="hs-identifier hs-var hs-var">redactSensitiveHeader</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621690135934"><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690135934"><span class="hs-identifier hs-var">headerName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690135933"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690135933"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690135934"><span class="hs-identifier hs-var">headerName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621690135934"><span class="hs-identifier hs-var">headerName</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; HashSet HeaderName -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///home/nicuveo/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet HeaderName
</span><a href="Hasura.Server.Utils.html#sensitiveHeaders"><span class="hs-identifier hs-var">sensitiveHeaders</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&lt;REDACTED&gt;&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690135933"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span></pre></body></html>