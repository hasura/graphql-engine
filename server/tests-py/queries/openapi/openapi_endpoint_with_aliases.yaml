- description: Try to add a GET rest endpoint with no argument
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: create_rest_endpoint
    args:
      url: simple_with_aliases
      name: simple_with_aliases
      methods:
      - GET
      definition:
        query:
          collection_name: test_collection
          query_name: simple_query_with_aliases

- description: Call openapi json endpoint
  url: /api/swagger/json
  method: GET
  status: 200
  query:
  response:
    openapi: 3.0.0
    info:
      version: ''
      title: Rest Endpoints
      description: This OpenAPI specification is automatically generated by Hasura.
    paths:
      /api/rest/simple_with_aliases:
        get:
          summary: simple_with_aliases
          description: "***\nThe GraphQl query for this endpoint is:\n``` graphql\n\
            query { test: test_table { firstName: first_name lastName: last_name surname: last_name } }\n```"
          parameters:
          - schema:
              type: string
            in: header
            name: x-hasura-admin-secret
            description: Your x-hasura-admin-secret will be used for authentication
              of the API request.
          responses:
            '200':
              content:
                application/json:
                  schema:
                    properties:
                      test:
                        items:
                          title: test_table
                          type: object
                          description: columns and relationships of "test_table"
                          nullable: false
                          properties:
                            lastName:
                              nullable: true
                              title: String
                              type: string
                            firstName:
                              nullable: true
                              title: String
                              type: string
                            surname:
                              nullable: true
                              title: String
                              type: string
                        type: array
                        nullable: false
              description: Responses for GET /api/rest/simple_with_aliases
    components: {}

- description: Try to remove the endpoint
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: drop_rest_endpoint
    args:
      name: simple_with_aliases
