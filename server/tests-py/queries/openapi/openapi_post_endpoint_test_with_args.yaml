- description: Try to add a POST rest endpoint with arguments
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: create_rest_endpoint
    args:
      url: with_args
      name: with_args
      methods:
        - POST
      definition:
        query:
          collection_name: test_collection
          query_name: query_with_args


- description: Call openapi json endpoint
  url: /api/swagger/json
  method: GET
  status: 200
  query:
  response:
    openapi: 3.0.0
    info:
      version: ''
      title: Rest Endpoints
      description: These OpenAPI specifications are automatically generated by Hasura.
    paths:
      /api/rest/with_args:
        post:
          summary: with_args
          description: >-
            ***

            The GraphQl query for this endpoint is:

            ``` graphql

            query ($first_name: String!, $last_name:String!) { test_table(where:
            {first_name: { _eq: $first_name } last_name: { _eq: $last_name }}) {
            first_name last_name } }

            ```
          responses: {}
          parameters:
            - schema:
                type: string
              in: header
              name: x-hasura-admin-secret
              description: >-
                Your x-hasura-admin-secret will be used for authentication of the API
                request.
            - schema:
                type: string
              in: query
              name: first_name
            - schema:
                type: string
              in: query
              name: last_name
    components: {}

- description: Try to remove the endpoint
  url: /v1/query
  status: 200
  response:
    message: success
  query:
    type: drop_rest_endpoint
    args:
      name: with_args
