import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs';

import { TemplateStoriesFactory } from '@/utils/StoryUtils';
import { FieldWrapper } from '@/new-components/Form/FieldWrapper';

<Meta
  title="components/Forms 🦠/FieldWrapper 🧬"
  component={FieldWrapper}
  parameters={{
    docs: { source: { type: 'code' } },
    chromatic: { disableSnapshot: true },
  }}
/>

export const Template = args => (
  <div className={'p-4'}>
    <FieldWrapper {...args} />
  </div>
);

export const ChildrenExample = (
  <div
    className={
      'text-white dark:text-black text-center bg-gray-700 dark:bg-gray-200 py-1 rounded'
    }
    style={{ backgroundImage: '100%' }}
  >
    &lt;--SLOT--&gt;
  </div>
);

export const stories = {
  Overview: {
    children: ChildrenExample,
    label: 'The field wrapper label',
  },
  'States - With error message': {
    children: ChildrenExample,
    label: 'The field wrapper label',
    description: 'The field wrapper description',
    tooltip: 'The field wrapper tooltip',
    error: { message: 'The error message' },
  },
  'States - Horizontal with error message': {
    horizontal: true,
    children: ChildrenExample,
    label: 'The field wrapper label',
    description: 'The field wrapper description',
    tooltip: 'The field wrapper tooltip',
    error: { message: 'The error message' },
  },
  'Variant - With description': {
    children: ChildrenExample,
    label: 'The field wrapper label',
    description: 'The field wrapper description',
  },
  'Variant - With tooltip': {
    children: ChildrenExample,
    label: 'The field wrapper label',
    tooltip: 'The field wrapper tooltip',
  },
  'Variant - With tooltip and description': {
    children: ChildrenExample,
    label: 'The field wrapper label',
    description: 'The field wrapper description',
    tooltip: 'The field wrapper tooltip',
  },
  'Variant - Horizontal with error message': {
    horizontal: true,
    children: ChildrenExample,
    label: 'The field wrapper label',
    error: { message: 'The error message' },
  },
  'Variant - Horizontal with description': {
    horizontal: true,
    children: ChildrenExample,
    label: 'The field wrapper label',
    description: 'The field wrapper description',
  },
  'Variant - Horizontal with tooltip': {
    horizontal: true,
    children: ChildrenExample,
    label: 'The field wrapper label',
    tooltip: 'The field wrapper tooltip',
  },
  'Variant - Horizontal with tooltip and description': {
    horizontal: true,
    children: ChildrenExample,
    label: 'The field wrapper label',
    description: 'The field wrapper description',
    tooltip: 'The field wrapper tooltip',
  },
  'Testing - Scalability': {
    children: ChildrenExample,
    label:
      'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    description:
      'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    placeholder:
      '--Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.--',
    tooltip:
      'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    error: {
      message:
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    },
  },
};

# FieldWrapper 🧬

- [🧰 Overview](#-overview)
- [🔁 States](#-states)
- [🎭 Variants](#-variants)
- [⚙️ API](#-api)
- [🧪 Testing](#-testing)

## 🧰 Overview

A utility component wrapping all needed elements to build form fields: **label**, **description** and **error message**.
The wrapped field is added in a dedicated **slot** used to build form fields components usable in forms .

Default CSS display is `block`, provided without padding and margin (displayed here with the `<Form>` padding).

### Basic usage

The `<FieldWrapper>` component is a wrapper component allowing to create final form fields components.

```ts
import { FieldWrapper } from '@/new-components/Form';
```

```tsx
<FieldWrapper
  id="fieldId"
  label="The field wrapper label"
  description="The field wrapper description"
>
  <!-- Insert here your native or complex input element -->
</FieldWrapper>
```

<Canvas>
  <Story name="Overview" args={stories['Overview']}>
    {Template.bind({})}
  </Story>
</Canvas>

## 🔁 States

### 🔁 With error message

<Canvas>
  <Story
    name="States - With error message"
    args={{
      'States - With error message': stories['States - With error message'],
      'States - Horizontal with error message':
        stories['States - Horizontal with error message'],
    }}
  >
    {TemplateStoriesFactory(Template).bind({})}
  </Story>
</Canvas>

## 🎭 Variants

### 🎭 With description

<Canvas>
  <Story
    name="Variant - With description"
    args={stories['Variant - With description']}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### 🎭 With tooltip

<Canvas>
  <Story name="Variant - With tooltip" args={stories['Variant - With tooltip']}>
    {Template.bind({})}
  </Story>
</Canvas>

### 🎭 With tooltip and description

<Canvas>
  <Story
    name="Variant - With tooltip and description"
    args={stories['Variant - With tooltip and description']}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### 🎭 Horizontal with description

<Canvas>
  <Story
    name="Variant - Horizontal with description"
    args={stories['Variant - Horizontal with description']}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### 🎭 Horizontal with tooltip

<Canvas>
  <Story
    name="Variant - Horizontal with tooltip"
    args={stories['Variant - Horizontal with tooltip']}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### 🎭 Horizontal with tooltip and description

<Canvas>
  <Story
    name="Variant - Horizontal with tooltip and description"
    args={stories['Variant - Horizontal with tooltip and description']}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## ⚙️ API

<details open>
  <summary className="mdx-collapsible-section">
    <p className="mdx-collapsible-section__chevron">
      <strong>&gt;</strong>
    </p>
    <p className="mdx-collapsible-section__label">
      <strong>Show/hide</strong> props
    </p>
  </summary>
  <ArgsTable story="Overview" />
</details>

## 🧪 Testing

### 🧪 Scalability

<Canvas>
  <Story name="Testing - Scalability" args={stories['Testing - Scalability']}>
    {Template.bind({})}
  </Story>
</Canvas>

### 🧪 Snapshot 📸

<Canvas>
  <Story
    name="Testing - Snapshot"
    args={stories}
    parameters={{
      chromatic: { disableSnapshot: false },
    }}
  >
    {TemplateStoriesFactory(Template).bind({})}
  </Story>
</Canvas>
