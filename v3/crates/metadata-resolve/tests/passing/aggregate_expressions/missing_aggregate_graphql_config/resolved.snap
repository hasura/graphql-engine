---
source: crates/metadata-resolve/tests/metadata_golden_tests.rs
expression: resolved
input_file: crates/metadata-resolve/tests/passing/aggregate_expressions/missing_aggregate_graphql_config/metadata.json
---
(
    Metadata {
        object_types: {
            Qualified {
                subgraph: SubgraphName(
                    "default",
                ),
                name: CustomTypeName(
                    Identifier(
                        "Invoice",
                    ),
                ),
            }: ObjectTypeWithRelationships {
                object_type: ObjectTypeRepresentation {
                    fields: {
                        FieldName(
                            Identifier(
                                "billingAddress",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Varchar",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "billingCity",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Varchar",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "billingCountry",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Varchar",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "billingPostalCode",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Varchar",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "billingState",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Varchar",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "customerId",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Int4",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: false,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "invoiceDate",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Timestamp",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: false,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "invoiceId",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Int4",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: false,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                        FieldName(
                            Identifier(
                                "total",
                            ),
                        ): FieldDefinition {
                            field_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Numeric",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: false,
                            },
                            description: None,
                            deprecated: None,
                            field_arguments: {},
                        },
                    },
                    global_id_fields: [],
                    apollo_federation_config: None,
                    graphql_output_type_name: Some(
                        TypeName(
                            Name(
                                "App_Invoice",
                            ),
                        ),
                    ),
                    graphql_input_type_name: Some(
                        TypeName(
                            Name(
                                "App_InvoiceInput",
                            ),
                        ),
                    ),
                    description: None,
                },
                type_output_permissions: TypeOutputPermissions {
                    authorization_rules: [],
                    by_role: {},
                },
                type_input_permissions: TypeInputPermissions {
                    authorization_rules: [],
                    by_role: {},
                },
                relationship_fields: {},
                type_mappings: DataConnectorTypeMappingsForObject {
                    mappings: {},
                },
            },
        },
        scalar_types: {
            Qualified {
                subgraph: SubgraphName(
                    "default",
                ),
                name: CustomTypeName(
                    Identifier(
                        "Int4",
                    ),
                ),
            }: ScalarTypeRepresentation {
                graphql_type_name: Some(
                    TypeName(
                        Name(
                            "App_Int4",
                        ),
                    ),
                ),
                description: None,
                representations: {},
            },
        },
        models: {},
        commands: {},
        boolean_expression_types: BooleanExpressionTypes {
            objects: {},
            scalars: {},
            object_aggregates: {},
            scalar_aggregates: {},
        },
        order_by_expressions: OrderByExpressions {
            objects: {},
            scalars: {},
        },
        aggregate_expressions: {
            Qualified {
                subgraph: SubgraphName(
                    "default",
                ),
                name: AggregateExpressionName(
                    Identifier(
                        "Int4_aggregate_exp",
                    ),
                ),
            }: AggregateExpression {
                name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: AggregateExpressionName(
                        Identifier(
                            "Int4_aggregate_exp",
                        ),
                    ),
                },
                operand: AggregateOperand {
                    aggregated_type: Custom(
                        Qualified {
                            subgraph: SubgraphName(
                                "default",
                            ),
                            name: CustomTypeName(
                                Identifier(
                                    "Int4",
                                ),
                            ),
                        },
                    ),
                    aggregatable_fields: [],
                    aggregation_functions: [
                        AggregationFunctionInfo {
                            name: AggregationFunctionName(
                                Identifier(
                                    "sum",
                                ),
                            ),
                            description: None,
                            return_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Int4",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            data_connector_functions: [],
                        },
                        AggregationFunctionInfo {
                            name: AggregationFunctionName(
                                Identifier(
                                    "min",
                                ),
                            ),
                            description: None,
                            return_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Int4",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            data_connector_functions: [],
                        },
                        AggregationFunctionInfo {
                            name: AggregationFunctionName(
                                Identifier(
                                    "max",
                                ),
                            ),
                            description: None,
                            return_type: QualifiedTypeReference {
                                underlying_type: Named(
                                    Custom(
                                        Qualified {
                                            subgraph: SubgraphName(
                                                "default",
                                            ),
                                            name: CustomTypeName(
                                                Identifier(
                                                    "Int4",
                                                ),
                                            ),
                                        },
                                    ),
                                ),
                                nullable: true,
                            },
                            data_connector_functions: [],
                        },
                    ],
                },
                count: AggregateCountDefinition {
                    enable: true,
                    description: None,
                    result_type: Inbuilt(
                        Int,
                    ),
                    result_type_defaulted: true,
                },
                count_distinct: AggregateCountDefinition {
                    enable: true,
                    description: None,
                    result_type: Inbuilt(
                        Int,
                    ),
                    result_type_defaulted: true,
                },
                graphql: None,
                description: None,
            },
            Qualified {
                subgraph: SubgraphName(
                    "default",
                ),
                name: AggregateExpressionName(
                    Identifier(
                        "Invoice_aggregate_exp",
                    ),
                ),
            }: AggregateExpression {
                name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: AggregateExpressionName(
                        Identifier(
                            "Invoice_aggregate_exp",
                        ),
                    ),
                },
                operand: AggregateOperand {
                    aggregated_type: Custom(
                        Qualified {
                            subgraph: SubgraphName(
                                "default",
                            ),
                            name: CustomTypeName(
                                Identifier(
                                    "Invoice",
                                ),
                            ),
                        },
                    ),
                    aggregatable_fields: [
                        AggregatableFieldInfo {
                            field_name: FieldName(
                                Identifier(
                                    "invoiceId",
                                ),
                            ),
                            description: None,
                            aggregate_expression: Qualified {
                                subgraph: SubgraphName(
                                    "default",
                                ),
                                name: AggregateExpressionName(
                                    Identifier(
                                        "Int4_aggregate_exp",
                                    ),
                                ),
                            },
                        },
                    ],
                    aggregation_functions: [],
                },
                count: AggregateCountDefinition {
                    enable: true,
                    description: None,
                    result_type: Inbuilt(
                        Int,
                    ),
                    result_type_defaulted: true,
                },
                count_distinct: AggregateCountDefinition {
                    enable: false,
                    description: None,
                    result_type: Inbuilt(
                        Int,
                    ),
                    result_type_defaulted: true,
                },
                graphql: None,
                description: None,
            },
        },
        graphql_config: GlobalGraphqlConfig {
            query_root_type_name: TypeName(
                Name(
                    "Query",
                ),
            ),
            mutation_root_type_name: TypeName(
                Name(
                    "Mutation",
                ),
            ),
            subscription_root_type_name: None,
            order_by_input: Some(
                OrderByInputGraphqlConfig {
                    asc_direction_field_value: Name(
                        "Asc",
                    ),
                    desc_direction_field_value: Name(
                        "Desc",
                    ),
                    enum_type_name: TypeName(
                        Name(
                            "OrderBy",
                        ),
                    ),
                },
            ),
            enable_apollo_federation_fields: false,
            bypass_relation_comparisons_ndc_capability: false,
            propagate_boolean_expression_deprecation_status: false,
            multiple_order_by_input_object_fields: Allow,
        },
        glossaries: {},
        plugin_configs: LifecyclePluginConfigs {
            pre_parse_plugins: [],
            pre_response_plugins: [],
            pre_route_plugins: [],
            pre_ndc_request_plugins: {},
            pre_ndc_response_plugins: {},
        },
        roles: {},
        conditions: Conditions {
            conditions: {},
        },
        runtime_flags: RuntimeFlags(
            {},
        ),
    },
    [
        ObjectTypesIssue(
            FieldTypeNotFound {
                field_type: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Varchar",
                        ),
                    ),
                },
                object_type_name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Invoice",
                        ),
                    ),
                },
                field_name: FieldName(
                    Identifier(
                        "billingAddress",
                    ),
                ),
            },
        ),
        ObjectTypesIssue(
            FieldTypeNotFound {
                field_type: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Varchar",
                        ),
                    ),
                },
                object_type_name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Invoice",
                        ),
                    ),
                },
                field_name: FieldName(
                    Identifier(
                        "billingCity",
                    ),
                ),
            },
        ),
        ObjectTypesIssue(
            FieldTypeNotFound {
                field_type: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Varchar",
                        ),
                    ),
                },
                object_type_name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Invoice",
                        ),
                    ),
                },
                field_name: FieldName(
                    Identifier(
                        "billingCountry",
                    ),
                ),
            },
        ),
        ObjectTypesIssue(
            FieldTypeNotFound {
                field_type: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Varchar",
                        ),
                    ),
                },
                object_type_name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Invoice",
                        ),
                    ),
                },
                field_name: FieldName(
                    Identifier(
                        "billingPostalCode",
                    ),
                ),
            },
        ),
        ObjectTypesIssue(
            FieldTypeNotFound {
                field_type: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Varchar",
                        ),
                    ),
                },
                object_type_name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Invoice",
                        ),
                    ),
                },
                field_name: FieldName(
                    Identifier(
                        "billingState",
                    ),
                ),
            },
        ),
        ObjectTypesIssue(
            FieldTypeNotFound {
                field_type: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Timestamp",
                        ),
                    ),
                },
                object_type_name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Invoice",
                        ),
                    ),
                },
                field_name: FieldName(
                    Identifier(
                        "invoiceDate",
                    ),
                ),
            },
        ),
        ObjectTypesIssue(
            FieldTypeNotFound {
                field_type: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Numeric",
                        ),
                    ),
                },
                object_type_name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: CustomTypeName(
                        Identifier(
                            "Invoice",
                        ),
                    ),
                },
                field_name: FieldName(
                    Identifier(
                        "total",
                    ),
                ),
            },
        ),
        AggregateExpressionIssue(
            ConfigMissingFromGraphQlConfig {
                name: Qualified {
                    subgraph: SubgraphName(
                        "default",
                    ),
                    name: AggregateExpressionName(
                        Identifier(
                            "Invoice_aggregate_exp",
                        ),
                    ),
                },
                config_name: "query.aggregate",
            },
        ),
    ],
)
