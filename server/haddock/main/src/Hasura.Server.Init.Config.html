<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | Types and classes related to configuration when the server is initialised</span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.Server.Init.Config</span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#API"><span class="hs-identifier">API</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#DowngradeOptions"><span class="hs-identifier">DowngradeOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGECommand"><span class="hs-identifier">HGECommand</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#_HCServe"><span class="hs-identifier">_HCServe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptions"><span class="hs-identifier">HGEOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#hoCommand"><span class="hs-identifier">hoCommand</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptionsRaw"><span class="hs-identifier">HGEOptionsRaw</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#horDatabaseUrl"><span class="hs-identifier">horDatabaseUrl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#horMetadataDbUrl"><span class="hs-identifier">horMetadataDbUrl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#horCommand"><span class="hs-identifier">horCommand</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier">KeepAliveDelay</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier">OptionalInterval</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier">PostgresConnInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#pciDatabaseConn"><span class="hs-identifier">pciDatabaseConn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#pciRetries"><span class="hs-identifier">pciRetries</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier">PostgresRawConnDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnInfo"><span class="hs-identifier">PostgresRawConnInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#_PGConnDatabaseUrl"><span class="hs-identifier">_PGConnDatabaseUrl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#_PGConnDetails"><span class="hs-identifier">_PGConnDetails</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#mkUrlConnInfo"><span class="hs-identifier">mkUrlConnInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#RawAuthHook"><span class="hs-identifier">RawAuthHook</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#RawConnParams"><span class="hs-identifier">RawConnParams</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#RawServeOptions"><span class="hs-identifier">RawServeOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#ResponseInternalErrorsConfig"><span class="hs-identifier">ResponseInternalErrorsConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#ServeOptions"><span class="hs-identifier">ServeOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier">WSConnectionInitTimeout</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#defaultKeepAliveDelay"><span class="hs-identifier">defaultKeepAliveDelay</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#defaultWSConnectionInitTimeout"><span class="hs-identifier">defaultWSConnectionInitTimeout</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#msToOptionalInterval"><span class="hs-identifier">msToOptionalInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#rawConnDetailsToUrl"><span class="hs-identifier">rawConnDetailsToUrl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#rawConnDetailsToUrlText"><span class="hs-identifier">rawConnDetailsToUrlText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#shouldIncludeInternal"><span class="hs-identifier">shouldIncludeInternal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">where</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Lens'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Prism'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lens</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">prism'</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashSet</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Time</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.URL.Template.html"><span class="hs-identifier">Data.URL.Template</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Database.PG.Query</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Q</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Subscription.Options.html"><span class="hs-identifier">Hasura.GraphQL.Execute.Subscription.Options</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ES</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.NamingCase.html"><span class="hs-identifier">Hasura.GraphQL.Schema.NamingCase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.NamingCase.html#NamingCase"><span class="hs-identifier">NamingCase</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Options</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Options</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Logging.html"><span class="hs-identifier">Hasura.Logging</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Auth.html"><span class="hs-identifier">Hasura.Server.Auth</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Cors.html"><span class="hs-identifier">Hasura.Server.Cors</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html"><span class="hs-identifier">Hasura.Server.Logging</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Types.html"><span class="hs-identifier">Hasura.Server.Types</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Session.html"><span class="hs-identifier">Hasura.Session</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.Wai.Handler.Warp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HostPreference</span></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.WebSockets</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WS</span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">data</span><span> </span><span id="RawConnParams"><span class="annot"><a href="Hasura.Server.Init.Config.html#RawConnParams"><span class="hs-identifier hs-var">RawConnParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RawConnParams"><span class="annot"><a href="Hasura.Server.Init.Config.html#RawConnParams"><span class="hs-identifier hs-var">RawConnParams</span></a></span></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="rcpStripes"><span class="annot"><span class="annottext">RawConnParams -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#rcpStripes"><span class="hs-identifier hs-var hs-var">rcpStripes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span id="rcpConns"><span class="annot"><span class="annottext">RawConnParams -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#rcpConns"><span class="hs-identifier hs-var hs-var">rcpConns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span id="rcpIdleTime"><span class="annot"><span class="annottext">RawConnParams -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#rcpIdleTime"><span class="hs-identifier hs-var hs-var">rcpIdleTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-comment">-- | Time from connection creation after which to destroy a connection and</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-comment">-- choose a different/new one.</span><span>
</span><span id="line-70"></span><span>    </span><span id="rcpConnLifetime"><span class="annot"><span class="annottext">RawConnParams -&gt; Maybe NominalDiffTime
</span><a href="Hasura.Server.Init.Config.html#rcpConnLifetime"><span class="hs-identifier hs-var hs-var">rcpConnLifetime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NominalDiffTime</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span id="rcpAllowPrepare"><span class="annot"><span class="annottext">RawConnParams -&gt; Maybe Bool
</span><a href="Hasura.Server.Init.Config.html#rcpAllowPrepare"><span class="hs-identifier hs-var hs-var">rcpAllowPrepare</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-comment">-- | See @HASURA_GRAPHQL_PG_POOL_TIMEOUT@</span><span>
</span><span id="line-73"></span><span>    </span><span id="rcpPoolTimeout"><span class="annot"><span class="annottext">RawConnParams -&gt; Maybe NominalDiffTime
</span><a href="Hasura.Server.Init.Config.html#rcpPoolTimeout"><span class="hs-identifier hs-var hs-var">rcpPoolTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NominalDiffTime</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525325"><span id="local-6989586621689525327"><span id="local-6989586621689525329"><span class="annot"><span class="annottext">Int -&gt; RawConnParams -&gt; ShowS
[RawConnParams] -&gt; ShowS
RawConnParams -&gt; String
(Int -&gt; RawConnParams -&gt; ShowS)
-&gt; (RawConnParams -&gt; String)
-&gt; ([RawConnParams] -&gt; ShowS)
-&gt; Show RawConnParams
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RawConnParams] -&gt; ShowS
$cshowList :: [RawConnParams] -&gt; ShowS
show :: RawConnParams -&gt; String
$cshow :: RawConnParams -&gt; String
showsPrec :: Int -&gt; RawConnParams -&gt; ShowS
$cshowsPrec :: Int -&gt; RawConnParams -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525320"><span id="local-6989586621689525322"><span class="annot"><span class="annottext">RawConnParams -&gt; RawConnParams -&gt; Bool
(RawConnParams -&gt; RawConnParams -&gt; Bool)
-&gt; (RawConnParams -&gt; RawConnParams -&gt; Bool) -&gt; Eq RawConnParams
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RawConnParams -&gt; RawConnParams -&gt; Bool
$c/= :: RawConnParams -&gt; RawConnParams -&gt; Bool
== :: RawConnParams -&gt; RawConnParams -&gt; Bool
$c== :: RawConnParams -&gt; RawConnParams -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-- TODO(SOLOMON): Monomorphize</span><span>
</span><span id="line-78"></span><span class="hs-keyword">type</span><span> </span><span id="RawAuthHook"><span class="annot"><a href="Hasura.Server.Init.Config.html#RawAuthHook"><span class="hs-identifier hs-var">RawAuthHook</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.Server.Auth.WebHook.html#AuthHookG"><span class="hs-identifier hs-type">AuthHookG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Auth.WebHook.html#AuthHookType"><span class="hs-identifier hs-type">AuthHookType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-comment">-- | Sleep time interval for recurring activities such as (@'asyncActionsProcessor')</span><span>
</span><span id="line-81"></span><span class="hs-comment">--   Presently @'msToOptionalInterval' interprets `0` as Skip.</span><span>
</span><span id="line-82"></span><span class="hs-keyword">data</span><span> </span><span id="OptionalInterval"><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-var">OptionalInterval</span></a></span></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | No polling</span><span>
</span><span id="line-84"></span><span>    </span><span id="Skip"><span class="annot"><a href="Hasura.Server.Init.Config.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Interval time</span><span>
</span><span id="line-86"></span><span>    </span><span id="Interval"><span class="annot"><a href="Hasura.Server.Init.Config.html#Interval"><span class="hs-identifier hs-var">Interval</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Data.Time.Clock.Units.html#Milliseconds"><span class="hs-identifier hs-type">Milliseconds</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525309"><span id="local-6989586621689525311"><span id="local-6989586621689525313"><span class="annot"><span class="annottext">Int -&gt; OptionalInterval -&gt; ShowS
[OptionalInterval] -&gt; ShowS
OptionalInterval -&gt; String
(Int -&gt; OptionalInterval -&gt; ShowS)
-&gt; (OptionalInterval -&gt; String)
-&gt; ([OptionalInterval] -&gt; ShowS)
-&gt; Show OptionalInterval
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [OptionalInterval] -&gt; ShowS
$cshowList :: [OptionalInterval] -&gt; ShowS
show :: OptionalInterval -&gt; String
$cshow :: OptionalInterval -&gt; String
showsPrec :: Int -&gt; OptionalInterval -&gt; ShowS
$cshowsPrec :: Int -&gt; OptionalInterval -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525305"><span id="local-6989586621689525307"><span class="annot"><span class="annottext">OptionalInterval -&gt; OptionalInterval -&gt; Bool
(OptionalInterval -&gt; OptionalInterval -&gt; Bool)
-&gt; (OptionalInterval -&gt; OptionalInterval -&gt; Bool)
-&gt; Eq OptionalInterval
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: OptionalInterval -&gt; OptionalInterval -&gt; Bool
$c/= :: OptionalInterval -&gt; OptionalInterval -&gt; Bool
== :: OptionalInterval -&gt; OptionalInterval -&gt; Bool
$c== :: OptionalInterval -&gt; OptionalInterval -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#msToOptionalInterval"><span class="hs-identifier hs-type">msToOptionalInterval</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Time.Clock.Units.html#Milliseconds"><span class="hs-identifier hs-type">Milliseconds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-type">OptionalInterval</span></a></span><span>
</span><span id="line-90"></span><span id="msToOptionalInterval"><span class="annot"><span class="annottext">msToOptionalInterval :: Milliseconds -&gt; OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#msToOptionalInterval"><span class="hs-identifier hs-var hs-var">msToOptionalInterval</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><span class="annottext">Milliseconds
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span id="local-6989586621689525304"><span class="annot"><span class="annottext">Milliseconds
</span><a href="#local-6989586621689525304"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Milliseconds -&gt; OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#Interval"><span class="hs-identifier hs-var">Interval</span></a></span><span> </span><span class="annot"><span class="annottext">Milliseconds
</span><a href="#local-6989586621689525304"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525301"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-type">OptionalInterval</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>  </span><span id="local-6989586621689525299"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser OptionalInterval
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span id="local-6989586621689525297"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689525297"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Milliseconds -&gt; OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#msToOptionalInterval"><span class="hs-identifier hs-var">msToOptionalInterval</span></a></span><span> </span><span class="annot"><span class="annottext">(Milliseconds -&gt; OptionalInterval)
-&gt; Parser Milliseconds -&gt; Parser OptionalInterval
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser Milliseconds
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689525297"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525289"><span id="local-6989586621689525291"><span id="local-6989586621689525293"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-type">OptionalInterval</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-98"></span><span>  </span><span id="local-6989586621689525287"><span class="annot"><span class="annottext">toJSON :: OptionalInterval -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><span class="annottext">OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Milliseconds -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Data.Time.Clock.Units.html#Milliseconds"><span class="hs-identifier hs-type">Milliseconds</span></a></span><span> </span><span class="annot"><span class="annottext">Milliseconds
</span><span class="hs-number">0</span></span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><a href="Hasura.Server.Init.Config.html#Interval"><span class="hs-identifier hs-type">Interval</span></a></span><span> </span><span id="local-6989586621689525285"><span class="annot"><span class="annottext">Milliseconds
</span><a href="#local-6989586621689525285"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Milliseconds -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Milliseconds
</span><a href="#local-6989586621689525285"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span id="local-6989586621689525283"><span id="local-6989586621689525284"></span></span><span class="hs-keyword">data</span><span> </span><span id="API"><span class="annot"><a href="Hasura.Server.Init.Config.html#API"><span class="hs-identifier hs-var">API</span></a></span></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="METADATA"><span class="annot"><a href="Hasura.Server.Init.Config.html#METADATA"><span class="hs-identifier hs-var">METADATA</span></a></span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GRAPHQL"><span class="annot"><a href="Hasura.Server.Init.Config.html#GRAPHQL"><span class="hs-identifier hs-var">GRAPHQL</span></a></span></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PGDUMP"><span class="annot"><a href="Hasura.Server.Init.Config.html#PGDUMP"><span class="hs-identifier hs-var">PGDUMP</span></a></span></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DEVELOPER"><span class="annot"><a href="Hasura.Server.Init.Config.html#DEVELOPER"><span class="hs-identifier hs-var">DEVELOPER</span></a></span></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CONFIG"><span class="annot"><a href="Hasura.Server.Init.Config.html#CONFIG"><span class="hs-identifier hs-var">CONFIG</span></a></span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="METRICS"><span class="annot"><a href="Hasura.Server.Init.Config.html#METRICS"><span class="hs-identifier hs-var">METRICS</span></a></span></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525271"><span id="local-6989586621689525273"><span id="local-6989586621689525275"><span class="annot"><span class="annottext">Int -&gt; API -&gt; ShowS
[API] -&gt; ShowS
API -&gt; String
(Int -&gt; API -&gt; ShowS)
-&gt; (API -&gt; String) -&gt; ([API] -&gt; ShowS) -&gt; Show API
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [API] -&gt; ShowS
$cshowList :: [API] -&gt; ShowS
show :: API -&gt; String
$cshow :: API -&gt; String
showsPrec :: Int -&gt; API -&gt; ShowS
$cshowsPrec :: Int -&gt; API -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525267"><span id="local-6989586621689525269"><span class="annot"><span class="annottext">API -&gt; API -&gt; Bool
(API -&gt; API -&gt; Bool) -&gt; (API -&gt; API -&gt; Bool) -&gt; Eq API
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: API -&gt; API -&gt; Bool
$c/= :: API -&gt; API -&gt; Bool
== :: API -&gt; API -&gt; Bool
$c== :: API -&gt; API -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525259"><span id="local-6989586621689525261"><span id="local-6989586621689525263"><span id="local-6989586621689525265"><span class="annot"><span class="annottext">ReadPrec [API]
ReadPrec API
Int -&gt; ReadS API
ReadS [API]
(Int -&gt; ReadS API)
-&gt; ReadS [API] -&gt; ReadPrec API -&gt; ReadPrec [API] -&gt; Read API
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
readListPrec :: ReadPrec [API]
$creadListPrec :: ReadPrec [API]
readPrec :: ReadPrec API
$creadPrec :: ReadPrec API
readList :: ReadS [API]
$creadList :: ReadS [API]
readsPrec :: Int -&gt; ReadS API
$creadsPrec :: Int -&gt; ReadS API
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. API -&gt; Rep API x)
-&gt; (forall x. Rep API x -&gt; API) -&gt; Generic API
forall x. Rep API x -&gt; API
forall x. API -&gt; Rep API x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep API x -&gt; API
$cfrom :: forall x. API -&gt; Rep API x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525252"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#API"><span class="hs-identifier hs-type">API</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-112"></span><span>  </span><span id="local-6989586621689525251"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser API
</span><a href="#local-6989586621689525251"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Text -&gt; Parser API) -&gt; Value -&gt; Parser API
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;API&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metadata&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">API -&gt; Parser API
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#METADATA"><span class="hs-identifier hs-var">METADATA</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;graphql&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">API -&gt; Parser API
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#GRAPHQL"><span class="hs-identifier hs-var">GRAPHQL</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;pgdump&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">API -&gt; Parser API
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#PGDUMP"><span class="hs-identifier hs-var">PGDUMP</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;developer&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">API -&gt; Parser API
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#DEVELOPER"><span class="hs-identifier hs-var">DEVELOPER</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;config&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">API -&gt; Parser API
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#CONFIG"><span class="hs-identifier hs-var">CONFIG</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">API -&gt; Parser API
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#METRICS"><span class="hs-identifier hs-var">METRICS</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span id="local-6989586621689525249"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689525249"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser API
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser API) -&gt; String -&gt; Parser API
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unexpected string '&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689525249"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;'.&quot;</span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525241"><span id="local-6989586621689525243"><span id="local-6989586621689525245"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#API"><span class="hs-identifier hs-type">API</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621689525240"><span class="annot"><span class="annottext">toJSON :: API -&gt; Value
</span><a href="#local-6989586621689525240"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#METADATA"><span class="hs-identifier hs-var">METADATA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metadata&quot;</span></span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#GRAPHQL"><span class="hs-identifier hs-var">GRAPHQL</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;graphql&quot;</span></span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#PGDUMP"><span class="hs-identifier hs-var">PGDUMP</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;pgdump&quot;</span></span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#DEVELOPER"><span class="hs-identifier hs-var">DEVELOPER</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;developer&quot;</span></span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#CONFIG"><span class="hs-identifier hs-var">CONFIG</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;config&quot;</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="annottext">API
</span><a href="Hasura.Server.Init.Config.html#METRICS"><span class="hs-identifier hs-var">METRICS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525235"><span id="local-6989586621689525237"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#API"><span class="hs-identifier hs-type">API</span></a></span></span></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-- | The Serve Command options accumulated from the arg parser and env.</span><span>
</span><span id="line-133"></span><span class="hs-keyword">data</span><span> </span><span id="RawServeOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#RawServeOptions"><span class="hs-identifier hs-var">RawServeOptions</span></a></span></span><span> </span><span id="local-6989586621689525233"><span class="annot"><a href="#local-6989586621689525233"><span class="hs-identifier hs-type">impl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RawServeOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#RawServeOptions"><span class="hs-identifier hs-var">RawServeOptions</span></a></span></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="rsoPort"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#rsoPort"><span class="hs-identifier hs-var hs-var">rsoPort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>    </span><span id="rsoHost"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe HostPreference
</span><a href="Hasura.Server.Init.Config.html#rsoHost"><span class="hs-identifier hs-var hs-var">rsoHost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HostPreference</span></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>    </span><span id="rsoConnParams"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; RawConnParams
</span><a href="Hasura.Server.Init.Config.html#rsoConnParams"><span class="hs-identifier hs-var hs-var">rsoConnParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#RawConnParams"><span class="hs-identifier hs-type">RawConnParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>    </span><span id="rsoTxIso"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe TxIsolation
</span><a href="Hasura.Server.Init.Config.html#rsoTxIso"><span class="hs-identifier hs-var hs-var">rsoTxIso</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q.TxIsolation</span></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>    </span><span id="rsoAdminSecret"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe AdminSecretHash
</span><a href="Hasura.Server.Init.Config.html#rsoAdminSecret"><span class="hs-identifier hs-var hs-var">rsoAdminSecret</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Auth.html#AdminSecretHash"><span class="hs-identifier hs-type">AdminSecretHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>    </span><span id="rsoAuthHook"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; RawAuthHook
</span><a href="Hasura.Server.Init.Config.html#rsoAuthHook"><span class="hs-identifier hs-var hs-var">rsoAuthHook</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#RawAuthHook"><span class="hs-identifier hs-type">RawAuthHook</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>    </span><span id="rsoJwtSecret"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe JWTConfig
</span><a href="Hasura.Server.Init.Config.html#rsoJwtSecret"><span class="hs-identifier hs-var hs-var">rsoJwtSecret</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Auth.JWT.html#JWTConfig"><span class="hs-identifier hs-type">JWTConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>    </span><span id="rsoUnAuthRole"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe RoleName
</span><a href="Hasura.Server.Init.Config.html#rsoUnAuthRole"><span class="hs-identifier hs-var hs-var">rsoUnAuthRole</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Session.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>    </span><span id="rsoCorsConfig"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe CorsConfig
</span><a href="Hasura.Server.Init.Config.html#rsoCorsConfig"><span class="hs-identifier hs-var hs-var">rsoCorsConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Cors.html#CorsConfig"><span class="hs-identifier hs-type">CorsConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>    </span><span id="rsoEnableConsole"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#rsoEnableConsole"><span class="hs-identifier hs-var hs-var">rsoEnableConsole</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>    </span><span id="rsoConsoleAssetsDir"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Text
</span><a href="Hasura.Server.Init.Config.html#rsoConsoleAssetsDir"><span class="hs-identifier hs-var hs-var">rsoConsoleAssetsDir</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>    </span><span id="rsoEnableTelemetry"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Bool
</span><a href="Hasura.Server.Init.Config.html#rsoEnableTelemetry"><span class="hs-identifier hs-var hs-var">rsoEnableTelemetry</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>    </span><span id="rsoWsReadCookie"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#rsoWsReadCookie"><span class="hs-identifier hs-var hs-var">rsoWsReadCookie</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>    </span><span id="rsoStringifyNum"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; StringifyNumbers
</span><a href="Hasura.Server.Init.Config.html#rsoStringifyNum"><span class="hs-identifier hs-var hs-var">rsoStringifyNum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html#StringifyNumbers"><span class="hs-identifier hs-type">Options.StringifyNumbers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>    </span><span id="rsoDangerousBooleanCollapse"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Bool
</span><a href="Hasura.Server.Init.Config.html#rsoDangerousBooleanCollapse"><span class="hs-identifier hs-var hs-var">rsoDangerousBooleanCollapse</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>    </span><span id="rsoEnabledAPIs"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe [API]
</span><a href="Hasura.Server.Init.Config.html#rsoEnabledAPIs"><span class="hs-identifier hs-var hs-var">rsoEnabledAPIs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Server.Init.Config.html#API"><span class="hs-identifier hs-type">API</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>    </span><span id="rsoMxRefetchInt"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe RefetchInterval
</span><a href="Hasura.Server.Init.Config.html#rsoMxRefetchInt"><span class="hs-identifier hs-var hs-var">rsoMxRefetchInt</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Subscription.Options.html#RefetchInterval"><span class="hs-identifier hs-type">ES.RefetchInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>    </span><span id="rsoMxBatchSize"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe BatchSize
</span><a href="Hasura.Server.Init.Config.html#rsoMxBatchSize"><span class="hs-identifier hs-var hs-var">rsoMxBatchSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Subscription.Options.html#BatchSize"><span class="hs-identifier hs-type">ES.BatchSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-comment">-- we have different config options for livequery and streaming subscriptions</span><span>
</span><span id="line-153"></span><span>    </span><span id="rsoStreamingMxRefetchInt"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe RefetchInterval
</span><a href="Hasura.Server.Init.Config.html#rsoStreamingMxRefetchInt"><span class="hs-identifier hs-var hs-var">rsoStreamingMxRefetchInt</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Subscription.Options.html#RefetchInterval"><span class="hs-identifier hs-type">ES.RefetchInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-154"></span><span>    </span><span id="rsoStreamingMxBatchSize"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe BatchSize
</span><a href="Hasura.Server.Init.Config.html#rsoStreamingMxBatchSize"><span class="hs-identifier hs-var hs-var">rsoStreamingMxBatchSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Subscription.Options.html#BatchSize"><span class="hs-identifier hs-type">ES.BatchSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-155"></span><span>    </span><span id="rsoEnableAllowlist"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#rsoEnableAllowlist"><span class="hs-identifier hs-var hs-var">rsoEnableAllowlist</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>    </span><span id="rsoEnabledLogTypes"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe [EngineLogType impl]
</span><a href="Hasura.Server.Init.Config.html#rsoEnabledLogTypes"><span class="hs-identifier hs-var hs-var">rsoEnabledLogTypes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Logging.html#EngineLogType"><span class="hs-identifier hs-type">L.EngineLogType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689525233"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>    </span><span id="rsoLogLevel"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe LogLevel
</span><a href="Hasura.Server.Init.Config.html#rsoLogLevel"><span class="hs-identifier hs-var hs-var">rsoLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">L.LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>    </span><span id="rsoDevMode"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#rsoDevMode"><span class="hs-identifier hs-var hs-var">rsoDevMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>    </span><span id="rsoAdminInternalErrors"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Bool
</span><a href="Hasura.Server.Init.Config.html#rsoAdminInternalErrors"><span class="hs-identifier hs-var hs-var">rsoAdminInternalErrors</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-160"></span><span>    </span><span id="rsoEventsHttpPoolSize"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#rsoEventsHttpPoolSize"><span class="hs-identifier hs-var hs-var">rsoEventsHttpPoolSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>    </span><span id="rsoEventsFetchInterval"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Milliseconds
</span><a href="Hasura.Server.Init.Config.html#rsoEventsFetchInterval"><span class="hs-identifier hs-var hs-var">rsoEventsFetchInterval</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.Time.Clock.Units.html#Milliseconds"><span class="hs-identifier hs-type">Milliseconds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>    </span><span id="rsoAsyncActionsFetchInterval"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#rsoAsyncActionsFetchInterval"><span class="hs-identifier hs-var hs-var">rsoAsyncActionsFetchInterval</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-type">OptionalInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-163"></span><span>    </span><span id="rsoEnableRemoteSchemaPermissions"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; RemoteSchemaPermissions
</span><a href="Hasura.Server.Init.Config.html#rsoEnableRemoteSchemaPermissions"><span class="hs-identifier hs-var hs-var">rsoEnableRemoteSchemaPermissions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html#RemoteSchemaPermissions"><span class="hs-identifier hs-type">Options.RemoteSchemaPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-164"></span><span>    </span><span id="rsoWebSocketCompression"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#rsoWebSocketCompression"><span class="hs-identifier hs-var hs-var">rsoWebSocketCompression</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-165"></span><span>    </span><span id="rsoWebSocketKeepAlive"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe KeepAliveDelay
</span><a href="Hasura.Server.Init.Config.html#rsoWebSocketKeepAlive"><span class="hs-identifier hs-var hs-var">rsoWebSocketKeepAlive</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-type">KeepAliveDelay</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-166"></span><span>    </span><span id="rsoInferFunctionPermissions"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe InferFunctionPermissions
</span><a href="Hasura.Server.Init.Config.html#rsoInferFunctionPermissions"><span class="hs-identifier hs-var hs-var">rsoInferFunctionPermissions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html#InferFunctionPermissions"><span class="hs-identifier hs-type">Options.InferFunctionPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-167"></span><span>    </span><span id="rsoEnableMaintenanceMode"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; MaintenanceMode ()
</span><a href="Hasura.Server.Init.Config.html#rsoEnableMaintenanceMode"><span class="hs-identifier hs-var hs-var">rsoEnableMaintenanceMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Types.html#MaintenanceMode"><span class="hs-identifier hs-type">MaintenanceMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-168"></span><span>    </span><span id="rsoSchemaPollInterval"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#rsoSchemaPollInterval"><span class="hs-identifier hs-var hs-var">rsoSchemaPollInterval</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-type">OptionalInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-comment">-- see Note [Experimental features]</span><span>
</span><span id="line-170"></span><span>    </span><span id="rsoExperimentalFeatures"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe [ExperimentalFeature]
</span><a href="Hasura.Server.Init.Config.html#rsoExperimentalFeatures"><span class="hs-identifier hs-var hs-var">rsoExperimentalFeatures</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Server.Types.html#ExperimentalFeature"><span class="hs-identifier hs-type">ExperimentalFeature</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>    </span><span id="rsoEventsFetchBatchSize"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe NonNegativeInt
</span><a href="Hasura.Server.Init.Config.html#rsoEventsFetchBatchSize"><span class="hs-identifier hs-var hs-var">rsoEventsFetchBatchSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#NonNegativeInt"><span class="hs-identifier hs-type">NonNegativeInt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>    </span><span id="rsoGracefulShutdownTimeout"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe Seconds
</span><a href="Hasura.Server.Init.Config.html#rsoGracefulShutdownTimeout"><span class="hs-identifier hs-var hs-var">rsoGracefulShutdownTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-type">Seconds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>    </span><span id="rsoWebSocketConnectionInitTimeout"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe WSConnectionInitTimeout
</span><a href="Hasura.Server.Init.Config.html#rsoWebSocketConnectionInitTimeout"><span class="hs-identifier hs-var hs-var">rsoWebSocketConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-type">WSConnectionInitTimeout</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span>    </span><span id="rsoEnableMetadataQueryLoggingEnv"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; MetadataQueryLoggingMode
</span><a href="Hasura.Server.Init.Config.html#rsoEnableMetadataQueryLoggingEnv"><span class="hs-identifier hs-var hs-var">rsoEnableMetadataQueryLoggingEnv</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingMode"><span class="hs-identifier hs-type">MetadataQueryLoggingMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- | stores global default naming convention</span><span>
</span><span id="line-176"></span><span>    </span><span id="rsoDefaultNamingConvention"><span class="annot"><span class="annottext">RawServeOptions impl -&gt; Maybe NamingCase
</span><a href="Hasura.Server.Init.Config.html#rsoDefaultNamingConvention"><span class="hs-identifier hs-var hs-var">rsoDefaultNamingConvention</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.NamingCase.html#NamingCase"><span class="hs-identifier hs-type">NamingCase</span></a></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">{- Note: [Experimental features]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The graphql-engine accepts a list of experimental features that can be
enabled at the startup. Experimental features are a way to introduce
new, but not stable features to our users in a manner in which they have
the choice to enable or disable a certain feature(s).

The objective of an experimental feature should be that when the feature is disabled,
the graphql-engine should work the same way as it worked before adding the said feature.

The experimental feature's flag is `--experimental-features` and the corresponding
environment variable is `HASURA_GRAPHQL_EXPERIMENTAL_FEATURES` which expects a comma-seperated
value.

When an experimental feature is stable enough i.e. it's stable through multiple non-beta releases
then we make the feature not experimental i.e. it will always be enabled. Note that when we do this
we still have to support parsing of the experimental feature because users of the previous version
will have it enabled and when they upgrade an error should not be thrown at the startup. For example:

The inherited roles was an experimental feature when introduced and it was enabled by
setting `--experimental-features` to `inherited_roles` and then it was decided to make the inherited roles
a stable feature, so it was removed as an experimental feature but the code was modified such that
`--experimental-features inherited_roles` to not throw an error.

-}</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">-- | @'ResponseInternalErrorsConfig' represents the encoding of the internal</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- errors in the response to the client.</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- See the github comment https://github.com/hasura/graphql-engine/issues/4031#issuecomment-609747705 for more details.</span><span>
</span><span id="line-213"></span><span class="hs-keyword">data</span><span> </span><span id="ResponseInternalErrorsConfig"><span class="annot"><a href="Hasura.Server.Init.Config.html#ResponseInternalErrorsConfig"><span class="hs-identifier hs-var">ResponseInternalErrorsConfig</span></a></span></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="InternalErrorsAllRequests"><span class="annot"><a href="Hasura.Server.Init.Config.html#InternalErrorsAllRequests"><span class="hs-identifier hs-var">InternalErrorsAllRequests</span></a></span></span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InternalErrorsAdminOnly"><span class="annot"><a href="Hasura.Server.Init.Config.html#InternalErrorsAdminOnly"><span class="hs-identifier hs-var">InternalErrorsAdminOnly</span></a></span></span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InternalErrorsDisabled"><span class="annot"><a href="Hasura.Server.Init.Config.html#InternalErrorsDisabled"><span class="hs-identifier hs-var">InternalErrorsDisabled</span></a></span></span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525183"><span id="local-6989586621689525185"><span id="local-6989586621689525187"><span class="annot"><span class="annottext">Int -&gt; ResponseInternalErrorsConfig -&gt; ShowS
[ResponseInternalErrorsConfig] -&gt; ShowS
ResponseInternalErrorsConfig -&gt; String
(Int -&gt; ResponseInternalErrorsConfig -&gt; ShowS)
-&gt; (ResponseInternalErrorsConfig -&gt; String)
-&gt; ([ResponseInternalErrorsConfig] -&gt; ShowS)
-&gt; Show ResponseInternalErrorsConfig
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ResponseInternalErrorsConfig] -&gt; ShowS
$cshowList :: [ResponseInternalErrorsConfig] -&gt; ShowS
show :: ResponseInternalErrorsConfig -&gt; String
$cshow :: ResponseInternalErrorsConfig -&gt; String
showsPrec :: Int -&gt; ResponseInternalErrorsConfig -&gt; ShowS
$cshowsPrec :: Int -&gt; ResponseInternalErrorsConfig -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525179"><span id="local-6989586621689525181"><span class="annot"><span class="annottext">ResponseInternalErrorsConfig
-&gt; ResponseInternalErrorsConfig -&gt; Bool
(ResponseInternalErrorsConfig
 -&gt; ResponseInternalErrorsConfig -&gt; Bool)
-&gt; (ResponseInternalErrorsConfig
    -&gt; ResponseInternalErrorsConfig -&gt; Bool)
-&gt; Eq ResponseInternalErrorsConfig
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ResponseInternalErrorsConfig
-&gt; ResponseInternalErrorsConfig -&gt; Bool
$c/= :: ResponseInternalErrorsConfig
-&gt; ResponseInternalErrorsConfig -&gt; Bool
== :: ResponseInternalErrorsConfig
-&gt; ResponseInternalErrorsConfig -&gt; Bool
$c== :: ResponseInternalErrorsConfig
-&gt; ResponseInternalErrorsConfig -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#shouldIncludeInternal"><span class="hs-identifier hs-type">shouldIncludeInternal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Session.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#ResponseInternalErrorsConfig"><span class="hs-identifier hs-type">ResponseInternalErrorsConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-220"></span><span id="shouldIncludeInternal"><span class="annot"><span class="annottext">shouldIncludeInternal :: RoleName -&gt; ResponseInternalErrorsConfig -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#shouldIncludeInternal"><span class="hs-identifier hs-var hs-var">shouldIncludeInternal</span></a></span></span><span> </span><span id="local-6989586621689525178"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621689525178"><span class="hs-keyword hs-var">role</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-221"></span><span>  </span><span class="annot"><span class="annottext">ResponseInternalErrorsConfig
</span><a href="Hasura.Server.Init.Config.html#InternalErrorsAllRequests"><span class="hs-identifier hs-var">InternalErrorsAllRequests</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="annottext">ResponseInternalErrorsConfig
</span><a href="Hasura.Server.Init.Config.html#InternalErrorsAdminOnly"><span class="hs-identifier hs-var">InternalErrorsAdminOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621689525178"><span class="hs-keyword hs-var">role</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName -&gt; RoleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="Hasura.Session.html#adminRoleName"><span class="hs-identifier hs-var">adminRoleName</span></a></span><span>
</span><span id="line-223"></span><span>  </span><span class="annot"><span class="annottext">ResponseInternalErrorsConfig
</span><a href="Hasura.Server.Init.Config.html#InternalErrorsDisabled"><span class="hs-identifier hs-var">InternalErrorsDisabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">newtype</span><span> </span><span id="KeepAliveDelay"><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-var">KeepAliveDelay</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="KeepAliveDelay"><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-var">KeepAliveDelay</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unKeepAliveDelay"><span class="annot"><span class="annottext">KeepAliveDelay -&gt; Seconds
</span><a href="Hasura.Server.Init.Config.html#unKeepAliveDelay"><span class="hs-identifier hs-var hs-var">unKeepAliveDelay</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-type">Seconds</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525171"><span id="local-6989586621689525173"><span class="annot"><span class="annottext">KeepAliveDelay -&gt; KeepAliveDelay -&gt; Bool
(KeepAliveDelay -&gt; KeepAliveDelay -&gt; Bool)
-&gt; (KeepAliveDelay -&gt; KeepAliveDelay -&gt; Bool) -&gt; Eq KeepAliveDelay
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: KeepAliveDelay -&gt; KeepAliveDelay -&gt; Bool
$c/= :: KeepAliveDelay -&gt; KeepAliveDelay -&gt; Bool
== :: KeepAliveDelay -&gt; KeepAliveDelay -&gt; Bool
$c== :: KeepAliveDelay -&gt; KeepAliveDelay -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525165"><span id="local-6989586621689525167"><span id="local-6989586621689525169"><span class="annot"><span class="annottext">Int -&gt; KeepAliveDelay -&gt; ShowS
[KeepAliveDelay] -&gt; ShowS
KeepAliveDelay -&gt; String
(Int -&gt; KeepAliveDelay -&gt; ShowS)
-&gt; (KeepAliveDelay -&gt; String)
-&gt; ([KeepAliveDelay] -&gt; ShowS)
-&gt; Show KeepAliveDelay
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [KeepAliveDelay] -&gt; ShowS
$cshowList :: [KeepAliveDelay] -&gt; ShowS
show :: KeepAliveDelay -&gt; String
$cshow :: KeepAliveDelay -&gt; String
showsPrec :: Int -&gt; KeepAliveDelay -&gt; ShowS
$cshowsPrec :: Int -&gt; KeepAliveDelay -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525162"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-type">KeepAliveDelay</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621689525161"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser KeepAliveDelay
</span><a href="#local-6989586621689525161"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser KeepAliveDelay)
-&gt; Value
-&gt; Parser KeepAliveDelay
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;KeepAliveDelay&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689525159"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689525159"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-230"></span><span>    </span><span id="local-6989586621689525158"><span class="annot"><span class="annottext">Seconds
</span><a href="#local-6989586621689525158"><span class="hs-identifier hs-var">unKeepAliveDelay</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689525159"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Seconds
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;keep_alive_delay&quot;</span></span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><span class="annottext">KeepAliveDelay -&gt; Parser KeepAliveDelay
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(KeepAliveDelay -&gt; Parser KeepAliveDelay)
-&gt; KeepAliveDelay -&gt; Parser KeepAliveDelay
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">KeepAliveDelay :: Seconds -&gt; KeepAliveDelay
</span><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-type">KeepAliveDelay</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Seconds
unKeepAliveDelay :: Seconds
unKeepAliveDelay :: Seconds
</span><a href="#local-6989586621689525158"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525150"><span id="local-6989586621689525152"><span id="local-6989586621689525154"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-type">KeepAliveDelay</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>  </span><span id="local-6989586621689525149"><span class="annot"><span class="annottext">toJSON :: KeepAliveDelay -&gt; Value
</span><a href="#local-6989586621689525149"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-type">KeepAliveDelay</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621689525148"><span class="annot"><span class="annottext">Seconds
unKeepAliveDelay :: Seconds
unKeepAliveDelay :: KeepAliveDelay -&gt; Seconds
</span><a href="#local-6989586621689525148"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;keep_alive_delay&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Seconds -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Seconds
</span><a href="#local-6989586621689525148"><span class="hs-identifier hs-var">unKeepAliveDelay</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#defaultKeepAliveDelay"><span class="hs-identifier hs-type">defaultKeepAliveDelay</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-type">KeepAliveDelay</span></a></span><span>
</span><span id="line-238"></span><span id="defaultKeepAliveDelay"><span class="annot"><span class="annottext">defaultKeepAliveDelay :: KeepAliveDelay
</span><a href="Hasura.Server.Init.Config.html#defaultKeepAliveDelay"><span class="hs-identifier hs-var hs-var">defaultKeepAliveDelay</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seconds -&gt; KeepAliveDelay
</span><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-var">KeepAliveDelay</span></a></span><span> </span><span class="annot"><span class="annottext">(Seconds -&gt; KeepAliveDelay) -&gt; Seconds -&gt; KeepAliveDelay
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Seconds
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">newtype</span><span> </span><span id="WSConnectionInitTimeout"><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-var">WSConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WSConnectionInitTimeout"><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-var">WSConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unWSConnectionInitTimeout"><span class="annot"><span class="annottext">WSConnectionInitTimeout -&gt; Seconds
</span><a href="Hasura.Server.Init.Config.html#unWSConnectionInitTimeout"><span class="hs-identifier hs-var hs-var">unWSConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-type">Seconds</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525140"><span id="local-6989586621689525142"><span class="annot"><span class="annottext">WSConnectionInitTimeout -&gt; WSConnectionInitTimeout -&gt; Bool
(WSConnectionInitTimeout -&gt; WSConnectionInitTimeout -&gt; Bool)
-&gt; (WSConnectionInitTimeout -&gt; WSConnectionInitTimeout -&gt; Bool)
-&gt; Eq WSConnectionInitTimeout
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: WSConnectionInitTimeout -&gt; WSConnectionInitTimeout -&gt; Bool
$c/= :: WSConnectionInitTimeout -&gt; WSConnectionInitTimeout -&gt; Bool
== :: WSConnectionInitTimeout -&gt; WSConnectionInitTimeout -&gt; Bool
$c== :: WSConnectionInitTimeout -&gt; WSConnectionInitTimeout -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525134"><span id="local-6989586621689525136"><span id="local-6989586621689525138"><span class="annot"><span class="annottext">Int -&gt; WSConnectionInitTimeout -&gt; ShowS
[WSConnectionInitTimeout] -&gt; ShowS
WSConnectionInitTimeout -&gt; String
(Int -&gt; WSConnectionInitTimeout -&gt; ShowS)
-&gt; (WSConnectionInitTimeout -&gt; String)
-&gt; ([WSConnectionInitTimeout] -&gt; ShowS)
-&gt; Show WSConnectionInitTimeout
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [WSConnectionInitTimeout] -&gt; ShowS
$cshowList :: [WSConnectionInitTimeout] -&gt; ShowS
show :: WSConnectionInitTimeout -&gt; String
$cshow :: WSConnectionInitTimeout -&gt; String
showsPrec :: Int -&gt; WSConnectionInitTimeout -&gt; ShowS
$cshowsPrec :: Int -&gt; WSConnectionInitTimeout -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525131"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-type">WSConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-244"></span><span>  </span><span id="local-6989586621689525130"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser WSConnectionInitTimeout
</span><a href="#local-6989586621689525130"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser WSConnectionInitTimeout)
-&gt; Value
-&gt; Parser WSConnectionInitTimeout
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;WSConnectionInitTimeout&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689525129"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689525129"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-245"></span><span>    </span><span id="local-6989586621689525128"><span class="annot"><span class="annottext">Seconds
</span><a href="#local-6989586621689525128"><span class="hs-identifier hs-var">unWSConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689525129"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Seconds
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;w_s_connection_init_timeout&quot;</span></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">WSConnectionInitTimeout -&gt; Parser WSConnectionInitTimeout
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(WSConnectionInitTimeout -&gt; Parser WSConnectionInitTimeout)
-&gt; WSConnectionInitTimeout -&gt; Parser WSConnectionInitTimeout
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">WSConnectionInitTimeout :: Seconds -&gt; WSConnectionInitTimeout
</span><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-type">WSConnectionInitTimeout</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Seconds
unWSConnectionInitTimeout :: Seconds
unWSConnectionInitTimeout :: Seconds
</span><a href="#local-6989586621689525128"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689525121"><span id="local-6989586621689525123"><span id="local-6989586621689525125"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-type">WSConnectionInitTimeout</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-249"></span><span>  </span><span id="local-6989586621689525120"><span class="annot"><span class="annottext">toJSON :: WSConnectionInitTimeout -&gt; Value
</span><a href="#local-6989586621689525120"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-type">WSConnectionInitTimeout</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621689525119"><span class="annot"><span class="annottext">Seconds
unWSConnectionInitTimeout :: Seconds
unWSConnectionInitTimeout :: WSConnectionInitTimeout -&gt; Seconds
</span><a href="#local-6989586621689525119"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;w_s_connection_init_timeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Seconds -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Seconds
</span><a href="#local-6989586621689525119"><span class="hs-identifier hs-var">unWSConnectionInitTimeout</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#defaultWSConnectionInitTimeout"><span class="hs-identifier hs-type">defaultWSConnectionInitTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-type">WSConnectionInitTimeout</span></a></span><span>
</span><span id="line-253"></span><span id="defaultWSConnectionInitTimeout"><span class="annot"><span class="annottext">defaultWSConnectionInitTimeout :: WSConnectionInitTimeout
</span><a href="Hasura.Server.Init.Config.html#defaultWSConnectionInitTimeout"><span class="hs-identifier hs-var hs-var">defaultWSConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seconds -&gt; WSConnectionInitTimeout
</span><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-var">WSConnectionInitTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">(Seconds -&gt; WSConnectionInitTimeout)
-&gt; Seconds -&gt; WSConnectionInitTimeout
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Seconds
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | The final Serve Command options accummulated from the Arg Parser</span><span>
</span><span id="line-258"></span><span class="hs-comment">-- and the Environment, fully processed and ready to apply when</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- running the server.</span><span>
</span><span id="line-260"></span><span class="hs-keyword">data</span><span> </span><span id="ServeOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#ServeOptions"><span class="hs-identifier hs-var">ServeOptions</span></a></span></span><span> </span><span id="local-6989586621689525118"><span class="annot"><a href="#local-6989586621689525118"><span class="hs-identifier hs-type">impl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ServeOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#ServeOptions"><span class="hs-identifier hs-var">ServeOptions</span></a></span></span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="soPort"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Int
</span><a href="Hasura.Server.Init.Config.html#soPort"><span class="hs-identifier hs-var hs-var">soPort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-262"></span><span>    </span><span id="soHost"><span class="annot"><span class="annottext">ServeOptions impl -&gt; HostPreference
</span><a href="Hasura.Server.Init.Config.html#soHost"><span class="hs-identifier hs-var hs-var">soHost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HostPreference</span></span><span class="hs-special">,</span><span>
</span><span id="line-263"></span><span>    </span><span id="soConnParams"><span class="annot"><span class="annottext">ServeOptions impl -&gt; ConnParams
</span><a href="Hasura.Server.Init.Config.html#soConnParams"><span class="hs-identifier hs-var hs-var">soConnParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q.ConnParams</span></span><span class="hs-special">,</span><span>
</span><span id="line-264"></span><span>    </span><span id="soTxIso"><span class="annot"><span class="annottext">ServeOptions impl -&gt; TxIsolation
</span><a href="Hasura.Server.Init.Config.html#soTxIso"><span class="hs-identifier hs-var hs-var">soTxIso</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q.TxIsolation</span></span><span class="hs-special">,</span><span>
</span><span id="line-265"></span><span>    </span><span id="soAdminSecret"><span class="annot"><span class="annottext">ServeOptions impl -&gt; HashSet AdminSecretHash
</span><a href="Hasura.Server.Init.Config.html#soAdminSecret"><span class="hs-identifier hs-var hs-var">soAdminSecret</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="annot"><a href="Hasura.Server.Auth.html#AdminSecretHash"><span class="hs-identifier hs-type">AdminSecretHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-266"></span><span>    </span><span id="soAuthHook"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Maybe AuthHook
</span><a href="Hasura.Server.Init.Config.html#soAuthHook"><span class="hs-identifier hs-var hs-var">soAuthHook</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Auth.WebHook.html#AuthHook"><span class="hs-identifier hs-type">AuthHook</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-267"></span><span>    </span><span id="soJwtSecret"><span class="annot"><span class="annottext">ServeOptions impl -&gt; [JWTConfig]
</span><a href="Hasura.Server.Init.Config.html#soJwtSecret"><span class="hs-identifier hs-var hs-var">soJwtSecret</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Server.Auth.JWT.html#JWTConfig"><span class="hs-identifier hs-type">JWTConfig</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-268"></span><span>    </span><span id="soUnAuthRole"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Maybe RoleName
</span><a href="Hasura.Server.Init.Config.html#soUnAuthRole"><span class="hs-identifier hs-var hs-var">soUnAuthRole</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Session.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-269"></span><span>    </span><span id="soCorsConfig"><span class="annot"><span class="annottext">ServeOptions impl -&gt; CorsConfig
</span><a href="Hasura.Server.Init.Config.html#soCorsConfig"><span class="hs-identifier hs-var hs-var">soCorsConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Cors.html#CorsConfig"><span class="hs-identifier hs-type">CorsConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-270"></span><span>    </span><span id="soEnableConsole"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#soEnableConsole"><span class="hs-identifier hs-var hs-var">soEnableConsole</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-271"></span><span>    </span><span id="soConsoleAssetsDir"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Maybe Text
</span><a href="Hasura.Server.Init.Config.html#soConsoleAssetsDir"><span class="hs-identifier hs-var hs-var">soConsoleAssetsDir</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-272"></span><span>    </span><span id="soEnableTelemetry"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#soEnableTelemetry"><span class="hs-identifier hs-var hs-var">soEnableTelemetry</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-273"></span><span>    </span><span id="soStringifyNum"><span class="annot"><span class="annottext">ServeOptions impl -&gt; StringifyNumbers
</span><a href="Hasura.Server.Init.Config.html#soStringifyNum"><span class="hs-identifier hs-var hs-var">soStringifyNum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html#StringifyNumbers"><span class="hs-identifier hs-type">Options.StringifyNumbers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-274"></span><span>    </span><span id="soDangerousBooleanCollapse"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#soDangerousBooleanCollapse"><span class="hs-identifier hs-var hs-var">soDangerousBooleanCollapse</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-275"></span><span>    </span><span id="soEnabledAPIs"><span class="annot"><span class="annottext">ServeOptions impl -&gt; HashSet API
</span><a href="Hasura.Server.Init.Config.html#soEnabledAPIs"><span class="hs-identifier hs-var hs-var">soEnabledAPIs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#API"><span class="hs-identifier hs-type">API</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-276"></span><span>    </span><span id="soLiveQueryOpts"><span class="annot"><span class="annottext">ServeOptions impl -&gt; LiveQueriesOptions
</span><a href="Hasura.Server.Init.Config.html#soLiveQueryOpts"><span class="hs-identifier hs-var hs-var">soLiveQueryOpts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Subscription.Options.html#LiveQueriesOptions"><span class="hs-identifier hs-type">ES.LiveQueriesOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-277"></span><span>    </span><span id="soStreamingQueryOpts"><span class="annot"><span class="annottext">ServeOptions impl -&gt; LiveQueriesOptions
</span><a href="Hasura.Server.Init.Config.html#soStreamingQueryOpts"><span class="hs-identifier hs-var hs-var">soStreamingQueryOpts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Subscription.Options.html#StreamQueriesOptions"><span class="hs-identifier hs-type">ES.StreamQueriesOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-278"></span><span>    </span><span id="soEnableAllowlist"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#soEnableAllowlist"><span class="hs-identifier hs-var hs-var">soEnableAllowlist</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-279"></span><span>    </span><span id="soEnabledLogTypes"><span class="annot"><span class="annottext">ServeOptions impl -&gt; HashSet (EngineLogType impl)
</span><a href="Hasura.Server.Init.Config.html#soEnabledLogTypes"><span class="hs-identifier hs-var hs-var">soEnabledLogTypes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Logging.html#EngineLogType"><span class="hs-identifier hs-type">L.EngineLogType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689525118"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-280"></span><span>    </span><span id="soLogLevel"><span class="annot"><span class="annottext">ServeOptions impl -&gt; LogLevel
</span><a href="Hasura.Server.Init.Config.html#soLogLevel"><span class="hs-identifier hs-var hs-var">soLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">L.LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-281"></span><span>    </span><span id="soResponseInternalErrorsConfig"><span class="annot"><span class="annottext">ServeOptions impl -&gt; ResponseInternalErrorsConfig
</span><a href="Hasura.Server.Init.Config.html#soResponseInternalErrorsConfig"><span class="hs-identifier hs-var hs-var">soResponseInternalErrorsConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#ResponseInternalErrorsConfig"><span class="hs-identifier hs-type">ResponseInternalErrorsConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-282"></span><span>    </span><span id="soEventsHttpPoolSize"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#soEventsHttpPoolSize"><span class="hs-identifier hs-var hs-var">soEventsHttpPoolSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-283"></span><span>    </span><span id="soEventsFetchInterval"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Maybe Milliseconds
</span><a href="Hasura.Server.Init.Config.html#soEventsFetchInterval"><span class="hs-identifier hs-var hs-var">soEventsFetchInterval</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.Time.Clock.Units.html#Milliseconds"><span class="hs-identifier hs-type">Milliseconds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-284"></span><span>    </span><span id="soAsyncActionsFetchInterval"><span class="annot"><span class="annottext">ServeOptions impl -&gt; OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#soAsyncActionsFetchInterval"><span class="hs-identifier hs-var hs-var">soAsyncActionsFetchInterval</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-type">OptionalInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-285"></span><span>    </span><span id="soEnableRemoteSchemaPermissions"><span class="annot"><span class="annottext">ServeOptions impl -&gt; RemoteSchemaPermissions
</span><a href="Hasura.Server.Init.Config.html#soEnableRemoteSchemaPermissions"><span class="hs-identifier hs-var hs-var">soEnableRemoteSchemaPermissions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html#RemoteSchemaPermissions"><span class="hs-identifier hs-type">Options.RemoteSchemaPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-286"></span><span>    </span><span id="soConnectionOptions"><span class="annot"><span class="annottext">ServeOptions impl -&gt; ConnectionOptions
</span><a href="Hasura.Server.Init.Config.html#soConnectionOptions"><span class="hs-identifier hs-var hs-var">soConnectionOptions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">WS.ConnectionOptions</span></span><span class="hs-special">,</span><span>
</span><span id="line-287"></span><span>    </span><span id="soWebSocketKeepAlive"><span class="annot"><span class="annottext">ServeOptions impl -&gt; KeepAliveDelay
</span><a href="Hasura.Server.Init.Config.html#soWebSocketKeepAlive"><span class="hs-identifier hs-var hs-var">soWebSocketKeepAlive</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#KeepAliveDelay"><span class="hs-identifier hs-type">KeepAliveDelay</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-288"></span><span>    </span><span id="soInferFunctionPermissions"><span class="annot"><span class="annottext">ServeOptions impl -&gt; InferFunctionPermissions
</span><a href="Hasura.Server.Init.Config.html#soInferFunctionPermissions"><span class="hs-identifier hs-var hs-var">soInferFunctionPermissions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html#InferFunctionPermissions"><span class="hs-identifier hs-type">Options.InferFunctionPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-289"></span><span>    </span><span id="soEnableMaintenanceMode"><span class="annot"><span class="annottext">ServeOptions impl -&gt; MaintenanceMode ()
</span><a href="Hasura.Server.Init.Config.html#soEnableMaintenanceMode"><span class="hs-identifier hs-var hs-var">soEnableMaintenanceMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Types.html#MaintenanceMode"><span class="hs-identifier hs-type">MaintenanceMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-290"></span><span>    </span><span id="soSchemaPollInterval"><span class="annot"><span class="annottext">ServeOptions impl -&gt; OptionalInterval
</span><a href="Hasura.Server.Init.Config.html#soSchemaPollInterval"><span class="hs-identifier hs-var hs-var">soSchemaPollInterval</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#OptionalInterval"><span class="hs-identifier hs-type">OptionalInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-291"></span><span>    </span><span id="soExperimentalFeatures"><span class="annot"><span class="annottext">ServeOptions impl -&gt; HashSet ExperimentalFeature
</span><a href="Hasura.Server.Init.Config.html#soExperimentalFeatures"><span class="hs-identifier hs-var hs-var">soExperimentalFeatures</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.HashSet</span></span><span> </span><span class="annot"><a href="Hasura.Server.Types.html#ExperimentalFeature"><span class="hs-identifier hs-type">ExperimentalFeature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-292"></span><span>    </span><span id="soEventsFetchBatchSize"><span class="annot"><span class="annottext">ServeOptions impl -&gt; NonNegativeInt
</span><a href="Hasura.Server.Init.Config.html#soEventsFetchBatchSize"><span class="hs-identifier hs-var hs-var">soEventsFetchBatchSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#NonNegativeInt"><span class="hs-identifier hs-type">NonNegativeInt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-293"></span><span>    </span><span id="soDevMode"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#soDevMode"><span class="hs-identifier hs-var hs-var">soDevMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-294"></span><span>    </span><span id="soGracefulShutdownTimeout"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Seconds
</span><a href="Hasura.Server.Init.Config.html#soGracefulShutdownTimeout"><span class="hs-identifier hs-var hs-var">soGracefulShutdownTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-type">Seconds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-295"></span><span>    </span><span id="soWebSocketConnectionInitTimeout"><span class="annot"><span class="annottext">ServeOptions impl -&gt; WSConnectionInitTimeout
</span><a href="Hasura.Server.Init.Config.html#soWebSocketConnectionInitTimeout"><span class="hs-identifier hs-var hs-var">soWebSocketConnectionInitTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#WSConnectionInitTimeout"><span class="hs-identifier hs-type">WSConnectionInitTimeout</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-296"></span><span>    </span><span id="soEventingMode"><span class="annot"><span class="annottext">ServeOptions impl -&gt; EventingMode
</span><a href="Hasura.Server.Init.Config.html#soEventingMode"><span class="hs-identifier hs-var hs-var">soEventingMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Types.html#EventingMode"><span class="hs-identifier hs-type">EventingMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-297"></span><span>    </span><span id="soReadOnlyMode"><span class="annot"><span class="annottext">ServeOptions impl -&gt; ReadOnlyMode
</span><a href="Hasura.Server.Init.Config.html#soReadOnlyMode"><span class="hs-identifier hs-var hs-var">soReadOnlyMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Types.html#ReadOnlyMode"><span class="hs-identifier hs-type">ReadOnlyMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-298"></span><span>    </span><span id="soEnableMetadataQueryLogging"><span class="annot"><span class="annottext">ServeOptions impl -&gt; MetadataQueryLoggingMode
</span><a href="Hasura.Server.Init.Config.html#soEnableMetadataQueryLogging"><span class="hs-identifier hs-var hs-var">soEnableMetadataQueryLogging</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingMode"><span class="hs-identifier hs-type">MetadataQueryLoggingMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-299"></span><span>    </span><span id="soDefaultNamingConvention"><span class="annot"><span class="annottext">ServeOptions impl -&gt; Maybe NamingCase
</span><a href="Hasura.Server.Init.Config.html#soDefaultNamingConvention"><span class="hs-identifier hs-var hs-var">soDefaultNamingConvention</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.NamingCase.html#NamingCase"><span class="hs-identifier hs-type">NamingCase</span></a></span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="hs-comment">-- | The Downgrade Command options. These are only sourced from the</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- Arg Parser and are used directly in 'Hasura.Server.Migrate'.</span><span>
</span><span id="line-306"></span><span class="hs-keyword">data</span><span> </span><span id="DowngradeOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#DowngradeOptions"><span class="hs-identifier hs-var">DowngradeOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DowngradeOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#DowngradeOptions"><span class="hs-identifier hs-var">DowngradeOptions</span></a></span></span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="dgoTargetVersion"><span class="annot"><span class="annottext">DowngradeOptions -&gt; Text
</span><a href="Hasura.Server.Init.Config.html#dgoTargetVersion"><span class="hs-identifier hs-var hs-var">dgoTargetVersion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-308"></span><span>    </span><span id="dgoDryRun"><span class="annot"><span class="annottext">DowngradeOptions -&gt; Bool
</span><a href="Hasura.Server.Init.Config.html#dgoDryRun"><span class="hs-identifier hs-var hs-var">dgoDryRun</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525068"><span id="local-6989586621689525070"><span id="local-6989586621689525072"><span class="annot"><span class="annottext">Int -&gt; DowngradeOptions -&gt; ShowS
[DowngradeOptions] -&gt; ShowS
DowngradeOptions -&gt; String
(Int -&gt; DowngradeOptions -&gt; ShowS)
-&gt; (DowngradeOptions -&gt; String)
-&gt; ([DowngradeOptions] -&gt; ShowS)
-&gt; Show DowngradeOptions
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DowngradeOptions] -&gt; ShowS
$cshowList :: [DowngradeOptions] -&gt; ShowS
show :: DowngradeOptions -&gt; String
$cshow :: DowngradeOptions -&gt; String
showsPrec :: Int -&gt; DowngradeOptions -&gt; ShowS
$cshowsPrec :: Int -&gt; DowngradeOptions -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525064"><span id="local-6989586621689525066"><span class="annot"><span class="annottext">DowngradeOptions -&gt; DowngradeOptions -&gt; Bool
(DowngradeOptions -&gt; DowngradeOptions -&gt; Bool)
-&gt; (DowngradeOptions -&gt; DowngradeOptions -&gt; Bool)
-&gt; Eq DowngradeOptions
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DowngradeOptions -&gt; DowngradeOptions -&gt; Bool
$c/= :: DowngradeOptions -&gt; DowngradeOptions -&gt; Bool
== :: DowngradeOptions -&gt; DowngradeOptions -&gt; Bool
$c== :: DowngradeOptions -&gt; DowngradeOptions -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">-- | Postgres connection info tupled with a retry count.</span><span>
</span><span id="line-315"></span><span class="hs-comment">--</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- The @a@ here is one of the following:</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- 1. 'Maybe PostgresRawConnInfo'</span><span>
</span><span id="line-318"></span><span class="hs-comment">-- 2. 'Maybe UrlConf'</span><span>
</span><span id="line-319"></span><span class="hs-comment">-- 3. 'Maybe Text'</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- 4. 'Maybe DatabaseUrl' where 'DatabaseUrl' is an alias for 'Text'</span><span>
</span><span id="line-321"></span><span class="hs-comment">--</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- If it contains a 'Maybe PostgresRawConnInfo' then you have not yet</span><span>
</span><span id="line-323"></span><span class="hs-comment">-- processed your arg parser results.</span><span>
</span><span id="line-324"></span><span class="hs-keyword">data</span><span> </span><span id="PostgresConnInfo"><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier hs-var">PostgresConnInfo</span></a></span></span><span> </span><span id="local-6989586621689525407"><span class="annot"><a href="#local-6989586621689525407"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PostgresConnInfo"><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier hs-var">PostgresConnInfo</span></a></span></span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_pciDatabaseConn"><span class="annot"><span class="annottext">PostgresConnInfo a -&gt; a
</span><a href="Hasura.Server.Init.Config.html#_pciDatabaseConn"><span class="hs-identifier hs-var hs-var">_pciDatabaseConn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621689525407"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-326"></span><span>    </span><span id="_pciRetries"><span class="annot"><span class="annottext">PostgresConnInfo a -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#_pciRetries"><span class="hs-identifier hs-var hs-var">_pciRetries</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689525055"><span id="local-6989586621689525057"><span id="local-6989586621689525059"><span class="annot"><span class="annottext">Int -&gt; PostgresConnInfo a -&gt; ShowS
[PostgresConnInfo a] -&gt; ShowS
PostgresConnInfo a -&gt; String
(Int -&gt; PostgresConnInfo a -&gt; ShowS)
-&gt; (PostgresConnInfo a -&gt; String)
-&gt; ([PostgresConnInfo a] -&gt; ShowS)
-&gt; Show (PostgresConnInfo a)
forall a. Show a =&gt; Int -&gt; PostgresConnInfo a -&gt; ShowS
forall a. Show a =&gt; [PostgresConnInfo a] -&gt; ShowS
forall a. Show a =&gt; PostgresConnInfo a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PostgresConnInfo a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [PostgresConnInfo a] -&gt; ShowS
show :: PostgresConnInfo a -&gt; String
$cshow :: forall a. Show a =&gt; PostgresConnInfo a -&gt; String
showsPrec :: Int -&gt; PostgresConnInfo a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; PostgresConnInfo a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525051"><span id="local-6989586621689525053"><span class="annot"><span class="annottext">PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool
(PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool)
-&gt; (PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool)
-&gt; Eq (PostgresConnInfo a)
forall a. Eq a =&gt; PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool
$c/= :: forall a. Eq a =&gt; PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool
== :: PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool
$c== :: forall a. Eq a =&gt; PostgresConnInfo a -&gt; PostgresConnInfo a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525047"><span id="local-6989586621689525049"><span class="annot"><span class="annottext">a -&gt; PostgresConnInfo b -&gt; PostgresConnInfo a
(a -&gt; b) -&gt; PostgresConnInfo a -&gt; PostgresConnInfo b
(forall a b. (a -&gt; b) -&gt; PostgresConnInfo a -&gt; PostgresConnInfo b)
-&gt; (forall a b. a -&gt; PostgresConnInfo b -&gt; PostgresConnInfo a)
-&gt; Functor PostgresConnInfo
forall a b. a -&gt; PostgresConnInfo b -&gt; PostgresConnInfo a
forall a b. (a -&gt; b) -&gt; PostgresConnInfo a -&gt; PostgresConnInfo b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; PostgresConnInfo b -&gt; PostgresConnInfo a
$c&lt;$ :: forall a b. a -&gt; PostgresConnInfo b -&gt; PostgresConnInfo a
fmap :: (a -&gt; b) -&gt; PostgresConnInfo a -&gt; PostgresConnInfo b
$cfmap :: forall a b. (a -&gt; b) -&gt; PostgresConnInfo a -&gt; PostgresConnInfo b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525012"><span id="local-6989586621689525014"><span id="local-6989586621689525016"><span id="local-6989586621689525018"><span id="local-6989586621689525020"><span id="local-6989586621689525022"><span id="local-6989586621689525024"><span id="local-6989586621689525026"><span id="local-6989586621689525028"><span id="local-6989586621689525030"><span id="local-6989586621689525032"><span id="local-6989586621689525034"><span id="local-6989586621689525036"><span id="local-6989586621689525038"><span id="local-6989586621689525040"><span id="local-6989586621689525042"><span id="local-6989586621689525044"><span class="annot"><span class="annottext">PostgresConnInfo a -&gt; Bool
(a -&gt; m) -&gt; PostgresConnInfo a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
(forall m. Monoid m =&gt; PostgresConnInfo m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PostgresConnInfo a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PostgresConnInfo a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; PostgresConnInfo a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; PostgresConnInfo a -&gt; a)
-&gt; (forall a. PostgresConnInfo a -&gt; [a])
-&gt; (forall a. PostgresConnInfo a -&gt; Bool)
-&gt; (forall a. PostgresConnInfo a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; PostgresConnInfo a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; PostgresConnInfo a -&gt; a)
-&gt; (forall a. Ord a =&gt; PostgresConnInfo a -&gt; a)
-&gt; (forall a. Num a =&gt; PostgresConnInfo a -&gt; a)
-&gt; (forall a. Num a =&gt; PostgresConnInfo a -&gt; a)
-&gt; Foldable PostgresConnInfo
forall a. Eq a =&gt; a -&gt; PostgresConnInfo a -&gt; Bool
forall a. Num a =&gt; PostgresConnInfo a -&gt; a
forall a. Ord a =&gt; PostgresConnInfo a -&gt; a
forall m. Monoid m =&gt; PostgresConnInfo m -&gt; m
forall a. PostgresConnInfo a -&gt; Bool
forall a. PostgresConnInfo a -&gt; Int
forall a. PostgresConnInfo a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; PostgresConnInfo a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PostgresConnInfo a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: PostgresConnInfo a -&gt; a
$cproduct :: forall a. Num a =&gt; PostgresConnInfo a -&gt; a
sum :: PostgresConnInfo a -&gt; a
$csum :: forall a. Num a =&gt; PostgresConnInfo a -&gt; a
minimum :: PostgresConnInfo a -&gt; a
$cminimum :: forall a. Ord a =&gt; PostgresConnInfo a -&gt; a
maximum :: PostgresConnInfo a -&gt; a
$cmaximum :: forall a. Ord a =&gt; PostgresConnInfo a -&gt; a
elem :: a -&gt; PostgresConnInfo a -&gt; Bool
$celem :: forall a. Eq a =&gt; a -&gt; PostgresConnInfo a -&gt; Bool
length :: PostgresConnInfo a -&gt; Int
$clength :: forall a. PostgresConnInfo a -&gt; Int
null :: PostgresConnInfo a -&gt; Bool
$cnull :: forall a. PostgresConnInfo a -&gt; Bool
toList :: PostgresConnInfo a -&gt; [a]
$ctoList :: forall a. PostgresConnInfo a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; PostgresConnInfo a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; PostgresConnInfo a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; PostgresConnInfo a -&gt; a
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; PostgresConnInfo a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PostgresConnInfo a -&gt; b
foldMap' :: (a -&gt; m) -&gt; PostgresConnInfo a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PostgresConnInfo a -&gt; m
foldMap :: (a -&gt; m) -&gt; PostgresConnInfo a -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PostgresConnInfo a -&gt; m
fold :: PostgresConnInfo m -&gt; m
$cfold :: forall m. Monoid m =&gt; PostgresConnInfo m -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689525001"><span id="local-6989586621689525003"><span id="local-6989586621689525005"><span id="local-6989586621689525007"><span class="annot"><span class="annottext">Functor PostgresConnInfo
Foldable PostgresConnInfo
Functor PostgresConnInfo
-&gt; Foldable PostgresConnInfo
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; PostgresConnInfo a -&gt; f (PostgresConnInfo b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    PostgresConnInfo (f a) -&gt; f (PostgresConnInfo a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; PostgresConnInfo a -&gt; m (PostgresConnInfo b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    PostgresConnInfo (m a) -&gt; m (PostgresConnInfo a))
-&gt; Traversable PostgresConnInfo
(a -&gt; f b) -&gt; PostgresConnInfo a -&gt; f (PostgresConnInfo b)
forall (t :: * -&gt; *).
Functor t
-&gt; Foldable t
-&gt; (forall (f :: * -&gt; *) a b.
    Applicative f =&gt;
    (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a.
Monad m =&gt;
PostgresConnInfo (m a) -&gt; m (PostgresConnInfo a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
PostgresConnInfo (f a) -&gt; f (PostgresConnInfo a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; PostgresConnInfo a -&gt; m (PostgresConnInfo b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; PostgresConnInfo a -&gt; f (PostgresConnInfo b)
sequence :: PostgresConnInfo (m a) -&gt; m (PostgresConnInfo a)
$csequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
PostgresConnInfo (m a) -&gt; m (PostgresConnInfo a)
mapM :: (a -&gt; m b) -&gt; PostgresConnInfo a -&gt; m (PostgresConnInfo b)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; PostgresConnInfo a -&gt; m (PostgresConnInfo b)
sequenceA :: PostgresConnInfo (f a) -&gt; f (PostgresConnInfo a)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
PostgresConnInfo (f a) -&gt; f (PostgresConnInfo a)
traverse :: (a -&gt; f b) -&gt; PostgresConnInfo a -&gt; f (PostgresConnInfo b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; PostgresConnInfo a -&gt; f (PostgresConnInfo b)
$cp2Traversable :: Foldable PostgresConnInfo
$cp1Traversable :: Functor PostgresConnInfo
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span id="local-6989586621689524999"><span class="annot"><a href="Hasura.Server.Init.Config.html#pciDatabaseConn"><span class="hs-identifier hs-type">pciDatabaseConn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier hs-type">PostgresConnInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524999"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621689524999"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-331"></span><span id="pciDatabaseConn"><span class="annot"><span class="annottext">pciDatabaseConn :: (a -&gt; f a) -&gt; PostgresConnInfo a -&gt; f (PostgresConnInfo a)
</span><a href="Hasura.Server.Init.Config.html#pciDatabaseConn"><span class="hs-identifier hs-var hs-var">pciDatabaseConn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PostgresConnInfo a -&gt; a)
-&gt; (PostgresConnInfo a -&gt; a -&gt; PostgresConnInfo a)
-&gt; Lens (PostgresConnInfo a) (PostgresConnInfo a) a a
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">PostgresConnInfo a -&gt; a
forall a. PostgresConnInfo a -&gt; a
</span><a href="Hasura.Server.Init.Config.html#_pciDatabaseConn"><span class="hs-identifier hs-var hs-var">_pciDatabaseConn</span></a></span><span> </span><span class="annot"><span class="annottext">((PostgresConnInfo a -&gt; a -&gt; PostgresConnInfo a)
 -&gt; Lens (PostgresConnInfo a) (PostgresConnInfo a) a a)
-&gt; (PostgresConnInfo a -&gt; a -&gt; PostgresConnInfo a)
-&gt; Lens (PostgresConnInfo a) (PostgresConnInfo a) a a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689524998"><span class="annot"><span class="annottext">PostgresConnInfo a
</span><a href="#local-6989586621689524998"><span class="hs-identifier hs-var">pci</span></a></span></span><span> </span><span id="local-6989586621689524997"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621689524997"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PostgresConnInfo a
</span><a href="#local-6989586621689524998"><span class="hs-identifier hs-var">pci</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_pciDatabaseConn :: a
</span><a href="Hasura.Server.Init.Config.html#_pciDatabaseConn"><span class="hs-identifier hs-var">_pciDatabaseConn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621689524997"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span id="local-6989586621689524996"><span class="annot"><a href="Hasura.Server.Init.Config.html#pciRetries"><span class="hs-identifier hs-type">pciRetries</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier hs-type">PostgresConnInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524996"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-334"></span><span id="pciRetries"><span class="annot"><span class="annottext">pciRetries :: (Maybe Int -&gt; f (Maybe Int))
-&gt; PostgresConnInfo a -&gt; f (PostgresConnInfo a)
</span><a href="Hasura.Server.Init.Config.html#pciRetries"><span class="hs-identifier hs-var hs-var">pciRetries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PostgresConnInfo a -&gt; Maybe Int)
-&gt; (PostgresConnInfo a -&gt; Maybe Int -&gt; PostgresConnInfo a)
-&gt; Lens
     (PostgresConnInfo a) (PostgresConnInfo a) (Maybe Int) (Maybe Int)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">PostgresConnInfo a -&gt; Maybe Int
forall a. PostgresConnInfo a -&gt; Maybe Int
</span><a href="Hasura.Server.Init.Config.html#_pciRetries"><span class="hs-identifier hs-var hs-var">_pciRetries</span></a></span><span> </span><span class="annot"><span class="annottext">((PostgresConnInfo a -&gt; Maybe Int -&gt; PostgresConnInfo a)
 -&gt; Lens
      (PostgresConnInfo a) (PostgresConnInfo a) (Maybe Int) (Maybe Int))
-&gt; (PostgresConnInfo a -&gt; Maybe Int -&gt; PostgresConnInfo a)
-&gt; Lens
     (PostgresConnInfo a) (PostgresConnInfo a) (Maybe Int) (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689524995"><span class="annot"><span class="annottext">PostgresConnInfo a
</span><a href="#local-6989586621689524995"><span class="hs-identifier hs-var">pci</span></a></span></span><span> </span><span id="local-6989586621689524994"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621689524994"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PostgresConnInfo a
</span><a href="#local-6989586621689524995"><span class="hs-identifier hs-var">pci</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_pciRetries :: Maybe Int
</span><a href="Hasura.Server.Init.Config.html#_pciRetries"><span class="hs-identifier hs-var">_pciRetries</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621689524994"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="hs-comment">-- | Postgres Connection info can come in the form of a templated URI</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- string or structured data.</span><span>
</span><span id="line-340"></span><span class="hs-keyword">data</span><span> </span><span id="PostgresRawConnInfo"><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnInfo"><span class="hs-identifier hs-var">PostgresRawConnInfo</span></a></span></span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PGConnDatabaseUrl"><span class="annot"><a href="Hasura.Server.Init.Config.html#PGConnDatabaseUrl"><span class="hs-identifier hs-var">PGConnDatabaseUrl</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Data.URL.Template.html#URLTemplate"><span class="hs-identifier hs-type">URLTemplate</span></a></span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PGConnDetails"><span class="annot"><a href="Hasura.Server.Init.Config.html#PGConnDetails"><span class="hs-identifier hs-var">PGConnDetails</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689524986"><span id="local-6989586621689524988"><span id="local-6989586621689524990"><span class="annot"><span class="annottext">Int -&gt; PostgresRawConnInfo -&gt; ShowS
[PostgresRawConnInfo] -&gt; ShowS
PostgresRawConnInfo -&gt; String
(Int -&gt; PostgresRawConnInfo -&gt; ShowS)
-&gt; (PostgresRawConnInfo -&gt; String)
-&gt; ([PostgresRawConnInfo] -&gt; ShowS)
-&gt; Show PostgresRawConnInfo
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PostgresRawConnInfo] -&gt; ShowS
$cshowList :: [PostgresRawConnInfo] -&gt; ShowS
show :: PostgresRawConnInfo -&gt; String
$cshow :: PostgresRawConnInfo -&gt; String
showsPrec :: Int -&gt; PostgresRawConnInfo -&gt; ShowS
$cshowsPrec :: Int -&gt; PostgresRawConnInfo -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689524982"><span id="local-6989586621689524984"><span class="annot"><span class="annottext">PostgresRawConnInfo -&gt; PostgresRawConnInfo -&gt; Bool
(PostgresRawConnInfo -&gt; PostgresRawConnInfo -&gt; Bool)
-&gt; (PostgresRawConnInfo -&gt; PostgresRawConnInfo -&gt; Bool)
-&gt; Eq PostgresRawConnInfo
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PostgresRawConnInfo -&gt; PostgresRawConnInfo -&gt; Bool
$c/= :: PostgresRawConnInfo -&gt; PostgresRawConnInfo -&gt; Bool
== :: PostgresRawConnInfo -&gt; PostgresRawConnInfo -&gt; Bool
$c== :: PostgresRawConnInfo -&gt; PostgresRawConnInfo -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#mkUrlConnInfo"><span class="hs-identifier hs-type">mkUrlConnInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnInfo"><span class="hs-identifier hs-type">PostgresRawConnInfo</span></a></span><span>
</span><span id="line-346"></span><span id="mkUrlConnInfo"><span class="annot"><span class="annottext">mkUrlConnInfo :: String -&gt; PostgresRawConnInfo
</span><a href="Hasura.Server.Init.Config.html#mkUrlConnInfo"><span class="hs-identifier hs-var hs-var">mkUrlConnInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">URLTemplate -&gt; PostgresRawConnInfo
</span><a href="Hasura.Server.Init.Config.html#PGConnDatabaseUrl"><span class="hs-identifier hs-var">PGConnDatabaseUrl</span></a></span><span> </span><span class="annot"><span class="annottext">(URLTemplate -&gt; PostgresRawConnInfo)
-&gt; (String -&gt; URLTemplate) -&gt; String -&gt; PostgresRawConnInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; URLTemplate
</span><a href="Data.URL.Template.html#mkPlainURLTemplate"><span class="hs-identifier hs-var">mkPlainURLTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; URLTemplate) -&gt; (String -&gt; Text) -&gt; String -&gt; URLTemplate
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#_PGConnDatabaseUrl"><span class="hs-identifier hs-type">_PGConnDatabaseUrl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnInfo"><span class="hs-identifier hs-type">PostgresRawConnInfo</span></a></span><span> </span><span class="annot"><a href="Data.URL.Template.html#URLTemplate"><span class="hs-identifier hs-type">URLTemplate</span></a></span><span>
</span><span id="line-349"></span><span id="_PGConnDatabaseUrl"><span class="annot"><span class="annottext">_PGConnDatabaseUrl :: p URLTemplate (f URLTemplate)
-&gt; p PostgresRawConnInfo (f PostgresRawConnInfo)
</span><a href="Hasura.Server.Init.Config.html#_PGConnDatabaseUrl"><span class="hs-identifier hs-var hs-var">_PGConnDatabaseUrl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(URLTemplate -&gt; PostgresRawConnInfo)
-&gt; (PostgresRawConnInfo -&gt; Maybe URLTemplate)
-&gt; Prism
     PostgresRawConnInfo PostgresRawConnInfo URLTemplate URLTemplate
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><span class="hs-identifier hs-var">prism'</span></span><span> </span><span class="annot"><span class="annottext">URLTemplate -&gt; PostgresRawConnInfo
</span><a href="Hasura.Server.Init.Config.html#PGConnDatabaseUrl"><span class="hs-identifier hs-var">PGConnDatabaseUrl</span></a></span><span> </span><span class="annot"><span class="annottext">((PostgresRawConnInfo -&gt; Maybe URLTemplate)
 -&gt; Prism
      PostgresRawConnInfo PostgresRawConnInfo URLTemplate URLTemplate)
-&gt; (PostgresRawConnInfo -&gt; Maybe URLTemplate)
-&gt; Prism
     PostgresRawConnInfo PostgresRawConnInfo URLTemplate URLTemplate
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-350"></span><span>  </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PGConnDatabaseUrl"><span class="hs-identifier hs-type">PGConnDatabaseUrl</span></a></span><span> </span><span id="local-6989586621689524978"><span class="annot"><span class="annottext">URLTemplate
</span><a href="#local-6989586621689524978"><span class="hs-identifier hs-var">template</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">URLTemplate -&gt; Maybe URLTemplate
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">URLTemplate
</span><a href="#local-6989586621689524978"><span class="hs-identifier hs-var">template</span></a></span><span>
</span><span id="line-351"></span><span>  </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PGConnDetails"><span class="hs-identifier hs-type">PGConnDetails</span></a></span><span> </span><span class="annot"><span class="annottext">PostgresRawConnDetails
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe URLTemplate
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#_PGConnDetails"><span class="hs-identifier hs-type">_PGConnDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnInfo"><span class="hs-identifier hs-type">PostgresRawConnInfo</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span><span>
</span><span id="line-354"></span><span id="_PGConnDetails"><span class="annot"><span class="annottext">_PGConnDetails :: p PostgresRawConnDetails (f PostgresRawConnDetails)
-&gt; p PostgresRawConnInfo (f PostgresRawConnInfo)
</span><a href="Hasura.Server.Init.Config.html#_PGConnDetails"><span class="hs-identifier hs-var hs-var">_PGConnDetails</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PostgresRawConnDetails -&gt; PostgresRawConnInfo)
-&gt; (PostgresRawConnInfo -&gt; Maybe PostgresRawConnDetails)
-&gt; Prism
     PostgresRawConnInfo
     PostgresRawConnInfo
     PostgresRawConnDetails
     PostgresRawConnDetails
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><span class="hs-identifier hs-var">prism'</span></span><span> </span><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; PostgresRawConnInfo
</span><a href="Hasura.Server.Init.Config.html#PGConnDetails"><span class="hs-identifier hs-var">PGConnDetails</span></a></span><span> </span><span class="annot"><span class="annottext">((PostgresRawConnInfo -&gt; Maybe PostgresRawConnDetails)
 -&gt; Prism
      PostgresRawConnInfo
      PostgresRawConnInfo
      PostgresRawConnDetails
      PostgresRawConnDetails)
-&gt; (PostgresRawConnInfo -&gt; Maybe PostgresRawConnDetails)
-&gt; Prism
     PostgresRawConnInfo
     PostgresRawConnInfo
     PostgresRawConnDetails
     PostgresRawConnDetails
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-355"></span><span>  </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PGConnDatabaseUrl"><span class="hs-identifier hs-type">PGConnDatabaseUrl</span></a></span><span> </span><span class="annot"><span class="annottext">URLTemplate
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe PostgresRawConnDetails
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-356"></span><span>  </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PGConnDetails"><span class="hs-identifier hs-type">PGConnDetails</span></a></span><span> </span><span id="local-6989586621689524977"><span class="annot"><span class="annottext">PostgresRawConnDetails
</span><a href="#local-6989586621689524977"><span class="hs-identifier hs-var">prcd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; Maybe PostgresRawConnDetails
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">PostgresRawConnDetails
</span><a href="#local-6989586621689524977"><span class="hs-identifier hs-var">prcd</span></a></span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#rawConnDetailsToUrl"><span class="hs-identifier hs-type">rawConnDetailsToUrl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.URL.Template.html#URLTemplate"><span class="hs-identifier hs-type">URLTemplate</span></a></span><span>
</span><span id="line-359"></span><span id="rawConnDetailsToUrl"><span class="annot"><span class="annottext">rawConnDetailsToUrl :: PostgresRawConnDetails -&gt; URLTemplate
</span><a href="Hasura.Server.Init.Config.html#rawConnDetailsToUrl"><span class="hs-identifier hs-var hs-var">rawConnDetailsToUrl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-360"></span><span>  </span><span class="annot"><span class="annottext">Text -&gt; URLTemplate
</span><a href="Data.URL.Template.html#mkPlainURLTemplate"><span class="hs-identifier hs-var">mkPlainURLTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; URLTemplate)
-&gt; (PostgresRawConnDetails -&gt; Text)
-&gt; PostgresRawConnDetails
-&gt; URLTemplate
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; Text
</span><a href="Hasura.Server.Init.Config.html#rawConnDetailsToUrlText"><span class="hs-identifier hs-var">rawConnDetailsToUrlText</span></a></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span class="hs-comment">-- | Structured Postgres connection information as provided by the arg</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- parser or env vars.</span><span>
</span><span id="line-366"></span><span class="hs-keyword">data</span><span> </span><span id="PostgresRawConnDetails"><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-var">PostgresRawConnDetails</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PostgresRawConnDetails"><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-var">PostgresRawConnDetails</span></a></span></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="connHost"><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; String
</span><a href="Hasura.Server.Init.Config.html#connHost"><span class="hs-identifier hs-var hs-var">connHost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span>
</span><span id="line-368"></span><span>    </span><span id="connPort"><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; Int
</span><a href="Hasura.Server.Init.Config.html#connPort"><span class="hs-identifier hs-var hs-var">connPort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-369"></span><span>    </span><span id="connUser"><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; String
</span><a href="Hasura.Server.Init.Config.html#connUser"><span class="hs-identifier hs-var hs-var">connUser</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span>
</span><span id="line-370"></span><span>    </span><span id="connPassword"><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; String
</span><a href="Hasura.Server.Init.Config.html#connPassword"><span class="hs-identifier hs-var hs-var">connPassword</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span>
</span><span id="line-371"></span><span>    </span><span id="connDatabase"><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; String
</span><a href="Hasura.Server.Init.Config.html#connDatabase"><span class="hs-identifier hs-var hs-var">connDatabase</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span>
</span><span id="line-372"></span><span>    </span><span id="connOptions"><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; Maybe String
</span><a href="Hasura.Server.Init.Config.html#connOptions"><span class="hs-identifier hs-var hs-var">connOptions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689524966"><span id="local-6989586621689524968"><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; PostgresRawConnDetails -&gt; Bool
(PostgresRawConnDetails -&gt; PostgresRawConnDetails -&gt; Bool)
-&gt; (PostgresRawConnDetails -&gt; PostgresRawConnDetails -&gt; Bool)
-&gt; Eq PostgresRawConnDetails
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PostgresRawConnDetails -&gt; PostgresRawConnDetails -&gt; Bool
$c/= :: PostgresRawConnDetails -&gt; PostgresRawConnDetails -&gt; Bool
== :: PostgresRawConnDetails -&gt; PostgresRawConnDetails -&gt; Bool
$c== :: PostgresRawConnDetails -&gt; PostgresRawConnDetails -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689524958"><span id="local-6989586621689524960"><span id="local-6989586621689524962"><span id="local-6989586621689524964"><span class="annot"><span class="annottext">ReadPrec [PostgresRawConnDetails]
ReadPrec PostgresRawConnDetails
Int -&gt; ReadS PostgresRawConnDetails
ReadS [PostgresRawConnDetails]
(Int -&gt; ReadS PostgresRawConnDetails)
-&gt; ReadS [PostgresRawConnDetails]
-&gt; ReadPrec PostgresRawConnDetails
-&gt; ReadPrec [PostgresRawConnDetails]
-&gt; Read PostgresRawConnDetails
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
readListPrec :: ReadPrec [PostgresRawConnDetails]
$creadListPrec :: ReadPrec [PostgresRawConnDetails]
readPrec :: ReadPrec PostgresRawConnDetails
$creadPrec :: ReadPrec PostgresRawConnDetails
readList :: ReadS [PostgresRawConnDetails]
$creadList :: ReadS [PostgresRawConnDetails]
readsPrec :: Int -&gt; ReadS PostgresRawConnDetails
$creadsPrec :: Int -&gt; ReadS PostgresRawConnDetails
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689524952"><span id="local-6989586621689524954"><span id="local-6989586621689524956"><span class="annot"><span class="annottext">Int -&gt; PostgresRawConnDetails -&gt; ShowS
[PostgresRawConnDetails] -&gt; ShowS
PostgresRawConnDetails -&gt; String
(Int -&gt; PostgresRawConnDetails -&gt; ShowS)
-&gt; (PostgresRawConnDetails -&gt; String)
-&gt; ([PostgresRawConnDetails] -&gt; ShowS)
-&gt; Show PostgresRawConnDetails
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PostgresRawConnDetails] -&gt; ShowS
$cshowList :: [PostgresRawConnDetails] -&gt; ShowS
show :: PostgresRawConnDetails -&gt; String
$cshow :: PostgresRawConnDetails -&gt; String
showsPrec :: Int -&gt; PostgresRawConnDetails -&gt; ShowS
$cshowsPrec :: Int -&gt; PostgresRawConnDetails -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689524949"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-377"></span><span>  </span><span id="local-6989586621689524948"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser PostgresRawConnDetails
</span><a href="#local-6989586621689524948"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser PostgresRawConnDetails)
-&gt; Value
-&gt; Parser PostgresRawConnDetails
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PostgresRawConnDetails&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689524947"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689524947"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-378"></span><span>    </span><span id="local-6989586621689524946"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524946"><span class="hs-identifier hs-var">connHost</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689524947"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser String
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;host&quot;</span></span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621689524945"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621689524945"><span class="hs-identifier hs-var">connPort</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689524947"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Int
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;port&quot;</span></span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621689524944"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524944"><span class="hs-identifier hs-var">connUser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689524947"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser String
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;user&quot;</span></span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621689524943"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524943"><span class="hs-identifier hs-var">connPassword</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689524947"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser String
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;password&quot;</span></span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621689524942"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524942"><span class="hs-identifier hs-var">connDatabase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689524947"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser String
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;database&quot;</span></span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621689524941"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621689524941"><span class="hs-identifier hs-var">connOptions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621689524947"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Maybe String)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;options&quot;</span></span><span>
</span><span id="line-384"></span><span>    </span><span class="annot"><span class="annottext">PostgresRawConnDetails -&gt; Parser PostgresRawConnDetails
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PostgresRawConnDetails -&gt; Parser PostgresRawConnDetails)
-&gt; PostgresRawConnDetails -&gt; Parser PostgresRawConnDetails
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PostgresRawConnDetails :: String
-&gt; Int
-&gt; String
-&gt; String
-&gt; String
-&gt; Maybe String
-&gt; PostgresRawConnDetails
</span><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Int
String
Maybe String
connOptions :: Maybe String
connDatabase :: String
connPassword :: String
connUser :: String
connPort :: Int
connHost :: String
connOptions :: Maybe String
connDatabase :: String
connPassword :: String
connUser :: String
connPort :: Int
connHost :: String
</span><a href="#local-6989586621689524941"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621689524933"><span id="local-6989586621689524935"><span id="local-6989586621689524937"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-387"></span><span>  </span><span id="local-6989586621689524932"><span class="annot"><span class="annottext">toJSON :: PostgresRawConnDetails -&gt; Value
</span><a href="#local-6989586621689524932"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621689524926"><span id="local-6989586621689524927"><span id="local-6989586621689524928"><span id="local-6989586621689524929"><span id="local-6989586621689524930"><span id="local-6989586621689524931"><span class="annot"><span class="annottext">Int
String
Maybe String
connOptions :: Maybe String
connDatabase :: String
connPassword :: String
connUser :: String
connPort :: Int
connHost :: String
connOptions :: PostgresRawConnDetails -&gt; Maybe String
connDatabase :: PostgresRawConnDetails -&gt; String
connPassword :: PostgresRawConnDetails -&gt; String
connUser :: PostgresRawConnDetails -&gt; String
connPort :: PostgresRawConnDetails -&gt; Int
connHost :: PostgresRawConnDetails -&gt; String
</span><a href="#local-6989586621689524926"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-388"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-389"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;host&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524931"><span class="hs-identifier hs-var">connHost</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-390"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;port&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621689524930"><span class="hs-identifier hs-var">connPort</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;user&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524929"><span class="hs-identifier hs-var">connUser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-392"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;password&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524928"><span class="hs-identifier hs-var">connPassword</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-393"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;database&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524927"><span class="hs-identifier hs-var">connDatabase</span></a></span><span>
</span><span id="line-394"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-395"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall (f :: * -&gt; *) a. Filterable f =&gt; f (Maybe a) -&gt; f a
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(String -&gt; Pair) -&gt; Maybe String -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;options&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621689524926"><span class="hs-identifier hs-var">connOptions</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="annot"><a href="Hasura.Server.Init.Config.html#rawConnDetailsToUrlText"><span class="hs-identifier hs-type">rawConnDetailsToUrlText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-398"></span><span id="rawConnDetailsToUrlText"><span class="annot"><span class="annottext">rawConnDetailsToUrlText :: PostgresRawConnDetails -&gt; Text
</span><a href="Hasura.Server.Init.Config.html#rawConnDetailsToUrlText"><span class="hs-identifier hs-var hs-var">rawConnDetailsToUrlText</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnDetails"><span class="hs-identifier hs-type">PostgresRawConnDetails</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621689524919"><span id="local-6989586621689524920"><span id="local-6989586621689524921"><span id="local-6989586621689524922"><span id="local-6989586621689524923"><span id="local-6989586621689524924"><span class="annot"><span class="annottext">Int
String
Maybe String
connOptions :: Maybe String
connDatabase :: String
connPassword :: String
connUser :: String
connPort :: Int
connHost :: String
connOptions :: PostgresRawConnDetails -&gt; Maybe String
connDatabase :: PostgresRawConnDetails -&gt; String
connPassword :: PostgresRawConnDetails -&gt; String
connUser :: PostgresRawConnDetails -&gt; String
connPort :: PostgresRawConnDetails -&gt; Int
connHost :: PostgresRawConnDetails -&gt; String
</span><a href="#local-6989586621689524919"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-399"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;postgresql://&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524922"><span class="hs-identifier hs-var">connUser</span></a></span><span>
</span><span id="line-401"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span>
</span><span id="line-402"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524921"><span class="hs-identifier hs-var">connPassword</span></a></span><span>
</span><span id="line-403"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span>
</span><span id="line-404"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524924"><span class="hs-identifier hs-var">connHost</span></a></span><span>
</span><span id="line-405"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span>
</span><span id="line-406"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621689524923"><span class="hs-identifier hs-var">connPort</span></a></span><span>
</span><span id="line-407"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;/&quot;</span></span><span>
</span><span id="line-408"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621689524920"><span class="hs-identifier hs-var">connDatabase</span></a></span><span>
</span><span id="line-409"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS -&gt; Maybe String -&gt; String
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?options=&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621689524919"><span class="hs-identifier hs-var">connOptions</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-comment">-- | HGE Options from the arg parser and the env.</span><span>
</span><span id="line-414"></span><span class="hs-keyword">data</span><span> </span><span id="HGEOptionsRaw"><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptionsRaw"><span class="hs-identifier hs-var">HGEOptionsRaw</span></a></span></span><span> </span><span id="local-6989586621689525376"><span class="annot"><a href="#local-6989586621689525376"><span class="hs-identifier hs-type">impl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HGEOptionsRaw"><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptionsRaw"><span class="hs-identifier hs-var">HGEOptionsRaw</span></a></span></span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_horDatabaseUrl"><span class="annot"><span class="annottext">HGEOptionsRaw impl -&gt; PostgresConnInfo (Maybe PostgresRawConnInfo)
</span><a href="Hasura.Server.Init.Config.html#_horDatabaseUrl"><span class="hs-identifier hs-var hs-var">_horDatabaseUrl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier hs-type">PostgresConnInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnInfo"><span class="hs-identifier hs-type">PostgresRawConnInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-416"></span><span>    </span><span id="_horMetadataDbUrl"><span class="annot"><span class="annottext">HGEOptionsRaw impl -&gt; Maybe String
</span><a href="Hasura.Server.Init.Config.html#_horMetadataDbUrl"><span class="hs-identifier hs-var hs-var">_horMetadataDbUrl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-417"></span><span>    </span><span id="_horCommand"><span class="annot"><span class="annottext">HGEOptionsRaw impl -&gt; HGECommand impl
</span><a href="Hasura.Server.Init.Config.html#_horCommand"><span class="hs-identifier hs-var hs-var">_horCommand</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGECommand"><span class="hs-identifier hs-type">HGECommand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689525376"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span id="local-6989586621689524913"><span class="annot"><a href="Hasura.Server.Init.Config.html#horDatabaseUrl"><span class="hs-identifier hs-type">horDatabaseUrl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptionsRaw"><span class="hs-identifier hs-type">HGEOptionsRaw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524913"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier hs-type">PostgresConnInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresRawConnInfo"><span class="hs-identifier hs-type">PostgresRawConnInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-421"></span><span id="horDatabaseUrl"><span class="annot"><span class="annottext">horDatabaseUrl :: (PostgresConnInfo (Maybe PostgresRawConnInfo)
 -&gt; f (PostgresConnInfo (Maybe PostgresRawConnInfo)))
-&gt; HGEOptionsRaw impl -&gt; f (HGEOptionsRaw impl)
</span><a href="Hasura.Server.Init.Config.html#horDatabaseUrl"><span class="hs-identifier hs-var hs-var">horDatabaseUrl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HGEOptionsRaw impl
 -&gt; PostgresConnInfo (Maybe PostgresRawConnInfo))
-&gt; (HGEOptionsRaw impl
    -&gt; PostgresConnInfo (Maybe PostgresRawConnInfo)
    -&gt; HGEOptionsRaw impl)
-&gt; Lens
     (HGEOptionsRaw impl)
     (HGEOptionsRaw impl)
     (PostgresConnInfo (Maybe PostgresRawConnInfo))
     (PostgresConnInfo (Maybe PostgresRawConnInfo))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">HGEOptionsRaw impl -&gt; PostgresConnInfo (Maybe PostgresRawConnInfo)
forall impl.
HGEOptionsRaw impl -&gt; PostgresConnInfo (Maybe PostgresRawConnInfo)
</span><a href="Hasura.Server.Init.Config.html#_horDatabaseUrl"><span class="hs-identifier hs-var hs-var">_horDatabaseUrl</span></a></span><span> </span><span class="annot"><span class="annottext">((HGEOptionsRaw impl
  -&gt; PostgresConnInfo (Maybe PostgresRawConnInfo)
  -&gt; HGEOptionsRaw impl)
 -&gt; Lens
      (HGEOptionsRaw impl)
      (HGEOptionsRaw impl)
      (PostgresConnInfo (Maybe PostgresRawConnInfo))
      (PostgresConnInfo (Maybe PostgresRawConnInfo)))
-&gt; (HGEOptionsRaw impl
    -&gt; PostgresConnInfo (Maybe PostgresRawConnInfo)
    -&gt; HGEOptionsRaw impl)
-&gt; Lens
     (HGEOptionsRaw impl)
     (HGEOptionsRaw impl)
     (PostgresConnInfo (Maybe PostgresRawConnInfo))
     (PostgresConnInfo (Maybe PostgresRawConnInfo))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689524912"><span class="annot"><span class="annottext">HGEOptionsRaw impl
</span><a href="#local-6989586621689524912"><span class="hs-identifier hs-var">hdu</span></a></span></span><span> </span><span id="local-6989586621689524911"><span class="annot"><span class="annottext">PostgresConnInfo (Maybe PostgresRawConnInfo)
</span><a href="#local-6989586621689524911"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HGEOptionsRaw impl
</span><a href="#local-6989586621689524912"><span class="hs-identifier hs-var">hdu</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_horDatabaseUrl :: PostgresConnInfo (Maybe PostgresRawConnInfo)
</span><a href="Hasura.Server.Init.Config.html#_horDatabaseUrl"><span class="hs-identifier hs-var">_horDatabaseUrl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostgresConnInfo (Maybe PostgresRawConnInfo)
</span><a href="#local-6989586621689524911"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span id="local-6989586621689524910"><span class="annot"><a href="Hasura.Server.Init.Config.html#horMetadataDbUrl"><span class="hs-identifier hs-type">horMetadataDbUrl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptionsRaw"><span class="hs-identifier hs-type">HGEOptionsRaw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524910"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-424"></span><span id="horMetadataDbUrl"><span class="annot"><span class="annottext">horMetadataDbUrl :: (Maybe String -&gt; f (Maybe String))
-&gt; HGEOptionsRaw impl -&gt; f (HGEOptionsRaw impl)
</span><a href="Hasura.Server.Init.Config.html#horMetadataDbUrl"><span class="hs-identifier hs-var hs-var">horMetadataDbUrl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HGEOptionsRaw impl -&gt; Maybe String)
-&gt; (HGEOptionsRaw impl -&gt; Maybe String -&gt; HGEOptionsRaw impl)
-&gt; Lens
     (HGEOptionsRaw impl)
     (HGEOptionsRaw impl)
     (Maybe String)
     (Maybe String)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">HGEOptionsRaw impl -&gt; Maybe String
forall impl. HGEOptionsRaw impl -&gt; Maybe String
</span><a href="Hasura.Server.Init.Config.html#_horMetadataDbUrl"><span class="hs-identifier hs-var hs-var">_horMetadataDbUrl</span></a></span><span> </span><span class="annot"><span class="annottext">((HGEOptionsRaw impl -&gt; Maybe String -&gt; HGEOptionsRaw impl)
 -&gt; Lens
      (HGEOptionsRaw impl)
      (HGEOptionsRaw impl)
      (Maybe String)
      (Maybe String))
-&gt; (HGEOptionsRaw impl -&gt; Maybe String -&gt; HGEOptionsRaw impl)
-&gt; Lens
     (HGEOptionsRaw impl)
     (HGEOptionsRaw impl)
     (Maybe String)
     (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689524909"><span class="annot"><span class="annottext">HGEOptionsRaw impl
</span><a href="#local-6989586621689524909"><span class="hs-identifier hs-var">hdu</span></a></span></span><span> </span><span id="local-6989586621689524908"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621689524908"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HGEOptionsRaw impl
</span><a href="#local-6989586621689524909"><span class="hs-identifier hs-var">hdu</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_horMetadataDbUrl :: Maybe String
</span><a href="Hasura.Server.Init.Config.html#_horMetadataDbUrl"><span class="hs-identifier hs-var">_horMetadataDbUrl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621689524908"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span id="local-6989586621689524907"><span class="annot"><a href="Hasura.Server.Init.Config.html#horCommand"><span class="hs-identifier hs-type">horCommand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptionsRaw"><span class="hs-identifier hs-type">HGEOptionsRaw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524907"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGECommand"><span class="hs-identifier hs-type">HGECommand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524907"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-427"></span><span id="horCommand"><span class="annot"><span class="annottext">horCommand :: (HGECommand impl -&gt; f (HGECommand impl))
-&gt; HGEOptionsRaw impl -&gt; f (HGEOptionsRaw impl)
</span><a href="Hasura.Server.Init.Config.html#horCommand"><span class="hs-identifier hs-var hs-var">horCommand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HGEOptionsRaw impl -&gt; HGECommand impl)
-&gt; (HGEOptionsRaw impl -&gt; HGECommand impl -&gt; HGEOptionsRaw impl)
-&gt; Lens
     (HGEOptionsRaw impl)
     (HGEOptionsRaw impl)
     (HGECommand impl)
     (HGECommand impl)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">HGEOptionsRaw impl -&gt; HGECommand impl
forall impl. HGEOptionsRaw impl -&gt; HGECommand impl
</span><a href="Hasura.Server.Init.Config.html#_horCommand"><span class="hs-identifier hs-var hs-var">_horCommand</span></a></span><span> </span><span class="annot"><span class="annottext">((HGEOptionsRaw impl -&gt; HGECommand impl -&gt; HGEOptionsRaw impl)
 -&gt; Lens
      (HGEOptionsRaw impl)
      (HGEOptionsRaw impl)
      (HGECommand impl)
      (HGECommand impl))
-&gt; (HGEOptionsRaw impl -&gt; HGECommand impl -&gt; HGEOptionsRaw impl)
-&gt; Lens
     (HGEOptionsRaw impl)
     (HGEOptionsRaw impl)
     (HGECommand impl)
     (HGECommand impl)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689524906"><span class="annot"><span class="annottext">HGEOptionsRaw impl
</span><a href="#local-6989586621689524906"><span class="hs-identifier hs-var">hdu</span></a></span></span><span> </span><span id="local-6989586621689524905"><span class="annot"><span class="annottext">HGECommand impl
</span><a href="#local-6989586621689524905"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HGEOptionsRaw impl
</span><a href="#local-6989586621689524906"><span class="hs-identifier hs-var">hdu</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_horCommand :: HGECommand impl
</span><a href="Hasura.Server.Init.Config.html#_horCommand"><span class="hs-identifier hs-var">_horCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HGECommand impl
</span><a href="#local-6989586621689524905"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="hs-comment">-- | The final processed HGE options.</span><span>
</span><span id="line-432"></span><span class="hs-keyword">data</span><span> </span><span id="HGEOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptions"><span class="hs-identifier hs-var">HGEOptions</span></a></span></span><span> </span><span id="local-6989586621689525364"><span class="annot"><a href="#local-6989586621689525364"><span class="hs-identifier hs-type">impl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HGEOptions"><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptions"><span class="hs-identifier hs-var">HGEOptions</span></a></span></span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_hoDatabaseUrl"><span class="annot"><span class="annottext">HGEOptions impl -&gt; PostgresConnInfo (Maybe UrlConf)
</span><a href="Hasura.Server.Init.Config.html#_hoDatabaseUrl"><span class="hs-identifier hs-var hs-var">_hoDatabaseUrl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#PostgresConnInfo"><span class="hs-identifier hs-type">PostgresConnInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#UrlConf"><span class="hs-identifier hs-type">UrlConf</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-434"></span><span>    </span><span id="_hoMetadataDbUrl"><span class="annot"><span class="annottext">HGEOptions impl -&gt; Maybe String
</span><a href="Hasura.Server.Init.Config.html#_hoMetadataDbUrl"><span class="hs-identifier hs-var hs-var">_hoMetadataDbUrl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-435"></span><span>    </span><span id="_hoCommand"><span class="annot"><span class="annottext">HGEOptions impl -&gt; HGECommand impl
</span><a href="Hasura.Server.Init.Config.html#_hoCommand"><span class="hs-identifier hs-var hs-var">_hoCommand</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGECommand"><span class="hs-identifier hs-type">HGECommand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689525364"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span id="local-6989586621689524900"><span class="annot"><a href="Hasura.Server.Init.Config.html#hoCommand"><span class="hs-identifier hs-type">hoCommand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGEOptions"><span class="hs-identifier hs-type">HGEOptions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524900"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGECommand"><span class="hs-identifier hs-type">HGECommand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524900"><span class="hs-identifier hs-type">impl</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-439"></span><span id="hoCommand"><span class="annot"><span class="annottext">hoCommand :: (HGECommand impl -&gt; f (HGECommand impl))
-&gt; HGEOptions impl -&gt; f (HGEOptions impl)
</span><a href="Hasura.Server.Init.Config.html#hoCommand"><span class="hs-identifier hs-var hs-var">hoCommand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HGEOptions impl -&gt; HGECommand impl)
-&gt; (HGEOptions impl -&gt; HGECommand impl -&gt; HGEOptions impl)
-&gt; Lens
     (HGEOptions impl)
     (HGEOptions impl)
     (HGECommand impl)
     (HGECommand impl)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">HGEOptions impl -&gt; HGECommand impl
forall impl. HGEOptions impl -&gt; HGECommand impl
</span><a href="Hasura.Server.Init.Config.html#_hoCommand"><span class="hs-identifier hs-var hs-var">_hoCommand</span></a></span><span> </span><span class="annot"><span class="annottext">((HGEOptions impl -&gt; HGECommand impl -&gt; HGEOptions impl)
 -&gt; Lens
      (HGEOptions impl)
      (HGEOptions impl)
      (HGECommand impl)
      (HGECommand impl))
-&gt; (HGEOptions impl -&gt; HGECommand impl -&gt; HGEOptions impl)
-&gt; Lens
     (HGEOptions impl)
     (HGEOptions impl)
     (HGECommand impl)
     (HGECommand impl)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689524899"><span class="annot"><span class="annottext">HGEOptions impl
</span><a href="#local-6989586621689524899"><span class="hs-identifier hs-var">hdu</span></a></span></span><span> </span><span id="local-6989586621689524898"><span class="annot"><span class="annottext">HGECommand impl
</span><a href="#local-6989586621689524898"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HGEOptions impl
</span><a href="#local-6989586621689524899"><span class="hs-identifier hs-var">hdu</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_hoCommand :: HGECommand impl
</span><a href="Hasura.Server.Init.Config.html#_hoCommand"><span class="hs-identifier hs-var">_hoCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HGECommand impl
</span><a href="#local-6989586621689524898"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- | The HGE Arg parser Command choices.</span><span>
</span><span id="line-444"></span><span class="hs-comment">--</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- This is polymorphic so that we can pack either 'RawServeOptions' or</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- 'RawProServeOptions' in it.</span><span>
</span><span id="line-447"></span><span class="hs-keyword">data</span><span> </span><span id="HGECommand"><span class="annot"><a href="Hasura.Server.Init.Config.html#HGECommand"><span class="hs-identifier hs-var">HGECommand</span></a></span></span><span> </span><span id="local-6989586621689525358"><span class="annot"><a href="#local-6989586621689525358"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HCServe"><span class="annot"><a href="Hasura.Server.Init.Config.html#HCServe"><span class="hs-identifier hs-var">HCServe</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621689525358"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-449"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HCExport"><span class="annot"><a href="Hasura.Server.Init.Config.html#HCExport"><span class="hs-identifier hs-var">HCExport</span></a></span></span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HCClean"><span class="annot"><a href="Hasura.Server.Init.Config.html#HCClean"><span class="hs-identifier hs-var">HCClean</span></a></span></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HCVersion"><span class="annot"><a href="Hasura.Server.Init.Config.html#HCVersion"><span class="hs-identifier hs-var">HCVersion</span></a></span></span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HCDowngrade"><span class="annot"><a href="Hasura.Server.Init.Config.html#HCDowngrade"><span class="hs-identifier hs-var">HCDowngrade</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Init.Config.html#DowngradeOptions"><span class="hs-identifier hs-type">DowngradeOptions</span></a></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621689524887"><span id="local-6989586621689524889"><span id="local-6989586621689524891"><span class="annot"><span class="annottext">Int -&gt; HGECommand a -&gt; ShowS
[HGECommand a] -&gt; ShowS
HGECommand a -&gt; String
(Int -&gt; HGECommand a -&gt; ShowS)
-&gt; (HGECommand a -&gt; String)
-&gt; ([HGECommand a] -&gt; ShowS)
-&gt; Show (HGECommand a)
forall a. Show a =&gt; Int -&gt; HGECommand a -&gt; ShowS
forall a. Show a =&gt; [HGECommand a] -&gt; ShowS
forall a. Show a =&gt; HGECommand a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HGECommand a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [HGECommand a] -&gt; ShowS
show :: HGECommand a -&gt; String
$cshow :: forall a. Show a =&gt; HGECommand a -&gt; String
showsPrec :: Int -&gt; HGECommand a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; HGECommand a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689524883"><span id="local-6989586621689524885"><span class="annot"><span class="annottext">HGECommand a -&gt; HGECommand a -&gt; Bool
(HGECommand a -&gt; HGECommand a -&gt; Bool)
-&gt; (HGECommand a -&gt; HGECommand a -&gt; Bool) -&gt; Eq (HGECommand a)
forall a. Eq a =&gt; HGECommand a -&gt; HGECommand a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HGECommand a -&gt; HGECommand a -&gt; Bool
$c/= :: forall a. Eq a =&gt; HGECommand a -&gt; HGECommand a -&gt; Bool
== :: HGECommand a -&gt; HGECommand a -&gt; Bool
$c== :: forall a. Eq a =&gt; HGECommand a -&gt; HGECommand a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span id="local-6989586621689524882"><span class="annot"><a href="Hasura.Server.Init.Config.html#_HCServe"><span class="hs-identifier hs-type">_HCServe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.Config.html#HGECommand"><span class="hs-identifier hs-type">HGECommand</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689524882"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621689524882"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-456"></span><span id="_HCServe"><span class="annot"><span class="annottext">_HCServe :: p a (f a) -&gt; p (HGECommand a) (f (HGECommand a))
</span><a href="Hasura.Server.Init.Config.html#_HCServe"><span class="hs-identifier hs-var hs-var">_HCServe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; HGECommand a)
-&gt; (HGECommand a -&gt; Maybe a)
-&gt; Prism (HGECommand a) (HGECommand a) a a
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><span class="hs-identifier hs-var">prism'</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; HGECommand a
forall a. a -&gt; HGECommand a
</span><a href="Hasura.Server.Init.Config.html#HCServe"><span class="hs-identifier hs-var">HCServe</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-457"></span><span>  </span><span class="annot"><a href="Hasura.Server.Init.Config.html#HCServe"><span class="hs-identifier hs-type">HCServe</span></a></span><span> </span><span id="local-6989586621689524881"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621689524881"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621689524881"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-458"></span><span>  </span><span class="annot"><span class="annottext">HGECommand a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-459"></span></pre></body></html>