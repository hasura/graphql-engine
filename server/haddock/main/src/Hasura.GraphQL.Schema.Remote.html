<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RecursiveDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.GraphQL.Schema.Remote</span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#buildRemoteParser"><span class="hs-identifier">buildRemoteParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteField"><span class="hs-identifier">remoteField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#makeResultCustomizer"><span class="hs-identifier">makeResultCustomizer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#withRemoteSchemaCustomization"><span class="hs-identifier">withRemoteSchemaCustomization</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">where</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Has</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict.InsOrd</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OMap</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.HashMap.Strict.InsOrd.Extended.html"><span class="hs-identifier">Data.HashMap.Strict.InsOrd.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OMap</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Any</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Type.Equality</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Namespace.html"><span class="hs-identifier">Hasura.GraphQL.Namespace</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Parser</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Parser.Internal.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.TypeChecking.html"><span class="hs-identifier">Hasura.GraphQL.Parser.Internal.TypeChecking</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html"><span class="hs-identifier">Hasura.RQL.Types.RemoteSchema</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.ResultCustomization</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#IntrospectionResult"><span class="hs-identifier">IntrospectionResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#IntrospectionResult"><span class="hs-identifier">IntrospectionResult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#irMutationRoot"><span class="hs-identifier">irMutationRoot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#irQueryRoot"><span class="hs-identifier">irQueryRoot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#irSubscriptionRoot"><span class="hs-identifier">irSubscriptionRoot</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#ParsedIntrospectionG"><span class="hs-identifier">ParsedIntrospectionG</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.SourceCustomization</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- Top level function</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#buildRemoteParser"><span class="hs-identifier hs-type">buildRemoteParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112132"><span class="annot"><a href="#local-6989586621688112132"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112131"><span class="annot"><a href="#local-6989586621688112131"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621688112132"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112132"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112131"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#IntrospectionResult"><span class="hs-identifier hs-type">IntrospectionResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInfo"><span class="hs-identifier hs-type">RemoteSchemaInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="#local-6989586621688112132"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#ParsedIntrospectionG"><span class="hs-identifier hs-type">ParsedIntrospectionG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112131"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span id="buildRemoteParser"><span class="annot"><span class="annottext">buildRemoteParser :: IntrospectionResult
-&gt; RemoteSchemaInfo -&gt; m (ParsedIntrospectionG n)
</span><a href="Hasura.GraphQL.Schema.Remote.html#buildRemoteParser"><span class="hs-identifier hs-var hs-var">buildRemoteParser</span></a></span></span><span> </span><span id="local-6989586621688112127"><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621688112127"><span class="hs-identifier hs-var">introspectionResult</span></a></span></span><span> </span><span id="local-6989586621688112126"><span class="annot"><span class="annottext">remoteSchemaInfo :: RemoteSchemaInfo
</span><a href="#local-6989586621688112126"><span class="hs-identifier hs-var">remoteSchemaInfo</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInfo"><span class="hs-identifier hs-type">RemoteSchemaInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688112123"><span id="local-6989586621688112124"><span class="annot"><span class="annottext">ValidatedRemoteSchemaDef
RemoteSchemaCustomizer
rsCustomizer :: RemoteSchemaInfo -&gt; RemoteSchemaCustomizer
rsDef :: RemoteSchemaInfo -&gt; ValidatedRemoteSchemaDef
rsCustomizer :: RemoteSchemaCustomizer
rsDef :: ValidatedRemoteSchemaDef
</span><a href="Hasura.RQL.Types.RemoteSchema.html#rsCustomizer"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621688112120"><span class="annot"><span class="annottext">[FieldParser n RemoteField]
</span><a href="#local-6989586621688112120"><span class="hs-identifier hs-var">rawQueryParsers</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688112119"><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112119"><span class="hs-identifier hs-var">rawMutationParsers</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688112118"><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112118"><span class="hs-identifier hs-var">rawSubscriptionParsers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><span class="annottext">SchemaT
  n
  (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
  ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
   Maybe [FieldParser n RemoteField])
-&gt; m ([FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
forall (m :: * -&gt; *) (n :: * -&gt; *) a.
Monad m =&gt;
SchemaT n (ReaderT (MkTypename, CustomizeRemoteFieldName) m) a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Remote.html#runMonadBuildRemoteSchema"><span class="hs-identifier hs-var">runMonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><span class="annottext">(SchemaT
   n
   (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
   ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
    Maybe [FieldParser n RemoteField])
 -&gt; m ([FieldParser n RemoteField],
       Maybe [FieldParser n RemoteField],
       Maybe [FieldParser n RemoteField]))
-&gt; SchemaT
     n
     (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
     ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
-&gt; m ([FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-44"></span><span>      </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
-&gt; SchemaT
     n
     (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
     ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
-&gt; SchemaT
     n
     (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
     ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
forall (m :: * -&gt; *) r a.
(MonadReader r m, Has MkTypename r,
 Has CustomizeRemoteFieldName r) =&gt;
RemoteSchemaCustomizer -&gt; m a -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Remote.html#withRemoteSchemaCustomization"><span class="hs-identifier hs-var">withRemoteSchemaCustomization</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688112123"><span class="hs-identifier hs-var">rsCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">(SchemaT
   n
   (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
   ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
    Maybe [FieldParser n RemoteField])
 -&gt; SchemaT
      n
      (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
      ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
       Maybe [FieldParser n RemoteField]))
-&gt; SchemaT
     n
     (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
     ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
-&gt; SchemaT
     n
     (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
     ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><span class="annottext">IntrospectionResult
-&gt; RemoteSchemaInfo
-&gt; SchemaT
     n
     (ReaderT (MkTypename, CustomizeRemoteFieldName) m)
     ([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
IntrospectionResult
-&gt; RemoteSchemaInfo
-&gt; m ([FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
</span><a href="Hasura.GraphQL.Schema.Remote.html#buildRawRemoteParser"><span class="hs-identifier hs-var">buildRawRemoteParser</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621688112127"><span class="hs-identifier hs-var">introspectionResult</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688112126"><span class="hs-identifier hs-var">remoteSchemaInfo</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><span class="annottext">ParsedIntrospectionG n -&gt; m (ParsedIntrospectionG n)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ParsedIntrospectionG n -&gt; m (ParsedIntrospectionG n))
-&gt; ParsedIntrospectionG n -&gt; m (ParsedIntrospectionG n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><span class="annottext">[FieldParser n (NamespacedField RemoteField)]
-&gt; Maybe [FieldParser n (NamespacedField RemoteField)]
-&gt; Maybe [FieldParser n (NamespacedField RemoteField)]
-&gt; ParsedIntrospectionG n
forall (m :: * -&gt; *).
[FieldParser m (NamespacedField RemoteField)]
-&gt; Maybe [FieldParser m (NamespacedField RemoteField)]
-&gt; Maybe [FieldParser m (NamespacedField RemoteField)]
-&gt; ParsedIntrospectionG m
</span><a href="Hasura.RQL.Types.SchemaCache.html#ParsedIntrospection"><span class="hs-identifier hs-var">ParsedIntrospection</span></a></span><span>
</span><span id="line-48"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaInfo
-&gt; Name
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
forall (n :: * -&gt; *).
MonadParse n =&gt;
RemoteSchemaInfo
-&gt; Name
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
</span><a href="Hasura.GraphQL.Schema.Remote.html#customizeRemoteNamespace"><span class="hs-identifier hs-var">customizeRemoteNamespace</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688112126"><span class="hs-identifier hs-var">remoteSchemaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IntrospectionResult -&gt; Name
</span><a href="Hasura.RQL.Types.SchemaCache.html#irQueryRoot"><span class="hs-identifier hs-var hs-var">irQueryRoot</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621688112127"><span class="hs-identifier hs-var">introspectionResult</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldParser n RemoteField]
</span><a href="#local-6989586621688112120"><span class="hs-identifier hs-var">rawQueryParsers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaInfo
-&gt; Name
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
forall (n :: * -&gt; *).
MonadParse n =&gt;
RemoteSchemaInfo
-&gt; Name
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
</span><a href="Hasura.GraphQL.Schema.Remote.html#customizeRemoteNamespace"><span class="hs-identifier hs-var">customizeRemoteNamespace</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688112126"><span class="hs-identifier hs-var">remoteSchemaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Name
 -&gt; [FieldParser n RemoteField]
 -&gt; [FieldParser n (NamespacedField RemoteField)])
-&gt; Maybe Name
-&gt; Maybe
     ([FieldParser n RemoteField]
      -&gt; [FieldParser n (NamespacedField RemoteField)])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; Maybe Name
</span><a href="Hasura.RQL.Types.SchemaCache.html#irMutationRoot"><span class="hs-identifier hs-var hs-var">irMutationRoot</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621688112127"><span class="hs-identifier hs-var">introspectionResult</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  ([FieldParser n RemoteField]
   -&gt; [FieldParser n (NamespacedField RemoteField)])
-&gt; Maybe [FieldParser n RemoteField]
-&gt; Maybe [FieldParser n (NamespacedField RemoteField)]
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112119"><span class="hs-identifier hs-var">rawMutationParsers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaInfo
-&gt; Name
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
forall (n :: * -&gt; *).
MonadParse n =&gt;
RemoteSchemaInfo
-&gt; Name
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
</span><a href="Hasura.GraphQL.Schema.Remote.html#customizeRemoteNamespace"><span class="hs-identifier hs-var">customizeRemoteNamespace</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688112126"><span class="hs-identifier hs-var">remoteSchemaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Name
 -&gt; [FieldParser n RemoteField]
 -&gt; [FieldParser n (NamespacedField RemoteField)])
-&gt; Maybe Name
-&gt; Maybe
     ([FieldParser n RemoteField]
      -&gt; [FieldParser n (NamespacedField RemoteField)])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; Maybe Name
</span><a href="Hasura.RQL.Types.SchemaCache.html#irSubscriptionRoot"><span class="hs-identifier hs-var hs-var">irSubscriptionRoot</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621688112127"><span class="hs-identifier hs-var">introspectionResult</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  ([FieldParser n RemoteField]
   -&gt; [FieldParser n (NamespacedField RemoteField)])
-&gt; Maybe [FieldParser n RemoteField]
-&gt; Maybe [FieldParser n (NamespacedField RemoteField)]
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112118"><span class="hs-identifier hs-var">rawSubscriptionParsers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span id="local-6989586621688112484"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#makeResultCustomizer"><span class="hs-identifier hs-type">makeResultCustomizer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaCustomizer"><span class="hs-identifier hs-type">RemoteSchemaCustomizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="#local-6989586621688112484"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html#ResultCustomizer"><span class="hs-identifier hs-type">ResultCustomizer</span></a></span></span><span>
</span><span id="line-53"></span><span id="makeResultCustomizer"><span class="annot"><span class="annottext">makeResultCustomizer :: RemoteSchemaCustomizer -&gt; Field NoFragments a -&gt; ResultCustomizer
</span><a href="Hasura.GraphQL.Schema.Remote.html#makeResultCustomizer"><span class="hs-identifier hs-var hs-var">makeResultCustomizer</span></a></span></span><span> </span><span id="local-6989586621688112112"><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688112112"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688112106"><span id="local-6989586621688112107"><span id="local-6989586621688112108"><span id="local-6989586621688112109"><span id="local-6989586621688112110"><span class="annot"><span class="annottext">[Directive a]
SelectionSet NoFragments a
Maybe Name
HashMap Name (Value a)
Name
_fSelectionSet :: forall (frag :: * -&gt; *) var.
Field frag var -&gt; SelectionSet frag var
_fName :: forall (frag :: * -&gt; *) var. Field frag var -&gt; Name
_fDirectives :: forall (frag :: * -&gt; *) var. Field frag var -&gt; [Directive var]
_fArguments :: forall (frag :: * -&gt; *) var.
Field frag var -&gt; HashMap Name (Value var)
_fAlias :: forall (frag :: * -&gt; *) var. Field frag var -&gt; Maybe Name
_fSelectionSet :: SelectionSet NoFragments a
_fDirectives :: [Directive a]
_fArguments :: HashMap Name (Value a)
_fName :: Name
_fAlias :: Maybe Name
</span><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><span class="annottext">Name -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#modifyFieldByName"><span class="hs-identifier hs-var">modifyFieldByName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Name -&gt; Name
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112109"><span class="hs-identifier hs-var">_fName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112110"><span class="hs-identifier hs-var">_fAlias</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112109"><span class="hs-identifier hs-var">_fName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;__typename&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">HashMap Name Name -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#customizeTypeNameString"><span class="hs-identifier hs-var">customizeTypeNameString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaCustomizer -&gt; HashMap Name Name
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rscCustomizeTypeName"><span class="hs-identifier hs-var hs-var">_rscCustomizeTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688112112"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(Selection NoFragments a -&gt; ResultCustomizer)
-&gt; SelectionSet NoFragments a -&gt; ResultCustomizer
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">Selection NoFragments a -&gt; ResultCustomizer
forall a. Selection NoFragments a -&gt; ResultCustomizer
</span><a href="#local-6989586621688112092"><span class="hs-identifier hs-var">resultCustomizerFromSelection</span></a></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments a
</span><a href="#local-6989586621688112106"><span class="hs-identifier hs-var">_fSelectionSet</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-59"></span><span>    </span><span id="local-6989586621688112486"><span class="annot"><a href="#local-6989586621688112092"><span class="hs-identifier hs-type">resultCustomizerFromSelection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Selection</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="#local-6989586621688112486"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html#ResultCustomizer"><span class="hs-identifier hs-type">ResultCustomizer</span></a></span></span><span>
</span><span id="line-60"></span><span>    </span><span id="local-6989586621688112092"><span class="annot"><span class="annottext">resultCustomizerFromSelection :: Selection NoFragments a -&gt; ResultCustomizer
</span><a href="#local-6989586621688112092"><span class="hs-identifier hs-var hs-var">resultCustomizerFromSelection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-61"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.SelectionField</span></span><span> </span><span id="local-6989586621688112090"><span class="annot"><span class="annottext">Field NoFragments a
</span><a href="#local-6989586621688112090"><span class="hs-identifier hs-var">fld</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer -&gt; Field NoFragments a -&gt; ResultCustomizer
forall a.
RemoteSchemaCustomizer -&gt; Field NoFragments a -&gt; ResultCustomizer
</span><a href="Hasura.GraphQL.Schema.Remote.html#makeResultCustomizer"><span class="hs-identifier hs-var">makeResultCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688112112"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">Field NoFragments a
</span><a href="#local-6989586621688112090"><span class="hs-identifier hs-var">fld</span></a></span><span>
</span><span id="line-62"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.SelectionInlineFragment</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.InlineFragment</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688112085"><span id="local-6989586621688112086"><span id="local-6989586621688112087"><span class="annot"><span class="annottext">[Directive a]
SelectionSet NoFragments a
Maybe Name
_ifTypeCondition :: forall (frag :: * -&gt; *) var. InlineFragment frag var -&gt; Maybe Name
_ifSelectionSet :: forall (frag :: * -&gt; *) var.
InlineFragment frag var -&gt; SelectionSet frag var
_ifDirectives :: forall (frag :: * -&gt; *) var.
InlineFragment frag var -&gt; [Directive var]
_ifSelectionSet :: SelectionSet NoFragments a
_ifDirectives :: [Directive a]
_ifTypeCondition :: Maybe Name
</span><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Selection NoFragments a -&gt; ResultCustomizer)
-&gt; SelectionSet NoFragments a -&gt; ResultCustomizer
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">Selection NoFragments a -&gt; ResultCustomizer
forall a. Selection NoFragments a -&gt; ResultCustomizer
</span><a href="#local-6989586621688112092"><span class="hs-identifier hs-var">resultCustomizerFromSelection</span></a></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments a
</span><a href="#local-6989586621688112085"><span class="hs-identifier hs-var">_ifSelectionSet</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#buildRawRemoteParser"><span class="hs-identifier hs-type">buildRawRemoteParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112528"><span class="annot"><a href="#local-6989586621688112528"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112527"><span class="annot"><a href="#local-6989586621688112527"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112526"><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112528"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#IntrospectionResult"><span class="hs-identifier hs-type">IntrospectionResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInfo"><span class="hs-identifier hs-type">RemoteSchemaInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-comment">-- | parsers for, respectively: queries, mutations, and subscriptions</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="#local-6989586621688112527"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span id="buildRawRemoteParser"><span class="annot"><span class="annottext">buildRawRemoteParser :: IntrospectionResult
-&gt; RemoteSchemaInfo
-&gt; m ([FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
</span><a href="Hasura.GraphQL.Schema.Remote.html#buildRawRemoteParser"><span class="hs-identifier hs-var hs-var">buildRawRemoteParser</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#IntrospectionResult"><span class="hs-identifier hs-type">IntrospectionResult</span></a></span><span> </span><span id="local-6989586621688112081"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688112081"><span class="hs-identifier hs-var">sdoc</span></a></span></span><span> </span><span id="local-6989586621688112080"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112080"><span class="hs-identifier hs-var">queryRoot</span></a></span></span><span> </span><span id="local-6989586621688112079"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112079"><span class="hs-identifier hs-var">mutationRoot</span></a></span></span><span> </span><span id="local-6989586621688112078"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112078"><span class="hs-identifier hs-var">subscriptionRoot</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688112077"><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688112077"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-76"></span><span>  </span><span id="local-6989586621688112076"><span class="annot"><span class="annottext">[FieldParser n RemoteField]
</span><a href="#local-6989586621688112076"><span class="hs-identifier hs-var">queryT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m [FieldParser n RemoteField]
</span><a href="#local-6989586621688112075"><span class="hs-identifier hs-var">makeParsers</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112080"><span class="hs-identifier hs-var">queryRoot</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span id="local-6989586621688112074"><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112074"><span class="hs-identifier hs-var">mutationT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Name -&gt; Name -&gt; m (Maybe [FieldParser n RemoteField])
</span><a href="#local-6989586621688112073"><span class="hs-identifier hs-var">makeNonQueryRootFieldParser</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112079"><span class="hs-identifier hs-var">mutationRoot</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Mutation&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>  </span><span id="local-6989586621688112072"><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112072"><span class="hs-identifier hs-var">subscriptionT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Name -&gt; Name -&gt; m (Maybe [FieldParser n RemoteField])
</span><a href="#local-6989586621688112073"><span class="hs-identifier hs-var">makeNonQueryRootFieldParser</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112078"><span class="hs-identifier hs-var">subscriptionRoot</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Subscription&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><span class="annottext">([FieldParser n RemoteField], Maybe [FieldParser n RemoteField],
 Maybe [FieldParser n RemoteField])
-&gt; m ([FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField],
      Maybe [FieldParser n RemoteField])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FieldParser n RemoteField]
</span><a href="#local-6989586621688112076"><span class="hs-identifier hs-var">queryT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112074"><span class="hs-identifier hs-var">mutationT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
</span><a href="#local-6989586621688112072"><span class="hs-identifier hs-var">subscriptionT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="#local-6989586621688112071"><span class="hs-identifier hs-type">makeFieldParser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>    </span><span id="local-6989586621688112071"><span class="annot"><span class="annottext">makeFieldParser :: Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n RemoteField)
</span><a href="#local-6989586621688112071"><span class="hs-identifier hs-var hs-var">makeFieldParser</span></a></span></span><span> </span><span id="local-6989586621688112070"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112070"><span class="hs-identifier hs-var">rootTypeName</span></a></span></span><span> </span><span id="local-6989586621688112069"><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688112069"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>      </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable -&gt; RemoteField)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; FieldParser n RemoteField
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable -&gt; RemoteField
</span><a href="#local-6989586621688112068"><span class="hs-identifier hs-var">makeRemoteField</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (Field NoFragments RemoteSchemaVariable)
 -&gt; FieldParser n RemoteField)
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n RemoteField)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromDefinition"><span class="hs-identifier hs-var">remoteFieldFromDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688112081"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112070"><span class="hs-identifier hs-var">rootTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688112069"><span class="hs-identifier hs-var">fieldDef</span></a></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><a href="#local-6989586621688112068"><span class="hs-identifier hs-type">makeRemoteField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span id="local-6989586621688112068"><span class="annot"><span class="annottext">makeRemoteField :: Field NoFragments RemoteSchemaVariable -&gt; RemoteField
</span><a href="#local-6989586621688112068"><span class="hs-identifier hs-var hs-var">makeRemoteField</span></a></span></span><span> </span><span id="local-6989586621688112066"><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688112066"><span class="hs-identifier hs-var">fld</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
-&gt; ResultCustomizer
-&gt; Field NoFragments RemoteSchemaVariable
-&gt; RemoteField
forall var.
RemoteSchemaInfo
-&gt; ResultCustomizer -&gt; Field NoFragments var -&gt; RemoteFieldG var
</span><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteFieldG"><span class="hs-identifier hs-var">RemoteFieldG</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688112077"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
-&gt; Field NoFragments RemoteSchemaVariable -&gt; ResultCustomizer
forall a.
RemoteSchemaCustomizer -&gt; Field NoFragments a -&gt; ResultCustomizer
</span><a href="Hasura.GraphQL.Schema.Remote.html#makeResultCustomizer"><span class="hs-identifier hs-var">makeResultCustomizer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaInfo -&gt; RemoteSchemaCustomizer
</span><a href="Hasura.RQL.Types.RemoteSchema.html#rsCustomizer"><span class="hs-identifier hs-var hs-var">rsCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688112077"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688112066"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688112066"><span class="hs-identifier hs-var">fld</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="#local-6989586621688112075"><span class="hs-identifier hs-type">makeParsers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-89"></span><span>    </span><span id="local-6989586621688112075"><span class="annot"><span class="annottext">makeParsers :: Name -&gt; m [FieldParser n RemoteField]
</span><a href="#local-6989586621688112075"><span class="hs-identifier hs-var hs-var">makeParsers</span></a></span></span><span> </span><span id="local-6989586621688112064"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112064"><span class="hs-identifier hs-var">rootName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-90"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688112081"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112064"><span class="hs-identifier hs-var">rootName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionObject</span></span><span> </span><span id="local-6989586621688112061"><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688112061"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-92"></span><span>          </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition
 -&gt; m (FieldParser n RemoteField))
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; m [FieldParser n RemoteField]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n RemoteField)
</span><a href="#local-6989586621688112071"><span class="hs-identifier hs-var">makeFieldParser</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112064"><span class="hs-identifier hs-var">rootName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([FieldDefinition RemoteSchemaInputValueDefinition]
 -&gt; m [FieldParser n RemoteField])
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; m [FieldParser n RemoteField]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
forall inputType.
ObjectTypeDefinition inputType -&gt; [FieldDefinition inputType]
</span><span class="hs-identifier hs-var hs-var">G._otdFieldsDefinition</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688112061"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><span class="annottext">Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m [FieldParser n RemoteField]
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#Unexpected"><span class="hs-identifier hs-var">Unexpected</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m [FieldParser n RemoteField])
-&gt; Text -&gt; m [FieldParser n RemoteField]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112064"><span class="hs-identifier hs-var">rootName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; has to be an object type&quot;</span></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="#local-6989586621688112073"><span class="hs-identifier hs-type">makeNonQueryRootFieldParser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112526"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>    </span><span id="local-6989586621688112073"><span class="annot"><span class="annottext">makeNonQueryRootFieldParser :: Maybe Name -&gt; Name -&gt; m (Maybe [FieldParser n RemoteField])
</span><a href="#local-6989586621688112073"><span class="hs-identifier hs-var hs-var">makeNonQueryRootFieldParser</span></a></span></span><span> </span><span id="local-6989586621688112055"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112055"><span class="hs-identifier hs-var">userProvidedRootName</span></a></span></span><span> </span><span id="local-6989586621688112054"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112054"><span class="hs-identifier hs-var">defaultRootName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-97"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112055"><span class="hs-identifier hs-var">userProvidedRootName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688112053"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112053"><span class="hs-identifier hs-var">_rootName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m [FieldParser n RemoteField])
-&gt; Maybe Name -&gt; m (Maybe [FieldParser n RemoteField])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m [FieldParser n RemoteField]
</span><a href="#local-6989586621688112075"><span class="hs-identifier hs-var">makeParsers</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688112055"><span class="hs-identifier hs-var">userProvidedRootName</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-100"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688112052"><span class="annot"><span class="annottext">isDefaultRootObjectExists :: Bool
</span><a href="#local-6989586621688112052"><span class="hs-identifier hs-var hs-var">isDefaultRootObjectExists</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
 -&gt; Bool)
-&gt; Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupObject"><span class="hs-identifier hs-var">lookupObject</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688112081"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112054"><span class="hs-identifier hs-var">defaultRootName</span></a></span><span>
</span><span id="line-101"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">m (Maybe [FieldParser n RemoteField])
-&gt; m (Maybe [FieldParser n RemoteField])
-&gt; Bool
-&gt; m (Maybe [FieldParser n RemoteField])
forall a. a -&gt; a -&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">bool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
-&gt; m (Maybe [FieldParser n RemoteField])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n RemoteField]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; m [FieldParser n RemoteField])
-&gt; Maybe Name -&gt; m (Maybe [FieldParser n RemoteField])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m [FieldParser n RemoteField]
</span><a href="#local-6989586621688112075"><span class="hs-identifier hs-var">makeParsers</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Name -&gt; m (Maybe [FieldParser n RemoteField]))
-&gt; Maybe Name -&gt; m (Maybe [FieldParser n RemoteField])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112054"><span class="hs-identifier hs-var">defaultRootName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; m (Maybe [FieldParser n RemoteField]))
-&gt; Bool -&gt; m (Maybe [FieldParser n RemoteField])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621688112052"><span class="hs-identifier hs-var">isDefaultRootObjectExists</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- Remote schema input parsers</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-comment">{- Note [Variable expansion in remote schema input parsers]

### Input parsers as lightweight type checkers

The purpose of input parsers for remote schemas is not to translate the provided input values into
an internal representation: those values will be transmitted more or less unmodified to the remote
service; their main purpose is simply to check the shape of the input against the remote schema.

Consider, for instance, the following remote schema:

    input Foo {
      bar: Int!
    }

    type Query {
      run(foo: Foo!): Int!
    }

Our parsers will need to decide which invocations of `run` are valid:

    query {
      run(null)             # invalid: foo is non-nullable
      run(foo: {baz: 0})    # invalid: Foo doesn't have a &quot;baz&quot; field
      run(foo: {bar: &quot;0&quot;})  # actually valid!
    }

That last example is surprising: why would we accept a string literal for an Int? It simply is
because we delegate the task of translating the literal into a scalar to the remote server. After
all, *we* advertise some values as Int in the schema, despite accepting string literals.

### Inserting remote permissions presets

Where things get more complicated is with remote permissions. We allow users to specify &quot;presets&quot;:
values that will always be provided to the remote schema, and that the user cannot customize in
their query. For instance, given the following schema with permissions:

    input Range {
      low:  Int! @preset(value: 0)
      high: Int!
    }

    type Query {
      getValues(range: Range!): [Int]
    }

a user cannot specify &quot;low&quot; in OUR schema, as we will insert its value when parsing the incoming
query. This is the second purpose of those input parsers: they insert remote schema presets where
required. In this case:

    # we receive
    query {
      getValues(range: {high: 42})
    }

    # we emit
    query {
      getValues(range: {low: 0, high: 42})
    }

### Variable expansion

But where this gets even more complicated is with variables. As much as possible, we simply forward
variables without interpeting them (not all JSON values are representable in GraphQL). We do so
whenever possible; for instance, using the previously established remote schema:

    # we receive
    query:
      query($h: Int!) {
        getValues(range: {high: $h})
      }
    variables:
      { &quot;h&quot;: 42 }

    # we emit
    query:
      query($h: Int!) {
        getValues(range: {low: 0, high: $h})
      }
    variables:
      { &quot;h&quot;: 42 }

The tricky case is when a preset field is *within a variable*. We then have no choice: we have to
expand the variable, and rewrap the value as best as we can, to minimize the amount of JSON
evaluation. For instance:

    # we receive
    query:
      query($r: Range!) {
        getValues(range: $r)
      }
    variables:
      { &quot;r&quot;: {&quot;high&quot;: 42} }

    # we emit
    query:
      query($hasura_json_var_1: Int!) {
        getValues(range: {low: 0, high: $hasura_json_var_1})
      }
    variables:
      { &quot;hasura_json_var_1&quot;: 42 }

Our parsers, like all others in our model, expand the variables as they traverse the tree, and add
the preset values where required. But the downside of this is that we will create one such JSON
variable per scalar within a JSON variable!

### Short-circuiting optimization

To avoid this, we track in the parsers whether an alteration has occured: if we had to insert a
preset value. As long as we don't, we can discard the output of the parser, as it will contain the
exact same value as the input (if perhaps represented differently); by discarding the output and
just forwarding the input, we avoid expanding variables if no preset needs be inserted.
-}</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-comment">-- | Helper, used to track whether an input value was altered during its parsing.</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- There are two possible sources of alteration:</span><span>
</span><span id="line-221"></span><span class="hs-comment">--   - preset values, and</span><span>
</span><span id="line-222"></span><span class="hs-comment">--   - type name customizations.</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- They might force evaluation of variables, and encapsulation of sub-JSON expressions as new variables.</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- Each parser indicates whether such alteration took place within its part of the tree.</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- See Note [Variable expansion in remote schema input parsers] for more information.</span><span>
</span><span id="line-226"></span><span class="hs-keyword">newtype</span><span> </span><span id="Altered"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Altered"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span></span><span> </span><span class="hs-special">{</span><span id="getAltered"><span class="annot"><span class="annottext">Altered -&gt; Bool
</span><a href="Hasura.GraphQL.Schema.Remote.html#getAltered"><span class="hs-identifier hs-var hs-var">getAltered</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">}</span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688112041"><span id="local-6989586621688112043"><span id="local-6989586621688112045"><span class="annot"><span class="annottext">Int -&gt; Altered -&gt; ShowS
[Altered] -&gt; ShowS
Altered -&gt; String
(Int -&gt; Altered -&gt; ShowS)
-&gt; (Altered -&gt; String) -&gt; ([Altered] -&gt; ShowS) -&gt; Show Altered
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Altered] -&gt; ShowS
$cshowList :: [Altered] -&gt; ShowS
show :: Altered -&gt; String
$cshow :: Altered -&gt; String
showsPrec :: Int -&gt; Altered -&gt; ShowS
$cshowsPrec :: Int -&gt; Altered -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688112034"><span id="local-6989586621688112036"><span id="local-6989586621688112038"><span class="annot"><span class="annottext">b -&gt; Altered -&gt; Altered
NonEmpty Altered -&gt; Altered
Altered -&gt; Altered -&gt; Altered
(Altered -&gt; Altered -&gt; Altered)
-&gt; (NonEmpty Altered -&gt; Altered)
-&gt; (forall b. Integral b =&gt; b -&gt; Altered -&gt; Altered)
-&gt; Semigroup Altered
forall b. Integral b =&gt; b -&gt; Altered -&gt; Altered
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
stimes :: b -&gt; Altered -&gt; Altered
$cstimes :: forall b. Integral b =&gt; b -&gt; Altered -&gt; Altered
sconcat :: NonEmpty Altered -&gt; Altered
$csconcat :: NonEmpty Altered -&gt; Altered
&lt;&gt; :: Altered -&gt; Altered -&gt; Altered
$c&lt;&gt; :: Altered -&gt; Altered -&gt; Altered
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688112026"><span id="local-6989586621688112028"><span id="local-6989586621688112030"><span class="annot"><span class="annottext">Semigroup Altered
Altered
Semigroup Altered
-&gt; Altered
-&gt; (Altered -&gt; Altered -&gt; Altered)
-&gt; ([Altered] -&gt; Altered)
-&gt; Monoid Altered
[Altered] -&gt; Altered
Altered -&gt; Altered -&gt; Altered
forall a.
Semigroup a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
mconcat :: [Altered] -&gt; Altered
$cmconcat :: [Altered] -&gt; Altered
mappend :: Altered -&gt; Altered -&gt; Altered
$cmappend :: Altered -&gt; Altered -&gt; Altered
mempty :: Altered
$cmempty :: Altered
$cp1Monoid :: Semigroup Altered
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Any</span></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-comment">-- | 'inputValueDefinitionParser' accepts a 'G.InputValueDefinition' and will return an</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- 'InputFieldsParser' for it. If a non 'Input' GraphQL type is found in the 'type' of the</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- 'InputValueDefinition' then an error will be thrown.</span><span>
</span><span id="line-233"></span><span class="hs-comment">--</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- Each parser also returns a boolean that indicates whether the parsed value was altered by</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- presets. Presets might force the evaluation of variables that would otherwise be transmitted</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- unmodified.</span><span>
</span><span id="line-237"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#inputValueDefinitionParser"><span class="hs-identifier hs-type">inputValueDefinitionParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112311"><span class="annot"><a href="#local-6989586621688112311"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112310"><span class="annot"><a href="#local-6989586621688112310"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112309"><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112311"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112310"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-240"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.InputValueDefinition</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-242"></span><span>  </span><span class="annot"><a href="#local-6989586621688112310"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span id="inputValueDefinitionParser"><span class="annot"><span class="annottext">inputValueDefinitionParser :: RemoteSchemaIntrospection
-&gt; InputValueDefinition
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#inputValueDefinitionParser"><span class="hs-identifier hs-var hs-var">inputValueDefinitionParser</span></a></span></span><span> </span><span id="local-6989586621688112023"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688112023"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.InputValueDefinition</span></span><span> </span><span id="local-6989586621688112021"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688112021"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621688112020"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112020"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621688112019"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688112019"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span> </span><span id="local-6989586621688112018"><span class="annot"><span class="annottext">Maybe (Value Void)
</span><a href="#local-6989586621688112018"><span class="hs-identifier hs-var">maybeDefaultVal</span></a></span></span><span> </span><span id="local-6989586621688112017"><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621688112017"><span class="hs-identifier hs-var">_directives</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><span class="annottext">(forall (k :: Kind).
 ('Input &lt;: k) =&gt;
 Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; GType
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
</span><a href="#local-6989586621688112016"><span class="hs-identifier hs-var">buildField</span></a></span><span> </span><span class="annot"><span class="annottext">forall (k :: Kind).
('Input &lt;: k) =&gt;
Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112015"><span class="hs-identifier hs-var">fieldConstructor</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688112019"><span class="hs-identifier hs-var">fieldType</span></a></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><a href="#local-6989586621688112014"><span class="hs-identifier hs-type">doNullability</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-247"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112390"><span class="annot"><a href="#local-6989586621688112390"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621688112391"><span class="annot"><a href="#local-6989586621688112391"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-248"></span><span>      </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#%3C%3A"><span class="hs-operator hs-type">&lt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112391"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-249"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-250"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112391"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621688112390"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112391"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621688112390"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621688112014"><span class="annot"><span class="annottext">doNullability :: Nullability -&gt; Parser k n (Maybe a) -&gt; Parser k n (Maybe a)
</span><a href="#local-6989586621688112014"><span class="hs-identifier hs-var hs-var">doNullability</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe a) -&gt; Maybe a)
-&gt; Parser k n (Maybe (Maybe a)) -&gt; Parser k n (Maybe a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe a) -&gt; Maybe a
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Parser k n (Maybe (Maybe a)) -&gt; Parser k n (Maybe a))
-&gt; (Parser k n (Maybe a) -&gt; Parser k n (Maybe (Maybe a)))
-&gt; Parser k n (Maybe a)
-&gt; Parser k n (Maybe a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe a) -&gt; Parser k n (Maybe (Maybe a))
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><a href="#local-6989586621688112014"><span class="hs-identifier hs-var">doNullability</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe a) -&gt; Parser k n (Maybe a)
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><a href="#local-6989586621688112015"><span class="hs-identifier hs-type">fieldConstructor</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-256"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112009"><span class="annot"><a href="#local-6989586621688112009"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-257"></span><span>      </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#%3C%3A"><span class="hs-operator hs-type">&lt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112009"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-258"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112009"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-259"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621688112015"><span class="annot"><span class="annottext">fieldConstructor :: Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112015"><span class="hs-identifier hs-var hs-var">fieldConstructor</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
forall (k :: Kind) (n :: * -&gt; *).
('Input &lt;: k, MonadParse n) =&gt;
Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#shortCircuitIfUnaltered"><span class="hs-identifier hs-var">shortCircuitIfUnaltered</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621688112007"><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112007"><span class="hs-identifier hs-var">parser</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-261"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Value Void)
</span><a href="#local-6989586621688112018"><span class="hs-identifier hs-var">maybeDefaultVal</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-262"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Value Void)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-263"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GType -&gt; Bool
</span><span class="hs-identifier hs-var">G.isNullable</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688112019"><span class="hs-identifier hs-var">fieldType</span></a></span><span>
</span><span id="line-264"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Maybe (Altered, Value RemoteSchemaVariable)))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112020"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688112021"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112007"><span class="hs-identifier hs-var">parser</span></a></span><span>
</span><span id="line-265"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name -&gt; Maybe Description -&gt; Parser k m a -&gt; InputFieldsParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#field"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112020"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688112021"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112007"><span class="hs-identifier hs-var">parser</span></a></span><span>
</span><span id="line-266"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688112003"><span class="annot"><span class="annottext">Value Void
</span><a href="#local-6989586621688112003"><span class="hs-identifier hs-var">defaultVal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Value Void
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Value Void
-&gt; Parser k m a
-&gt; InputFieldsParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldWithDefault"><span class="hs-identifier hs-var">fieldWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688112020"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688112021"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">Value Void
</span><a href="#local-6989586621688112003"><span class="hs-identifier hs-var">defaultVal</span></a></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112007"><span class="hs-identifier hs-var">parser</span></a></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><a href="#local-6989586621688112016"><span class="hs-identifier hs-type">buildField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112427"><span class="annot"><a href="#local-6989586621688112427"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-270"></span><span>        </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#%3C%3A"><span class="hs-operator hs-type">&lt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112427"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-271"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112427"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-272"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-274"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.GType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-275"></span><span>      </span><span class="annot"><a href="#local-6989586621688112310"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112309"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>    </span><span id="local-6989586621688112016"><span class="annot"><span class="annottext">buildField :: (forall (k :: Kind).
 ('Input &lt;: k) =&gt;
 Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; GType
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
</span><a href="#local-6989586621688112016"><span class="hs-identifier hs-var hs-var">buildField</span></a></span></span><span> </span><span id="local-6989586621688112001"><span class="annot"><span class="annottext">forall (k :: Kind).
('Input &lt;: k) =&gt;
Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112001"><span class="hs-identifier hs-var">mkInputFieldsParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-277"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span id="local-6989586621688111999"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111999"><span class="hs-identifier hs-var">nullability</span></a></span></span><span> </span><span id="local-6989586621688111998"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111998"><span class="hs-identifier hs-var">typeName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-278"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688112023"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111998"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-279"></span><span>          </span><span class="annot"><span class="annottext">Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; m (InputFieldsParser
         n (Maybe (Altered, Value RemoteSchemaVariable))))
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not find type with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Name -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111998"><span class="hs-identifier hs-var">typeName</span></a></span><span>
</span><span id="line-280"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688111995"><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111995"><span class="hs-identifier hs-var">typeDef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>            </span><span id="local-6989586621688111994"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111994"><span class="hs-identifier hs-var">customizeTypename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; MkTypename) -&gt; m MkTypename
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; MkTypename
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-282"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111995"><span class="hs-identifier hs-var">typeDef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-283"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionScalar</span></span><span> </span><span id="local-6989586621688111990"><span class="annot"><span class="annottext">ScalarTypeDefinition
</span><a href="#local-6989586621688111990"><span class="hs-identifier hs-var">scalarTypeDefn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-284"></span><span>                </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; m (InputFieldsParser
         n (Maybe (Altered, Value RemoteSchemaVariable))))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (k :: Kind).
('Input &lt;: k) =&gt;
Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112001"><span class="hs-identifier hs-var">mkInputFieldsParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nullability
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
forall a (k :: Kind).
('Input &lt;: k) =&gt;
Nullability -&gt; Parser k n (Maybe a) -&gt; Parser k n (Maybe a)
</span><a href="#local-6989586621688112014"><span class="hs-identifier hs-var">doNullability</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111999"><span class="hs-identifier hs-var">nullability</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MkTypename
-&gt; ScalarTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
forall (n :: * -&gt; *).
MonadParse n =&gt;
MkTypename
-&gt; ScalarTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldScalarParser"><span class="hs-identifier hs-var">remoteFieldScalarParser</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111994"><span class="hs-identifier hs-var">customizeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeDefinition
</span><a href="#local-6989586621688111990"><span class="hs-identifier hs-var">scalarTypeDefn</span></a></span><span>
</span><span id="line-285"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionEnum</span></span><span> </span><span id="local-6989586621688111987"><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688111987"><span class="hs-identifier hs-var">defn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-286"></span><span>                </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; m (InputFieldsParser
         n (Maybe (Altered, Value RemoteSchemaVariable))))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (k :: Kind).
('Input &lt;: k) =&gt;
Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112001"><span class="hs-identifier hs-var">mkInputFieldsParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nullability
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
forall a (k :: Kind).
('Input &lt;: k) =&gt;
Nullability -&gt; Parser k n (Maybe a) -&gt; Parser k n (Maybe a)
</span><a href="#local-6989586621688112014"><span class="hs-identifier hs-var">doNullability</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111999"><span class="hs-identifier hs-var">nullability</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
-&gt; Parser 'Both n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MkTypename
-&gt; EnumTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
forall (n :: * -&gt; *).
MonadParse n =&gt;
MkTypename
-&gt; EnumTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldEnumParser"><span class="hs-identifier hs-var">remoteFieldEnumParser</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111994"><span class="hs-identifier hs-var">customizeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688111987"><span class="hs-identifier hs-var">defn</span></a></span><span>
</span><span id="line-287"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionObject</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-288"></span><span>                </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected input type, but got output type&quot;</span></span><span>
</span><span id="line-289"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionInputObject</span></span><span> </span><span id="local-6989586621688111984"><span class="annot"><span class="annottext">InputObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111984"><span class="hs-identifier hs-var">defn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span>                </span><span id="local-6989586621688111983"><span class="annot"><span class="annottext">Either
  (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
  (Parser 'Input n (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111983"><span class="hs-identifier hs-var">potentialObject</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; InputObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Either
        (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
        (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; InputObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Either
        (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
        (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteInputObjectParser"><span class="hs-identifier hs-var">remoteInputObjectParser</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688112023"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111984"><span class="hs-identifier hs-var">defn</span></a></span><span>
</span><span id="line-291"></span><span>                </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; m (InputFieldsParser
         n (Maybe (Altered, Value RemoteSchemaVariable))))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either
  (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
  (Parser 'Input n (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111983"><span class="hs-identifier hs-var">potentialObject</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-292"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621688111981"><span class="annot"><span class="annottext">InputFieldsParser n (Altered, Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111981"><span class="hs-identifier hs-var">dummyInputFieldsParser</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-293"></span><span>                    </span><span class="hs-comment">-- We couln't create a parser, meaning we can't create a field for this</span><span>
</span><span id="line-294"></span><span>                    </span><span class="hs-comment">-- object. Instead we must return a &quot;pure&quot; InputFieldsParser that always yields</span><span>
</span><span id="line-295"></span><span>                    </span><span class="hs-comment">-- the needed result without containing a field definition.</span><span>
</span><span id="line-296"></span><span>                    </span><span class="hs-comment">--</span><span>
</span><span id="line-297"></span><span>                    </span><span class="hs-comment">-- !!! WARNING #1 !!!</span><span>
</span><span id="line-298"></span><span>                    </span><span class="hs-comment">-- Since we have no input field in the schema for this field, we can't make the</span><span>
</span><span id="line-299"></span><span>                    </span><span class="hs-comment">-- distinction between it being actually present at parsing time or not. We</span><span>
</span><span id="line-300"></span><span>                    </span><span class="hs-comment">-- therefore choose to behave as if it was always present, and we always</span><span>
</span><span id="line-301"></span><span>                    </span><span class="hs-comment">-- include the preset values in the result.</span><span>
</span><span id="line-302"></span><span>                    </span><span class="hs-comment">--</span><span>
</span><span id="line-303"></span><span>                    </span><span class="hs-comment">-- !!! WARNING #2 !!!</span><span>
</span><span id="line-304"></span><span>                    </span><span class="hs-comment">-- We are re-using an 'InputFieldsParser' that was created earlier! Won't that</span><span>
</span><span id="line-305"></span><span>                    </span><span class="hs-comment">-- create new fields in the current context? No, it won't, but only because in</span><span>
</span><span id="line-306"></span><span>                    </span><span class="hs-comment">-- this case we know that it was created from the preset fields in</span><span>
</span><span id="line-307"></span><span>                    </span><span class="hs-comment">-- 'argumentsParser', and therefore contains no field definition.</span><span>
</span><span id="line-308"></span><span>                    </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser n (Altered, Value RemoteSchemaVariable)
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Altered, Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111981"><span class="hs-identifier hs-var">dummyInputFieldsParser</span></a></span><span>
</span><span id="line-309"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621688111980"><span class="annot"><span class="annottext">Parser 'Input n (Altered, Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111980"><span class="hs-identifier hs-var">actualParser</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-310"></span><span>                    </span><span class="hs-comment">-- We're in the normal case: we do have a parser for the input object, which is</span><span>
</span><span id="line-311"></span><span>                    </span><span class="hs-comment">-- therefore valid (non-empty).</span><span>
</span><span id="line-312"></span><span>                    </span><span class="annot"><span class="annottext">Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (k :: Kind).
('Input &lt;: k) =&gt;
Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112001"><span class="hs-identifier hs-var">mkInputFieldsParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nullability
-&gt; Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
forall a (k :: Kind).
('Input &lt;: k) =&gt;
Nullability -&gt; Parser k n (Maybe a) -&gt; Parser k n (Maybe a)
</span><a href="#local-6989586621688112014"><span class="hs-identifier hs-var">doNullability</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111999"><span class="hs-identifier hs-var">nullability</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Input n (Altered, Value RemoteSchemaVariable)
-&gt; Parser 'Input n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n (Altered, Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111980"><span class="hs-identifier hs-var">actualParser</span></a></span><span>
</span><span id="line-313"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionUnion</span></span><span> </span><span class="annot"><span class="annottext">UnionTypeDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-314"></span><span>                </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected input type, but got output type&quot;</span></span><span>
</span><span id="line-315"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionInterface</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-316"></span><span>                </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected input type, but got output type&quot;</span></span><span>
</span><span id="line-317"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span id="local-6989586621688111976"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111976"><span class="hs-identifier hs-var">nullability</span></a></span></span><span> </span><span id="local-6989586621688111975"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111975"><span class="hs-identifier hs-var">subType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">(forall (k :: Kind).
 ('Input &lt;: k) =&gt;
 Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; GType
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
</span><a href="#local-6989586621688112016"><span class="hs-identifier hs-var">buildField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (k :: Kind).
('Input &lt;: k) =&gt;
Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688112001"><span class="hs-identifier hs-var">mkInputFieldsParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; (Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
    -&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nullability
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
forall a (k :: Kind).
('Input &lt;: k) =&gt;
Nullability -&gt; Parser k n (Maybe a) -&gt; Parser k n (Maybe a)
</span><a href="#local-6989586621688112014"><span class="hs-identifier hs-var">doNullability</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111976"><span class="hs-identifier hs-var">nullability</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; (Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
    -&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">([Maybe (Altered, Value RemoteSchemaVariable)]
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n [Maybe (Altered, Value RemoteSchemaVariable)]
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; ([Maybe (Altered, Value RemoteSchemaVariable)]
    -&gt; (Altered, Value RemoteSchemaVariable))
-&gt; [Maybe (Altered, Value RemoteSchemaVariable)]
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">([Value RemoteSchemaVariable] -&gt; Value RemoteSchemaVariable)
-&gt; (Altered, [Value RemoteSchemaVariable])
-&gt; (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[Value RemoteSchemaVariable] -&gt; Value RemoteSchemaVariable
forall var. [Value var] -&gt; Value var
</span><span class="hs-identifier hs-var">G.VList</span></span><span> </span><span class="annot"><span class="annottext">((Altered, [Value RemoteSchemaVariable])
 -&gt; (Altered, Value RemoteSchemaVariable))
-&gt; ([Maybe (Altered, Value RemoteSchemaVariable)]
    -&gt; (Altered, [Value RemoteSchemaVariable]))
-&gt; [Maybe (Altered, Value RemoteSchemaVariable)]
-&gt; (Altered, Value RemoteSchemaVariable)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Altered, Value RemoteSchemaVariable)]
-&gt; (Altered, [Value RemoteSchemaVariable])
forall a. [Maybe (Altered, a)] -&gt; (Altered, [a])
</span><a href="Hasura.GraphQL.Schema.Remote.html#aggregateListAndAlteration"><span class="hs-identifier hs-var">aggregateListAndAlteration</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Parser k n [Maybe (Altered, Value RemoteSchemaVariable)]
 -&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; (Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
    -&gt; Parser k n [Maybe (Altered, Value RemoteSchemaVariable)])
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n [Maybe (Altered, Value RemoteSchemaVariable)]
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m [a]
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#list"><span class="hs-identifier hs-var">P.list</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111975"><span class="hs-identifier hs-var">subType</span></a></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="hs-comment">-- | remoteFieldScalarParser attempts to parse a scalar value for a given remote field</span><span>
</span><span id="line-321"></span><span class="hs-comment">--</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- We do not attempt to verify that the literal is correct! Some GraphQL implementations, including</span><span>
</span><span id="line-323"></span><span class="hs-comment">-- ours, are a bit flexible with the intepretations of literals; for instance, there are several</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- places in our schema where we declare something to be an `Int`, but actually accept `String`</span><span>
</span><span id="line-325"></span><span class="hs-comment">-- literals. We do however peform variable type-checking.</span><span>
</span><span id="line-326"></span><span class="hs-comment">--</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- If we encounter a JSON value, it means that we were introspecting a query variable. To call the</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- remote schema, we need a graphql value; we therefore need to treat that JSON expression as if it</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- were a query variable of its own. To avoid ending up with one such variable per scalar in the</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- query, we also track alterations, to apply optimizations.</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- See Note [Variable expansion in remote schema input parsers] for more information.</span><span>
</span><span id="line-332"></span><span class="hs-comment">--</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- If the value contains a variable with a customized type name then we need to consider it to be</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- altered to ensure that the original type name is passed to the remote server.</span><span>
</span><span id="line-335"></span><span id="local-6989586621688112389"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldScalarParser"><span class="hs-identifier hs-type">remoteFieldScalarParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-336"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112389"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-338"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.ScalarTypeDefinition</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-339"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">P.Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Both"><span class="hs-identifier hs-type">Both</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112389"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-340"></span><span id="remoteFieldScalarParser"><span class="annot"><span class="annottext">remoteFieldScalarParser :: MkTypename
-&gt; ScalarTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldScalarParser"><span class="hs-identifier hs-var hs-var">remoteFieldScalarParser</span></a></span></span><span> </span><span id="local-6989586621688111971"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111971"><span class="hs-identifier hs-var">customizeTypename</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.ScalarTypeDefinition</span></span><span> </span><span id="local-6989586621688111969"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111969"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688111968"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111968"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621688111967"><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621688111967"><span class="hs-identifier hs-var">_directives</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-341"></span><span>  </span><span class="annot"><span class="annottext">Parser :: forall (k :: Kind) (m :: * -&gt; *) a.
Type k -&gt; (ParserInput k -&gt; m a) -&gt; Parser k m a
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">P.Parser</span></a></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pType :: Type 'Both
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#pType"><span class="hs-identifier hs-var">pType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type 'Both
</span><a href="#local-6989586621688111964"><span class="hs-identifier hs-var">schemaType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-343"></span><span>      </span><span class="annot"><span class="annottext">pParser :: ParserInput 'Both -&gt; n (Altered, Value RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#pParser"><span class="hs-identifier hs-var">pParser</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-344"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#JSONValue"><span class="hs-identifier hs-type">JSONValue</span></a></span><span> </span><span id="local-6989586621688111961"><span class="annot"><a href="#local-6989586621688111961"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-345"></span><span>          </span><span class="hs-comment">-- Disallow short-circuit optimisation if the type name has been changed by remote schema customization</span><span>
</span><span id="line-346"></span><span>          </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; n (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; n (Altered, Value RemoteSchemaVariable))
-&gt; (Altered, Value RemoteSchemaVariable)
-&gt; n (Altered, Value RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Altered
</span><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Altered) -&gt; Bool -&gt; Altered
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><span class="hs-identifier hs-var">G.getBaseType</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111959"><span class="hs-identifier hs-var">gType</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111968"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaVariable -&gt; Value RemoteSchemaVariable
forall var. var -&gt; Value var
</span><span class="hs-identifier hs-var">G.VVariable</span></span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaVariable -&gt; Value RemoteSchemaVariable)
-&gt; RemoteSchemaVariable -&gt; Value RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Value -&gt; RemoteSchemaVariable
</span><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteJSONValue"><span class="hs-identifier hs-var">RemoteJSONValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType -&gt; GType
</span><a href="#local-6989586621688111955"><span class="hs-identifier hs-var">mkRemoteGType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111959"><span class="hs-identifier hs-var">gType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688111961"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#GraphQLValue"><span class="hs-identifier hs-type">GraphQLValue</span></a></span><span> </span><span id="local-6989586621688111953"><span class="annot"><a href="#local-6989586621688111953"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value Variable
</span><a href="#local-6989586621688111953"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-348"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">G.VVariable</span></span><span> </span><span id="local-6989586621688111952"><span class="annot"><span class="annottext">Variable
</span><a href="#local-6989586621688111952"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-349"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; GType -&gt; Variable -&gt; n ()
forall (m :: * -&gt; *).
MonadParse m =&gt;
Bool -&gt; GType -&gt; Variable -&gt; m ()
</span><a href="Hasura.GraphQL.Parser.Internal.TypeChecking.html#typeCheck"><span class="hs-identifier hs-var">P.typeCheck</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111959"><span class="hs-identifier hs-var">gType</span></a></span><span> </span><span class="annot"><span class="annottext">Variable
</span><a href="#local-6989586621688111952"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-350"></span><span>            </span><span class="hs-comment">-- Disallow short-circuit optimisation if the type name has been changed by remote schema customization</span><span>
</span><span id="line-351"></span><span>            </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; n (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; n (Altered, Value RemoteSchemaVariable))
-&gt; (Altered, Value RemoteSchemaVariable)
-&gt; n (Altered, Value RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Altered
</span><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Altered) -&gt; Bool -&gt; Altered
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><span class="hs-identifier hs-var">G.getBaseType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Variable -&gt; GType
</span><a href="Hasura.GraphQL.Parser.Schema.html#vType"><span class="hs-identifier hs-var hs-var">vType</span></a></span><span> </span><span class="annot"><span class="annottext">Variable
</span><a href="#local-6989586621688111952"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111968"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaVariable -&gt; Value RemoteSchemaVariable
forall var. var -&gt; Value var
</span><span class="hs-identifier hs-var">G.VVariable</span></span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaVariable -&gt; Value RemoteSchemaVariable)
-&gt; RemoteSchemaVariable -&gt; Value RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Variable -&gt; RemoteSchemaVariable
</span><a href="Hasura.RQL.Types.RemoteSchema.html#QueryVariable"><span class="hs-identifier hs-var">QueryVariable</span></a></span><span> </span><span class="annot"><span class="annottext">Variable
</span><a href="#local-6989586621688111952"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">vType :: GType
</span><a href="Hasura.GraphQL.Parser.Schema.html#vType"><span class="hs-identifier hs-var">vType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; GType
</span><a href="#local-6989586621688111955"><span class="hs-identifier hs-var">mkRemoteGType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Variable -&gt; GType
</span><a href="Hasura.GraphQL.Parser.Schema.html#vType"><span class="hs-identifier hs-var hs-var">vType</span></a></span><span> </span><span class="annot"><span class="annottext">Variable
</span><a href="#local-6989586621688111952"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>          </span><span class="annot"><span class="annottext">Value Variable
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; n (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Altered
</span><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Variable -&gt; RemoteSchemaVariable
</span><a href="Hasura.RQL.Types.RemoteSchema.html#QueryVariable"><span class="hs-identifier hs-var">QueryVariable</span></a></span><span> </span><span class="annot"><span class="annottext">(Variable -&gt; RemoteSchemaVariable)
-&gt; Value Variable -&gt; Value RemoteSchemaVariable
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Variable
</span><a href="#local-6989586621688111953"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621688111948"><span class="annot"><span class="annottext">customizedTypename :: Name
</span><a href="#local-6989586621688111948"><span class="hs-identifier hs-var hs-var">customizedTypename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MkTypename -&gt; Name -&gt; Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#runMkTypename"><span class="hs-identifier hs-var hs-var">runMkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111971"><span class="hs-identifier hs-var">customizeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111968"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621688111964"><span class="annot"><span class="annottext">schemaType :: Type 'Both
</span><a href="#local-6989586621688111964"><span class="hs-identifier hs-var hs-var">schemaType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nullability -&gt; Definition (TypeInfo 'Both) -&gt; Type 'Both
forall (k :: Kind).
Nullability -&gt; Definition (TypeInfo k) -&gt; Type k
</span><a href="Hasura.GraphQL.Parser.Schema.html#TNamed"><span class="hs-identifier hs-var">TNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="Hasura.GraphQL.Parser.Schema.html#NonNullable"><span class="hs-identifier hs-var">NonNullable</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition (TypeInfo 'Both) -&gt; Type 'Both)
-&gt; Definition (TypeInfo 'Both) -&gt; Type 'Both
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; TypeInfo 'Both
-&gt; Definition (TypeInfo 'Both)
forall a. Name -&gt; Maybe Description -&gt; a -&gt; Definition a
</span><a href="Hasura.GraphQL.Parser.Schema.html#Definition"><span class="hs-identifier hs-var">Definition</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111948"><span class="hs-identifier hs-var">customizedTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111969"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">TypeInfo 'Both
</span><a href="Hasura.GraphQL.Parser.Schema.html#TIScalar"><span class="hs-identifier hs-var">TIScalar</span></a></span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621688111959"><span class="annot"><span class="annottext">gType :: GType
</span><a href="#local-6989586621688111959"><span class="hs-identifier hs-var hs-var">gType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type 'Both -&gt; GType
forall (k :: Kind). Type k -&gt; GType
</span><a href="Hasura.GraphQL.Parser.Schema.html#toGraphQLType"><span class="hs-identifier hs-var">toGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">Type 'Both
</span><a href="#local-6989586621688111964"><span class="hs-identifier hs-var">schemaType</span></a></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621688111955"><span class="annot"><span class="annottext">mkRemoteGType :: GType -&gt; GType
</span><a href="#local-6989586621688111955"><span class="hs-identifier hs-var hs-var">mkRemoteGType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-360"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span id="local-6989586621688111941"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111941"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nullability -&gt; Name -&gt; GType
</span><span class="hs-identifier hs-var">G.TypeNamed</span></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111941"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111968"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-361"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span id="local-6989586621688111940"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111940"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621688111939"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111939"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nullability -&gt; GType -&gt; GType
</span><span class="hs-identifier hs-var">G.TypeList</span></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111940"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(GType -&gt; GType) -&gt; GType -&gt; GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; GType
</span><a href="#local-6989586621688111955"><span class="hs-identifier hs-var">mkRemoteGType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111939"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span id="local-6989586621688112387"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldEnumParser"><span class="hs-identifier hs-type">remoteFieldEnumParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-364"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112387"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-365"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-366"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.EnumTypeDefinition</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Both"><span class="hs-identifier hs-type">Both</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112387"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-368"></span><span id="remoteFieldEnumParser"><span class="annot"><span class="annottext">remoteFieldEnumParser :: MkTypename
-&gt; EnumTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldEnumParser"><span class="hs-identifier hs-var hs-var">remoteFieldEnumParser</span></a></span></span><span> </span><span id="local-6989586621688111938"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111938"><span class="hs-identifier hs-var">customizeTypename</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.EnumTypeDefinition</span></span><span> </span><span id="local-6989586621688111936"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111936"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621688111935"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111935"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621688111934"><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621688111934"><span class="hs-identifier hs-var">_directives</span></a></span></span><span> </span><span id="local-6989586621688111933"><span class="annot"><span class="annottext">[EnumValueDefinition]
</span><a href="#local-6989586621688111933"><span class="hs-identifier hs-var">valueDefns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111932"><span class="annot"><span class="annottext">enumValDefns :: [(Definition EnumValueInfo, Value RemoteSchemaVariable)]
</span><a href="#local-6989586621688111932"><span class="hs-identifier hs-var hs-var">enumValDefns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-370"></span><span>        </span><span class="annot"><span class="annottext">[EnumValueDefinition]
</span><a href="#local-6989586621688111933"><span class="hs-identifier hs-var">valueDefns</span></a></span><span> </span><span class="annot"><span class="annottext">[EnumValueDefinition]
-&gt; (EnumValueDefinition
    -&gt; (Definition EnumValueInfo, Value RemoteSchemaVariable))
-&gt; [(Definition EnumValueInfo, Value RemoteSchemaVariable)]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.EnumValueDefinition</span></span><span> </span><span id="local-6989586621688111929"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111929"><span class="hs-identifier hs-var">enumDesc</span></a></span></span><span> </span><span id="local-6989586621688111928"><span class="annot"><span class="annottext">EnumValue
</span><a href="#local-6989586621688111928"><span class="hs-identifier hs-var">enumName</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Directive Void]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-371"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; EnumValueInfo -&gt; Definition EnumValueInfo
forall a. Name -&gt; Maybe Description -&gt; a -&gt; Definition a
</span><a href="Hasura.GraphQL.Parser.Schema.html#Definition"><span class="hs-identifier hs-var">Definition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnumValue -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G.unEnumValue</span></span><span> </span><span class="annot"><span class="annottext">EnumValue
</span><a href="#local-6989586621688111928"><span class="hs-identifier hs-var">enumName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111929"><span class="hs-identifier hs-var">enumDesc</span></a></span><span> </span><span class="annot"><span class="annottext">EnumValueInfo
</span><a href="Hasura.GraphQL.Parser.Schema.html#EnumValueInfo"><span class="hs-identifier hs-var">P.EnumValueInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-372"></span><span>            </span><span class="annot"><span class="annottext">EnumValue -&gt; Value RemoteSchemaVariable
forall var. EnumValue -&gt; Value var
</span><span class="hs-identifier hs-var">G.VEnum</span></span><span> </span><span class="annot"><span class="annottext">EnumValue
</span><a href="#local-6989586621688111928"><span class="hs-identifier hs-var">enumName</span></a></span><span>
</span><span id="line-373"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Value RemoteSchemaVariable
 -&gt; (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Value RemoteSchemaVariable)
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Altered
</span><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Value RemoteSchemaVariable)
 -&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable))
-&gt; Parser 'Both n (Value RemoteSchemaVariable)
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; NonEmpty (Definition EnumValueInfo, Value RemoteSchemaVariable)
-&gt; Parser 'Both n (Value RemoteSchemaVariable)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; NonEmpty (Definition EnumValueInfo, a)
-&gt; Parser 'Both m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#enum"><span class="hs-identifier hs-var">P.enum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MkTypename -&gt; Name -&gt; Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#runMkTypename"><span class="hs-identifier hs-var hs-var">runMkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111938"><span class="hs-identifier hs-var">customizeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111935"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111936"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Definition EnumValueInfo, Value RemoteSchemaVariable)
 -&gt; Parser 'Both n (Value RemoteSchemaVariable))
-&gt; NonEmpty (Definition EnumValueInfo, Value RemoteSchemaVariable)
-&gt; Parser 'Both n (Value RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Definition EnumValueInfo, Value RemoteSchemaVariable)]
-&gt; NonEmpty (Definition EnumValueInfo, Value RemoteSchemaVariable)
forall a. [a] -&gt; NonEmpty a
</span><span class="hs-identifier hs-var">NE.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(Definition EnumValueInfo, Value RemoteSchemaVariable)]
</span><a href="#local-6989586621688111932"><span class="hs-identifier hs-var">enumValDefns</span></a></span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-comment">-- | remoteInputObjectParser returns an input parser for a given 'G.InputObjectTypeDefinition'</span><span>
</span><span id="line-377"></span><span class="hs-comment">--</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- Now, this is tricky! We are faced with two contradicting constraints here. On one hand, the</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- GraphQL spec forbids us from creating empty input objects. This means that if all the arguments</span><span>
</span><span id="line-380"></span><span class="hs-comment">-- have presets, we CANNOT use the parser this function creates, and the caller cannot create a</span><span>
</span><span id="line-381"></span><span class="hs-comment">-- field for this object (and instead should use @pure@ to include the preset values in the result</span><span>
</span><span id="line-382"></span><span class="hs-comment">-- of parsing the fields).</span><span>
</span><span id="line-383"></span><span class="hs-comment">--</span><span>
</span><span id="line-384"></span><span class="hs-comment">-- One way we could fix this would be to change the type of this function to return a `Maybe</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- Parser`, inspect the result of 'argumentsParser', and return @Nothing@ when we realize that there</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- aren't any actual field in it (or at least return a value that propagates the preset values). But</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- this would contradict our second constraint: this function needs to be memoized!</span><span>
</span><span id="line-388"></span><span class="hs-comment">--</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- At time of writing, we can't memoize functions that return arbitrary functors of Parsers; so no</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- memoizing Maybe Parser or Either Presets Parser. Which means that we would need to first call</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- `argumentsParser`, then memoize the &quot;Just&quot; branch that builds the actual Parser. The problem is</span><span>
</span><span id="line-392"></span><span class="hs-comment">-- that the recursive call ro remoteSchemaInputObject is within 'argumentsParser', meaning the call</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- to it MUST be in the memoized branch!</span><span>
</span><span id="line-394"></span><span class="hs-comment">--</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- This is why, in the end, we do the following: we first test whether there is any non-preset</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- field: if yes, we memoize that branch and proceed as normal. Otherwise we can omit the</span><span>
</span><span id="line-397"></span><span class="hs-comment">-- memoization: we know for sure that the preset fields won't generate a recursive call!</span><span>
</span><span id="line-398"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteInputObjectParser"><span class="hs-identifier hs-type">remoteInputObjectParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112385"><span class="annot"><a href="#local-6989586621688112385"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112384"><span class="annot"><a href="#local-6989586621688112384"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112383"><span class="annot"><a href="#local-6989586621688112383"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-400"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112385"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112384"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112383"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-401"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-402"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.InputObjectTypeDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-403"></span><span>  </span><span class="annot"><a href="#local-6989586621688112384"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-404"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span>
</span><span id="line-405"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112383"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112383"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span id="remoteInputObjectParser"><span class="annot"><span class="annottext">remoteInputObjectParser :: RemoteSchemaIntrospection
-&gt; InputObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Either
        (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
        (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteInputObjectParser"><span class="hs-identifier hs-var hs-var">remoteInputObjectParser</span></a></span></span><span> </span><span id="local-6989586621688111922"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111922"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span id="local-6989586621688111921"><span class="annot"><span class="annottext">defn :: InputObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111921"><span class="hs-identifier hs-var">defn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.InputObjectTypeDefinition</span></span><span> </span><span id="local-6989586621688111919"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111919"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621688111918"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111918"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Directive Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688111917"><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111917"><span class="hs-identifier hs-var">valueDefns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaInputValueDefinition -&gt; Bool)
-&gt; [RemoteSchemaInputValueDefinition] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Value RemoteSchemaVariable) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Value RemoteSchemaVariable) -&gt; Bool)
-&gt; (RemoteSchemaInputValueDefinition
    -&gt; Maybe (Value RemoteSchemaVariable))
-&gt; RemoteSchemaInputValueDefinition
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition
-&gt; Maybe (Value RemoteSchemaVariable)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdPresetArgument"><span class="hs-identifier hs-var hs-var">_rsitdPresetArgument</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111917"><span class="hs-identifier hs-var">valueDefns</span></a></span><span>
</span><span id="line-410"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-comment">-- All the fields are preset: we can't create a parser, that would result in an invalid type in</span><span>
</span><span id="line-411"></span><span>    </span><span class="hs-comment">-- the schema (an input object with no field). We therefore forward the InputFieldsParser</span><span>
</span><span id="line-412"></span><span>    </span><span class="hs-comment">-- unmodified. No need to memoize this branch: since all arguments are preset, 'argumentsParser'</span><span>
</span><span id="line-413"></span><span>    </span><span class="hs-comment">-- won't be recursively calling this function.</span><span>
</span><span id="line-414"></span><span>      </span><span class="annot"><span class="annottext">InputFieldsParser n (Altered, Value RemoteSchemaVariable)
-&gt; Either
     (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
     (Parser 'Input n (Altered, Value RemoteSchemaVariable))
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Altered, Value RemoteSchemaVariable)
 -&gt; Either
      (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
      (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
-&gt; (InputFieldsParser
      n (Altered, HashMap Name (Value RemoteSchemaVariable))
    -&gt; InputFieldsParser n (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Either
     (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
     (Parser 'Input n (Altered, Value RemoteSchemaVariable))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Altered, HashMap Name (Value RemoteSchemaVariable))
 -&gt; (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; InputFieldsParser n (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HashMap Name (Value RemoteSchemaVariable)
 -&gt; Value RemoteSchemaVariable)
-&gt; (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
-&gt; Value RemoteSchemaVariable
forall var. HashMap Name (Value var) -&gt; Value var
</span><span class="hs-identifier hs-var">G.VObject</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Altered, HashMap Name (Value RemoteSchemaVariable))
 -&gt; Either
      (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
      (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
-&gt; m (Either
        (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
        (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
-&gt; RemoteSchemaIntrospection
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
[RemoteSchemaInputValueDefinition]
-&gt; RemoteSchemaIntrospection
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#argumentsParser"><span class="hs-identifier hs-var">argumentsParser</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111917"><span class="hs-identifier hs-var">valueDefns</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111922"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-comment">-- At least one field is not a preset, meaning we have the guarantee that there will be at least</span><span>
</span><span id="line-416"></span><span>    </span><span class="hs-comment">-- one field in the input object. We have to memoize this branch as we might recursively call</span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-comment">-- the same parser.</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Input n (Altered, Value RemoteSchemaVariable)
-&gt; Either
     (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
     (Parser 'Input n (Altered, Value RemoteSchemaVariable))
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Input n (Altered, Value RemoteSchemaVariable)
 -&gt; Either
      (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
      (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
-&gt; m (Parser 'Input n (Altered, Value RemoteSchemaVariable))
-&gt; m (Either
        (InputFieldsParser n (Altered, Value RemoteSchemaVariable))
        (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; InputObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Parser 'Input n (Altered, Value RemoteSchemaVariable))
-&gt; m (Parser 'Input n (Altered, Value RemoteSchemaVariable))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">P.memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">remoteInputObjectParser</span><span> </span><span class="annot"><span class="annottext">InputObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111921"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-420"></span><span>        </span><span id="local-6989586621688111911"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111911"><span class="hs-identifier hs-var">typename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111918"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span>        </span><span class="hs-comment">-- Disallow short-circuit optimisation if the type name has been changed by remote schema customization</span><span>
</span><span id="line-423"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111909"><span class="annot"><span class="annottext">altered :: Altered
</span><a href="#local-6989586621688111909"><span class="hs-identifier hs-var hs-var">altered</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Altered
</span><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Altered) -&gt; Bool -&gt; Altered
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111911"><span class="hs-identifier hs-var">typename</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111918"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-424"></span><span>        </span><span id="local-6989586621688111908"><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111908"><span class="hs-identifier hs-var">argsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Altered, HashMap Name (Value RemoteSchemaVariable))
 -&gt; (Altered, HashMap Name (Value RemoteSchemaVariable)))
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Altered -&gt; Altered)
-&gt; (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; (Altered, HashMap Name (Value RemoteSchemaVariable))
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (b, d) (c, d)
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Altered -&gt; Altered -&gt; Altered
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Altered
</span><a href="#local-6989586621688111909"><span class="hs-identifier hs-var">altered</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Altered, HashMap Name (Value RemoteSchemaVariable))
 -&gt; InputFieldsParser
      n (Altered, HashMap Name (Value RemoteSchemaVariable)))
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
-&gt; RemoteSchemaIntrospection
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
[RemoteSchemaInputValueDefinition]
-&gt; RemoteSchemaIntrospection
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#argumentsParser"><span class="hs-identifier hs-var">argumentsParser</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111917"><span class="hs-identifier hs-var">valueDefns</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111922"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span>
</span><span id="line-425"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Input n (Altered, Value RemoteSchemaVariable)
-&gt; m (Parser 'Input n (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Input n (Altered, Value RemoteSchemaVariable)
 -&gt; m (Parser 'Input n (Altered, Value RemoteSchemaVariable)))
-&gt; Parser 'Input n (Altered, Value RemoteSchemaVariable)
-&gt; m (Parser 'Input n (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Name (Value RemoteSchemaVariable)
 -&gt; Value RemoteSchemaVariable)
-&gt; (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
-&gt; Value RemoteSchemaVariable
forall var. HashMap Name (Value var) -&gt; Value var
</span><span class="hs-identifier hs-var">G.VObject</span></span><span> </span><span class="annot"><span class="annottext">((Altered, HashMap Name (Value RemoteSchemaVariable))
 -&gt; (Altered, Value RemoteSchemaVariable))
-&gt; Parser
     'Input n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Input n (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser
     'Input n (Altered, HashMap Name (Value RemoteSchemaVariable))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description -&gt; InputFieldsParser m a -&gt; Parser 'Input m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#object"><span class="hs-identifier hs-var">P.object</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111911"><span class="hs-identifier hs-var">typename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111919"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111908"><span class="hs-identifier hs-var">argsParser</span></a></span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="hs-comment">-- | Variable expansion optimization.</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- Since each parser returns a value that indicates whether it was altered, we can detect when no</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- alteration took place, and replace the parsed and expanded value by its original.</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- See Note [Variable expansion in remote schema input parsers] for more information.</span><span>
</span><span id="line-431"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#shortCircuitIfUnaltered"><span class="hs-identifier hs-type">shortCircuitIfUnaltered</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-432"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112411"><span class="annot"><a href="#local-6989586621688112411"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621688112410"><span class="annot"><a href="#local-6989586621688112410"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#%3C%3A"><span class="hs-operator hs-type">&lt;:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112411"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112410"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-434"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112411"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112410"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112411"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112410"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span id="shortCircuitIfUnaltered"><span class="annot"><span class="annottext">shortCircuitIfUnaltered :: Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#shortCircuitIfUnaltered"><span class="hs-identifier hs-var hs-var">shortCircuitIfUnaltered</span></a></span></span><span> </span><span id="local-6989586621688111906"><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111906"><span class="hs-identifier hs-var">parser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-437"></span><span>  </span><span class="annot"><span class="annottext">Parser :: forall (k :: Kind) (m :: * -&gt; *) a.
Type k -&gt; (ParserInput k -&gt; m a) -&gt; Parser k m a
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">P.Parser</span></a></span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pType :: Type k
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#pType"><span class="hs-identifier hs-var">pType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable)) -&gt; Type k
forall (k :: Kind) (m :: * -&gt; *) a. Parser k m a -&gt; Type k
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#pType"><span class="hs-identifier hs-var hs-var">P.pType</span></a></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111906"><span class="hs-identifier hs-var">parser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-439"></span><span>      </span><span class="annot"><span class="annottext">pParser :: ParserInput k -&gt; n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#pParser"><span class="hs-identifier hs-var">pParser</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688111905"><span class="annot"><span class="annottext">ParserInput k
</span><a href="#local-6989586621688111905"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-440"></span><span>        </span><span id="local-6989586621688111904"><span class="annot"><span class="annottext">Maybe (Altered, Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111904"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; ParserInput k -&gt; n (Maybe (Altered, Value RemoteSchemaVariable))
forall (k :: Kind) (m :: * -&gt; *) a.
Parser k m a -&gt; ParserInput k -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#pParser"><span class="hs-identifier hs-var hs-var">P.pParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111906"><span class="hs-identifier hs-var">parser</span></a></span><span> </span><span class="annot"><span class="annottext">ParserInput k
</span><a href="#local-6989586621688111905"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-441"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Altered, Value RemoteSchemaVariable)
-&gt; n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Altered, Value RemoteSchemaVariable)
 -&gt; n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
-&gt; n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Altered, Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111904"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-442"></span><span>          </span><span class="hs-comment">-- The parser did yield a value, and it was unmodified by presets</span><span>
</span><span id="line-443"></span><span>          </span><span class="hs-comment">-- we can short-circuit by transforming the input value, therefore</span><span>
</span><span id="line-444"></span><span>          </span><span class="hs-comment">-- &quot;unpeeling&quot; variables and avoiding extraneous JSON variables.</span><span>
</span><span id="line-445"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value RemoteSchemaVariable
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; Maybe (Altered, Value RemoteSchemaVariable))
-&gt; (Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-446"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Altered
</span><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value RemoteSchemaVariable
 -&gt; (Altered, Value RemoteSchemaVariable))
-&gt; Value RemoteSchemaVariable
-&gt; (Altered, Value RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(ParserInput k :~: InputValue Variable)
-&gt; ParserInput k -&gt; InputValue Variable
forall a b. (a :~: b) -&gt; a -&gt; b
</span><span class="hs-identifier hs-var">castWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">('Input &lt;: k) =&gt; ParserInput k :~: InputValue Variable
forall (k :: Kind).
('Input &lt;: k) =&gt;
ParserInput k :~: InputValue Variable
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#inputParserInput"><span class="hs-identifier hs-var">P.inputParserInput</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688112411"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ParserInput k
</span><a href="#local-6989586621688111905"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-447"></span><span>              </span><span class="hs-comment">-- The input was a GraphQL value: just forward it.</span><span>
</span><span id="line-448"></span><span>              </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#GraphQLValue"><span class="hs-identifier hs-type">GraphQLValue</span></a></span><span> </span><span id="local-6989586621688111901"><span class="annot"><span class="annottext">Value Variable
</span><a href="#local-6989586621688111901"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Variable -&gt; RemoteSchemaVariable
</span><a href="Hasura.RQL.Types.RemoteSchema.html#QueryVariable"><span class="hs-identifier hs-var">QueryVariable</span></a></span><span> </span><span class="annot"><span class="annottext">(Variable -&gt; RemoteSchemaVariable)
-&gt; Value Variable -&gt; Value RemoteSchemaVariable
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Variable
</span><a href="#local-6989586621688111901"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-449"></span><span>              </span><span class="hs-comment">-- The input value was already a JSON value: we still have to create</span><span>
</span><span id="line-450"></span><span>              </span><span class="hs-comment">-- a new JSON variable, but it will still be more efficient than having</span><span>
</span><span id="line-451"></span><span>              </span><span class="hs-comment">-- all the leaves of said value each be their own distinct value.</span><span>
</span><span id="line-452"></span><span>              </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#JSONValue"><span class="hs-identifier hs-type">JSONValue</span></a></span><span> </span><span id="local-6989586621688111900"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688111900"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaVariable -&gt; Value RemoteSchemaVariable
forall var. var -&gt; Value var
</span><span class="hs-identifier hs-var">G.VVariable</span></span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaVariable -&gt; Value RemoteSchemaVariable)
-&gt; RemoteSchemaVariable -&gt; Value RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Value -&gt; RemoteSchemaVariable
</span><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteJSONValue"><span class="hs-identifier hs-var">RemoteJSONValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type k -&gt; GType
forall (k :: Kind). Type k -&gt; GType
</span><a href="Hasura.GraphQL.Parser.Schema.html#toGraphQLType"><span class="hs-identifier hs-var">toGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type k -&gt; GType) -&gt; Type k -&gt; GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable)) -&gt; Type k
forall (k :: Kind) (m :: * -&gt; *) a. Parser k m a -&gt; Type k
</span><a href="Hasura.GraphQL.Parser.Internal.Types.html#pType"><span class="hs-identifier hs-var hs-var">P.pType</span></a></span><span> </span><span class="annot"><span class="annottext">Parser k n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111906"><span class="hs-identifier hs-var">parser</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688111900"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-453"></span><span>          </span><span class="hs-comment">-- Otherwise either the parser did not yield any value, or a value</span><span>
</span><span id="line-454"></span><span>          </span><span class="hs-comment">-- that has been altered by presets, permissions or type name customization; we forward it</span><span>
</span><span id="line-455"></span><span>          </span><span class="hs-comment">-- unoptimized.</span><span>
</span><span id="line-456"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Altered, Value RemoteSchemaVariable)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Altered, Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111904"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-comment">-- | argumentsParser is used for creating an argument parser for remote fields,</span><span>
</span><span id="line-460"></span><span class="hs-comment">-- This function is called for field arguments and input object fields. This</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- function works in the following way:</span><span>
</span><span id="line-462"></span><span class="hs-comment">--</span><span>
</span><span id="line-463"></span><span class="hs-comment">--   * if a field is not preset, we recursively call `inputValueDefinitionParser` on it</span><span>
</span><span id="line-464"></span><span class="hs-comment">--   * otherwise, we use the preset</span><span>
</span><span id="line-465"></span><span class="hs-comment">--</span><span>
</span><span id="line-466"></span><span class="hs-comment">-- For example, consider the following input objects:</span><span>
</span><span id="line-467"></span><span class="hs-comment">--</span><span>
</span><span id="line-468"></span><span class="hs-comment">--   input MessageWhereInpObj {</span><span>
</span><span id="line-469"></span><span class="hs-comment">--     id:   IntCompareObj</span><span>
</span><span id="line-470"></span><span class="hs-comment">--     name: StringCompareObj</span><span>
</span><span id="line-471"></span><span class="hs-comment">--   }</span><span>
</span><span id="line-472"></span><span class="hs-comment">--</span><span>
</span><span id="line-473"></span><span class="hs-comment">--   input IntCompareObj {</span><span>
</span><span id="line-474"></span><span class="hs-comment">--     eq : Int @preset(value: 2)</span><span>
</span><span id="line-475"></span><span class="hs-comment">--     gt : Int</span><span>
</span><span id="line-476"></span><span class="hs-comment">--     lt : Int</span><span>
</span><span id="line-477"></span><span class="hs-comment">--   }</span><span>
</span><span id="line-478"></span><span class="hs-comment">--</span><span>
</span><span id="line-479"></span><span class="hs-comment">-- parsing a MessageWhereInpObj will result in the following call tree:</span><span>
</span><span id="line-480"></span><span class="hs-comment">--</span><span>
</span><span id="line-481"></span><span class="hs-comment">--   -&gt; argumentsParser MessageWhereInpObj</span><span>
</span><span id="line-482"></span><span class="hs-comment">--     -&gt; id =&gt; inputValueDefinitionParser IntCompareObj</span><span>
</span><span id="line-483"></span><span class="hs-comment">--       -&gt; remoteInputObjectParser IntCompareObj</span><span>
</span><span id="line-484"></span><span class="hs-comment">--         -&gt; argumentsParser IntCompareObj</span><span>
</span><span id="line-485"></span><span class="hs-comment">--           -&gt; eq =&gt; using preset, no recursion</span><span>
</span><span id="line-486"></span><span class="hs-comment">--           -&gt; gt =&gt; inputValueDefinitionParser Int</span><span>
</span><span id="line-487"></span><span class="hs-comment">--             -&gt; remoteFieldScalarParser Int</span><span>
</span><span id="line-488"></span><span class="hs-comment">--           -&gt; lt =&gt; inputValueDefinitionParser Int</span><span>
</span><span id="line-489"></span><span class="hs-comment">--             -&gt; remoteFieldScalarParser Int</span><span>
</span><span id="line-490"></span><span class="hs-comment">--     -&gt; name =&gt; inputValueDefinitionParser StringCompareObj</span><span>
</span><span id="line-491"></span><span class="hs-comment">--       -&gt; ...</span><span>
</span><span id="line-492"></span><span class="hs-comment">--</span><span>
</span><span id="line-493"></span><span class="hs-comment">-- Furthermore, like all other input parsers in this file, 'argumentsParser' indicates whether this</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- part of the tree was altered during parsing; if any of the fields is preset, or recursively</span><span>
</span><span id="line-495"></span><span class="hs-comment">-- contains values that contain presets further down, then this result is labelled as altered.</span><span>
</span><span id="line-496"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#argumentsParser"><span class="hs-identifier hs-type">argumentsParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-497"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112343"><span class="annot"><a href="#local-6989586621688112343"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112342"><span class="annot"><a href="#local-6989586621688112342"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112341"><span class="annot"><a href="#local-6989586621688112341"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-498"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112343"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112342"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112341"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-499"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.ArgumentsDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-500"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-501"></span><span>  </span><span class="annot"><a href="#local-6989586621688112342"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112341"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span id="argumentsParser"><span class="annot"><span class="annottext">argumentsParser :: [RemoteSchemaInputValueDefinition]
-&gt; RemoteSchemaIntrospection
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#argumentsParser"><span class="hs-identifier hs-var hs-var">argumentsParser</span></a></span></span><span> </span><span id="local-6989586621688111899"><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111899"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621688111898"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111898"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-503"></span><span>  </span><span class="hs-comment">-- ! DANGER !</span><span>
</span><span id="line-504"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-comment">-- This function is mutually recursive with 'inputValueDefinitionParser': if one of the non-preset</span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-comment">-- arguments is an input object, then recursively we'll end up using 'argumentsParser' to parse</span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-comment">-- its arguments. Note however that if all arguments have a preset value, then this function will</span><span>
</span><span id="line-508"></span><span>  </span><span class="hs-comment">-- not call 'inputValueDefinitionParser', and will simply return without any recursion.</span><span>
</span><span id="line-509"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-510"></span><span>  </span><span class="hs-comment">-- This is labelled as dangerous because another function in this module,</span><span>
</span><span id="line-511"></span><span>  </span><span class="hs-comment">-- 'remoteInputObjectParser', EXPLICITLY RELIES ON THIS BEHAVIOUR. Due to limitations of the</span><span>
</span><span id="line-512"></span><span>  </span><span class="hs-comment">-- GraphQL spec and of parser memoization functions, it cannot memoize the case where all</span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-comment">-- arguments are preset, and therefore relies on the assumption that 'argumentsParser' is not</span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-comment">-- recursive in this edge case.</span><span>
</span><span id="line-515"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-516"></span><span>  </span><span class="hs-comment">-- This assumptions is unlikely to ever be broken; but if you ever modify this function, please</span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-comment">-- nonetheless make sure that it is maintained.</span><span>
</span><span id="line-518"></span><span>  </span><span id="local-6989586621688111897"><span class="annot"><span class="annottext">[InputFieldsParser
   n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))]
</span><a href="#local-6989586621688111897"><span class="hs-identifier hs-var">argsParsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
-&gt; (RemoteSchemaInputValueDefinition
    -&gt; m (InputFieldsParser
            n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))))
-&gt; m [InputFieldsParser
        n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111899"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688111895"><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111895"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111894"><span class="annot"><span class="annottext">argDef :: InputValueDefinition
</span><a href="#local-6989586621688111894"><span class="hs-identifier hs-var hs-var">argDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition -&gt; InputValueDefinition
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdDefinition"><span class="hs-identifier hs-var hs-var">_rsitdDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111895"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-520"></span><span>        </span><span id="local-6989586621688111892"><span class="annot"><span class="annottext">argName :: Name
</span><a href="#local-6989586621688111892"><span class="hs-identifier hs-var hs-var">argName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111894"><span class="hs-identifier hs-var">argDef</span></a></span><span>
</span><span id="line-521"></span><span>    </span><span id="local-6989586621688111890"><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111890"><span class="hs-identifier hs-var">argParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition
-&gt; Maybe (Value RemoteSchemaVariable)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdPresetArgument"><span class="hs-identifier hs-var hs-var">_rsitdPresetArgument</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111895"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-522"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Value RemoteSchemaVariable)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; InputValueDefinition
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; InputValueDefinition
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#inputValueDefinitionParser"><span class="hs-identifier hs-var">inputValueDefinitionParser</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111898"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111894"><span class="hs-identifier hs-var">argDef</span></a></span><span>
</span><span id="line-523"></span><span>      </span><span class="hs-comment">-- This is the source of all possible alterations: one of the fields is preset; everything</span><span>
</span><span id="line-524"></span><span>      </span><span class="hs-comment">-- &quot;above&quot; this field in the tree will be considered &quot;altered&quot;, and the optimizations will</span><span>
</span><span id="line-525"></span><span>      </span><span class="hs-comment">-- not apply.</span><span>
</span><span id="line-526"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688111889"><span class="annot"><span class="annottext">Value RemoteSchemaVariable
</span><a href="#local-6989586621688111889"><span class="hs-identifier hs-var">preset</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
 -&gt; m (InputFieldsParser
         n (Maybe (Altered, Value RemoteSchemaVariable))))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, Value RemoteSchemaVariable)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Altered, Value RemoteSchemaVariable)
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Altered, Value RemoteSchemaVariable)
 -&gt; InputFieldsParser
      n (Maybe (Altered, Value RemoteSchemaVariable)))
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Altered
</span><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-var">Altered</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value RemoteSchemaVariable
</span><a href="#local-6989586621688111889"><span class="hs-identifier hs-var">preset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>    </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, (Name, Value RemoteSchemaVariable))))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))
 -&gt; m (InputFieldsParser
         n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))))
-&gt; InputFieldsParser
     n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))
-&gt; m (InputFieldsParser
        n (Maybe (Altered, (Name, Value RemoteSchemaVariable))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Altered, Value RemoteSchemaVariable)
 -&gt; (Altered, (Name, Value RemoteSchemaVariable)))
-&gt; Maybe (Altered, Value RemoteSchemaVariable)
-&gt; Maybe (Altered, (Name, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Value RemoteSchemaVariable -&gt; (Name, Value RemoteSchemaVariable))
-&gt; (Altered, Value RemoteSchemaVariable)
-&gt; (Altered, (Name, Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111892"><span class="hs-identifier hs-var">argName</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Altered, Value RemoteSchemaVariable)
 -&gt; Maybe (Altered, (Name, Value RemoteSchemaVariable)))
-&gt; InputFieldsParser
     n (Maybe (Altered, Value RemoteSchemaVariable))
-&gt; InputFieldsParser
     n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (Altered, Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111890"><span class="hs-identifier hs-var">argParser</span></a></span><span>
</span><span id="line-528"></span><span>  </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Altered, HashMap Name (Value RemoteSchemaVariable))
 -&gt; m (InputFieldsParser
         n (Altered, HashMap Name (Value RemoteSchemaVariable))))
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[InputFieldsParser
   n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))]
-&gt; InputFieldsParser
     n [Maybe (Altered, (Name, Value RemoteSchemaVariable))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">[InputFieldsParser
   n (Maybe (Altered, (Name, Value RemoteSchemaVariable)))]
</span><a href="#local-6989586621688111897"><span class="hs-identifier hs-var">argsParsers</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n [Maybe (Altered, (Name, Value RemoteSchemaVariable))]
-&gt; ([Maybe (Altered, (Name, Value RemoteSchemaVariable))]
    -&gt; (Altered, HashMap Name (Value RemoteSchemaVariable)))
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">([(Name, Value RemoteSchemaVariable)]
 -&gt; HashMap Name (Value RemoteSchemaVariable))
-&gt; (Altered, [(Name, Value RemoteSchemaVariable)])
-&gt; (Altered, HashMap Name (Value RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[(Name, Value RemoteSchemaVariable)]
-&gt; HashMap Name (Value RemoteSchemaVariable)
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">((Altered, [(Name, Value RemoteSchemaVariable)])
 -&gt; (Altered, HashMap Name (Value RemoteSchemaVariable)))
-&gt; ([Maybe (Altered, (Name, Value RemoteSchemaVariable))]
    -&gt; (Altered, [(Name, Value RemoteSchemaVariable)]))
-&gt; [Maybe (Altered, (Name, Value RemoteSchemaVariable))]
-&gt; (Altered, HashMap Name (Value RemoteSchemaVariable))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Altered, (Name, Value RemoteSchemaVariable))]
-&gt; (Altered, [(Name, Value RemoteSchemaVariable)])
forall a. [Maybe (Altered, a)] -&gt; (Altered, [a])
</span><a href="Hasura.GraphQL.Schema.Remote.html#aggregateListAndAlteration"><span class="hs-identifier hs-var">aggregateListAndAlteration</span></a></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span id="local-6989586621688112378"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#aggregateListAndAlteration"><span class="hs-identifier hs-type">aggregateListAndAlteration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621688112378"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621688112378"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-531"></span><span id="aggregateListAndAlteration"><span class="annot"><span class="annottext">aggregateListAndAlteration :: [Maybe (Altered, a)] -&gt; (Altered, [a])
</span><a href="Hasura.GraphQL.Schema.Remote.html#aggregateListAndAlteration"><span class="hs-identifier hs-var hs-var">aggregateListAndAlteration</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Altered] -&gt; Altered) -&gt; ([Altered], [a]) -&gt; (Altered, [a])
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (b, d) (c, d)
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="annot"><span class="annottext">[Altered] -&gt; Altered
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">(([Altered], [a]) -&gt; (Altered, [a]))
-&gt; ([Maybe (Altered, a)] -&gt; ([Altered], [a]))
-&gt; [Maybe (Altered, a)]
-&gt; (Altered, [a])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[(Altered, a)] -&gt; ([Altered], [a])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">([(Altered, a)] -&gt; ([Altered], [a]))
-&gt; ([Maybe (Altered, a)] -&gt; [(Altered, a)])
-&gt; [Maybe (Altered, a)]
-&gt; ([Altered], [a])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Altered, a)] -&gt; [(Altered, a)]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- Remote schema output parsers</span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-comment">-- | 'remoteSchemaObject' returns a output parser for a given 'ObjectTypeDefinition'.</span><span>
</span><span id="line-537"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaObject"><span class="hs-identifier hs-type">remoteSchemaObject</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112188"><span class="annot"><a href="#local-6989586621688112188"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112187"><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112186"><span class="annot"><a href="#local-6989586621688112186"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-539"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112188"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112186"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-540"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-541"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-542"></span><span>  </span><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112186"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span id="remoteSchemaObject"><span class="annot"><span class="annottext">remoteSchemaObject :: RemoteSchemaIntrospection
-&gt; ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaObject"><span class="hs-identifier hs-var hs-var">remoteSchemaObject</span></a></span></span><span> </span><span id="local-6989586621688111883"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111883"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span id="local-6989586621688111882"><span class="annot"><span class="annottext">defn :: ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111882"><span class="hs-identifier hs-var">defn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></span><span> </span><span id="local-6989586621688111880"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111880"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688111879"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621688111878"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688111878"><span class="hs-identifier hs-var">interfaces</span></a></span></span><span> </span><span id="local-6989586621688111877"><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621688111877"><span class="hs-identifier hs-var">_directives</span></a></span></span><span> </span><span id="local-6989586621688111876"><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111876"><span class="hs-identifier hs-var">subFields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-544"></span><span>  </span><span class="annot"><span class="annottext">Name
-&gt; ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">P.memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">remoteSchemaObject</span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111882"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-545"></span><span>    </span><span id="local-6989586621688111875"><span class="annot"><span class="annottext">[FieldParser n (Field NoFragments RemoteSchemaVariable)]
</span><a href="#local-6989586621688111875"><span class="hs-identifier hs-var">subFieldParsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition
 -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable)))
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; m [FieldParser n (Field NoFragments RemoteSchemaVariable)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromDefinition"><span class="hs-identifier hs-var">remoteFieldFromDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111883"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111876"><span class="hs-identifier hs-var">subFields</span></a></span><span>
</span><span id="line-546"></span><span>    </span><span id="local-6989586621688111874"><span class="annot"><span class="annottext">[InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111874"><span class="hs-identifier hs-var">interfaceDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Name
 -&gt; m (InterfaceTypeDefinition
         [Name] RemoteSchemaInputValueDefinition))
-&gt; [Name]
-&gt; m [InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111873"><span class="hs-identifier hs-var">getInterface</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688111878"><span class="hs-identifier hs-var">interfaces</span></a></span><span>
</span><span id="line-547"></span><span>    </span><span id="local-6989586621688111872"><span class="annot"><span class="annottext">[Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)]
</span><a href="#local-6989586621688111872"><span class="hs-identifier hs-var">implements</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
 -&gt; m (Parser
         'Output n (SelectionSet NoFragments RemoteSchemaVariable)))
-&gt; [InterfaceTypeDefinition
      [Name] RemoteSchemaInputValueDefinition]
-&gt; m [Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaInterface"><span class="hs-identifier hs-var">remoteSchemaInterface</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111883"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111874"><span class="hs-identifier hs-var">interfaceDefs</span></a></span><span>
</span><span id="line-548"></span><span>    </span><span class="hs-comment">-- TODO: also check sub-interfaces, when these are supported in a future graphql spec</span><span>
</span><span id="line-549"></span><span>    </span><span class="annot"><span class="annottext">(InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
 -&gt; m ())
-&gt; [InterfaceTypeDefinition
      [Name] RemoteSchemaInputValueDefinition]
-&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m ()
</span><a href="#local-6989586621688111869"><span class="hs-identifier hs-var">validateImplementsFields</span></a></span><span> </span><span class="annot"><span class="annottext">[InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111874"><span class="hs-identifier hs-var">interfaceDefs</span></a></span><span>
</span><span id="line-550"></span><span>    </span><span id="local-6989586621688111868"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111868"><span class="hs-identifier hs-var">typename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-551"></span><span>    </span><span class="annot"><span class="annottext">Parser 'Output n [Field NoFragments RemoteSchemaVariable]
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n [Field NoFragments RemoteSchemaVariable]
 -&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable]))
-&gt; Parser 'Output n [Field NoFragments RemoteSchemaVariable]
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-552"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (Field NoFragments RemoteSchemaVariable)]
-&gt; [Parser
      'Output n (SelectionSet NoFragments RemoteSchemaVariable)]
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name (ParsedSelection (Field NoFragments RemoteSchemaVariable)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; [Parser 'Output m b]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSetObject"><span class="hs-identifier hs-var">P.selectionSetObject</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111868"><span class="hs-identifier hs-var">typename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111880"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (Field NoFragments RemoteSchemaVariable)]
</span><a href="#local-6989586621688111875"><span class="hs-identifier hs-var">subFieldParsers</span></a></span><span> </span><span class="annot"><span class="annottext">[Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)]
</span><a href="#local-6989586621688111872"><span class="hs-identifier hs-var">implements</span></a></span><span>
</span><span id="line-553"></span><span>        </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (InsOrdHashMap
     Name (ParsedSelection (Field NoFragments RemoteSchemaVariable)))
-&gt; (InsOrdHashMap
      Name (ParsedSelection (Field NoFragments RemoteSchemaVariable))
    -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; Parser 'Output n [Field NoFragments RemoteSchemaVariable]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span>
</span><span id="line-554"></span><span>          </span><span class="annot"><span class="annottext">(InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
 -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; (InsOrdHashMap
      Name (ParsedSelection (Field NoFragments RemoteSchemaVariable))
    -&gt; InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable))
-&gt; InsOrdHashMap
     Name (ParsedSelection (Field NoFragments RemoteSchemaVariable))
-&gt; [Field NoFragments RemoteSchemaVariable]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name
 -&gt; ParsedSelection (Field NoFragments RemoteSchemaVariable)
 -&gt; Field NoFragments RemoteSchemaVariable)
-&gt; InsOrdHashMap
     Name (ParsedSelection (Field NoFragments RemoteSchemaVariable))
-&gt; InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
forall k v1 v2.
(k -&gt; v1 -&gt; v2) -&gt; InsOrdHashMap k v1 -&gt; InsOrdHashMap k v2
</span><span class="hs-identifier hs-var">OMap.mapWithKey</span></span><span>
</span><span id="line-555"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688111864"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111864"><span class="hs-identifier hs-var">alias</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Field NoFragments RemoteSchemaVariable)
-&gt; ParsedSelection (Field NoFragments RemoteSchemaVariable)
-&gt; Field NoFragments RemoteSchemaVariable
forall a. (Name -&gt; a) -&gt; ParsedSelection a -&gt; a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#handleTypename"><span class="hs-identifier hs-var">handleTypename</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; Field NoFragments RemoteSchemaVariable)
 -&gt; ParsedSelection (Field NoFragments RemoteSchemaVariable)
 -&gt; Field NoFragments RemoteSchemaVariable)
-&gt; (Name -&gt; Field NoFragments RemoteSchemaVariable)
-&gt; ParsedSelection (Field NoFragments RemoteSchemaVariable)
-&gt; Field NoFragments RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-556"></span><span>                </span><span class="annot"><span class="annottext">Maybe Name
-&gt; Name
-&gt; HashMap Name (Value RemoteSchemaVariable)
-&gt; [Directive RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; Field NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var.
Maybe Name
-&gt; Name
-&gt; HashMap Name (Value var)
-&gt; [Directive var]
-&gt; SelectionSet frag var
-&gt; Field frag var
</span><span class="hs-identifier hs-var">G.Field</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111864"><span class="hs-identifier hs-var">alias</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;__typename&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">[Directive RemoteSchemaVariable]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-557"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-559"></span><span>    </span><span class="annot"><a href="#local-6989586621688111873"><span class="hs-identifier hs-type">getInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.InterfaceTypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span>    </span><span id="local-6989586621688111873"><span class="annot"><span class="annottext">getInterface :: Name
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111873"><span class="hs-identifier hs-var hs-var">getInterface</span></a></span></span><span> </span><span id="local-6989586621688111862"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111862"><span class="hs-identifier hs-var">interfaceName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-561"></span><span>      </span><span class="annot"><span class="annottext">Maybe
  (InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe
     (InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupInterface"><span class="hs-identifier hs-var">lookupInterface</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111883"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111862"><span class="hs-identifier hs-var">interfaceName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (InterfaceTypeDefinition
      [Name] RemoteSchemaInputValueDefinition)
 -&gt; m (InterfaceTypeDefinition
         [Name] RemoteSchemaInputValueDefinition))
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-562"></span><span>        </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; m (InterfaceTypeDefinition
         [Name] RemoteSchemaInputValueDefinition))
-&gt; Text
-&gt; m (InterfaceTypeDefinition
        [Name] RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-563"></span><span>          </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not find interface &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111862"><span class="hs-identifier hs-var">interfaceName</span></a></span><span>
</span><span id="line-564"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; implemented by Object type &quot;</span></span><span>
</span><span id="line-565"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><a href="#local-6989586621688111869"><span class="hs-identifier hs-type">validateImplementsFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.InterfaceTypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>    </span><span id="local-6989586621688111869"><span class="annot"><span class="annottext">validateImplementsFields :: InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m ()
</span><a href="#local-6989586621688111869"><span class="hs-identifier hs-var hs-var">validateImplementsFields</span></a></span></span><span> </span><span id="local-6989586621688111858"><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111858"><span class="hs-identifier hs-var">interface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-568"></span><span>      </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition -&gt; m ())
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition] -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; FieldDefinition RemoteSchemaInputValueDefinition -&gt; m ()
</span><a href="#local-6989586621688111857"><span class="hs-identifier hs-var">validateImplementsField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; Name
forall possibleTypes inputType.
InterfaceTypeDefinition possibleTypes inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._itdName</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111858"><span class="hs-identifier hs-var">interface</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
forall possibleTypes inputType.
InterfaceTypeDefinition possibleTypes inputType
-&gt; [FieldDefinition inputType]
</span><span class="hs-identifier hs-var hs-var">G._itdFieldsDefinition</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111858"><span class="hs-identifier hs-var">interface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>    </span><span class="annot"><a href="#local-6989586621688111857"><span class="hs-identifier hs-type">validateImplementsField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-570"></span><span>    </span><span id="local-6989586621688111857"><span class="annot"><span class="annottext">validateImplementsField :: Name -&gt; FieldDefinition RemoteSchemaInputValueDefinition -&gt; m ()
</span><a href="#local-6989586621688111857"><span class="hs-identifier hs-var hs-var">validateImplementsField</span></a></span></span><span> </span><span id="local-6989586621688111854"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111854"><span class="hs-identifier hs-var">interfaceName</span></a></span></span><span> </span><span id="local-6989586621688111853"><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-571"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; [(Name, FieldDefinition RemoteSchemaInputValueDefinition)]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name]
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; [(Name, FieldDefinition RemoteSchemaInputValueDefinition)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name)
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition] -&gt; [Name]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111876"><span class="hs-identifier hs-var">subFields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111876"><span class="hs-identifier hs-var">subFields</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-572"></span><span>        </span><span class="annot"><span class="annottext">Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-573"></span><span>          </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-574"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Interface field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111854"><span class="hs-identifier hs-var">interfaceName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>              </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; expected, but &quot;</span></span><span>
</span><span id="line-576"></span><span>              </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-577"></span><span>              </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not provide it&quot;</span></span><span>
</span><span id="line-578"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688111849"><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-579"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType -&gt; GType -&gt; Bool
</span><a href="#local-6989586621688111847"><span class="hs-identifier hs-var">validateSubType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; GType
forall inputType. FieldDefinition inputType -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._fldType</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; GType
forall inputType. FieldDefinition inputType -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._fldType</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-580"></span><span>            </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-581"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;The type of Object field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; (&quot;</span></span><span>
</span><span id="line-583"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Text
</span><span class="hs-identifier hs-var">G.showGT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; GType
forall inputType. FieldDefinition inputType -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._fldType</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;) is not the same type/sub type of Interface field &quot;</span></span><span>
</span><span id="line-585"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111854"><span class="hs-identifier hs-var">interfaceName</span></a></span><span>
</span><span id="line-586"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-587"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; (&quot;</span></span><span>
</span><span id="line-589"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Text
</span><span class="hs-identifier hs-var">G.showGT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; GType
forall inputType. FieldDefinition inputType -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._fldType</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-591"></span><span>          </span><span class="annot"><span class="annottext">(RemoteSchemaInputValueDefinition -&gt; m ())
-&gt; [RemoteSchemaInputValueDefinition] -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span>
</span><span id="line-592"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[InputValueDefinition] -&gt; InputValueDefinition -&gt; m ()
</span><a href="#local-6989586621688111844"><span class="hs-identifier hs-var">validateArgument</span></a></span><span>
</span><span id="line-593"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RemoteSchemaInputValueDefinition -&gt; InputValueDefinition)
-&gt; [RemoteSchemaInputValueDefinition] -&gt; [InputValueDefinition]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition -&gt; InputValueDefinition
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdDefinition"><span class="hs-identifier hs-var hs-var">_rsitdDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
-&gt; [RemoteSchemaInputValueDefinition]
forall inputType.
FieldDefinition inputType -&gt; ArgumentsDefinition inputType
</span><span class="hs-identifier hs-var hs-var">G._fldArgumentsDefinition</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>                </span><span class="annot"><span class="annottext">(InputValueDefinition -&gt; m ())
-&gt; (RemoteSchemaInputValueDefinition -&gt; InputValueDefinition)
-&gt; RemoteSchemaInputValueDefinition
-&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition -&gt; InputValueDefinition
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdDefinition"><span class="hs-identifier hs-var hs-var">_rsitdDefinition</span></a></span><span>
</span><span id="line-595"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
-&gt; [RemoteSchemaInputValueDefinition]
forall inputType.
FieldDefinition inputType -&gt; ArgumentsDefinition inputType
</span><span class="hs-identifier hs-var hs-var">G._fldArgumentsDefinition</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>          </span><span class="annot"><span class="annottext">(RemoteSchemaInputValueDefinition -&gt; m ())
-&gt; [RemoteSchemaInputValueDefinition] -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span>
</span><span id="line-598"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[InputValueDefinition] -&gt; InputValueDefinition -&gt; m ()
</span><a href="#local-6989586621688111842"><span class="hs-identifier hs-var">validateNoExtraNonNull</span></a></span><span>
</span><span id="line-599"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RemoteSchemaInputValueDefinition -&gt; InputValueDefinition)
-&gt; [RemoteSchemaInputValueDefinition] -&gt; [InputValueDefinition]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition -&gt; InputValueDefinition
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdDefinition"><span class="hs-identifier hs-var hs-var">_rsitdDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
-&gt; [RemoteSchemaInputValueDefinition]
forall inputType.
FieldDefinition inputType -&gt; ArgumentsDefinition inputType
</span><span class="hs-identifier hs-var hs-var">G._fldArgumentsDefinition</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>                </span><span class="annot"><span class="annottext">(InputValueDefinition -&gt; m ())
-&gt; (RemoteSchemaInputValueDefinition -&gt; InputValueDefinition)
-&gt; RemoteSchemaInputValueDefinition
-&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInputValueDefinition -&gt; InputValueDefinition
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdDefinition"><span class="hs-identifier hs-var hs-var">_rsitdDefinition</span></a></span><span>
</span><span id="line-601"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
-&gt; [RemoteSchemaInputValueDefinition]
forall inputType.
FieldDefinition inputType -&gt; ArgumentsDefinition inputType
</span><span class="hs-identifier hs-var hs-var">G._fldArgumentsDefinition</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-603"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-604"></span><span>            </span><span class="annot"><a href="#local-6989586621688111844"><span class="hs-identifier hs-type">validateArgument</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.InputValueDefinition</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.InputValueDefinition</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span>            </span><span id="local-6989586621688111844"><span class="annot"><span class="annottext">validateArgument :: [InputValueDefinition] -&gt; InputValueDefinition -&gt; m ()
</span><a href="#local-6989586621688111844"><span class="hs-identifier hs-var hs-var">validateArgument</span></a></span></span><span> </span><span id="local-6989586621688111841"><span class="annot"><span class="annottext">[InputValueDefinition]
</span><a href="#local-6989586621688111841"><span class="hs-identifier hs-var">objectFieldArgs</span></a></span></span><span> </span><span id="local-6989586621688111840"><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111840"><span class="hs-identifier hs-var">ifaceArgument</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-606"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; [(Name, InputValueDefinition)] -&gt; Maybe InputValueDefinition
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111840"><span class="hs-identifier hs-var">ifaceArgument</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; [InputValueDefinition] -&gt; [(Name, InputValueDefinition)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(InputValueDefinition -&gt; Name) -&gt; [InputValueDefinition] -&gt; [Name]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">[InputValueDefinition]
</span><a href="#local-6989586621688111841"><span class="hs-identifier hs-var">objectFieldArgs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[InputValueDefinition]
</span><a href="#local-6989586621688111841"><span class="hs-identifier hs-var">objectFieldArgs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-607"></span><span>                </span><span class="annot"><span class="annottext">Maybe InputValueDefinition
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-608"></span><span>                  </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-609"></span><span>                    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Interface field argument &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111854"><span class="hs-identifier hs-var">interfaceName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;(&quot;</span></span><span>
</span><span id="line-611"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111840"><span class="hs-identifier hs-var">ifaceArgument</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:) required, but Object field &quot;</span></span><span>
</span><span id="line-613"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-614"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-615"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-616"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; does not provide it&quot;</span></span><span>
</span><span id="line-617"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688111839"><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111839"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-618"></span><span>                  </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._ivdType</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111839"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">GType -&gt; GType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._ivdType</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111840"><span class="hs-identifier hs-var">ifaceArgument</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-619"></span><span>                    </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-620"></span><span>                      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Interface field argument &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111854"><span class="hs-identifier hs-var">interfaceName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;(&quot;</span></span><span>
</span><span id="line-622"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111840"><span class="hs-identifier hs-var">ifaceArgument</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-623"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:) expects type &quot;</span></span><span>
</span><span id="line-624"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Text
</span><span class="hs-identifier hs-var">G.showGT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._ivdType</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111840"><span class="hs-identifier hs-var">ifaceArgument</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;, but &quot;</span></span><span>
</span><span id="line-626"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-627"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-628"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;(&quot;</span></span><span>
</span><span id="line-630"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111840"><span class="hs-identifier hs-var">ifaceArgument</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:) has type &quot;</span></span><span>
</span><span id="line-632"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Text
</span><span class="hs-identifier hs-var">G.showGT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._ivdType</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111839"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-633"></span><span>            </span><span class="annot"><a href="#local-6989586621688111842"><span class="hs-identifier hs-type">validateNoExtraNonNull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.InputValueDefinition</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.InputValueDefinition</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112187"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>            </span><span id="local-6989586621688111842"><span class="annot"><span class="annottext">validateNoExtraNonNull :: [InputValueDefinition] -&gt; InputValueDefinition -&gt; m ()
</span><a href="#local-6989586621688111842"><span class="hs-identifier hs-var hs-var">validateNoExtraNonNull</span></a></span></span><span> </span><span id="local-6989586621688111837"><span class="annot"><span class="annottext">[InputValueDefinition]
</span><a href="#local-6989586621688111837"><span class="hs-identifier hs-var">ifaceArguments</span></a></span></span><span> </span><span id="local-6989586621688111836"><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111836"><span class="hs-identifier hs-var">objectFieldArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-635"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; [(Name, InputValueDefinition)] -&gt; Maybe InputValueDefinition
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111836"><span class="hs-identifier hs-var">objectFieldArg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; [InputValueDefinition] -&gt; [(Name, InputValueDefinition)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(InputValueDefinition -&gt; Name) -&gt; [InputValueDefinition] -&gt; [Name]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">[InputValueDefinition]
</span><a href="#local-6989586621688111837"><span class="hs-identifier hs-var">ifaceArguments</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[InputValueDefinition]
</span><a href="#local-6989586621688111837"><span class="hs-identifier hs-var">ifaceArguments</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-636"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>                </span><span class="annot"><span class="annottext">Maybe InputValueDefinition
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-638"></span><span>                  </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType -&gt; Bool
</span><span class="hs-identifier hs-var">G.isNullable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._ivdType</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111836"><span class="hs-identifier hs-var">objectFieldArg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-639"></span><span>                    </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-640"></span><span>                      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Object field argument &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111879"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111849"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;(&quot;</span></span><span>
</span><span id="line-641"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111836"><span class="hs-identifier hs-var">objectFieldArg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-642"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:) is of required type &quot;</span></span><span>
</span><span id="line-643"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; Text
</span><span class="hs-identifier hs-var">G.showGT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._ivdType</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688111836"><span class="hs-identifier hs-var">objectFieldArg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;, but is not provided by Interface field &quot;</span></span><span>
</span><span id="line-645"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111854"><span class="hs-identifier hs-var">interfaceName</span></a></span><span>
</span><span id="line-646"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-647"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111853"><span class="hs-identifier hs-var">interfaceField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-648"></span><span>    </span><span class="annot"><a href="#local-6989586621688111847"><span class="hs-identifier hs-type">validateSubType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.GType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.GType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-649"></span><span>    </span><span class="hs-comment">-- TODO this ignores nullability which is probably wrong, even though the GraphQL spec is ambiguous</span><span>
</span><span id="line-650"></span><span>    </span><span id="local-6989586621688111847"><span class="annot"><span class="annottext">validateSubType :: GType -&gt; GType -&gt; Bool
</span><a href="#local-6989586621688111847"><span class="hs-identifier hs-var hs-var">validateSubType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688111835"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111835"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688111834"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111834"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; GType -&gt; Bool
</span><a href="#local-6989586621688111847"><span class="hs-identifier hs-var">validateSubType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111835"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111834"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-651"></span><span>    </span><span class="hs-comment">-- It is OK to &quot;upgrade&quot; the strictness</span><span>
</span><span id="line-652"></span><span>    </span><span class="annot"><a href="#local-6989586621688111847"><span class="hs-identifier hs-var">validateSubType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111833"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111833"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111832"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111832"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-653"></span><span>      </span><span class="annot"><span class="annottext">GType -&gt; GType -&gt; Bool
</span><a href="#local-6989586621688111847"><span class="hs-identifier hs-var">validateSubType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability -&gt; Name -&gt; GType
</span><span class="hs-identifier hs-var">G.TypeNamed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111833"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability -&gt; Name -&gt; GType
</span><span class="hs-identifier hs-var">G.TypeNamed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111832"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>    </span><span class="annot"><a href="#local-6989586621688111847"><span class="hs-identifier hs-var">validateSubType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span id="local-6989586621688111831"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111831"><span class="hs-identifier hs-var">nx</span></a></span></span><span> </span><span id="local-6989586621688111830"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111830"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span id="local-6989586621688111829"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111829"><span class="hs-identifier hs-var">ny</span></a></span></span><span> </span><span id="local-6989586621688111828"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111828"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-655"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111883"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111830"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111883"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111828"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-656"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688111827"><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111827"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688111826"><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111826"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111831"><span class="hs-identifier hs-var">nx</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability -&gt; Nullability -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688111829"><span class="hs-identifier hs-var">ny</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; TypeDefinition [Name] RemoteSchemaInputValueDefinition -&gt; Bool
forall inputType (t :: * -&gt; *).
(Eq inputType, Eq (t Name), Foldable t) =&gt;
TypeDefinition (t Name) inputType
-&gt; TypeDefinition (t Name) inputType -&gt; Bool
</span><a href="#local-6989586621688111824"><span class="hs-identifier hs-var">validateSubTypeDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111827"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111826"><span class="hs-identifier hs-var">y'</span></a></span><span>
</span><span id="line-657"></span><span>        </span><span class="annot"><span class="annottext">(Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition),
 Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-658"></span><span>    </span><span class="annot"><a href="#local-6989586621688111847"><span class="hs-identifier hs-var">validateSubType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-659"></span><span>    </span><span id="local-6989586621688111824"><span class="annot"><span class="annottext">validateSubTypeDefinition :: TypeDefinition (t Name) inputType
-&gt; TypeDefinition (t Name) inputType -&gt; Bool
</span><a href="#local-6989586621688111824"><span class="hs-identifier hs-var hs-var">validateSubTypeDefinition</span></a></span></span><span> </span><span id="local-6989586621688111823"><span class="annot"><span class="annottext">TypeDefinition (t Name) inputType
</span><a href="#local-6989586621688111823"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span id="local-6989586621688111822"><span class="annot"><span class="annottext">TypeDefinition (t Name) inputType
</span><a href="#local-6989586621688111822"><span class="hs-identifier hs-var">y'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TypeDefinition (t Name) inputType
</span><a href="#local-6989586621688111823"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition (t Name) inputType
-&gt; TypeDefinition (t Name) inputType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TypeDefinition (t Name) inputType
</span><a href="#local-6989586621688111822"><span class="hs-identifier hs-var">y'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-660"></span><span>    </span><span class="annot"><a href="#local-6989586621688111824"><span class="hs-identifier hs-var">validateSubTypeDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionObject</span></span><span> </span><span id="local-6989586621688111821"><span class="annot"><span class="annottext">ObjectTypeDefinition inputType
</span><a href="#local-6989586621688111821"><span class="hs-identifier hs-var">otd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionInterface</span></span><span> </span><span id="local-6989586621688111820"><span class="annot"><span class="annottext">InterfaceTypeDefinition (t Name) inputType
</span><a href="#local-6989586621688111820"><span class="hs-identifier hs-var">itd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-661"></span><span>      </span><span class="annot"><span class="annottext">ObjectTypeDefinition inputType -&gt; Name
forall inputType. ObjectTypeDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._otdName</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition inputType
</span><a href="#local-6989586621688111821"><span class="hs-identifier hs-var">otd</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; t Name -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition (t Name) inputType -&gt; t Name
forall possibleTypes inputType.
InterfaceTypeDefinition possibleTypes inputType -&gt; possibleTypes
</span><span class="hs-identifier hs-var hs-var">G._itdPossibleTypes</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition (t Name) inputType
</span><a href="#local-6989586621688111820"><span class="hs-identifier hs-var">itd</span></a></span><span>
</span><span id="line-662"></span><span>    </span><span class="annot"><a href="#local-6989586621688111824"><span class="hs-identifier hs-var">validateSubTypeDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionObject</span></span><span> </span><span id="local-6989586621688111816"><span class="annot"><span class="annottext">ObjectTypeDefinition inputType
</span><a href="#local-6989586621688111816"><span class="hs-identifier hs-var">_otd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionUnion</span></span><span> </span><span id="local-6989586621688111815"><span class="annot"><span class="annottext">UnionTypeDefinition
</span><a href="#local-6989586621688111815"><span class="hs-identifier hs-var">_utd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-663"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- TODO write appropriate check (may require saving 'possibleTypes' in Syntax.hs)</span><span>
</span><span id="line-664"></span><span>    </span><span class="annot"><a href="#local-6989586621688111824"><span class="hs-identifier hs-var">validateSubTypeDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition (t Name) inputType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TypeDefinition (t Name) inputType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-665"></span><span>
</span><span id="line-666"></span><span class="hs-comment">{- Note [Querying remote schema interfaces]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When querying Remote schema interfaces, we need to re-construct
the incoming query to be compliant with the upstream remote.
We need to do this because the `SelectionSet`(s) that are
inputted to this function have the fragments (if any) flattened.
(Check `flattenSelectionSet` in 'Hasura.GraphQL.Parser.Collect' module)
The `constructInterfaceSelectionSet` function makes a valid interface query by:
1. Getting the common interface fields in all the selection sets
2. Remove the common fields obtained in #1 from the selection sets
3. Construct a selection field for every common interface field
4. Construct inline fragments for non-common interface fields
   using the result of #2 for every object
5. Construct the final selection set by combining #3 and #4

Example: Suppose an interface 'Character' is defined in the upstream
and two objects 'Human' and 'Droid' implement the 'Character' Interface.

Suppose, a field 'hero' returns 'Character'.

{
   hero {
     id
     name
     ... on Droid {
       primaryFunction
     }
     ... on Human {
       homePlanet
     }
   }
}

When we parse the selection set of the `hero` field, we parse the selection set
twice: once for the `Droid` object type, which would be passed a selection set
containing the field(s) defined in the `Droid` object type and similarly once
for the 'Human' object type. The result of the interface selection set parsing
would then be the results of the parsing of the object types when passed their
corresponding flattened selection sets and the results of the parsing of the
interface fields.

After we parse the above GraphQL query, we get a selection set containing
the interface fields and the selection sets of the objects that were queried
in the GraphQL query. Since, we have the selection sets of the objects that
were being queried, we can convert them into inline fragments resembling
the original query and then query the remote schema with the newly
constructed query.
-}</span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="hs-comment">-- | 'remoteSchemaInterface' returns a output parser for a given 'InterfaceTypeDefinition'.</span><span>
</span><span id="line-716"></span><span class="hs-comment">--   Also check Note [Querying remote schema interfaces]</span><span>
</span><span id="line-717"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaInterface"><span class="hs-identifier hs-type">remoteSchemaInterface</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-718"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112296"><span class="annot"><a href="#local-6989586621688112296"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112295"><span class="annot"><a href="#local-6989586621688112295"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112294"><span class="annot"><a href="#local-6989586621688112294"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-719"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112296"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112295"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112294"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-720"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-721"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.InterfaceTypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-722"></span><span>  </span><span class="annot"><a href="#local-6989586621688112295"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112294"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span id="remoteSchemaInterface"><span class="annot"><span class="annottext">remoteSchemaInterface :: RemoteSchemaIntrospection
-&gt; InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaInterface"><span class="hs-identifier hs-var hs-var">remoteSchemaInterface</span></a></span></span><span> </span><span id="local-6989586621688111814"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111814"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span id="local-6989586621688111813"><span class="annot"><span class="annottext">defn :: InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111813"><span class="hs-identifier hs-var">defn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.InterfaceTypeDefinition</span></span><span> </span><span id="local-6989586621688111811"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111811"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688111810"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111810"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621688111809"><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621688111809"><span class="hs-identifier hs-var">_directives</span></a></span></span><span> </span><span id="local-6989586621688111808"><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111808"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621688111807"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688111807"><span class="hs-identifier hs-var">possibleTypes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-724"></span><span>  </span><span class="annot"><span class="annottext">Name
-&gt; InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">P.memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">remoteSchemaObject</span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111813"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-725"></span><span>    </span><span id="local-6989586621688111806"><span class="annot"><span class="annottext">[FieldParser n (Field NoFragments RemoteSchemaVariable)]
</span><a href="#local-6989586621688111806"><span class="hs-identifier hs-var">subFieldParsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition
 -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable)))
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; m [FieldParser n (Field NoFragments RemoteSchemaVariable)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromDefinition"><span class="hs-identifier hs-var">remoteFieldFromDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111814"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111810"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111808"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-726"></span><span>    </span><span id="local-6989586621688111805"><span class="annot"><span class="annottext">[Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111805"><span class="hs-identifier hs-var">objs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Name
 -&gt; m (Parser
         'Output n (Name, [Field NoFragments RemoteSchemaVariable])))
-&gt; [Name]
-&gt; m [Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; (Name
    -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Name
-&gt; m (Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable]))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; (Name
    -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Name
-&gt; m (Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable]))
</span><a href="Hasura.GraphQL.Schema.Remote.html#getObjectParser"><span class="hs-identifier hs-var">getObjectParser</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111814"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111803"><span class="hs-identifier hs-var">getObject</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688111807"><span class="hs-identifier hs-var">possibleTypes</span></a></span><span>
</span><span id="line-727"></span><span>    </span><span class="hs-comment">-- In the Draft GraphQL spec (&gt; June 2018), interfaces can themselves</span><span>
</span><span id="line-728"></span><span>    </span><span class="hs-comment">-- implement superinterfaces.  In the future, we may need to support this</span><span>
</span><span id="line-729"></span><span>    </span><span class="hs-comment">-- here.</span><span>
</span><span id="line-730"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FieldParser n (Field NoFragments RemoteSchemaVariable)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (Field NoFragments RemoteSchemaVariable)]
</span><a href="#local-6989586621688111806"><span class="hs-identifier hs-var">subFieldParsers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-731"></span><span>      </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;List of fields cannot be empty for interface &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111810"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-732"></span><span>    </span><span class="hs-comment">-- TODO: another way to obtain 'possibleTypes' is to lookup all the object</span><span>
</span><span id="line-733"></span><span>    </span><span class="hs-comment">-- types in the schema document that claim to implement this interface.  We</span><span>
</span><span id="line-734"></span><span>    </span><span class="hs-comment">-- should have a check that expresses that that collection of objects is equal</span><span>
</span><span id="line-735"></span><span>    </span><span class="hs-comment">-- to 'possibleTypes'.</span><span>
</span><span id="line-736"></span><span>    </span><span id="local-6989586621688111800"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111800"><span class="hs-identifier hs-var">typename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111810"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-737"></span><span>    </span><span class="annot"><span class="annottext">Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
 -&gt; m (Parser
         'Output n (SelectionSet NoFragments RemoteSchemaVariable)))
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (Field NoFragments RemoteSchemaVariable)]
-&gt; [Parser
      'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; Parser
     'Output n [(Name, [Field NoFragments RemoteSchemaVariable])]
forall (n :: * -&gt; *) (t :: * -&gt; *) a b.
(MonadParse n, Traversable t) =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser n a]
-&gt; t (Parser 'Output n b)
-&gt; Parser 'Output n (t b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSetInterface"><span class="hs-identifier hs-var">P.selectionSetInterface</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111800"><span class="hs-identifier hs-var">typename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111811"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (Field NoFragments RemoteSchemaVariable)]
</span><a href="#local-6989586621688111806"><span class="hs-identifier hs-var">subFieldParsers</span></a></span><span> </span><span class="annot"><span class="annottext">[Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111805"><span class="hs-identifier hs-var">objs</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n [(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; ([(Name, [Field NoFragments RemoteSchemaVariable])]
    -&gt; SelectionSet NoFragments RemoteSchemaVariable)
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111798"><span class="hs-identifier hs-var">constructInterfaceSelectionSet</span></a></span><span>
</span><span id="line-738"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-739"></span><span>    </span><span class="annot"><a href="#local-6989586621688111803"><span class="hs-identifier hs-type">getObject</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112295"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>    </span><span id="local-6989586621688111803"><span class="annot"><span class="annottext">getObject :: Name -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111803"><span class="hs-identifier hs-var hs-var">getObject</span></a></span></span><span> </span><span id="local-6989586621688111797"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111797"><span class="hs-identifier hs-var">objectName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-741"></span><span>      </span><span class="annot"><span class="annottext">Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupObject"><span class="hs-identifier hs-var">lookupObject</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111814"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111797"><span class="hs-identifier hs-var">objectName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
 -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-742"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe
     (InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupInterface"><span class="hs-identifier hs-var">lookupInterface</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111814"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111797"><span class="hs-identifier hs-var">objectName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-743"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-744"></span><span>            </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-745"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not find type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111797"><span class="hs-identifier hs-var">objectName</span></a></span><span>
</span><span id="line-746"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;, which is defined as a member type of Interface &quot;</span></span><span>
</span><span id="line-747"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111810"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-748"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-749"></span><span>            </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-750"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Interface type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111810"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-751"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; can only include object types. It cannot include &quot;</span></span><span>
</span><span id="line-752"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111797"><span class="hs-identifier hs-var">objectName</span></a></span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span>    </span><span class="hs-comment">-- 'constructInterfaceQuery' constructs a remote interface query.</span><span>
</span><span id="line-755"></span><span>    </span><span class="annot"><a href="#local-6989586621688111798"><span class="hs-identifier hs-type">constructInterfaceSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-756"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-757"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.SelectionSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span>
</span><span id="line-758"></span><span>    </span><span id="local-6989586621688111798"><span class="annot"><span class="annottext">constructInterfaceSelectionSet :: [(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111798"><span class="hs-identifier hs-var hs-var">constructInterfaceSelectionSet</span></a></span></span><span> </span><span id="local-6989586621688111796"><span class="annot"><span class="annottext">[(Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111796"><span class="hs-identifier hs-var">objNameAndFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-759"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- common interface fields that exist in every</span><span>
</span><span id="line-760"></span><span>          </span><span class="hs-comment">-- selection set provided</span><span>
</span><span id="line-761"></span><span>          </span><span class="hs-comment">-- #1 of Note [Querying remote schema Interfaces]</span><span>
</span><span id="line-762"></span><span>          </span><span id="local-6989586621688111795"><span class="annot"><span class="annottext">commonInterfaceFields :: [Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111795"><span class="hs-identifier hs-var hs-var">commonInterfaceFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-763"></span><span>            </span><span class="annot"><span class="annottext">InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
forall k v. InsOrdHashMap k v -&gt; [v]
</span><span class="hs-identifier hs-var">OMap.elems</span></span><span> </span><span class="annot"><span class="annottext">(InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
 -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-764"></span><span>              </span><span class="annot"><span class="annottext">(NESeq (Field NoFragments RemoteSchemaVariable)
 -&gt; Maybe (Field NoFragments RemoteSchemaVariable))
-&gt; InsOrdHashMap
     Name (NESeq (Field NoFragments RemoteSchemaVariable))
-&gt; InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
forall v1 v2 k.
(v1 -&gt; Maybe v2) -&gt; InsOrdHashMap k v1 -&gt; InsOrdHashMap k v2
</span><span class="hs-identifier hs-var">OMap.mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
-&gt; Maybe (Field NoFragments RemoteSchemaVariable)
forall a. Eq a =&gt; [a] -&gt; Maybe a
</span><a href="#local-6989586621688111792"><span class="hs-identifier hs-var">allTheSame</span></a></span><span> </span><span class="annot"><span class="annottext">([Field NoFragments RemoteSchemaVariable]
 -&gt; Maybe (Field NoFragments RemoteSchemaVariable))
-&gt; (NESeq (Field NoFragments RemoteSchemaVariable)
    -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; NESeq (Field NoFragments RemoteSchemaVariable)
-&gt; Maybe (Field NoFragments RemoteSchemaVariable)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NESeq (Field NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(InsOrdHashMap
   Name (NESeq (Field NoFragments RemoteSchemaVariable))
 -&gt; InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable))
-&gt; InsOrdHashMap
     Name (NESeq (Field NoFragments RemoteSchemaVariable))
-&gt; InsOrdHashMap Name (Field NoFragments RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-765"></span><span>                </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable -&gt; Name)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; InsOrdHashMap
     Name (NESeq (Field NoFragments RemoteSchemaVariable))
forall k (t :: * -&gt; *) v.
(Eq k, Hashable k, Foldable t, Functor t) =&gt;
(v -&gt; k) -&gt; t v -&gt; InsOrdHashMap k (NESeq v)
</span><a href="Data.HashMap.Strict.InsOrd.Extended.html#groupListWith"><span class="hs-identifier hs-var">OMap.groupListWith</span></a></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable -&gt; Name
forall (frag :: * -&gt; *) var. Field frag var -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fName</span></span><span> </span><span class="annot"><span class="annottext">([Field NoFragments RemoteSchemaVariable]
 -&gt; InsOrdHashMap
      Name (NESeq (Field NoFragments RemoteSchemaVariable)))
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; InsOrdHashMap
     Name (NESeq (Field NoFragments RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-766"></span><span>                  </span><span class="annot"><span class="annottext">((Name, [Field NoFragments RemoteSchemaVariable])
 -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; [(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; [Field NoFragments RemoteSchemaVariable]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable -&gt; Bool)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; [Field NoFragments RemoteSchemaVariable]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688111789"><span class="hs-identifier hs-var">interfaceFieldNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool)
-&gt; (Field NoFragments RemoteSchemaVariable -&gt; Name)
-&gt; Field NoFragments RemoteSchemaVariable
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable -&gt; Name
forall (frag :: * -&gt; *) var. Field frag var -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fName</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Field NoFragments RemoteSchemaVariable]
 -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; ((Name, [Field NoFragments RemoteSchemaVariable])
    -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; (Name, [Field NoFragments RemoteSchemaVariable])
-&gt; [Field NoFragments RemoteSchemaVariable]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name, [Field NoFragments RemoteSchemaVariable])
-&gt; [Field NoFragments RemoteSchemaVariable]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Name, [Field NoFragments RemoteSchemaVariable])]
 -&gt; [Field NoFragments RemoteSchemaVariable])
-&gt; [(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; [Field NoFragments RemoteSchemaVariable]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-767"></span><span>                    </span><span class="annot"><span class="annottext">[(Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111796"><span class="hs-identifier hs-var">objNameAndFields</span></a></span><span>
</span><span id="line-768"></span><span>
</span><span id="line-769"></span><span>          </span><span id="local-6989586621688111789"><span class="annot"><span class="annottext">interfaceFieldNames :: [Name]
</span><a href="#local-6989586621688111789"><span class="hs-identifier hs-var hs-var">interfaceFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name)
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111808"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-770"></span><span>
</span><span id="line-771"></span><span>          </span><span id="local-6989586621688111792"><span class="annot"><span class="annottext">allTheSame :: [a] -&gt; Maybe a
</span><a href="#local-6989586621688111792"><span class="hs-identifier hs-var hs-var">allTheSame</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688111788"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621688111788"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621688111787"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621688111787"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Bool) -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621688111788"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621688111787"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621688111788"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-772"></span><span>          </span><span class="annot"><a href="#local-6989586621688111792"><span class="hs-identifier hs-var">allTheSame</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-773"></span><span>
</span><span id="line-774"></span><span>          </span><span class="hs-comment">-- #2 of Note [Querying remote schema interface fields]</span><span>
</span><span id="line-775"></span><span>          </span><span id="local-6989586621688111786"><span class="annot"><span class="annottext">nonCommonInterfaceFields :: SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111786"><span class="hs-identifier hs-var hs-var">nonCommonInterfaceFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-776"></span><span>            </span><span class="annot"><span class="annottext">[Maybe (Selection NoFragments RemoteSchemaVariable)]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe (Selection NoFragments RemoteSchemaVariable)]
 -&gt; SelectionSet NoFragments RemoteSchemaVariable)
-&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-777"></span><span>              </span><span class="annot"><span class="annottext">(((Name, [Field NoFragments RemoteSchemaVariable])
  -&gt; Maybe (Selection NoFragments RemoteSchemaVariable))
 -&gt; [(Name, [Field NoFragments RemoteSchemaVariable])]
 -&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)])
-&gt; [(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; ((Name, [Field NoFragments RemoteSchemaVariable])
    -&gt; Maybe (Selection NoFragments RemoteSchemaVariable))
-&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((Name, [Field NoFragments RemoteSchemaVariable])
 -&gt; Maybe (Selection NoFragments RemoteSchemaVariable))
-&gt; [(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111796"><span class="hs-identifier hs-var">objNameAndFields</span></a></span><span> </span><span class="annot"><span class="annottext">(((Name, [Field NoFragments RemoteSchemaVariable])
  -&gt; Maybe (Selection NoFragments RemoteSchemaVariable))
 -&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)])
-&gt; ((Name, [Field NoFragments RemoteSchemaVariable])
    -&gt; Maybe (Selection NoFragments RemoteSchemaVariable))
-&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688111784"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111784"><span class="hs-identifier hs-var">objName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688111783"><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111783"><span class="hs-identifier hs-var">objFields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-778"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111782"><span class="annot"><span class="annottext">nonCommonFields :: [Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111782"><span class="hs-identifier hs-var hs-var">nonCommonFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable -&gt; Bool)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; [Field NoFragments RemoteSchemaVariable]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; (Field NoFragments RemoteSchemaVariable -&gt; Bool)
-&gt; Field NoFragments RemoteSchemaVariable
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable
 -&gt; [Field NoFragments RemoteSchemaVariable] -&gt; Bool)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; Field NoFragments RemoteSchemaVariable
-&gt; Bool
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
-&gt; [Field NoFragments RemoteSchemaVariable] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111795"><span class="hs-identifier hs-var">commonInterfaceFields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111783"><span class="hs-identifier hs-var">objFields</span></a></span><span>
</span><span id="line-779"></span><span>                 </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Name, SelectionSet NoFragments RemoteSchemaVariable)
-&gt; Maybe (Selection NoFragments RemoteSchemaVariable)
forall (frag :: * -&gt; *) var.
(Name, [Selection frag var]) -&gt; Maybe (Selection frag var)
</span><a href="#local-6989586621688111780"><span class="hs-identifier hs-var">mkObjInlineFragment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111784"><span class="hs-identifier hs-var">objName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable
 -&gt; Selection NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
-&gt; Selection NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var. Field frag var -&gt; Selection frag var
</span><span class="hs-identifier hs-var">G.SelectionField</span></span><span> </span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111782"><span class="hs-identifier hs-var">nonCommonFields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span>
</span><span id="line-781"></span><span>          </span><span class="hs-comment">-- helper function for #4 of Note [Querying remote schema interface fields]</span><span>
</span><span id="line-782"></span><span>          </span><span id="local-6989586621688111780"><span class="annot"><span class="annottext">mkObjInlineFragment :: (Name, [Selection frag var]) -&gt; Maybe (Selection frag var)
</span><a href="#local-6989586621688111780"><span class="hs-identifier hs-var hs-var">mkObjInlineFragment</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Selection frag var)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-783"></span><span>          </span><span class="annot"><a href="#local-6989586621688111780"><span class="hs-identifier hs-var">mkObjInlineFragment</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688111779"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111779"><span class="hs-identifier hs-var">objName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688111778"><span class="annot"><span class="annottext">[Selection frag var]
</span><a href="#local-6989586621688111778"><span class="hs-identifier hs-var">selSet</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-784"></span><span>            </span><span class="annot"><span class="annottext">Selection frag var -&gt; Maybe (Selection frag var)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Selection frag var -&gt; Maybe (Selection frag var))
-&gt; Selection frag var -&gt; Maybe (Selection frag var)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-785"></span><span>              </span><span class="annot"><span class="annottext">InlineFragment frag var -&gt; Selection frag var
forall (frag :: * -&gt; *) var.
InlineFragment frag var -&gt; Selection frag var
</span><span class="hs-identifier hs-var">G.SelectionInlineFragment</span></span><span> </span><span class="annot"><span class="annottext">(InlineFragment frag var -&gt; Selection frag var)
-&gt; InlineFragment frag var -&gt; Selection frag var
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-786"></span><span>                </span><span class="annot"><span class="annottext">Maybe Name
-&gt; [Directive var]
-&gt; [Selection frag var]
-&gt; InlineFragment frag var
forall (frag :: * -&gt; *) var.
Maybe Name
-&gt; [Directive var]
-&gt; SelectionSet frag var
-&gt; InlineFragment frag var
</span><span class="hs-identifier hs-var">G.InlineFragment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111779"><span class="hs-identifier hs-var">objName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Directive var]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">[Selection frag var]
</span><a href="#local-6989586621688111778"><span class="hs-identifier hs-var">selSet</span></a></span><span>
</span><span id="line-787"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-comment">-- #5 of Note [Querying remote schema interface fields]</span><span>
</span><span id="line-788"></span><span>          </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable
 -&gt; Selection NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
-&gt; Selection NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var. Field frag var -&gt; Selection frag var
</span><span class="hs-identifier hs-var">G.SelectionField</span></span><span> </span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111795"><span class="hs-identifier hs-var">commonInterfaceFields</span></a></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111786"><span class="hs-identifier hs-var">nonCommonInterfaceFields</span></a></span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span class="hs-comment">-- | 'remoteSchemaUnion' returns a output parser for a given 'UnionTypeDefinition'.</span><span>
</span><span id="line-791"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaUnion"><span class="hs-identifier hs-type">remoteSchemaUnion</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-792"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112183"><span class="annot"><a href="#local-6989586621688112183"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112182"><span class="annot"><a href="#local-6989586621688112182"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112181"><span class="annot"><a href="#local-6989586621688112181"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-793"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112183"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112181"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-794"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-795"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.UnionTypeDefinition</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-796"></span><span>  </span><span class="annot"><a href="#local-6989586621688112182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112181"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span id="remoteSchemaUnion"><span class="annot"><span class="annottext">remoteSchemaUnion :: RemoteSchemaIntrospection
-&gt; UnionTypeDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaUnion"><span class="hs-identifier hs-var hs-var">remoteSchemaUnion</span></a></span></span><span> </span><span id="local-6989586621688111776"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111776"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span id="local-6989586621688111775"><span class="annot"><span class="annottext">defn :: UnionTypeDefinition
</span><a href="#local-6989586621688111775"><span class="hs-identifier hs-var">defn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.UnionTypeDefinition</span></span><span> </span><span id="local-6989586621688111773"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111773"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688111772"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111772"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621688111771"><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621688111771"><span class="hs-identifier hs-var">_directives</span></a></span></span><span> </span><span id="local-6989586621688111770"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688111770"><span class="hs-identifier hs-var">objectNames</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-798"></span><span>  </span><span class="annot"><span class="annottext">Name
-&gt; UnionTypeDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">P.memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">remoteSchemaObject</span><span> </span><span class="annot"><span class="annottext">UnionTypeDefinition
</span><a href="#local-6989586621688111775"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-799"></span><span>    </span><span id="local-6989586621688111769"><span class="annot"><span class="annottext">[Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111769"><span class="hs-identifier hs-var">objs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Name
 -&gt; m (Parser
         'Output n (Name, [Field NoFragments RemoteSchemaVariable])))
-&gt; [Name]
-&gt; m [Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; (Name
    -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Name
-&gt; m (Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable]))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; (Name
    -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Name
-&gt; m (Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable]))
</span><a href="Hasura.GraphQL.Schema.Remote.html#getObjectParser"><span class="hs-identifier hs-var">getObjectParser</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111776"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111768"><span class="hs-identifier hs-var">getObject</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621688111770"><span class="hs-identifier hs-var">objectNames</span></a></span><span>
</span><span id="line-800"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111769"><span class="hs-identifier hs-var">objs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-801"></span><span>      </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;List of member types cannot be empty for union type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111772"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-802"></span><span>    </span><span id="local-6989586621688111767"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111767"><span class="hs-identifier hs-var">typename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111772"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-803"></span><span>    </span><span class="annot"><span class="annottext">Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
 -&gt; m (Parser
         'Output n (SelectionSet NoFragments RemoteSchemaVariable)))
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-804"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [Parser
      'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; Parser
     'Output n [(Name, [Field NoFragments RemoteSchemaVariable])]
forall (n :: * -&gt; *) (t :: * -&gt; *) b.
(MonadParse n, Traversable t) =&gt;
Name
-&gt; Maybe Description
-&gt; t (Parser 'Output n b)
-&gt; Parser 'Output n (t b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSetUnion"><span class="hs-identifier hs-var">P.selectionSetUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111767"><span class="hs-identifier hs-var">typename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111773"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111769"><span class="hs-identifier hs-var">objs</span></a></span><span>
</span><span id="line-805"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Output n [(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; ([(Name, [Field NoFragments RemoteSchemaVariable])]
    -&gt; SelectionSet NoFragments RemoteSchemaVariable)
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688111765"><span class="annot"><span class="annottext">[(Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111765"><span class="hs-identifier hs-var">objNameAndFields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-806"></span><span>                </span><span class="annot"><span class="annottext">[Maybe (Selection NoFragments RemoteSchemaVariable)]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe (Selection NoFragments RemoteSchemaVariable)]
 -&gt; SelectionSet NoFragments RemoteSchemaVariable)
-&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-807"></span><span>                  </span><span class="annot"><span class="annottext">[(Name, [Field NoFragments RemoteSchemaVariable])]
</span><a href="#local-6989586621688111765"><span class="hs-identifier hs-var">objNameAndFields</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Field NoFragments RemoteSchemaVariable])]
-&gt; ((Name, [Field NoFragments RemoteSchemaVariable])
    -&gt; Maybe (Selection NoFragments RemoteSchemaVariable))
-&gt; [Maybe (Selection NoFragments RemoteSchemaVariable)]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688111764"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111764"><span class="hs-identifier hs-var">objName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688111763"><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111763"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-808"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111763"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-809"></span><span>                      </span><span class="hs-comment">-- The return value obtained from the parsing of a union selection set</span><span>
</span><span id="line-810"></span><span>                      </span><span class="hs-comment">-- specifies, for each object in the union type, a fragment-free</span><span>
</span><span id="line-811"></span><span>                      </span><span class="hs-comment">-- selection set for that object type. In particular, if, for a given</span><span>
</span><span id="line-812"></span><span>                      </span><span class="hs-comment">-- object type, the selection set passed to the union type did not</span><span>
</span><span id="line-813"></span><span>                      </span><span class="hs-comment">-- specify any fields for that object type (i.e. if no inline fragment</span><span>
</span><span id="line-814"></span><span>                      </span><span class="hs-comment">-- applied to that object), the selection set resulting from the parsing</span><span>
</span><span id="line-815"></span><span>                      </span><span class="hs-comment">-- through that object type would be empty, i.e. []. We exclude such</span><span>
</span><span id="line-816"></span><span>                      </span><span class="hs-comment">-- object types from the reconstructed selection set for the union</span><span>
</span><span id="line-817"></span><span>                      </span><span class="hs-comment">-- type, as selection sets cannot be empty.</span><span>
</span><span id="line-818"></span><span>                      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Selection NoFragments RemoteSchemaVariable)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-819"></span><span>                      </span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-820"></span><span>                        </span><span class="annot"><span class="annottext">Selection NoFragments RemoteSchemaVariable
-&gt; Maybe (Selection NoFragments RemoteSchemaVariable)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span>
</span><span id="line-821"></span><span>                          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">InlineFragment NoFragments RemoteSchemaVariable
-&gt; Selection NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var.
InlineFragment frag var -&gt; Selection frag var
</span><span class="hs-identifier hs-var">G.SelectionInlineFragment</span></span><span> </span><span class="annot"><span class="annottext">(InlineFragment NoFragments RemoteSchemaVariable
 -&gt; Selection NoFragments RemoteSchemaVariable)
-&gt; InlineFragment NoFragments RemoteSchemaVariable
-&gt; Selection NoFragments RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-822"></span><span>                              </span><span class="annot"><span class="annottext">Maybe Name
-&gt; [Directive RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; InlineFragment NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var.
Maybe Name
-&gt; [Directive var]
-&gt; SelectionSet frag var
-&gt; InlineFragment frag var
</span><span class="hs-identifier hs-var">G.InlineFragment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111764"><span class="hs-identifier hs-var">objName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Directive RemoteSchemaVariable]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">(SelectionSet NoFragments RemoteSchemaVariable
 -&gt; InlineFragment NoFragments RemoteSchemaVariable)
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; InlineFragment NoFragments RemoteSchemaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable
 -&gt; Selection NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
-&gt; Selection NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var. Field frag var -&gt; Selection frag var
</span><span class="hs-identifier hs-var">G.SelectionField</span></span><span> </span><span class="annot"><span class="annottext">[Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111763"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-823"></span><span>                          </span><span class="hs-special">)</span><span>
</span><span id="line-824"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-826"></span><span>    </span><span class="annot"><a href="#local-6989586621688111768"><span class="hs-identifier hs-type">getObject</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-827"></span><span>    </span><span id="local-6989586621688111768"><span class="annot"><span class="annottext">getObject :: Name -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111768"><span class="hs-identifier hs-var hs-var">getObject</span></a></span></span><span> </span><span id="local-6989586621688111762"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111762"><span class="hs-identifier hs-var">objectName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-828"></span><span>      </span><span class="annot"><span class="annottext">Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupObject"><span class="hs-identifier hs-var">lookupObject</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111776"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111762"><span class="hs-identifier hs-var">objectName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
 -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-829"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe
     (InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupInterface"><span class="hs-identifier hs-var">lookupInterface</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111776"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111762"><span class="hs-identifier hs-var">objectName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-830"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-831"></span><span>            </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-832"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not find type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111762"><span class="hs-identifier hs-var">objectName</span></a></span><span>
</span><span id="line-833"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;, which is defined as a member type of Union &quot;</span></span><span>
</span><span id="line-834"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111772"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-835"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-836"></span><span>            </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Text
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-837"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Union type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111772"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-838"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; can only include object types. It cannot include &quot;</span></span><span>
</span><span id="line-839"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#squote"><span class="hs-identifier hs-var">squote</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111762"><span class="hs-identifier hs-var">objectName</span></a></span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromDefinition"><span class="hs-identifier hs-type">remoteFieldFromDefinition</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-842"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112465"><span class="annot"><a href="#local-6989586621688112465"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112464"><span class="annot"><a href="#local-6989586621688112464"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112463"><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-843"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112465"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112464"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-844"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-845"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-846"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-847"></span><span>  </span><span class="annot"><a href="#local-6989586621688112464"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span id="remoteFieldFromDefinition"><span class="annot"><span class="annottext">remoteFieldFromDefinition :: RemoteSchemaIntrospection
-&gt; Name
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromDefinition"><span class="hs-identifier hs-var hs-var">remoteFieldFromDefinition</span></a></span></span><span> </span><span id="local-6989586621688111761"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111761"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span id="local-6989586621688111760"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111760"><span class="hs-identifier hs-var">parentTypeName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span id="local-6989586621688111758"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111758"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688111757"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111757"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621688111756"><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111756"><span class="hs-identifier hs-var">argsDefinition</span></a></span></span><span> </span><span id="local-6989586621688111755"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111755"><span class="hs-identifier hs-var">gType</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Directive Void]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-849"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688112197"><span class="annot"><a href="#local-6989586621688111754"><span class="hs-identifier hs-type">addNullableList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112197"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112197"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-850"></span><span>      </span><span id="local-6989586621688111754"><span class="annot"><span class="annottext">addNullableList :: FieldParser n a -&gt; FieldParser n a
</span><a href="#local-6989586621688111754"><span class="hs-identifier hs-var hs-var">addNullableList</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Definition"><span class="hs-identifier hs-type">Definition</span></a></span><span> </span><span id="local-6989586621688111752"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111752"><span class="hs-identifier hs-var">name'</span></a></span></span><span> </span><span id="local-6989586621688111751"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111751"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#FieldInfo"><span class="hs-identifier hs-type">FieldInfo</span></a></span><span> </span><span id="local-6989586621688111749"><span class="annot"><span class="annottext">[Definition InputFieldInfo]
</span><a href="#local-6989586621688111749"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621688111748"><span class="annot"><span class="annottext">Type k
</span><a href="#local-6989586621688111748"><span class="hs-identifier hs-var">typ</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111747"><span class="annot"><span class="annottext">Field NoFragments Variable -&gt; n a
</span><a href="#local-6989586621688111747"><span class="hs-identifier hs-var">parser</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-851"></span><span>        </span><span class="annot"><span class="annottext">Definition FieldInfo
-&gt; (Field NoFragments Variable -&gt; n a) -&gt; FieldParser n a
forall (m :: * -&gt; *) a.
Definition FieldInfo
-&gt; (Field NoFragments Variable -&gt; m a) -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-var">P.FieldParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Description -&gt; FieldInfo -&gt; Definition FieldInfo
forall a. Name -&gt; Maybe Description -&gt; a -&gt; Definition a
</span><a href="Hasura.GraphQL.Parser.Schema.html#Definition"><span class="hs-identifier hs-var">Definition</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111752"><span class="hs-identifier hs-var">name'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111751"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Definition InputFieldInfo] -&gt; Type k -&gt; FieldInfo
forall (k :: Kind).
('Output &lt;: k) =&gt;
[Definition InputFieldInfo] -&gt; Type k -&gt; FieldInfo
</span><a href="Hasura.GraphQL.Parser.Schema.html#FieldInfo"><span class="hs-identifier hs-var">FieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Definition InputFieldInfo]
</span><a href="#local-6989586621688111749"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability -&gt; Type k -&gt; Type k
forall (k :: Kind). Nullability -&gt; Type k -&gt; Type k
</span><a href="Hasura.GraphQL.Parser.Schema.html#TList"><span class="hs-identifier hs-var">TList</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="Hasura.GraphQL.Parser.Schema.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Type k
</span><a href="#local-6989586621688111748"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Field NoFragments Variable -&gt; n a
</span><a href="#local-6989586621688111747"><span class="hs-identifier hs-var">parser</span></a></span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span>      </span><span id="local-6989586621688111744"><span class="annot"><a href="#local-6989586621688111743"><span class="hs-identifier hs-type">addNonNullableList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111744"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111744"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-854"></span><span>      </span><span id="local-6989586621688111743"><span class="annot"><span class="annottext">addNonNullableList :: FieldParser n a -&gt; FieldParser n a
</span><a href="#local-6989586621688111743"><span class="hs-identifier hs-var hs-var">addNonNullableList</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Definition"><span class="hs-identifier hs-type">Definition</span></a></span><span> </span><span id="local-6989586621688111742"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111742"><span class="hs-identifier hs-var">name'</span></a></span></span><span> </span><span id="local-6989586621688111741"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111741"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#FieldInfo"><span class="hs-identifier hs-type">FieldInfo</span></a></span><span> </span><span id="local-6989586621688111740"><span class="annot"><span class="annottext">[Definition InputFieldInfo]
</span><a href="#local-6989586621688111740"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621688111739"><span class="annot"><span class="annottext">Type k
</span><a href="#local-6989586621688111739"><span class="hs-identifier hs-var">typ</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111738"><span class="annot"><span class="annottext">Field NoFragments Variable -&gt; n a
</span><a href="#local-6989586621688111738"><span class="hs-identifier hs-var">parser</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-855"></span><span>        </span><span class="annot"><span class="annottext">Definition FieldInfo
-&gt; (Field NoFragments Variable -&gt; n a) -&gt; FieldParser n a
forall (m :: * -&gt; *) a.
Definition FieldInfo
-&gt; (Field NoFragments Variable -&gt; m a) -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-var">P.FieldParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Description -&gt; FieldInfo -&gt; Definition FieldInfo
forall a. Name -&gt; Maybe Description -&gt; a -&gt; Definition a
</span><a href="Hasura.GraphQL.Parser.Schema.html#Definition"><span class="hs-identifier hs-var">Definition</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111742"><span class="hs-identifier hs-var">name'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111741"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Definition InputFieldInfo] -&gt; Type k -&gt; FieldInfo
forall (k :: Kind).
('Output &lt;: k) =&gt;
[Definition InputFieldInfo] -&gt; Type k -&gt; FieldInfo
</span><a href="Hasura.GraphQL.Parser.Schema.html#FieldInfo"><span class="hs-identifier hs-var">FieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Definition InputFieldInfo]
</span><a href="#local-6989586621688111740"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability -&gt; Type k -&gt; Type k
forall (k :: Kind). Nullability -&gt; Type k -&gt; Type k
</span><a href="Hasura.GraphQL.Parser.Schema.html#TList"><span class="hs-identifier hs-var">TList</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="Hasura.GraphQL.Parser.Schema.html#NonNullable"><span class="hs-identifier hs-var">NonNullable</span></a></span><span> </span><span class="annot"><span class="annottext">Type k
</span><a href="#local-6989586621688111739"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Field NoFragments Variable -&gt; n a
</span><a href="#local-6989586621688111738"><span class="hs-identifier hs-var">parser</span></a></span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span>      </span><span class="hs-comment">-- TODO add directives, deprecation</span><span>
</span><span id="line-858"></span><span>      </span><span class="annot"><a href="#local-6989586621688111737"><span class="hs-identifier hs-type">convertType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.GType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112464"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112463"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>      </span><span id="local-6989586621688111737"><span class="annot"><span class="annottext">convertType :: GType -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="#local-6989586621688111737"><span class="hs-identifier hs-var hs-var">convertType</span></a></span></span><span> </span><span id="local-6989586621688111736"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111736"><span class="hs-identifier hs-var">gType'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-860"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111736"><span class="hs-identifier hs-var">gType'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-861"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111735"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111735"><span class="hs-identifier hs-var">fieldTypeName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-862"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall (m :: * -&gt; *) a. FieldParser m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullableField"><span class="hs-identifier hs-var">P.nullableField</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (Field NoFragments RemoteSchemaVariable)
 -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; Name
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; Name
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromName"><span class="hs-identifier hs-var">remoteFieldFromName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111761"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111760"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111757"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111758"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111735"><span class="hs-identifier hs-var">fieldTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111756"><span class="hs-identifier hs-var">argsDefinition</span></a></span><span>
</span><span id="line-863"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111732"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111732"><span class="hs-identifier hs-var">gType''</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-864"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall a. FieldParser n a -&gt; FieldParser n a
</span><a href="#local-6989586621688111754"><span class="hs-identifier hs-var">addNullableList</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (Field NoFragments RemoteSchemaVariable)
 -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="#local-6989586621688111737"><span class="hs-identifier hs-var">convertType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111732"><span class="hs-identifier hs-var">gType''</span></a></span><span>
</span><span id="line-865"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111731"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111731"><span class="hs-identifier hs-var">fieldTypeName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-866"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall (m :: * -&gt; *) a. FieldParser m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableField"><span class="hs-identifier hs-var">P.nonNullableField</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (Field NoFragments RemoteSchemaVariable)
 -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; Name
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; Name
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromName"><span class="hs-identifier hs-var">remoteFieldFromName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111761"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111760"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111757"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111758"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111731"><span class="hs-identifier hs-var">fieldTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111756"><span class="hs-identifier hs-var">argsDefinition</span></a></span><span>
</span><span id="line-867"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688111729"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111729"><span class="hs-identifier hs-var">gType''</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-868"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall a. FieldParser n a -&gt; FieldParser n a
</span><a href="#local-6989586621688111743"><span class="hs-identifier hs-var">addNonNullableList</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (Field NoFragments RemoteSchemaVariable)
 -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GType -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="#local-6989586621688111737"><span class="hs-identifier hs-var">convertType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111729"><span class="hs-identifier hs-var">gType''</span></a></span><span>
</span><span id="line-869"></span><span>  </span><span class="annot"><span class="annottext">GType -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="#local-6989586621688111737"><span class="hs-identifier hs-var">convertType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688111755"><span class="hs-identifier hs-var">gType</span></a></span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span class="hs-comment">-- | 'remoteFieldFromName' accepts a GraphQL name and searches for its definition</span><span>
</span><span id="line-872"></span><span class="hs-comment">--   in the 'RemoteSchemaIntrospection'.</span><span>
</span><span id="line-873"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromName"><span class="hs-identifier hs-type">remoteFieldFromName</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-874"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112200"><span class="annot"><a href="#local-6989586621688112200"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112199"><span class="annot"><a href="#local-6989586621688112199"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112198"><span class="annot"><a href="#local-6989586621688112198"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-875"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112200"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112199"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112198"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-876"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-877"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-878"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-879"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-880"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-881"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.ArgumentsDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-882"></span><span>  </span><span class="annot"><a href="#local-6989586621688112199"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112198"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span id="remoteFieldFromName"><span class="annot"><span class="annottext">remoteFieldFromName :: RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; Name
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldFromName"><span class="hs-identifier hs-var hs-var">remoteFieldFromName</span></a></span></span><span> </span><span id="local-6989586621688111728"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111728"><span class="hs-identifier hs-var">sdoc</span></a></span></span><span> </span><span id="local-6989586621688111727"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111727"><span class="hs-identifier hs-var">parentTypeName</span></a></span></span><span> </span><span id="local-6989586621688111726"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111726"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688111725"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111725"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688111724"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111724"><span class="hs-identifier hs-var">fieldTypeName</span></a></span></span><span> </span><span id="local-6989586621688111723"><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111723"><span class="hs-identifier hs-var">argsDefns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RQL.Types.RemoteSchema.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111728"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111724"><span class="hs-identifier hs-var">fieldTypeName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-885"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable)))
-&gt; Text
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not find type with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Name -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111724"><span class="hs-identifier hs-var">fieldTypeName</span></a></span><span>
</span><span id="line-886"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688111722"><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111722"><span class="hs-identifier hs-var">typeDef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; TypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; TypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteField"><span class="hs-identifier hs-var">remoteField</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111728"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111727"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111726"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111725"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111723"><span class="hs-identifier hs-var">argsDefns</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111722"><span class="hs-identifier hs-var">typeDef</span></a></span><span>
</span><span id="line-887"></span><span>
</span><span id="line-888"></span><span class="hs-comment">-- | 'remoteField' accepts a 'G.TypeDefinition' and will returns a 'FieldParser' for it.</span><span>
</span><span id="line-889"></span><span class="hs-comment">--   Note that the 'G.TypeDefinition' should be of the GraphQL 'Output' kind, when an</span><span>
</span><span id="line-890"></span><span class="hs-comment">--   GraphQL 'Input' kind is provided, then error will be thrown.</span><span>
</span><span id="line-891"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteField"><span class="hs-identifier hs-type">remoteField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-892"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112194"><span class="annot"><a href="#local-6989586621688112194"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112193"><span class="annot"><a href="#local-6989586621688112193"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112192"><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-893"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112194"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112193"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-894"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-895"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-896"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-897"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-898"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.ArgumentsDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-899"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-900"></span><span>  </span><span class="annot"><a href="#local-6989586621688112193"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span id="remoteField"><span class="annot"><span class="annottext">remoteField :: RemoteSchemaIntrospection
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; TypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteField"><span class="hs-identifier hs-var hs-var">remoteField</span></a></span></span><span> </span><span id="local-6989586621688111721"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111721"><span class="hs-identifier hs-var">sdoc</span></a></span></span><span> </span><span id="local-6989586621688111720"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111720"><span class="hs-identifier hs-var">parentTypeName</span></a></span></span><span> </span><span id="local-6989586621688111719"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111719"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688111718"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111718"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688111717"><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111717"><span class="hs-identifier hs-var">argsDefn</span></a></span></span><span> </span><span id="local-6989586621688111716"><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111716"><span class="hs-identifier hs-var">typeDefn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-902"></span><span>  </span><span class="hs-comment">-- TODO add directives</span><span>
</span><span id="line-903"></span><span>  </span><span id="local-6989586621688111715"><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111715"><span class="hs-identifier hs-var">argsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
-&gt; RemoteSchemaIntrospection
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
[RemoteSchemaInputValueDefinition]
-&gt; RemoteSchemaIntrospection
-&gt; m (InputFieldsParser
        n (Altered, HashMap Name (Value RemoteSchemaVariable)))
</span><a href="Hasura.GraphQL.Schema.Remote.html#argumentsParser"><span class="hs-identifier hs-var">argumentsParser</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621688111717"><span class="hs-identifier hs-var">argsDefn</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111721"><span class="hs-identifier hs-var">sdoc</span></a></span><span>
</span><span id="line-904"></span><span>  </span><span id="local-6989586621688111714"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111714"><span class="hs-identifier hs-var">customizeTypename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; MkTypename) -&gt; m MkTypename
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; MkTypename
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-905"></span><span>  </span><span id="local-6989586621688111713"><span class="annot"><span class="annottext">CustomizeRemoteFieldName
</span><a href="#local-6989586621688111713"><span class="hs-identifier hs-var">customizeFieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; CustomizeRemoteFieldName) -&gt; m CustomizeRemoteFieldName
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; CustomizeRemoteFieldName
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-906"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111712"><span class="annot"><span class="annottext">customizedFieldName :: Name
</span><a href="#local-6989586621688111712"><span class="hs-identifier hs-var hs-var">customizedFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CustomizeRemoteFieldName -&gt; Name -&gt; Name -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#runCustomizeRemoteFieldName"><span class="hs-identifier hs-var hs-var">runCustomizeRemoteFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">CustomizeRemoteFieldName
</span><a href="#local-6989586621688111713"><span class="hs-identifier hs-var">customizeFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111720"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111719"><span class="hs-identifier hs-var">fieldName</span></a></span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111716"><span class="hs-identifier hs-var">typeDefn</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-908"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionObject</span></span><span> </span><span id="local-6989586621688111710"><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111710"><span class="hs-identifier hs-var">objTypeDefn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-909"></span><span>      </span><span id="local-6989586621688111709"><span class="annot"><span class="annottext">Parser 'Output n [Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111709"><span class="hs-identifier hs-var">remoteSchemaObjFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaObject"><span class="hs-identifier hs-var">remoteSchemaObject</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111721"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111710"><span class="hs-identifier hs-var">objTypeDefn</span></a></span><span>
</span><span id="line-910"></span><span>      </span><span class="hs-comment">-- converting [Field NoFragments Name] to (SelectionSet NoFragments G.Name)</span><span>
</span><span id="line-911"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111708"><span class="annot"><span class="annottext">remoteSchemaObjSelSet :: Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111708"><span class="hs-identifier hs-var hs-var">remoteSchemaObjSelSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable
 -&gt; Selection NoFragments RemoteSchemaVariable)
-&gt; [Field NoFragments RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Field NoFragments RemoteSchemaVariable
-&gt; Selection NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var. Field frag var -&gt; Selection frag var
</span><span class="hs-identifier hs-var">G.SelectionField</span></span><span> </span><span class="annot"><span class="annottext">([Field NoFragments RemoteSchemaVariable]
 -&gt; SelectionSet NoFragments RemoteSchemaVariable)
-&gt; Parser 'Output n [Field NoFragments RemoteSchemaVariable]
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n [Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111709"><span class="hs-identifier hs-var">remoteSchemaObjFields</span></a></span><span>
</span><span id="line-912"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111708"><span class="hs-identifier hs-var">remoteSchemaObjSelSet</span></a></span><span> </span><span class="annot"><span class="annottext">m (Parser
     'Output n (SelectionSet NoFragments RemoteSchemaVariable))
-&gt; (Parser
      'Output n (SelectionSet NoFragments RemoteSchemaVariable)
    -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111707"><span class="hs-identifier hs-var">mkFieldParserWithSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111712"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111715"><span class="hs-identifier hs-var">argsParser</span></a></span><span>
</span><span id="line-913"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionScalar</span></span><span> </span><span id="local-6989586621688111706"><span class="annot"><span class="annottext">ScalarTypeDefinition
</span><a href="#local-6989586621688111706"><span class="hs-identifier hs-var">scalarTypeDefn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-914"></span><span>      </span><span class="annot"><span class="annottext">FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (Field NoFragments RemoteSchemaVariable)
 -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable)))
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Both n ()
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111705"><span class="hs-identifier hs-var">mkFieldParserWithoutSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111712"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111715"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n ()
 -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; Parser 'Both n ()
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (Altered, Value RemoteSchemaVariable)
-&gt; Parser 'Both n ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Altered, Value RemoteSchemaVariable)
 -&gt; Parser 'Both n ())
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
-&gt; Parser 'Both n ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MkTypename
-&gt; ScalarTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
forall (n :: * -&gt; *).
MonadParse n =&gt;
MkTypename
-&gt; ScalarTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldScalarParser"><span class="hs-identifier hs-var">remoteFieldScalarParser</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111714"><span class="hs-identifier hs-var">customizeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeDefinition
</span><a href="#local-6989586621688111706"><span class="hs-identifier hs-var">scalarTypeDefn</span></a></span><span>
</span><span id="line-915"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionEnum</span></span><span> </span><span id="local-6989586621688111703"><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688111703"><span class="hs-identifier hs-var">enumTypeDefn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-916"></span><span>      </span><span class="annot"><span class="annottext">FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (Field NoFragments RemoteSchemaVariable)
 -&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable)))
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Both n ()
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111705"><span class="hs-identifier hs-var">mkFieldParserWithoutSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111712"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111715"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n ()
 -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; Parser 'Both n ()
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (Altered, Value RemoteSchemaVariable)
-&gt; Parser 'Both n ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Altered, Value RemoteSchemaVariable)
 -&gt; Parser 'Both n ())
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
-&gt; Parser 'Both n ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MkTypename
-&gt; EnumTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
forall (n :: * -&gt; *).
MonadParse n =&gt;
MkTypename
-&gt; EnumTypeDefinition
-&gt; Parser 'Both n (Altered, Value RemoteSchemaVariable)
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteFieldEnumParser"><span class="hs-identifier hs-var">remoteFieldEnumParser</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111714"><span class="hs-identifier hs-var">customizeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">EnumTypeDefinition
</span><a href="#local-6989586621688111703"><span class="hs-identifier hs-var">enumTypeDefn</span></a></span><span>
</span><span id="line-917"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionInterface</span></span><span> </span><span id="local-6989586621688111702"><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111702"><span class="hs-identifier hs-var">ifaceTypeDefn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-918"></span><span>      </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaInterface"><span class="hs-identifier hs-var">remoteSchemaInterface</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111721"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">InterfaceTypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688111702"><span class="hs-identifier hs-var">ifaceTypeDefn</span></a></span><span> </span><span class="annot"><span class="annottext">m (Parser
     'Output n (SelectionSet NoFragments RemoteSchemaVariable))
-&gt; (Parser
      'Output n (SelectionSet NoFragments RemoteSchemaVariable)
    -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111707"><span class="hs-identifier hs-var">mkFieldParserWithSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111712"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111715"><span class="hs-identifier hs-var">argsParser</span></a></span><span>
</span><span id="line-919"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionUnion</span></span><span> </span><span id="local-6989586621688111701"><span class="annot"><span class="annottext">UnionTypeDefinition
</span><a href="#local-6989586621688111701"><span class="hs-identifier hs-var">unionTypeDefn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-920"></span><span>      </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; UnionTypeDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; UnionTypeDefinition
-&gt; m (Parser
        'Output n (SelectionSet NoFragments RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaUnion"><span class="hs-identifier hs-var">remoteSchemaUnion</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111721"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">UnionTypeDefinition
</span><a href="#local-6989586621688111701"><span class="hs-identifier hs-var">unionTypeDefn</span></a></span><span> </span><span class="annot"><span class="annottext">m (Parser
     'Output n (SelectionSet NoFragments RemoteSchemaVariable))
-&gt; (Parser
      'Output n (SelectionSet NoFragments RemoteSchemaVariable)
    -&gt; FieldParser n (Field NoFragments RemoteSchemaVariable))
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111707"><span class="hs-identifier hs-var">mkFieldParserWithSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111712"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111715"><span class="hs-identifier hs-var">argsParser</span></a></span><span>
</span><span id="line-921"></span><span>    </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; m (FieldParser n (Field NoFragments RemoteSchemaVariable))
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected output type, but got input type&quot;</span></span><span>
</span><span id="line-922"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-923"></span><span>    </span><span class="annot"><a href="#local-6989586621688111700"><span class="hs-identifier hs-type">mkField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-924"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-925"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-926"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-927"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.SelectionSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-928"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span>
</span><span id="line-929"></span><span>    </span><span id="local-6989586621688111700"><span class="annot"><span class="annottext">mkField :: Maybe Name
-&gt; Name
-&gt; HashMap Name (Value RemoteSchemaVariable)
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; Field NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111700"><span class="hs-identifier hs-var hs-var">mkField</span></a></span></span><span> </span><span id="local-6989586621688111699"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688111699"><span class="hs-identifier hs-var">alias</span></a></span></span><span> </span><span id="local-6989586621688111698"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111698"><span class="hs-identifier hs-var">customizedFieldName</span></a></span></span><span> </span><span id="local-6989586621688111697"><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111697"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621688111696"><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111696"><span class="hs-identifier hs-var">selSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-930"></span><span>      </span><span class="hs-comment">-- If there's no alias then use customizedFieldName as the alias so the</span><span>
</span><span id="line-931"></span><span>      </span><span class="hs-comment">-- correctly customized field name will be returned from the remote server.</span><span>
</span><span id="line-932"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111695"><span class="annot"><span class="annottext">alias' :: Maybe Name
</span><a href="#local-6989586621688111695"><span class="hs-identifier hs-var hs-var">alias'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688111699"><span class="hs-identifier hs-var">alias</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name -&gt; Maybe Name -&gt; Maybe Name
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111698"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111719"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; Maybe Name -&gt; Maybe Name
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111698"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span>
</span><span id="line-933"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Maybe Name
-&gt; Name
-&gt; HashMap Name (Value RemoteSchemaVariable)
-&gt; [Directive RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; Field NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var.
Maybe Name
-&gt; Name
-&gt; HashMap Name (Value var)
-&gt; [Directive var]
-&gt; SelectionSet frag var
-&gt; Field frag var
</span><span class="hs-identifier hs-var">G.Field</span></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688111695"><span class="hs-identifier hs-var">alias'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111719"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111697"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive RemoteSchemaVariable]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111696"><span class="hs-identifier hs-var">selSet</span></a></span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span>    </span><span class="annot"><a href="#local-6989586621688111705"><span class="hs-identifier hs-type">mkFieldParserWithoutSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-936"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-937"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-938"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Both"><span class="hs-identifier hs-type">Both</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-939"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-940"></span><span>    </span><span id="local-6989586621688111705"><span class="annot"><span class="annottext">mkFieldParserWithoutSelectionSet :: Name
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Both n ()
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111705"><span class="hs-identifier hs-var hs-var">mkFieldParserWithoutSelectionSet</span></a></span></span><span> </span><span id="local-6989586621688111693"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111693"><span class="hs-identifier hs-var">customizedFieldName</span></a></span></span><span> </span><span id="local-6989586621688111692"><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111692"><span class="hs-identifier hs-var">argsParser</span></a></span></span><span> </span><span id="local-6989586621688111691"><span class="annot"><span class="annottext">Parser 'Both n ()
</span><a href="#local-6989586621688111691"><span class="hs-identifier hs-var">outputParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-941"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Both n ()
-&gt; FieldParser
     n
     (Maybe Name, HashMap Name (Value Variable),
      (Altered, HashMap Name (Value RemoteSchemaVariable)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Both m b
-&gt; FieldParser m (Maybe Name, HashMap Name (Value Variable), a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#rawSelection"><span class="hs-identifier hs-var">P.rawSelection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111693"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111718"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111692"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n ()
</span><a href="#local-6989586621688111691"><span class="hs-identifier hs-var">outputParser</span></a></span><span>
</span><span id="line-942"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  (Maybe Name, HashMap Name (Value Variable),
   (Altered, HashMap Name (Value RemoteSchemaVariable)))
-&gt; ((Maybe Name, HashMap Name (Value Variable),
     (Altered, HashMap Name (Value RemoteSchemaVariable)))
    -&gt; Field NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688111689"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688111689"><span class="hs-identifier hs-var">alias</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value Variable)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Altered
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688111688"><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111688"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Name
-&gt; Name
-&gt; HashMap Name (Value RemoteSchemaVariable)
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; Field NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111700"><span class="hs-identifier hs-var">mkField</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688111689"><span class="hs-identifier hs-var">alias</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111693"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111688"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-943"></span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><a href="#local-6989586621688111707"><span class="hs-identifier hs-type">mkFieldParserWithSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-945"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-946"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#Altered"><span class="hs-identifier hs-type">Altered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-947"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-948"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-949"></span><span>    </span><span id="local-6989586621688111707"><span class="annot"><span class="annottext">mkFieldParserWithSelectionSet :: Name
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111707"><span class="hs-identifier hs-var hs-var">mkFieldParserWithSelectionSet</span></a></span></span><span> </span><span id="local-6989586621688111687"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111687"><span class="hs-identifier hs-var">customizedFieldName</span></a></span></span><span> </span><span id="local-6989586621688111686"><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111686"><span class="hs-identifier hs-var">argsParser</span></a></span></span><span> </span><span id="local-6989586621688111685"><span class="annot"><span class="annottext">Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111685"><span class="hs-identifier hs-var">outputParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-950"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n (Altered, HashMap Name (Value RemoteSchemaVariable))
-&gt; Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
-&gt; FieldParser
     n
     (Maybe Name, HashMap Name (Value Variable),
      (Altered, HashMap Name (Value RemoteSchemaVariable)),
      SelectionSet NoFragments RemoteSchemaVariable)
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (Maybe Name, HashMap Name (Value Variable), a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#rawSubselection"><span class="hs-identifier hs-var">P.rawSubselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111687"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688111718"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Altered, HashMap Name (Value RemoteSchemaVariable))
</span><a href="#local-6989586621688111686"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (SelectionSet NoFragments RemoteSchemaVariable)
</span><a href="#local-6989586621688111685"><span class="hs-identifier hs-var">outputParser</span></a></span><span>
</span><span id="line-951"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  (Maybe Name, HashMap Name (Value Variable),
   (Altered, HashMap Name (Value RemoteSchemaVariable)),
   SelectionSet NoFragments RemoteSchemaVariable)
-&gt; ((Maybe Name, HashMap Name (Value Variable),
     (Altered, HashMap Name (Value RemoteSchemaVariable)),
     SelectionSet NoFragments RemoteSchemaVariable)
    -&gt; Field NoFragments RemoteSchemaVariable)
-&gt; FieldParser n (Field NoFragments RemoteSchemaVariable)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688111683"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688111683"><span class="hs-identifier hs-var">alias</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value Variable)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Altered
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688111682"><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111682"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621688111681"><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111681"><span class="hs-identifier hs-var">selSet</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Name
-&gt; Name
-&gt; HashMap Name (Value RemoteSchemaVariable)
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; Field NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111700"><span class="hs-identifier hs-var">mkField</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621688111683"><span class="hs-identifier hs-var">alias</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111687"><span class="hs-identifier hs-var">customizedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621688111682"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
</span><a href="#local-6989586621688111681"><span class="hs-identifier hs-var">selSet</span></a></span><span>
</span><span id="line-952"></span><span>
</span><span id="line-953"></span><span class="hs-comment">-- | helper function to get a parser of an object with it's name</span><span>
</span><span id="line-954"></span><span class="hs-comment">--   This function is called from 'remoteSchemaInterface' and</span><span>
</span><span id="line-955"></span><span class="hs-comment">--   'remoteSchemaObject' functions. Both of these have a slightly</span><span>
</span><span id="line-956"></span><span class="hs-comment">--   different implementation of 'getObject', which is the</span><span>
</span><span id="line-957"></span><span class="hs-comment">--   reason 'getObject' is an argument to this function</span><span>
</span><span id="line-958"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#getObjectParser"><span class="hs-identifier hs-type">getObjectParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-959"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112251"><span class="annot"><a href="#local-6989586621688112251"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112250"><span class="annot"><a href="#local-6989586621688112250"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112249"><span class="annot"><a href="#local-6989586621688112249"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-960"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112251"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112250"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112249"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-961"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-962"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112250"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-963"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-964"></span><span>  </span><span class="annot"><a href="#local-6989586621688112250"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112249"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.NoFragments</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-965"></span><span id="getObjectParser"><span class="annot"><span class="annottext">getObjectParser :: RemoteSchemaIntrospection
-&gt; (Name
    -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition))
-&gt; Name
-&gt; m (Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable]))
</span><a href="Hasura.GraphQL.Schema.Remote.html#getObjectParser"><span class="hs-identifier hs-var hs-var">getObjectParser</span></a></span></span><span> </span><span id="local-6989586621688111680"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111680"><span class="hs-identifier hs-var">schemaDoc</span></a></span></span><span> </span><span id="local-6989586621688111679"><span class="annot"><span class="annottext">Name -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111679"><span class="hs-identifier hs-var">getObject</span></a></span></span><span> </span><span id="local-6989586621688111678"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111678"><span class="hs-identifier hs-var">objName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-966"></span><span>  </span><span id="local-6989586621688111677"><span class="annot"><span class="annottext">Parser 'Output n [Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111677"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteSchemaObject"><span class="hs-identifier hs-var">remoteSchemaObject</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688111680"><span class="hs-identifier hs-var">schemaDoc</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectTypeDefinition RemoteSchemaInputValueDefinition
 -&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable]))
-&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
-&gt; m (Parser 'Output n [Field NoFragments RemoteSchemaVariable])
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688111679"><span class="hs-identifier hs-var">getObject</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111678"><span class="hs-identifier hs-var">objName</span></a></span><span>
</span><span id="line-967"></span><span>  </span><span class="annot"><span class="annottext">Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])
-&gt; m (Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable]))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (Name, [Field NoFragments RemoteSchemaVariable])
 -&gt; m (Parser
         'Output n (Name, [Field NoFragments RemoteSchemaVariable])))
-&gt; Parser
     'Output n (Name, [Field NoFragments RemoteSchemaVariable])
-&gt; m (Parser
        'Output n (Name, [Field NoFragments RemoteSchemaVariable]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111678"><span class="hs-identifier hs-var">objName</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Field NoFragments RemoteSchemaVariable]
 -&gt; (Name, [Field NoFragments RemoteSchemaVariable]))
-&gt; Parser 'Output n [Field NoFragments RemoteSchemaVariable]
-&gt; Parser
     'Output n (Name, [Field NoFragments RemoteSchemaVariable])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n [Field NoFragments RemoteSchemaVariable]
</span><a href="#local-6989586621688111677"><span class="hs-identifier hs-var">obj</span></a></span><span>
</span><span id="line-968"></span><span>
</span><span id="line-969"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#customizeRemoteNamespace"><span class="hs-identifier hs-type">customizeRemoteNamespace</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-970"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112519"><span class="annot"><a href="#local-6989586621688112519"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-971"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112519"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-972"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInfo"><span class="hs-identifier hs-type">RemoteSchemaInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-973"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-974"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112519"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-975"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112519"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Namespace.html#NamespacedField"><span class="hs-identifier hs-type">NamespacedField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteField"><span class="hs-identifier hs-type">RemoteField</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-976"></span><span id="customizeRemoteNamespace"><span class="annot"><span class="annottext">customizeRemoteNamespace :: RemoteSchemaInfo
-&gt; Name
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
</span><a href="Hasura.GraphQL.Schema.Remote.html#customizeRemoteNamespace"><span class="hs-identifier hs-var hs-var">customizeRemoteNamespace</span></a></span></span><span> </span><span id="local-6989586621688111675"><span class="annot"><span class="annottext">remoteSchemaInfo :: RemoteSchemaInfo
</span><a href="#local-6989586621688111675"><span class="hs-identifier hs-var">remoteSchemaInfo</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInfo"><span class="hs-identifier hs-type">RemoteSchemaInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688111673"><span id="local-6989586621688111674"><span class="annot"><span class="annottext">ValidatedRemoteSchemaDef
RemoteSchemaCustomizer
rsCustomizer :: RemoteSchemaCustomizer
rsDef :: ValidatedRemoteSchemaDef
rsCustomizer :: RemoteSchemaInfo -&gt; RemoteSchemaCustomizer
rsDef :: RemoteSchemaInfo -&gt; ValidatedRemoteSchemaDef
</span><a href="#local-6989586621688111673"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688111672"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111672"><span class="hs-identifier hs-var">rootTypeName</span></a></span></span><span> </span><span id="local-6989586621688111671"><span class="annot"><span class="annottext">[FieldParser n RemoteField]
</span><a href="#local-6989586621688111671"><span class="hs-identifier hs-var">fieldParsers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-977"></span><span>  </span><span class="annot"><span class="annottext">Maybe Name
-&gt; (Name -&gt; ParsedSelection RemoteField -&gt; RemoteField)
-&gt; MkTypename
-&gt; [FieldParser n RemoteField]
-&gt; [FieldParser n (NamespacedField RemoteField)]
forall (n :: * -&gt; *) a.
MonadParse n =&gt;
Maybe Name
-&gt; (Name -&gt; ParsedSelection a -&gt; a)
-&gt; MkTypename
-&gt; [FieldParser n a]
-&gt; [FieldParser n (NamespacedField a)]
</span><a href="Hasura.GraphQL.Namespace.html#customizeNamespace"><span class="hs-identifier hs-var">customizeNamespace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaCustomizer -&gt; Maybe Name
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rscNamespaceFieldName"><span class="hs-identifier hs-var hs-var">_rscNamespaceFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688111673"><span class="hs-identifier hs-var">rsCustomizer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name -&gt; ParsedSelection RemoteField -&gt; RemoteField
</span><a href="#local-6989586621688111668"><span class="hs-identifier hs-var">fromParsedSelection</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688111667"><span class="hs-identifier hs-var">mkNamespaceTypename</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n RemoteField]
</span><a href="#local-6989586621688111671"><span class="hs-identifier hs-var">fieldParsers</span></a></span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-979"></span><span>    </span><span id="local-6989586621688111668"><span class="annot"><span class="annottext">fromParsedSelection :: Name -&gt; ParsedSelection RemoteField -&gt; RemoteField
</span><a href="#local-6989586621688111668"><span class="hs-identifier hs-var hs-var">fromParsedSelection</span></a></span></span><span> </span><span id="local-6989586621688111666"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111666"><span class="hs-identifier hs-var">alias</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-980"></span><span>      </span><span class="annot"><span class="annottext">(Name -&gt; RemoteField) -&gt; ParsedSelection RemoteField -&gt; RemoteField
forall a. (Name -&gt; a) -&gt; ParsedSelection a -&gt; a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#handleTypename"><span class="hs-identifier hs-var">handleTypename</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; RemoteField)
 -&gt; ParsedSelection RemoteField -&gt; RemoteField)
-&gt; (RemoteField -&gt; Name -&gt; RemoteField)
-&gt; RemoteField
-&gt; ParsedSelection RemoteField
-&gt; RemoteField
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RemoteField -&gt; Name -&gt; RemoteField
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(RemoteField -&gt; ParsedSelection RemoteField -&gt; RemoteField)
-&gt; RemoteField -&gt; ParsedSelection RemoteField -&gt; RemoteField
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-981"></span><span>        </span><span class="hs-comment">-- In P.selectionSet we lose the resultCustomizer from __typename fields so we need to put it back</span><span>
</span><span id="line-982"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688111664"><span class="annot"><span class="annottext">resultCustomizer :: ResultCustomizer
</span><a href="#local-6989586621688111664"><span class="hs-identifier hs-var hs-var">resultCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#modifyFieldByName"><span class="hs-identifier hs-var">modifyFieldByName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111666"><span class="hs-identifier hs-var">alias</span></a></span><span> </span><span class="annot"><span class="annottext">(ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name Name -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#customizeTypeNameString"><span class="hs-identifier hs-var">customizeTypeNameString</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap Name Name -&gt; ResultCustomizer)
-&gt; HashMap Name Name -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer -&gt; HashMap Name Name
</span><a href="Hasura.RQL.Types.RemoteSchema.html#_rscCustomizeTypeName"><span class="hs-identifier hs-var hs-var">_rscCustomizeTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688111673"><span class="hs-identifier hs-var">rsCustomizer</span></a></span><span>
</span><span id="line-983"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
-&gt; ResultCustomizer
-&gt; Field NoFragments RemoteSchemaVariable
-&gt; RemoteField
forall var.
RemoteSchemaInfo
-&gt; ResultCustomizer -&gt; Field NoFragments var -&gt; RemoteFieldG var
</span><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteFieldG"><span class="hs-identifier hs-var">RemoteFieldG</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621688111675"><span class="hs-identifier hs-var">remoteSchemaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ResultCustomizer
</span><a href="#local-6989586621688111664"><span class="hs-identifier hs-var">resultCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">(Field NoFragments RemoteSchemaVariable -&gt; RemoteField)
-&gt; Field NoFragments RemoteSchemaVariable -&gt; RemoteField
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Name
-&gt; Name
-&gt; HashMap Name (Value RemoteSchemaVariable)
-&gt; [Directive RemoteSchemaVariable]
-&gt; SelectionSet NoFragments RemoteSchemaVariable
-&gt; Field NoFragments RemoteSchemaVariable
forall (frag :: * -&gt; *) var.
Maybe Name
-&gt; Name
-&gt; HashMap Name (Value var)
-&gt; [Directive var]
-&gt; SelectionSet frag var
-&gt; Field frag var
</span><span class="hs-identifier hs-var">G.Field</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111666"><span class="hs-identifier hs-var">alias</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;__typename&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">[Directive RemoteSchemaVariable]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">SelectionSet NoFragments RemoteSchemaVariable
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-984"></span><span>    </span><span id="local-6989586621688111667"><span class="annot"><span class="annottext">mkNamespaceTypename :: MkTypename
</span><a href="#local-6989586621688111667"><span class="hs-identifier hs-var hs-var">mkNamespaceTypename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; MkTypename
</span><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-var">MkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; Name) -&gt; MkTypename) -&gt; (Name -&gt; Name) -&gt; MkTypename
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name -&gt; Name) -&gt; Name -&gt; Name -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MkTypename -&gt; Name -&gt; Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#runMkTypename"><span class="hs-identifier hs-var hs-var">runMkTypename</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaCustomizer -&gt; MkTypename
</span><a href="Hasura.RQL.Types.RemoteSchema.html#remoteSchemaCustomizeTypeName"><span class="hs-identifier hs-var">remoteSchemaCustomizeTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688111673"><span class="hs-identifier hs-var">rsCustomizer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688111672"><span class="hs-identifier hs-var">rootTypeName</span></a></span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span class="hs-keyword">type</span><span> </span><span id="MonadBuildRemoteSchema"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-var">MonadBuildRemoteSchema</span></a></span></span><span> </span><span id="local-6989586621688111661"><span class="annot"><a href="#local-6989586621688111661"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688111660"><span class="annot"><a href="#local-6989586621688111660"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688111659"><span class="annot"><a href="#local-6989586621688111659"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#MonadSchema"><span class="hs-identifier hs-type">MonadSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111659"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111660"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111660"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621688111661"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111660"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Has</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111661"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Has</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html#CustomizeRemoteFieldName"><span class="hs-identifier hs-type">CustomizeRemoteFieldName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688111661"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>
</span><span id="line-988"></span><span id="local-6989586621688112537"><span id="local-6989586621688112538"><span id="local-6989586621688112539"><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#runMonadBuildRemoteSchema"><span class="hs-identifier hs-type">runMonadBuildRemoteSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621688112539"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Monad.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112538"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html#CustomizeRemoteFieldName"><span class="hs-identifier hs-type">CustomizeRemoteFieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688112539"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688112537"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688112539"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112537"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-989"></span><span id="runMonadBuildRemoteSchema"><span class="annot"><span class="annottext">runMonadBuildRemoteSchema :: SchemaT n (ReaderT (MkTypename, CustomizeRemoteFieldName) m) a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Remote.html#runMonadBuildRemoteSchema"><span class="hs-identifier hs-var hs-var">runMonadBuildRemoteSchema</span></a></span></span><span> </span><span id="local-6989586621688111658"><span class="annot"><span class="annottext">SchemaT n (ReaderT (MkTypename, CustomizeRemoteFieldName) m) a
</span><a href="#local-6989586621688111658"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ReaderT (MkTypename, CustomizeRemoteFieldName) m a
 -&gt; (MkTypename, CustomizeRemoteFieldName) -&gt; m a)
-&gt; (MkTypename, CustomizeRemoteFieldName)
-&gt; ReaderT (MkTypename, CustomizeRemoteFieldName) m a
-&gt; m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ReaderT (MkTypename, CustomizeRemoteFieldName) m a
-&gt; (MkTypename, CustomizeRemoteFieldName) -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var hs-var">runReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MkTypename
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CustomizeRemoteFieldName
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ReaderT (MkTypename, CustomizeRemoteFieldName) m a -&gt; m a)
-&gt; ReaderT (MkTypename, CustomizeRemoteFieldName) m a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaT n (ReaderT (MkTypename, CustomizeRemoteFieldName) m) a
-&gt; ReaderT (MkTypename, CustomizeRemoteFieldName) m a
forall (m :: * -&gt; *) (n :: * -&gt; *) a.
Monad m =&gt;
SchemaT n m a -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Monad.html#runSchemaT"><span class="hs-identifier hs-var">runSchemaT</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaT n (ReaderT (MkTypename, CustomizeRemoteFieldName) m) a
</span><a href="#local-6989586621688111658"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-990"></span><span>
</span><span id="line-991"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#withRemoteSchemaCustomization"><span class="hs-identifier hs-type">withRemoteSchemaCustomization</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-992"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688112532"><span class="annot"><a href="#local-6989586621688112532"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688112533"><span class="annot"><a href="#local-6989586621688112533"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688112529"><span class="annot"><a href="#local-6989586621688112529"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621688112533"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112532"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Has</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112533"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Has</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html#CustomizeRemoteFieldName"><span class="hs-identifier hs-type">CustomizeRemoteFieldName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112533"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-994"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaCustomizer"><span class="hs-identifier hs-type">RemoteSchemaCustomizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-995"></span><span>  </span><span class="annot"><a href="#local-6989586621688112532"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112529"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-996"></span><span>  </span><span class="annot"><a href="#local-6989586621688112532"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688112529"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-997"></span><span id="withRemoteSchemaCustomization"><span class="annot"><span class="annottext">withRemoteSchemaCustomization :: RemoteSchemaCustomizer -&gt; m a -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Remote.html#withRemoteSchemaCustomization"><span class="hs-identifier hs-var hs-var">withRemoteSchemaCustomization</span></a></span></span><span> </span><span id="local-6989586621688111655"><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688111655"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-998"></span><span>  </span><span class="annot"><span class="annottext">MkTypename -&gt; m a -&gt; m a
forall (m :: * -&gt; *) r a.
(MonadReader r m, Has MkTypename r) =&gt;
MkTypename -&gt; m a -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Schema.html#withTypenameCustomization"><span class="hs-identifier hs-var">withTypenameCustomization</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaCustomizer -&gt; MkTypename
</span><a href="Hasura.RQL.Types.RemoteSchema.html#remoteSchemaCustomizeTypeName"><span class="hs-identifier hs-var">remoteSchemaCustomizeTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688111655"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-999"></span><span>    </span><span class="annot"><span class="annottext">(m a -&gt; m a) -&gt; (m a -&gt; m a) -&gt; m a -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CustomizeRemoteFieldName -&gt; m a -&gt; m a
forall (m :: * -&gt; *) r a.
(MonadReader r m, Has CustomizeRemoteFieldName r) =&gt;
CustomizeRemoteFieldName -&gt; m a -&gt; m a
</span><a href="Hasura.RQL.Types.SourceCustomization.html#withRemoteFieldNameCustomization"><span class="hs-identifier hs-var">withRemoteFieldNameCustomization</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaCustomizer -&gt; CustomizeRemoteFieldName
</span><a href="Hasura.RQL.Types.RemoteSchema.html#remoteSchemaCustomizeFieldName"><span class="hs-identifier hs-var">remoteSchemaCustomizeFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621688111655"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span></pre></body></html>